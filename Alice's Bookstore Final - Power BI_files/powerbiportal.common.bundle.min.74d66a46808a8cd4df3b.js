'use strict'; 
"use strict";
this.parseTimeMarkers = this.parseTimeMarkers || {};
var marker = this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] || (this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] = {});
marker.startEval = window.jsCommon && window.jsCommon.performance && window.jsCommon.performance.now ? window.jsCommon.performance.now() : Date.now(); marker.isExternal = false;
if (window.perfTracking && window.perfTracking.startBundleEval) window.perfTracking.startBundleEval('powerbiportal.common.bundle.min.js');var powerbi,__extends=this&&this.__extends||(function(){var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}})(),__spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,a=0,n=t.length;a<n;a++)!i&&a in t||((i=i||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__decorate=this&&this.__decorate||function(e,t,r,i){var a,n=arguments.length,o=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(o=(n<3?a(o):3<n?a(t,r,o):a(t,r))||o);return 3<n&&o&&Object.defineProperty(t,r,o),o},__awaiter=this&&this.__awaiter||function(e,o,s,u){return new(s=s||Promise)(function(r,t){function i(e){try{n(u.next(e))}catch(e){t(e)}}function a(e){try{n(u.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,a)}n((u=u.apply(e,o||[])).next())})},__generator=this&&this.__generator||function(i,a){var n,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=a.call(i,u)}catch(e){t=[6,e],o=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};!(function(t){var r=t.telemetry||(t.telemetry={}),e=jsCommon.Utility,i=t.telemetryEventFactory,a=t.telemetry.EventFactories;e?e.generateGuid:Function.prototype,r.DataQueryDataEventName="PBI.Data.QueryData",r.DataQueryData=a[r.DataQueryDataEventName]=function(e){return i({name:r.DataQueryDataEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,optionalParameters:["requestId","synchronous","fromCache","resultCount","timeOrigin"],loggers:r.DataQueryDataLoggers})},r.DataQueryCancellationEventName="PBI.Data.QueryCancellation",r.DataQueryCancellation=a[r.DataQueryCancellationEventName]=function(e){return i({name:r.DataQueryCancellationEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.DataQueryCancellationLoggers,logRatio:1e-4})},r.DataClientCacheHitEventName="PBI.Data.ClientCacheHit",r.DataClientCacheHit=a[r.DataClientCacheHitEventName]=function(e){return i({name:r.DataClientCacheHitEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.DataClientCacheHitLoggers,logRatio:1e-4})},r.DataGetConceptualSchemaEventName="PBI.Data.GetConceptualSchema",r.DataGetConceptualSchema=a[r.DataGetConceptualSchemaEventName]=function(e){return i({name:r.DataGetConceptualSchemaEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,optionalParameters:["requestId"],loggers:r.DataGetConceptualSchemaLoggers})},r.DataClearConceptualSchemaCacheEventName="PBI.Data.ClearConceptualSchemaCache",r.DataClearConceptualSchemaCache=a[r.DataClearConceptualSchemaCacheEventName]=function(e){return i({name:r.DataClearConceptualSchemaCacheEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.DataClearConceptualSchemaCacheLoggers})},r.DataExecuteQueryEventName="PBI.Data.ExecuteQuery",r.DataExecuteQuery=a[r.DataExecuteQueryEventName]=function(e){return i({name:r.DataExecuteQueryEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,optionalParameters:["requestId"],loggers:r.DataExecuteQueryLoggers})},r.DataDsrToDataViewEventName="PBI.Data.DsrToDataView",r.DataDsrToDataView=a[r.DataDsrToDataViewEventName]=function(e){return i({name:r.DataDsrToDataViewEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,optionalParameters:["jsonparse","categorical","table","tree","matrix","single","script"],loggers:r.DataDsrToDataViewLoggers,logRatio:1e-4})},r.DataSampledDataViewKindAccessEventName="PBI.Data.SampledDataViewKindAccess",r.DataSampledDataViewKindAccess=a[r.DataSampledDataViewKindAccessEventName]=function(e){return i({name:r.DataSampledDataViewKindAccessEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.DataSampledDataViewKindAccessLoggers,logRatio:1e-4})},r.DataDataViewKindAccessEventName="PBI.Data.DataViewKindAccess",r.DataDataViewKindAccess=a[r.DataDataViewKindAccessEventName]=function(e){return i({name:r.DataDataViewKindAccessEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.DataDataViewKindAccessLoggers})}})(powerbi=powerbi||{}),(function(e){var u;function t(e,t,r,i,a,n,o,s){this.proxy=new u.ExecuteSemanticQueryProxy(e,t,a,r,n,o,i,s),this.featureSwitches=i,this.telemetryService=r}e=e.data||(e.data={}),u=e.dsr||(e.dsr={}),t.prototype.execute=function(e){return this.proxy.execute(e)},t.prototype.transform=function(e,t,r,i){return void 0===e?{dataView:{metadata:{columns:[]},error:{code:"UndefinedData"}}}:u.read(t,e,this.featureSwitches,this.telemetryService,r,i)},t.prototype.stopCommunication=function(){this.proxy.stopCommunication()},t.prototype.resumeCommunication=function(){this.proxy.resumeCommunication()},Object.defineProperty(t.prototype,"cache",{get:function(){return this.proxy.cache()},enumerable:!1,configurable:!0}),t.prototype.setLocalCacheResult=function(e,t){this.proxy.setLocalCacheResult(e,t)},t.prototype.setPreferredMaxConnections=function(e){this.proxy.setPreferredMaxConnections(e)},u.DsrDataReader=t})(powerbi=powerbi||{}),(function(e){var o=e.data||(e.data={}),r=(o.createDataReaderFactory=function(e,t){return new r(e,t)},t.prototype.getPlugin=function(e){return this.plugins[c(e)]},t.prototype.getExtension=function(e){return this.extensions[e]},t);function t(e,r){if(r)for(var t in r)!(function(t){_.find(e,(function(e){return e.name===r[t].extends})),"plugin extension type '".concat(t,"' extends a plugin '").concat(r[t].extends,"' which doesn't exist"),_.some(e,(function(e){return e.name===r[t].name})),"Cannot register plugin extension type '".concat(t,"'. A plugin with that name already exists.")})(t);this.plugins=e,this.extensions=r||{}}e=o.DataReaderUtils||(o.DataReaderUtils={});function s(e){return c(e.type)}function i(e){var t;if(e)return new a(t=[]).run(e),t}function u(e,t){for(var r=[],i=0,a=e;i<a.length;i++){var n=a[i];(_.isEmpty(t)||_.includes(t,n.name))&&(n=s(n),_.includes(r,n)||r.push(n))}return r}e.findTypes=function(e,t){return u(e,i(t))},e.findTypesFromExprs=function(e,t){if(_.isEmpty(e))return[];if(!_.isEmpty(t)){for(var r=[],i=0,a=t;i<a.length;i++){var n=a[i];n instanceof o.SQColumnRefExpr&&(n=n.getTargetEntity(),r.push(n.schema))}r=_.uniq(r)}return u(e,r)},e.readerType=s,e.findSchemas=i,e.uniqueReaderTypes=function(e){return _.chain(e).map(s).uniq().value()},n.prototype.run=function(e){for(var t=e.from(),r=0,i=t.keys();r<i.length;r++){var a=i[r];t.source(a).accept(this,void 0)}},n.prototype.visitEntity=function(e){this.visitEntityOrPod(e)},n.prototype.visitPod=function(e){this.visitEntityOrPod(e)},n.prototype.visitSubquery=function(e){this.run(e.subquery)},n.prototype.visitExpr=function(e){},n.prototype.visitEntityOrPod=function(e){var e=e.schema,t=this.schemas;_.includes(t,e)||t.push(e)};var a=n;function n(e){this.schemas=e}function c(e){return e||"dsr"}})(powerbi=powerbi||{}),(function(e){var u=e.data||(e.data={}),n=jsCommon.ArrayExtensions,r=(u.createDataReaderProvider=function(e,t){return new r(e,t)},t.prototype.reader=function(e){var t=this;return this.findSinglePropertyDefinition(n.ensureArray(e),(function(e){return e.reader(t.hostServices)}),_.noop,this.readers)},t.prototype.readerType=function(e){var t=this,e=this.resolvePluginProperty(n.ensureArray(e),(function(e){return e.reader(t.hostServices)}),_.noop,this.readers);return e&&e.type},t.prototype.queryGenerator=function(e){return this.findSinglePropertyDefinition(n.ensureArray(e),(function(e){return e.queryGenerator&&e.queryGenerator()}),_.noop,this.queryGen)},t.prototype.queryExtensionLookup=function(e){var t=n.ensureArray(e),e=_.chain(t).map((function(e){return u.DataReaderUtils.readerType(e)})).uniq().value(),r=this.findSingleBasePropertyDefinition(e,(function(e){return e.queryExtensionProvider&&o(e.name,t,e.queryExtensionProvider)})),i=this.findSingleExtensionPropertyDefinition(e,(function(e){return e.queryExtensionProvider&&o(e.name,t,e.queryExtensionProvider)})),a=r;if(i||a)return i?function(e,t){return i(e,t,a)}:a},t.prototype.schemaReader=function(e){var t=this;return this.findSinglePropertyDefinition([e],(function(e){return e.schemaReader&&e.schemaReader(t.hostServices)}),(function(e){return e.schemaReader&&e.schemaReader(t.hostServices)}),this.schemaReaders)},t.prototype.getCacheKey=function(e){e=n.ensureArray(e);return e.length<2?e[0]:"["+e.join(",")+"]"},t.prototype.findSinglePropertyDefinition=function(e,t,r,i){var a=this.getCacheKey(e),n=i[a];return n||((n=this.resolvePluginProperty(e,t,r,i))?i[a]=n.property:void 0)},t.prototype.findSingleExtensionPropertyDefinition=function(e,t){for(var r,i=0,a=e;i<a.length;i++){var n=a[i],o=this.factory.getPlugin(n);if(o){if(s&&s!==o.name)return;s=o.name}else{o=this.factory.getExtension(n);if(!o)return;if(s&&s!==o.extends)return;var s=o.extends,n=t(o);if(n){if(r&&n!==r)return;r=n}}}return r},t.prototype.findSingleBasePropertyDefinition=function(e,t){for(var r,i=0,a=e;i<a.length;i++){var n=a[i],n=this.factory.getPlugin(n);if(n){if(o&&o!==n.name)return;var o=n.name,n=t(n);if(n){if(r&&n!==r)return;r=n}}}return r},t.prototype.resolvePluginProperty=function(e,t,r,i){for(var a,n=0,o=e;n<o.length;n++){var s=o[n],s=this.resolveProperty(s,t,r,i);if(!s||a&&s.property!==a.property)return;a=s}return a},t.prototype.resolveProperty=function(e,t,r,i){var a,n,o;return i&&(n=i[a=this.getCacheKey(e)])?{type:e,property:n}:(o=this.factory.getPlugin(e))?(n=t(o))?(i&&(i[a]=n),{type:e,property:n}):void 0:(o=this.factory.getExtension(e))?(n=r(o))?(i&&(i[a]=n),{type:e,property:n}):this.resolveProperty(o.extends,t,r,i):void 0},t);function t(e,t){this.factory=e,this.hostServices=t,this.readers={},this.queryGen={},this.schemaReaders={}}function o(e,t,r){for(var i=[],a=0,n=t;a<n.length;a++){var o=n[a],s=u.DataReaderUtils.readerType(o);s===e&&i.push(o[s])}return r(i)}})(powerbi=powerbi||{}),(function(e){function r(e){e.dataReductionAlgorithm||(function(e){e=e.select;return e&&_.some(e,(function(e){return!!e.dataReductionAlgorithm}))})(e)||(e.dataReductionAlgorithm=i())}function i(){return{top:{}}}((e=e.data||(e.data={})).Impl||(e.Impl={})).applyDataReductionDefaults=function(e){var t;e.categorical&&!(t=e.categorical).dataReductionAlgorithm&&(t.categories&&r(t.categories),(t=t.values)&&t.group)&&((t=t).group,t.group.dataReductionAlgorithm||(t.group.dataReductionAlgorithm=i())),e.table&&(t=e.table).rows&&r(t.rows),e.matrix&&((e=e.matrix).rows&&r(e.rows),e.columns)&&r(e.columns)}})(powerbi=powerbi||{}),(function(e){var a;(a=e.data||(e.data={})).applyDataReductionDefaults=function(e){for(var t=e.length,r=0;r<t;r++){var i=e[r];a.Impl.applyDataReductionDefaults(i)}}})(powerbi=powerbi||{}),(function(m){var f=m.data||(m.data={}),c=jsCommon.ArrayExtensions,a=(f.compileDataView=function(e){var t,r,i=e.mappings;return i?(t=e.roles||[],e=new a(e.queryDefn,e.queryProjections,e.schema,e.objectDescriptors,e.objectDefinitions,e.roles||[],e.featureSwitches,e.transformPluginService),r=new f.DataViewMappingCompiler(e,t),_.map(i,(function(e){return r.compileMapping(e)}))):[]},e.prototype.compileRole=function(e,t){var r,i,a=this,n=this.queryDefn.select(),o=this.queryProjections[e],s=c.findItemWithName(this.roles,e),o=(o&&0<o.all().length&&(r=!1,s&&(r=f.ScalarKeyUtils.isScalarKeySupportedForRole(this.schema,this.queryDefn,this.queryProjections,s.name)),i=this.getScalarKeyRoleItemQueryRef(o),(u=_.map(o.all(),(function(e){var t=e.queryRef===i;return a.createDataViewRoleItem(n.withName(e.queryRef),s,r,t,e.hidden)}))).filter((function(e){return e.scalarKeyInfo&&e.scalarKeyInfo.hasScalarKey})).length),{role:e,items:u}),u=this.queryProjections[e];return u&&(u.showAll&&(o.showAll=!0),u.activeProjectionRefs)&&(o.activeItems=u.activeProjectionRefs),t&&(o.aggregates=_.cloneDeep(t)),o},e.prototype.getScalarKeyRoleItemQueryRef=function(e){_.isEmpty(e.all());var t=e.activeProjectionRefs;return _.isEmpty(t)?e.all()[0].queryRef:_.last(t)},e.prototype.createDataViewRoleItem=function(e,t,r,i,a){var n={queryName:e.name},o=this.tryGetExprType(e.expr);if(o&&(n.type=o),t&&null!=t.joinPredicate)n.joinPredicate=t.joinPredicate;else if(f.SQExpr.isTransformOutputRoleRef(e.expr)){o=this.queryDefn.transforms();if(!_.isEmpty(o))for(var s=!1,u=0,c=o;u<c.length;u++){var l=c[u],l=null==(l=this.transformPluginService.getTransformPlugin(l.algorithm))?void 0:l.outputRoles;if(!_.isEmpty(l))for(var p=0,d=l;p<d.length;p++){var h=d[p];if(h.algorithmRole===e.expr.role&&null!=h.joinPredicateBehavior){n.joinPredicate=h.joinPredicateBehavior,s=!0;break}}if(s)break}}return n.scalarKeyInfo={hasScalarKey:r&&i},n.hidden=a,n},e.prototype.tryGetExprType=function(e){e=e.getMetadata(this.schema,this.exprEvaluationContext);if(e)return e.type},e.prototype.compileMetadata=function(){for(var i={columns:[]},a=this.queryDefn.orderBy(),n=this,e=0,t=this.queryDefn.select();e<t.length;e++)!(function(t){var e=_.find(a,(function(e){return f.SQExpr.equals(e.expr,t.expr)})),r=f.SQExprUtils.getParameterMetadata(t.expr,n.schema);i.columns.push({displayName:void 0,queryName:t.name,type:n.tryGetExprType(t.expr),sort:e&&e.direction,parameter:r})})(t[e]);var r=this.objectDescriptors,o=this.objectDefinitions;if(o&&r){var s=f.DataViewObjectEvaluationUtils.groupObjectsBySelector(o),u=f.createEmptyEvalContext(),c=m.visuals.visualStyles.create();if(_.isEmpty(s.metadataOnce)||(d=this.evaluateMetadataOnceObjects(s.metadataOnce,u,c))&&(i.objects=d),!_.isEmpty(s.metadata))for(var l=0,p=i.columns;l<p.length;l++){var d,h=p[l];(d=this.evaluateMetadataObjects(h,s.metadata,u,c))&&(h.objects=d)}}return i},e.prototype.evaluateMetadataOnceObjects=function(e,t,r){for(var i,a=new f.DataViewObjectEvaluator(this.featureSwitches,r),n=0,o=e;n<o.length;n++){var s=o[n],u=s.selector&&s.selector.id,s=f.DataViewObjectEvaluationUtils.evaluateDataViewObjects(a,t,this.objectDescriptors,s.objects);s&&m.DataViewObjects.mergeObjects(i=i||{},s,u)}return i},e.prototype.evaluateMetadataObjects=function(e,t,r,i){for(var a,n=new f.DataViewObjectEvaluator(this.featureSwitches,i),o=0,s=t;o<s.length;o++){var u=s[o],c=u.selector;c.metadata&&c.metadata===e.queryName&&(u=f.DataViewObjectEvaluationUtils.evaluateDataViewObjects(n,r,this.objectDescriptors,u.objects))&&m.DataViewObjects.mergeObjects(a=a||{},u,c.id)}return a},e.prototype.compileScriptDefinition=function(e,t){t=m.ScriptResultUtil.getScriptInputFromScriptDefinition(this.queryProjections,this.queryDefn.select(),this.schema,e,t.objects);return{source:e.source,provider:e.provider,scriptInput:t,scriptSourceDefault:e.scriptSourceDefault,scriptProviderDefault:e.scriptProviderDefault,scriptOutputType:e.scriptOutputType}},e);function e(e,t,r,i,a,n,o,s){this.featureSwitches=o,this.transformPluginService=s,this.queryDefn=e,this.queryProjections=t,this.schema=r,this.objectDescriptors=i,this.objectDefinitions=a,this.roles=n,this.exprEvaluationContext=f.SQExprUtils.buildExprEvaluationContext(this.queryDefn.from())}})(powerbi=powerbi||{}),(function(e){var u,c;function n(e,t,r,i){var a=e&&e[t]&&e[t][r];if(a){for(var n=a.currentId;a&&c.lt(i,a.version);)n=a.previousId,a=a.previous;return n}}function o(e,t,r,i,a,n,o,s){return c.max(l(e[u.ObjectPropertyVersionWildcard],a,n,t,r,o,s),l(e[i],a,n,t,r,o,s))}function l(e,t,r,i,a,n,o){e=e&&e[t];return e?c.max(s(e[u.ObjectPropertyVersionWildcard],i,a,n,o),s(e[r],i,a,n,o)):c.ZeroStr}function s(e,t,r,i,a){if(e)for(var n=e.length-1;0<=n;n--){var o=e[n];if(n&&c.lt(o.version,e[n-1].version),!c.lt(i,o.version))break;var s=o.property.matchByContents;if((!s||s(t,r))&&(!o.property.isExprBound||a()))return o.version}return c.ZeroStr}u=e.data||(e.data={}),c=jsCommon.Version,u.ObjectPropertyVersionWildcard="*",(e=u.DataViewObjectVersioning||(u.DataViewObjectVersioning={})).getThemePropertyId=function(e,t,r,i,a){return n(a[e],t,r,i)||n(a[u.ObjectPropertyVersionWildcard],t,r,i)||{objectName:t,propertyName:r}},e.shouldApplyDefnToTheme=function(e,t,r,i,a,n){return o(e,t,null,r,i,a,n,(function(){return!1}))===c.ZeroStr},e.getVersionForDefinition=o,e.getFirstVersionForIdentifier=function(e,t,r){if(e=e[r]){r=e[t.objectName];if(r)return e=r[t.propertyName],_.reduce(e,(function(e,t){return t.property.matchByContents||t.property.isExprBound?e:c.max(e,t.version)}),c.ZeroStr)}return c.ZeroStr}})(powerbi=powerbi||{}),(function(e){var D,I;function w(e,t){t=e.indexOf(t);0<=t&&e.splice(t,1)}function M(e,t){var r=t.categories;if(r)for(var i=0,a=r;i<a.length;i++){var n=a[i];n.values.splice(0),n.identity.splice(0)}var o=t.values;if(o){t=o.grouped();if(!_.isEmpty(t)){for(var s=t[0],u=e.columns,c=0,l=s.values;c<l.length;c++)!(function(e){var t,r=e.source;r.groupName&&((t=_.find(u,(function(e){return!e.groupName&&e.index===r.index&&e.isMeasure===r.isMeasure})))?(e.source=t,w(u,r)):delete r.groupName)})(l[c]);var p=[{values:s.values,objects:s.objects}];if(o.grouped=function(){return p},2<=t.length){e=s.values.length;if(0<e){for(var s=e*(t.length-1),d=e,h=e+s;d<h;d++){var m=o[d].source;w(u,m)}o.splice(e,s)}}}for(var f=0,y=o;f<y.length;f++){var g=y[f];g.values.splice(0),delete g.identity}}r&&_.every(r,(function(e){return _.isEmpty(e.values)&&_.isEmpty(e.identity)})),o&&_.every(o.grouped(),(function(e){return!e.name&&!e.identity})),o&&_.every(o,(function(e){return _.isEmpty(e.values)}))}function b(e,t){if(I.isSortedNumeric(t,!0),_.uniq(t).length,t.length,!_.isEmpty(t))if(0<=_.last(t)&&(_.head(t),e.length),e.length===t.length)e.splice(0);else{for(var r,i=0,a=0,n=t;a<n.length;a++){var o=n[a];void 0===r||r===o+1?(r=o,i++):(e.splice(r,i),r=o,i=1)}e.splice(r,i)}}D=e.data||(e.data={}),I=jsCommon.ArrayExtensions,(D.QueryDataViewCategorical||(D.QueryDataViewCategorical={})).removeGroupInstances=function(e,t,r,i){if(i){var a=e,n=t,o=n.values&&n.values.grouped();if(!_.isEmpty(o)){o=(function(e,t,r){for(var i=[],a=t.length-1;0<=a;a--)r(t[a],e)&&i.push(a);return i})(n.values&&n.values.source,o,i);i=a,a=n,n=o;if(a&&a.values&&_.isEmpty(a.values.grouped()),I.isSortedNumeric(n,!0),_.uniq(n).length,n.length,!_.isEmpty(n)){var s=a.values,u=s.grouped();if(u.length===n.length)M(i,a);else{var c=u[0].values.length;if(_.every(u,(function(e){return e.values.length===c})),0<c)for(var l=i.columns,p=0,d=n;p<d.length;p++){var h=d[p]*c;s.length;for(var m=h,f=h+c;m<f;m++){var y=s[m].source;w(l,y)}s.splice(h,c)}b(u,n),s.grouped=function(){return u}}}}}if(r){o=e,a=t,i=r,n=a.categories;if(!_.isEmpty(n)){n=(function(e,t){for(var r=e[0].values.length,i=(_.every(e,(function(e){return e.values.length===r})),[]),a=r-1;0<=a;a--)t(a,e)&&i.push(a);return i})(n,i);var i=o,o=a,g=n;if(I.isSortedNumeric(g,!0),_.uniq(g).length,g.length,!_.isEmpty(g))if(D.DataViewCategoricalUtils.getRowCount(o)===g.length)M(i,o);else{D.DataViewCategoricalUtils.getRowCount(o);i=o.categories;if(!_.isEmpty(i))for(var v=0,S=i;v<S.length;v++){var x=S[v];b(x.values,g),b(x.identity,g)}i=o.values;if(!_.isEmpty(i))for(var C=0,E=i;C<E.length;C++)b(E[C].values,g)}}}}})(powerbi=powerbi||{}),(function(e){var i,a=e.data||(e.data={}),n=e.data.QueryDataViewCategorical,o=jsCommon.StringExtensions;function s(e){e=e.Condition;if(e.Contains)return e.Contains.SelectIndex;JSON.stringify(e)}function u(e,t){if(_.isEmpty(e)||_.isEmpty(t))return[];for(var r={},i=0,a=t;i<a.length;i++){var n=a[i];r[n.index]=!0}return _.filter(e,(function(e){e=s(e);return!!r[e]}))}function c(e,t){var r=!1,e=e.Condition;return e.Contains?(e.Contains.LiteralValue,l(e.Contains.LiteralValue),r=!_.isString(t)||(t=l(t),!o.contains(t,e.Contains.LiteralValue))):JSON.stringify(e),r}function l(e){return e&&o.normalizeCase(e)}(e=i=a.ClientSideFilter||(a.ClientSideFilter={})).isMoreRestrictiveFilter=function(e,t){if(a.SQFilter.targetsEqual(e,t)){e=e.condition,t=t.condition;if(e instanceof a.SQContainsExpr&&t instanceof a.SQContainsExpr){e=p.getInfoIfFilteringByStringConstant(e),t=p.getInfoIfFilteringByStringConstant(t);if(e&&t&&a.SQExpr.equals(e.otherSide,t.otherSide))return o.contains(l(e.constantValue),l(t.constantValue))}}return!1},e.tryConvertToClientSideFilters=function(e,t){var r=_.some(t,(function(e){return!!e.target}));if(!r){for(var i=new d(e),a=0,n=t;a<n.length;a++)n[a].condition.accept(i);return i.getClientSideFiltersIfAllSupported()}},e.applyClientSideFilters=function(e,t){var r,i;if(!_.isEmpty(t)&&!_.isEmpty(e.metadata.columns))return _.every(t,(function(t){return _.some(e.metadata.columns,(function(e){return!e.isMeasure&&e.index===s(t)}))})),(r=e.categorical)&&(i=(function(e,t){if(debug.assertAnyValue(e,"seriesMetadataColumn"),debug.assertValue(t,"clientSideFilters"),e){var a=u(t,[e]);if(!_.isEmpty(a))return function(e){if(!!e.identity)for(var t=e.name,r=0,i=a;r<i.length;r++)if(c(i[r],t))return!0;return!1}}})(r.values&&r.values.source,t),t=(function(e,t){var n=u(t,_.map(e,(function(e){return e.source})));if(!_.isEmpty(n))return function(r,e){for(var t=0,i=n;t<i.length;t++){var a=(function(t){if(_.every(e,(function(e){return c(t,e.values[r])})))return{value:!0}})(i[t]);if("object"==typeof a)return a.value}return!1}})(r.categories,t),n.removeGroupInstances(e.metadata,r,t,i)),e},e.normalizeString=l,r=a.DefaultSQExprVisitor,__extends(t,r),t.prototype.visitContains=function(e){var t,r;this.hasUnsupportedFilter()||(t=!1,(e=p.getInfoIfFilteringByStringConstant(e))&&(r=e.constantValue,0<=(e=a.SQExprUtils.indexOfNamedExpr(this.selects,e.otherSide)))&&r&&(e={Condition:{Contains:{SelectIndex:e,LiteralValue:i.normalizeString(r)}}},this.clientSideFilters.push(e),t=!0),t)||this.setUnsupportedFilter()},t.prototype.visitAnd=function(e){this.hasUnsupportedFilter()||(e.left.accept(this),e.right.accept(this))},t.prototype.visitDefault=function(e){this.setUnsupportedFilter()},t.prototype.getClientSideFiltersIfAllSupported=function(){if(!this.hasUnsupportedFilter())return this.clientSideFilters},t.prototype.hasUnsupportedFilter=function(){return void 0===this.clientSideFilters},t.prototype.setUnsupportedFilter=function(){this.clientSideFilters=void 0};var r,p,d=t;function t(e){var t=r.call(this)||this;return t.clientSideFilters=[],t.selects=e,t}(p||(p={})).getInfoIfFilteringByStringConstant=function(e){var t;if(e)return(t=a.SQExprInfo.getValueIfStringConstant(e.left))?{constantValue:t,otherSide:e.right}:{constantValue:t=a.SQExprInfo.getValueIfStringConstant(e.right),otherSide:e.left}}})(powerbi=powerbi||{}),(function(B){var q,o,G,s,k,e,r,n;function t(e,t,r,i,a,n,o){this.warningType=e,this.propertyId=t,this.valueExpr=r,this.selector=i,this.objectDiplayName=a,this.propertyDisplayName=n,this.expectedValueType=o}function i(f,y,e,g,v,S,t,r){if(!_.isEmpty(e)){for(var x=f.select(),C=[],E=[],D=[],I=[],i=0,a=e;i<a.length;i++){var n=a[i];n.objects&&n.descriptors&&q.DataViewObjectDefinitions.visitPropertyDefinitions(n.objects,n.descriptors,z)}for(var o=0,s=D;o<s.length;o++)for(var u=s[o],c=0,l=I;c<l.length;c++)if(q.Selector.equals(u.selector,l[c])){O(E,u,x,g);break}for(var p,d,h,m,w,M,b,V=[],R=[],P=0,T=E;P<T.length;P++){var A=T[P],N=A.selector,F=(d=f,F=t,h=r,Q=b=Q=M=w=m=void 0,w=(p=A).aggregates,M=p.selector,Q=p.context,b=p.expr,Q=j(p.expr,Q,F),w||M&&!_.isEmpty(M.data)?(F=d.selectNameOf(Q))?{queryName:F,queryDefn:d,objectDefinitionRewrite:void 0}:{queryName:(d=d.addSelect(Q)).selectNameOf(Q),queryDefn:d,objectDefinitionRewrite:void 0}:(d=d.addSelect(Q),w=_.last(d.select()),q.SQExpr.equals(w.expr,Q),h&&(M=new q.InlineSubqueryRewriter(d),d=M.rewrite(),M.didRewrite)&&(m={from:b,to:q.SQExprBuilder.selectRef(w.name),selector:p.selector}),{queryName:w.name,queryDefn:d,objectDefinitionRewrite:m})),Q=(f=F.queryDefn,F.objectDefinitionRewrite&&R.push(F.objectDefinitionRewrite),{queryName:F.queryName,selector:N});_.isEmpty(A.targetsQueryName)||(Q.relatedProjectionsQueryName=A.targetsQueryName),A.aggregates&&(Q.aggregates=A.aggregates),A.relatedObjects&&(Q.relatedObjects=A.relatedObjects),N&&!_.isEmpty(N.data)&&(Q.joinPredicate=0),V.push(Q)}return _.isEmpty(V)&&_.isEmpty(C)?void 0:{queryDefn:f,warnings:C,additionalProjections:V,objectDefinitionRewrites:R}}function z(e,t,r,i,a){var n=a&&a.properties[t],o=e[t],s=n.type,u=null==r?r:q.Selector.clone(r);if(n.rule){if(n.type.fillRule&&B.StructuralObjectDefinition.isFillRuleDefinition(o),!K(n.rule.conditions,v,S))return;var c=(function(e,t,r){e=e.inputRole;if(e){var i=r[e];if(!_.isEmpty(i))return _.chain(t.select()).filter((function(e){return _.includes(i,e.name)})).map((function(e){return e.expr})).value()}})(n.rule,f,g);if(_.isEmpty(c))return;_.size(c),r={data:_.map(c,(function(e){return q.createDataViewScopeIdentity(e)}))},c=q.DataViewObjectDefinitions.getDataBoundExprs(o,n.type,r,x,c[0])}else s&&s.dataBars?r&&r.metadata&&x.withName(r.metadata)&&(_.isEmpty(r.data)&&((r=_.cloneDeep(r)).data=[q.DataViewWildcard.create()]),c=q.DataViewObjectDefinitions.getDataBoundExprs(o,n.type,r,x,x.withName(r.metadata).expr)):(o=q.DataViewObjectDefinitions.getDataBoundExprsAndValueRef(e[t],s,r,x),n.ignoreUnreferenced?(_.isEmpty(o.references),D.push.apply(D,o.expressions)):(c=o.expressions,I.push.apply(I,o.references.map((function(e){return e.selector})))));if(!_.isEmpty(c)&&(!r||(function(e,t){var r=e.metadata;if(!r)return 1;for(var i=0,a=t;i<a.length;i++)if(a[i].name===r)return 1})(r,x))){e=L(null==r?void 0:r.data,x,g);if(void 0!==e)for(var l=0,p=c;l<p.length;l++){var d=p[l];if(d.expr){if(y){var h=G.buildExprEvaluationContext(f.from()),h=d.expr.getMetadata(y,h);if(null==h||!B.ValueType.isCompatibleFromAny(s,h.type)){var m=h?1:2,h=h?B.ValueType.fromDescriptor(s):null,m=new k(m,{objectName:i,propertyName:t},d.expr,r,a.displayName,n.displayName,h);C.push(m);continue}}d.relatedObjects=((h={})[i]=((m={})[t]=[u],m),h),O(E,d,x,g)}}}}}function O(e,r,i,a){var t=_.find(e,(function(e){return e=e,t=r,!!q.SQExpr.equals(e.expr,t.expr)&&(e=L(null==(e=e.selector)?void 0:e.data,i,a),t=L(null==(t=t.selector)?void 0:t.data,i,a),_.isEmpty(_.xor(e,t)));var t}));if(t){var n=r.targetsQueryName,o=(_.isEmpty(n)||(o=t.targetsQueryName,(o=_.isEmpty(o)?t.targetsQueryName=[]:o).push.apply(o,n)),r.aggregates);if(null!=o){var s=t.aggregates;if(s){if(o.min&&(s.min=!0),o.max&&(s.max=!0),o.average&&(s.average=!0),o.median&&(s.median=!0),o.percentiles)if(s.percentiles)for(var u=0,c=o.percentiles;u<c.length;u++)!(function(t){_.find(s.percentiles,(function(e){return _.isEqual(t,e)}))||s.percentiles.push(t)})(c[u]);else s.percentiles=o.percentiles}else t.aggregates=o}var l=r.relatedObjects;if(null!=l){n=t.relatedObjects;if(n){var p,d=void 0,h=void 0,m=void 0;for(d in l){if(m)break;for(h in l[d]){p=_.first(l[d][h]),m=!0;break}}null!=d&&null!=h&&(n=(o=n[d]=n[d]||{})[h]=o[h]||[],_.some(n,(function(e){return q.Selector.equals(e,p)}))||n.push(p))}else t.relatedObjects=l}}else e.push(r)}function j(e,t,r){if(!q.SQExpr.isAggregation(e)||!q.SQExpr.isColumn(e.arg)||!q.SQExpr.isSubqueryRef(e.arg.source))return e;var i=e.arg.source.query;if(!i)return e;t=t&&t.filterContext;if(_.isEmpty(t)&&!r)return e;r&&(a=r.conditions(),_.some(a,(function(e){return 1===q.FilterKindDetector.runDetector(e)})));var a=(function e(t,r){var i=function(e){var t,r=!1,i=e.from().sources();for(t in i){var a=i[t];if(B.data.isSQFromEntitySource(a)){r=!0;break}}return r};if(i(t))return u(t,r);var a=t.from().sources();for(var n in a){var o=a[n];if(B.data.isSQFromSubquerySource(o))return o=e(o.subquery,r),a[n]=new B.data.SQFromSubquerySource(o),t.from(new B.data.SQFrom(a))}})(i,_.isEmpty(t)?[r]:c(_.map(t,(function(e){return e.filter})),r,!0,!1));return e.accept(new n(a))}function u(e,t){var r;return q.SemanticQuery.willFiltersAffectQuery(e)?(r=q.SemanticFilter.unmerge(q.SemanticFilter.fromSQFromAndSQFilters(e.from(),e.where())),r=_.isEmpty(r)?t:c(r,q.SemanticFilter.merge(t),!1,!0),t=q.SemanticFilter.merge(r),e.where(t.where(),t.from())):e}function c(e,t,r,i){for(var a=[],n=0,o=(function(e,t){var r=[];t&&r.push({filters:[t],kind:void 0});t=(function(e){return _.groupBy(e,(function(e){e=e.conditions();return _.size(e),q.FilterKindDetector.runDetector(e[0])}))})(e);t[0]&&r.push({filters:t[0],kind:0});t[3]&&r.push({filters:t[3],kind:3});t[2]&&r.push({filters:t[2],kind:2});t[1]&&r.push({filters:t[1],kind:1});return r})(e,t);n<o.length;n++){var s=o[n],u=s.filters;3!==s.kind&&1!==s.kind?a.push.apply(a,u):(1===s.kind&&r&&(u=[(function(e){for(var t,r=q.SemanticQuery.create(),i=0,a=e;i<a.length;i++){var n=a[i],n=(r=r.addSemanticFilter(n),n.where()[0].target);_.isEmpty(t)||jsCommon.ArrayExtensions.hasSameValues(n,t,(function(e,t){return q.SQExpr.equals(e,t)})),t=t||n||[]}return _.isEmpty(t),_.forEach(t,(function(e){r=r.addSelect(e)})),q.SemanticFilter.fromMeasuresQuery(r,t)})(s.filters)]),i?u=_.map(u,(function(e){return q.SubqueryRewriter.makeSubqueriesLowerPrecedenceThanSpecificFilters(e,[t])})):_.isEmpty(a)||(u=_.map(u,(function(e){return q.SubqueryRewriter.makeSubqueriesLowerPrecedenceThanSpecificFilters(e,a)}))),a.push.apply(a,u))}return a}function a(e){var t=r.call(this)||this;return t.query=e,t}function K(e,t,r){if(!e)return!0;for(var i=0,a=e;i<a.length;i++){var n=a[i],n=o.checkForConditionErrors(t,n,r);if(_.isEmpty(n))return!0}return!1}function L(e,t,r){if(_.isEmpty(e))return null;for(var i=[],a=0,n=e;a<n.length;a++){var o,s=n[a];q.Selector.isRoleWildcard(s)?(o=h(r,s.roles,t),i.push.apply(i,o||[])):q.Selector.isWildcard(s)?(o=h(r,Object.keys(r),t),i.push.apply(i,o||[])):q.Selector.isScopeWildcard(s)||q.Selector.isScopeTotal(s)?i.push.apply(i,s.exprs||[]):q.Selector.isScopeIdentity(s)&&i.push(s.expr)}if(0!==i.length){for(var u=[],c=0,l=t;c<l.length;c++){var p=l[c],d=G.indexOfExpr(i,p.expr);if(!(d<0)&&(i.splice(d,1),u.push(p.name),0===i.length))break}if(!(0<i.length||0===u.length))return u}}function h(e,t,r){for(var i=[],a=0,n=t;a<n.length;a++){var o=n[a];i.push.apply(i,e[o]||[])}t=_.filter(r,(function(e){return _.includes(i,e.name)}));return _.map(t,(function(e){return e.expr}))}q=B.data||(B.data={}),o=B.DataViewAnalysis,G=B.data.SQExprUtils,s=jsCommon.StringExtensions,t.prototype.columnNameFromIndex=function(e){},Object.defineProperty(t.prototype,"code",{get:function(){switch(this.warningType){case 1:return"DataBoundObjectQueryExtensionWarningInvalidType";case 2:return"DataBoundObjectQueryExtensionWarningMissingReference";case 0:return;default:this.warningType}},enumerable:!1,configurable:!0}),t.prototype.getDetails=function(e,t){var r,i,a,n;if(t)return r=[],i=e.get("NamePattern_Colon"),n=(a=1===this.warningType)?"DataBoundExprWarning_InvalidType_Message":"DataBoundExprWarning_MissingReference_Message",r.push(s.format(e.get(a?"DataBoundExprWarning_InvalidType_Title":"DataBoundExprWarning_MissingReference_Title"),q.getDisplayName(this.propertyDisplayName,e))),r.push(s.format(i,e.get("VisualWarning_PropertyEvaluation_Tooltip_Section"),q.getDisplayName(this.objectDiplayName,e))),t=t(this.valueExpr),r.push(s.format(i,e.get("Field_Source"),t)),a&&this.expectedValueType&&r.push(s.format(i,e.get("DataBoundExprWarning_ExpectedDataType"),q.DataBoundExprWarning.getPrimitiveValueType(this.expectedValueType,e))),r.push(e.get(n)),{message:r.join("\n"),displayableErrorInfo:[]}},k=t,q.DataBoundObjectQueryExtensionWarning=k,(e=q.DataBoundObjectQueryExtender||(q.DataBoundObjectQueryExtender={})).extend=i,e.needsToExtend=function(e,t){return!!i(e,null,t,{},{},{},void 0,void 0)},e.getExpressionToAdd=j,r=q.SQExprRewriter,__extends(a,r),a.prototype.visitSubqueryRef=function(e){return q.SQExprBuilder.subqueryRef(this.query,e.getAnnotations())},n=a,e.matchesAnyCondition=K,e.getScopeRefs=L})(powerbi=powerbi||{}),(function(e){var C,t,i,E,n,o,a,s,D,u,v,c,l,I;function r(){}function p(){}function d(e){this.from=e}function h(e,t){this.standalone=e,this.serializeAnnotations=t}function m(){}function f(e,t){return (function(e,t){if(e.Column){t=f(e.Column.Expression,t);if(t)return C.SQExprBuilder.columnRef(t,e.Column.Property,e.Annotations)}})(e,t)||(function(e,t){if(e.Measure){t=f(e.Measure.Expression,t);if(t)return C.SQExprBuilder.measureRef(t,e.Measure.Property,e.Annotations)}})(e,t)||(function(e){{var t;if(e.NativeMeasure)return t=void 0,e.NativeMeasure.ExpressionContentCache&&(t={unrecognizedIdentifiers:e.NativeMeasure.ExpressionContentCache.UnrecognizedIdentifiers,dependencies:g(e.NativeMeasure.ExpressionContentCache.Dependencies)}),"dax"!==e.NativeMeasure.Language&&e.NativeMeasure.Language,C.SQExprBuilder.nativeMeasure(e.NativeMeasure.Language,e.NativeMeasure.Expression,e.NativeMeasure.DataType,e.NativeMeasure.ProposedName,t,e.NativeMeasure.Format,e.Annotations)}})(e)||(function(e,t){if(e.NativeColumn){var r=void 0;if(e.NativeColumn.ExpressionContentCache&&(r={unrecognizedIdentifiers:e.NativeColumn.ExpressionContentCache.UnrecognizedIdentifiers,dependencies:g(e.NativeColumn.ExpressionContentCache.Dependencies)}),"dax"!==e.NativeColumn.Language)e.NativeColumn.Language;else if(e.NativeColumn.Source)return t=f(e.NativeColumn.Source,t),C.SQExprBuilder.nativeColumn(e.NativeColumn.Language,e.NativeColumn.Expression,e.NativeColumn.DataType,t,e.NativeColumn.ProposedName,r,e.NativeColumn.Format,e.Annotations)}})(e,t)||(function(e,t){var r;if(e.SourceRef)return t?(r=e.SourceRef.Source,(t=t.source(r))?C.isSQFromEntitySource(t)?C.SQExprBuilder.entity(t.schema,t.entity,r,e.Annotations):C.isSQFromPodSource(t)?C.SQExprBuilder.entity(t.schema,t.pod,r):C.isSQFromSubquerySource(t)?C.SQExprBuilder.subqueryRef(r,e.Annotations):(C.isSQFromExprSource(t),t.expr.as(r)):void 0):(t=e.SourceRef,C.SQExprBuilder.entity(t.Schema,t.Entity,void 0,e.Annotations))})(e,t)||(function(e,t){if(e.Aggregation){t=f(e.Aggregation.Expression,t);if(t)return C.SQExprBuilder.aggregate(t,e.Aggregation.Function,e.Annotations)}})(e,t)||(function(e){if(e.SelectRef)return C.SQExprBuilder.selectRef(e.SelectRef.ExpressionName,void 0,e.Annotations)})(e)||(function(e,t){if(e.Percentile){t=f(e.Percentile.Expression,t);if(t)return C.SQExprBuilder.percentile(t,e.Percentile.K,e.Percentile.Exclusive||!1,e.Annotations)}})(e,t)||(function(e,t){if(e.RangePercent){var r=f(e.RangePercent.Min,t),t=f(e.RangePercent.Max,t);if(r&&t)return C.SQExprBuilder.rangePercent(r,t,e.RangePercent.Percent,e.Annotations)}})(e,t)||(function(e,t){if(e.Arithmetic){var r=f(e.Arithmetic.Left,t),t=f(e.Arithmetic.Right,t);if(r&&t)return C.SQExprBuilder.arithmetic(r,t,e.Arithmetic.Operator,e.Annotations)}})(e,t)||(function(e,t){if(e.Floor){t=f(e.Floor.Expression,t);if(t)return C.SQExprBuilder.floor(t,e.Floor.Size,e.Floor.TimeUnit,e.Annotations)}})(e,t)||(function(e,t){if(e.Discretize){t=f(e.Discretize.Expression,t);if(t)return C.SQExprBuilder.discretize(t,e.Discretize.Count,e.Annotations)}})(e,t)||(function(e,t){if(e.Member){t=f(e.Member.Expression,t);if(t)return C.SQExprBuilder.member(t,e.Member.Member,e.Annotations)}})(e,t)||(function(e,t){if(e.Hierarchy){t=f(e.Hierarchy.Expression,t);if(t)return C.SQExprBuilder.hierarchy(t,e.Hierarchy.Hierarchy,e.Annotations)}})(e,t)||(function(e,t){if(e.HierarchyLevel){t=f(e.HierarchyLevel.Expression,t);if(t)return C.SQExprBuilder.hierarchyLevel(t,e.HierarchyLevel.Level,e.Annotations)}})(e,t)||(function(e,t){if(e.PropertyVariationSource){t=f(e.PropertyVariationSource.Expression,t);if(t)return C.SQExprBuilder.propertyVariationSource(t,e.PropertyVariationSource.Name,e.PropertyVariationSource.Property,e.Annotations)}})(e,t)||(function(e,t){if(e.And){var r=f(e.And.Left,t),t=f(e.And.Right,t);if(r&&t)return C.SQExprBuilder.and(r,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Between){var r=f(e.Between.Expression,t),i=f(e.Between.LowerBound,t),t=f(e.Between.UpperBound,t);if(r&&i&&t)return C.SQExprBuilder.between(r,i,t,e.Annotations)}})(e,t)||(function(e,t){{var r;if(e.In)return e.In.Values?C.SQExprBuilder.inValues(g(e.In.Expressions,t),_.map(e.In.Values,(function(e){return g(e,t)}))):(r=f(e.In.Table,t))?C.SQExprBuilder.inTable(g(e.In.Expressions,t),r,e.Annotations):void 0}})(e,t)||(function(e,t){if(e.Or){var r=f(e.Or.Left,t),t=f(e.Or.Right,t);if(r&&t)return C.SQExprBuilder.or(r,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Contains){var r=f(e.Contains.Left,t),t=f(e.Contains.Right,t);if(r&&t)return C.SQExprBuilder.contains(r,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Comparison){var r=f(e.Comparison.Left,t),t=f(e.Comparison.Right,t);if(r&&t)return C.SQExprBuilder.compare(e.Comparison.ComparisonKind,r,t,e.Annotations)}})(e,t)||(function(e){if(e.Conditional){for(var t=e.Conditional.Cases,r=t.length,i=new Array(r),a=0;a<r;a++){var n=(function(e){if(e){var t=f(e.Condition),e=f(e.Value);if(t&&e)return{condition:t,value:e}}})(t[a]);if(!n){i=void 0;break}i[a]=n}if(e.Conditional.DefaultValue){var o=f(e.Conditional.DefaultValue);if(i&&o)return C.SQExprBuilder.conditional(i,o,e.Annotations)}else if(i)return C.SQExprBuilder.conditional(i,void 0,e.Annotations)}})(e)||(function(e,t){if(e.DateAdd){t=f(e.DateAdd.Expression,t);if(t)return C.SQExprBuilder.dateAdd(e.DateAdd.TimeUnit,e.DateAdd.Amount,t,e.Annotations)}})(e,t)||(function(e,t){if(e.DateSpan){t=f(e.DateSpan.Expression,t);if(t)return C.SQExprBuilder.dateSpan(e.DateSpan.TimeUnit,t,e.Annotations)}})(e,t)||(function(e,t){if(e.Exists){t=f(e.Exists.Expression,t);if(t)return C.SQExprBuilder.exists(t,e.Annotations)}})(e,t)||(function(e,t){if(e.Not){t=f(e.Not.Expression,t);if(t)return C.SQExprBuilder.not(t,e.Annotations)}})(e,t)||(function(e){if(e.Now)return C.SQExprBuilder.now(e.Annotations)})(e)||(function(e){if(e.DefaultValue)return C.SQExprBuilder.defaultValue(e.Annotations)})(e)||(function(e){if(e.AnyValue)return C.SQExprBuilder.anyValue(e.AnyValue.DefaultValueOverridesAncestors,e.Annotations)})(e)||(function(e,t){if(e.StartsWith){var r=f(e.StartsWith.Left,t),t=f(e.StartsWith.Right,t);if(r&&t)return C.SQExprBuilder.startsWith(r,t,e.Annotations)}})(e,t)||(function(e,t){{var r,i,a,n,o;if(e.FillRule)return r=f(e.FillRule.Input,t),n=e.FillRule,i={},a=n.FillRule.linearGradient2,n=n.FillRule.linearGradient3,a?(i.linearGradient2={min:x(a.min,t),max:x(a.max,t)},(o=w(a.nullColoringStrategy,t))&&(i.linearGradient2.nullColoringStrategy=o)):n&&(i.linearGradient3={min:x(n.min,t),mid:x(n.mid,t),max:x(n.max,t)},o=w(n.nullColoringStrategy,t))&&(i.linearGradient3.nullColoringStrategy=o),C.SQExprBuilder.fillRule(r,i,e.Annotations)}})(e,t)||(function(e){if(e.ThemeDataColor)return C.SQExprBuilder.themeDataColor(e.ThemeDataColor.ColorId,e.ThemeDataColor.Percent,e.Annotations)})(e)||(function(e){if(e.ResourcePackageItem)return C.SQExprBuilder.resourcePackageItem(e.ResourcePackageItem.PackageName,e.ResourcePackageItem.PackageType,e.ResourcePackageItem.ItemName,e.Annotations)})(e)||(function(e,t){if(e.ScopedEval){var r=f(e.ScopedEval.Expression,t);if(r)return C.SQExprBuilder.scopedEval(r,g(e.ScopedEval.Scope,t),e.Annotations)}})(e,t)||(function(e,t){{var r;if(e.FilteredEval)return r=f(e.FilteredEval.Expression,t),C.SQExprBuilder.filteredEval(r,_.map(e.FilteredEval.Filters,(function(e){return D.filter(e,t)})),e.Annotations)}})(e,t)||(function(e){if(e.WithRef)return C.SQExprBuilder.withRef(e.WithRef.ExpressionName,e.Annotations)})(e)||(function(e){if(e.TransformTableRef)return C.SQExprBuilder.transformTableRef(e.TransformTableRef.Source,e.Annotations)})(e)||(function(e){if(e.TransformOutputRoleRef)return C.SQExprBuilder.transformOutputRoleRef(e.TransformOutputRoleRef.Role,e.TransformOutputRoleRef.Transform,e.Annotations)})(e)||(function(e){if(e.Literal)return C.PrimitiveValueEncoding.parseValueToSQExpr(e.Literal.Value)})(e)||(function(e,t){if(e.GroupRef){var r=f(e.GroupRef.Expression,t),i=_.map(e.GroupRef.GroupedColumns,(function(e){return l.create(e,t)}));if(r&&!_.isEmpty(i))return C.SQExprBuilder.groupRef(e.GroupRef.Property,r,i,e.Annotations)}})(e,t)||(function(e){if(e.RoleRef)return C.SQExprBuilder.roleRef(e.RoleRef.Role,e.Annotations)})(e)||(function(e){if(e.AllRolesRef)return C.SQExprBuilder.allRolesRef(e.Annotations)})(e)||(function(e){if(e.NamedQueryReference)return C.SQExprBuilder.namedQueryRef(e.NamedQueryReference.Name,void 0,e.Annotations)})(e)||(function(e){if(e.Subquery)return C.SQExprBuilder.subqueryRef(s.deserializeQuery(e.Subquery.Query),e.Annotations)})(e)||S(e)||(function(e){if(e.SummaryValueRef)return C.SQExprBuilder.summaryValueRef(e.SummaryValueRef.Name,e.Annotations)})(e)||(function(e,t){var r=e.SparklineData;if(r)return C.SQExprBuilder.sparklineData(f(r.Measure,t),g(r.Groupings,t),r.ScalarKey?f(e.SparklineData.ScalarKey,t):void 0,r.PointsPerSparkline,r.IncludeMinGroupingInterval)})(e,t)||V(e)}function y(e){return f(e,null)}function g(e,t){for(var r=[],i=0,a=e.length;i<a;i++)r.push(f(e[i],t));return r}function S(e){return (function(e){if(e.Boolean)return C.SQExprBuilder.boolean(e.Boolean.Value,e.Annotations)})(e)||M(e)||(function(e){{var t;if(e.DateTimeSecond)return t=b(e.DateTimeSecond),C.SQExprBuilder.dateSpan(5,C.SQExprBuilder.dateTime(t),e.Annotations)}})(e)||M(e)||(function(e){{var t;if(e.Decimal)return t=e.Decimal.Value,C.SQExprBuilder.decimal(t,void 0,e.Annotations)}})(e)||(function(e){{var t;if(e.Integer)return t=e.Integer.Value,C.SQExprBuilder.integer(t,void 0,e.Annotations)}})(e)||(function(e){if(e.Null)return C.SQExprBuilder.nullConstant()})(e)||(function(e){if(e.Number)return C.PrimitiveValueEncoding.parseValueToSQExpr(e.Number.Value)})(e)||(function(e){{var t;if(e.String)return t=e.String.Value,C.SQExprBuilder.text(t,void 0,e.Annotations)}})(e)}function x(e,t){var r;if(e)return r={color:f(e.color,t)},e.value&&(r.value=f(e.value,t)),r}function w(e,t){var r;if(e)return r={strategy:f(e.strategy,t)},e.color&&(r.color=f(e.color,t)),r}function M(e){var t=e.DateTime||e.Date;if(t){t=b(t);if(t)return C.SQExprBuilder.dateTime(t,void 0,e.Annotations)}}function b(e){return jsCommon.DateExtensions.tryDeserializeDate(e.Value)}function V(e,t){var r=e.NativeVisualCalculation;if(r)return C.SQExprBuilder.nativeVisualCalc(r.Name,r.Expression,e.Annotations)}C=e.data||(e.data={}),t=C.services||(C.services={}),i=e.data.FilterKindDetector,E=e.data.SQFromEntitySource,n=e.data.SQFromPodSource,o=e.data.SQFromSubquerySource,a=jsCommon.StringExtensions,r.serializeQuery=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=[],a=e.from(),a=(this.serializeFrom(a,i),this.serializeQueryFilters(e.where(),v.create,!1)),n=e.transforms();if(!_.isEmpty(n))for(var o=[],s=0,u=n;s<u.length;s++){var c,l=u[s],p=_.map(l.input.parameters,(function(e){return v.createNamed(e,t)})),p={Name:l.name,Algorithm:l.algorithm,Input:{Parameters:p},Output:void 0};l.input.table&&(c=this.serializeTransformTableColumns(l.input.table.columns),p.Input.Table={Name:l.input.table.name,Columns:c}),l.output&&l.output.table&&(c=this.serializeTransformTableColumns(l.output.table.columns),p.Output={Table:{Name:l.output.table.name,Columns:c}}),o.push(p)}for(var n=this.serializeSortDefinitions(e.orderBy(),t),d=[],h=e.select(),m=0,f=h.length;m<f;m++)d.push(v.createNamed(h[m],t,r));var y=e.groupBy();if(y&&y.length)for(var g=[],m=0,f=y.length;m<f;m++)g.push(v.createNamed(y[m],t));i={Version:C.SemanticQueryVersions.Version2,From:i,Select:d};return a&&(i.Where=a),o&&(i.Transform=o),n&&(i.OrderBy=n),g&&(i.GroupBy=g),e.top()&&(i.Top=e.top()),i},r.serializeSortDefinitions=function(e,t){if(e&&e.length)for(var r=[],i=0,a=e.length;i<a;i++){var n=e[i];r.push({Direction:n.direction,Expression:v.create(n.expr,t)})}return r},r.tryDeserializeQuery=function(e){var t;try{t=this.deserializeQuery(e)}catch(e){}if(t&&!this.isMalformed(t))return t},r.isMalformed=function(e){for(var t=0,r=e.select();t<r.length;t++)if(!r[t].expr)return!0;return!1},r.serializeQueryFilters=function(e,t,r){if(!_.isEmpty(e))for(var i=[],a=0,n=e;a<n.length;a++){var o=n[a],s={Condition:t(o.condition,r)};if(!_.isEmpty(o.target)){s.Target=[];for(var u=0,c=o.target;u<c.length;u++){var l=c[u];s.Target.push(t(l,r))}}o.annotations&&(s.Annotations=o.annotations),i.push(s)}return i},r.deserializeQuery=function(e){var t=e.Version||C.SemanticQueryVersions.Version0,r=t<C.SemanticQueryVersions.Version1,i=D.from(e.From),a=new C.SemanticQueryBuilder(i),n=e.Where;if(n)for(var o=0,s=n.length;o<s;o++){var u=D.filter(n[o],i);u&&(r&&(u=I.Upgrade(t,u)),a.addWhere(u))}var c=e.Transform,l=i;if(!_.isEmpty(c)){for(var p={},d=0,h=i.keys();d<h.length;d++){var m=h[d];p[m]=i.source(m)}for(var f,o=0,s=c.length;o<s;o++)c[o].Input&&c[o].Input.Table&&(p[f=c[o].Input.Table.Name]=new E(void 0,f)),c[o].Output&&c[o].Output.Table&&(p[f=c[o].Output.Table.Name]=new E(void 0,f));for(l=new C.SQFrom(p),o=0,s=c.length;o<s;o++)a.addTransform(D.transform(c[o],l))}var y=e.OrderBy;if(y)for(o=0,s=y.length;o<s;o++)a.addOrderBy(D.sort(y[o],i));for(var g=e.Select,v={},o=0,s=g.length;o<s;o++)a.addSelect(D.select(g[o],v,l));var S=e.GroupBy;if(S)for(var x={},o=0,s=S.length;o<s;o++)a.addGroupBy(D.groupBy(S[o],x,i));return e.Top&&a.setTop(e.Top),a.toQuery()},r.deserializeSortDefinitions=function(e,t){return _.isEmpty(e)?[]:_.map(e,(function(e){return D.sort(e,t)}))},r.serializeFilter=function(e){var t=[],r=e.from(),r=(this.serializeFrom(r,t),this.serializeQueryFilters(e.where(),v.create,!1));return{Version:C.SemanticQueryVersions.Version2,From:t,Where:r}},r.serializeFrom=function(e,t){for(var r=e.keys(),i=new u(e),a=0,n=r.length;a<n;a++)t.push(e.source(r[a]).accept(i,a))},r.deserializeFrom=function(e){return D.from(e)},r.deserializeFilter=function(e,t){var r=e.Version||C.SemanticQueryVersions.Version0,i=r<C.SemanticQueryVersions.Version1,a=D.from(e.From),n=new C.SemanticQueryBuilder(a),o=e.Where;if(o)for(var s=0,u=o.length;s<u;s++){var c=D.filter(o[s],a);c?(i&&(c=I.Upgrade(r,c)),n.addWhere(c)):t&&(_.isEmpty(t.RemovedIndexes)&&(t.RemovedIndexes=[]),t.RemovedIndexes.push(s))}return n.toFilter()},r.serializeExpr=function(e,t){return v.create(e,!0,t=void 0===t?!1:t)},r.serializeExprWithRef=function(e,t){return v.create(e,!1,t=void 0===t?!1:t)},r.deserializeExpr=function(e){return c.createStandalone(e)},r.deserializeExprWithRef=function(e,t){return c.create(e,t)},r.serializeTransformTableColumns=function(e){return _.map(e,(function(e){var t={Expression:v.createNamed(e.expression)};return e.role&&(t.Role=e.role),t}))},s=r,t.SemanticQuerySerializer=s,p.from=function(e){var t={};if(e)for(var r=0,i=e.length;r<i;r++){var a=e[r];switch(a.Type){case 2:a.Expression.Subquery?t[a.Name]=new o(s.deserializeQuery(a.Expression.Subquery.Query)):t[a.Name]=new C.SQFromExprSource(c.createFromSourceExpression(a.Expression));break;case 1:t[a.Name]=new n(a.Schema,a.Entity);break;default:t[a.Name]=new E(a.Schema,a.Entity)}}return new C.SQFrom(t)},p.filter=function(e,t){var r=t?c.create(e.Condition,t):c.createStandalone(e.Condition);if(r){var i={condition:r};if(e.Target){i.target=[];for(var a=0,n=e.Target;a<n.length;a++){var o=n[a],o=t?c.create(o,t):c.createStandalone(o);if(!o)return;i.target.push(o)}}return e.Annotations&&(i.annotations=e.Annotations),i}},p.sort=function(e,t){return{direction:e.Direction,expr:c.create(e.Expression,t)}},p.select=function(e,t,r){return p.toNamedQueryExpression(e,t,r)},p.groupBy=function(e,t,r){return p.toNamedQueryExpression(e,t,r)},p.transform=function(e,t){var r,i=_.map(e.Input.Parameters,(function(e){return p.toNamedQueryExpression(e,{},t)})),i={name:e.Name,algorithm:e.Algorithm,input:{parameters:i},output:{}};return e.Input.Table&&(r=this.deserializeTransformTableColumns(e.Input.Table.Columns,t),i.input.table={name:e.Input.Table.Name,columns:r}),e.Output&&e.Output.Table&&(r=this.deserializeTransformTableColumns(e.Output.Table.Columns,t),i.output.table={name:e.Output.Table.Name,columns:r}),i},p.toNamedQueryExpression=function(e,t,r){var r=c.create(e,r),i=e.Name||a.findUniqueName(t,C.SQExprUtils.defaultName(r)),t=(t[i]=!0,{name:i,expr:r});return e.NativeReferenceName&&(t.nativeReferenceName=e.NativeReferenceName),t},p.deserializeTransformTableColumns=function(e,t){var r={};return _.map(e,(function(e){return{role:e.Role,expression:p.toNamedQueryExpression(e.Expression,r,t)}}))},D=p,d.prototype.visitEntity=function(e,t){return{Name:this.from.keys()[t],Entity:e.entity,Schema:e.schema,Type:0}},d.prototype.visitPod=function(e,t){return{Name:this.from.keys()[t],Entity:e.pod,Schema:e.schema,Type:1}},d.prototype.visitSubquery=function(e,t){return{Name:this.from.keys()[t],Expression:{Subquery:{Query:s.serializeQuery(e.subquery)}},Type:2}},d.prototype.visitExpr=function(e,t){return{Name:this.from.keys()[t],Expression:s.serializeExpr(e.expr),Type:2}},u=d,h.getInstance=function(e,t){var r=[+(e=e||!1),+(t=t||!1)].reduce((function(e,t){return e<<1|t}));return h.instances[r]||new h(e,t)},h.create=function(e,t,r){return e.accept(h.getInstance(t=void 0===t?!1:t,r=void 0===r?!1:r))},h.createNamed=function(e,t,r){t=h.getInstance(t=void 0===t?!1:t,r=void 0===r?!1:r),r=e.expr.accept(t);return e.name&&(r.Name=e.name),e.nativeReferenceName&&(r.NativeReferenceName=e.nativeReferenceName),r},h.prototype.visitColumnRef=function(e){return this.addAnnotations(e,{Column:{Expression:e.source.accept(this),Property:e.ref}})},h.prototype.visitMeasureRef=function(e){return this.addAnnotations(e,{Measure:{Expression:e.source.accept(this),Property:e.ref}})},h.prototype.visitNativeMeasure=function(e){var t={Language:e.language,Expression:e.expression,DataType:e.dataType},r=(e.proposedName&&(t.ProposedName=e.proposedName),e.format&&(t.Format=e.format),e.expressionContentCache);return!r||!r.dependencies&&null==r.unrecognizedIdentifiers?{NativeMeasure:t}:(t.ExpressionContentCache={},r.dependencies&&(t.ExpressionContentCache.Dependencies=this.serializeAll(r.dependencies)),null!=r.unrecognizedIdentifiers&&(t.ExpressionContentCache.UnrecognizedIdentifiers=r.unrecognizedIdentifiers),this.addAnnotations(e,{NativeMeasure:t}))},h.prototype.visitNativeColumn=function(e){var t={Language:e.language,Expression:e.expression,DataType:e.dataType,Source:e.source.accept(this)},r=(e.proposedName&&(t.ProposedName=e.proposedName),e.format&&(t.Format=e.format),e.expressionContentCache);return r&&(r.dependencies||null!=r.unrecognizedIdentifiers)&&(t.ExpressionContentCache={},r.dependencies&&(t.ExpressionContentCache.Dependencies=this.serializeAll(r.dependencies)),null!=r.unrecognizedIdentifiers)&&(t.ExpressionContentCache.UnrecognizedIdentifiers=r.unrecognizedIdentifiers),this.addAnnotations(e,{NativeColumn:t})},h.prototype.visitAggr=function(e){return this.addAnnotations(e,{Aggregation:{Expression:e.arg.accept(this),Function:e.func}})},h.prototype.visitPercentile=function(e){var t=this.addAnnotations(e,{Percentile:{Expression:e.arg.accept(this),K:e.k}});return e.exclusive&&(t.Percentile.Exclusive=e.exclusive),t},h.prototype.visitRangePercent=function(e){return this.addAnnotations(e,{RangePercent:{Min:e.min.accept(this),Max:e.max.accept(this),Percent:e.percent}})},h.prototype.visitHierarchy=function(e){return this.addAnnotations(e,{Hierarchy:{Expression:e.arg.accept(this),Hierarchy:e.hierarchy}})},h.prototype.visitPropertyVariationSource=function(e){var t=e.arg.accept(this),r=e.property,i=e.name;return this.addAnnotations(e,{PropertyVariationSource:{Expression:{SourceRef:t.SourceRef},Name:i,Property:r}})},h.prototype.visitHierarchyLevel=function(e){return this.addAnnotations(e,{HierarchyLevel:{Expression:e.arg.accept(this),Level:e.level}})},h.prototype.visitSelectRef=function(e){return void 0!==e.attributeKind&&e.attributeKind,this.addAnnotations(e,{SelectRef:{ExpressionName:e.expressionName}})},h.prototype.visitBetween=function(e){return this.addAnnotations(e,{Between:{Expression:e.arg.accept(this),LowerBound:e.lower.accept(this),UpperBound:e.upper.accept(this)}})},h.prototype.visitIn=function(e){var t=this.serializeAll(e.args),r=e.values;if(r){for(var i=[],a=0,n=r.length;a<n;a++)i.push(this.serializeAll(r[a]));return this.addAnnotations(e,{In:{Expressions:t,Values:i}})}return this.addAnnotations(e,{In:{Expressions:this.serializeAll(e.args),Table:e.table.accept(this)}})},h.prototype.visitEntity=function(e){var t;return t=this.standalone?{Schema:e.schema,Entity:e.entity}:(e.variable,{Source:e.variable}),this.addAnnotations(e,{SourceRef:t})},h.prototype.visitSubqueryRef=function(e){return e.variable&&!e.query?this.addAnnotations(e,{SourceRef:{Source:e.variable}}):this.standalone?this.addAnnotations(e,{Subquery:{Query:s.serializeQuery(e.query,!1,this.serializeAnnotations)}}):void 0},h.prototype.visitNamedQueryRef=function(e){return this.standalone?this.addAnnotations(e,{NamedQueryReference:{Name:e.queryName}}):(e.variable,this.addAnnotations(e,{SourceRef:{Source:e.variable}}))},h.prototype.visitAnd=function(e){return this.addAnnotations(e,{And:{Left:e.left.accept(this),Right:e.right.accept(this)}})},h.prototype.visitOr=function(e){return this.addAnnotations(e,{Or:{Left:e.left.accept(this),Right:e.right.accept(this)}})},h.prototype.visitCompare=function(e){return this.addAnnotations(e,{Comparison:{ComparisonKind:e.comparison,Left:e.left.accept(this),Right:e.right.accept(this)}})},h.prototype.visitConditional=function(e){var t=this,r=this.addAnnotations(e,{Conditional:{Cases:_.map(e.cases,(function(e){return t.visitCase(e)}))}}),e=e.defaultValue;return e&&(r.Conditional.DefaultValue=e.accept(this)),r},h.prototype.visitCase=function(e){return{Condition:e.condition.accept(this),Value:e.value.accept(this)}},h.prototype.visitContains=function(e){return this.addAnnotations(e,{Contains:{Left:e.left.accept(this),Right:e.right.accept(this)}})},h.prototype.visitDateAdd=function(e){return this.addAnnotations(e,{DateAdd:{Expression:e.arg.accept(this),Amount:e.amount,TimeUnit:e.unit}})},h.prototype.visitDateSpan=function(e){return this.addAnnotations(e,{DateSpan:{Expression:e.arg.accept(this),TimeUnit:e.unit}})},h.prototype.visitExists=function(e){return this.addAnnotations(e,{Exists:{Expression:e.arg.accept(this)}})},h.prototype.visitNot=function(e){return this.addAnnotations(e,{Not:{Expression:e.arg.accept(this)}})},h.prototype.visitNow=function(e){return this.addAnnotations(e,{Now:{}})},h.prototype.visitDefaultValue=function(e){return this.addAnnotations(e,{DefaultValue:{}})},h.prototype.visitAnyValue=function(e){var t={};return null!=e.defaultValueOverridesAncestors&&(t.DefaultValueOverridesAncestors=e.defaultValueOverridesAncestors),this.addAnnotations(e,{AnyValue:t})},h.prototype.visitFillRule=function(e){var t={},r=e.rule;return r.linearGradient2&&(t.linearGradient2=this.visitLinearGradient2(r.linearGradient2)),r.linearGradient3&&(t.linearGradient3=this.visitLinearGradient3(r.linearGradient3)),this.addAnnotations(e,{FillRule:{Input:e.input.accept(this),FillRule:t}})},h.prototype.visitLinearGradient2=function(e){var t={min:this.visitRuleStop(e.min),max:this.visitRuleStop(e.max)},e=this.visitNullColoringStrategy(e.nullColoringStrategy);return e&&(t.nullColoringStrategy=e),t},h.prototype.visitLinearGradient3=function(e){var t={min:this.visitRuleStop(e.min),mid:this.visitRuleStop(e.mid),max:this.visitRuleStop(e.max)},e=this.visitNullColoringStrategy(e.nullColoringStrategy);return e&&(t.nullColoringStrategy=e),t},h.prototype.visitRuleStop=function(e){var t={color:e.color.accept(this)};return e.value&&(t.value=e.value.accept(this)),t},h.prototype.visitNullColoringStrategy=function(e){var t;if(e)return e.strategy,t={strategy:e.strategy.accept(this)},e.color&&(t.color=e.color.accept(this)),t},h.prototype.visitThemeDataColor=function(e){return this.addAnnotations(e,{ThemeDataColor:{ColorId:e.colorId,Percent:e.percent}})},h.prototype.visitStartsWith=function(e){return this.addAnnotations(e,{StartsWith:{Left:e.left.accept(this),Right:e.right.accept(this)}})},h.prototype.visitGroupRef=function(e){var t=this;return this.addAnnotations(e,{GroupRef:{Expression:e.source.accept(this),Property:e.ref,GroupedColumns:_.map(e.groupedExprs,(function(e){return e.accept(t)}))}})},h.prototype.visitConstant=function(e){switch(e.type.primitiveType){case 5:case 7:case 2:case 4:case 3:case 0:case 1:return this.addAnnotations(e,{Literal:{Value:e.valueEncoded}});default:e.type.primitiveType}},h.prototype.visitArithmetic=function(e){return this.addAnnotations(e,{Arithmetic:{Left:e.left.accept(this),Right:e.right.accept(this),Operator:e.operator}})},h.prototype.visitFloor=function(e){var t=this.addAnnotations(e,{Floor:{Expression:e.arg.accept(this),Size:e.size}});return null!=e.timeUnit&&(t.Floor.TimeUnit=e.timeUnit),t},h.prototype.visitResourcePackageItem=function(e){return this.addAnnotations(e,{ResourcePackageItem:{PackageName:e.packageName,PackageType:e.packageType,ItemName:e.itemName}})},h.prototype.visitScopedEval=function(e){return this.addAnnotations(e,{ScopedEval:{Expression:e.expression.accept(this),Scope:this.serializeAll(e.scope)}})},h.prototype.visitFilteredEval=function(e){return this.addAnnotations(e,{FilteredEval:{Expression:e.expression.accept(this),Filters:s.serializeQueryFilters(e.filters,h.create,this.standalone)}})},h.prototype.visitWithRef=function(e){return this.addAnnotations(e,{WithRef:{ExpressionName:e.expressionName}})},h.prototype.visitTransformTableRef=function(e){return this.addAnnotations(e,{TransformTableRef:{Source:e.source}})},h.prototype.visitTransformOutputRoleRef=function(e){return this.addAnnotations(e,{TransformOutputRoleRef:{Role:e.role,Transform:e.transform}})},h.prototype.visitRoleRef=function(e){return this.addAnnotations(e,{RoleRef:{Role:e.role}})},h.prototype.visitSummaryValueRef=function(e){return this.addAnnotations(e,{SummaryValueRef:{Name:e.name}})},h.prototype.visitAllRolesRef=function(e){return this.addAnnotations(e,{AllRolesRef:{}})},h.prototype.visitDiscretize=function(e){return this.addAnnotations(e,{Discretize:{Expression:e.source.accept(this),Count:e.count}})},h.prototype.visitMember=function(e){return this.addAnnotations(e,{Member:{Expression:e.source.accept(this),Member:e.member}})},h.prototype.visitSparklineData=function(e){var t={SparklineData:{Measure:e.measure.accept(this),Groupings:this.serializeAll(e.grouping),PointsPerSparkline:e.pointsPerSparkline}};return e.scalarKey&&(t.SparklineData.ScalarKey=e.scalarKey.accept(this)),e.includeMinGroupingInterval&&(t.SparklineData.IncludeMinGroupingInterval=e.includeMinGroupingInterval),t},h.prototype.serializeAll=function(e){for(var t=[],r=0,i=e.length;r<i;r++)t.push(e[r].accept(this));return t},h.prototype.visitNativeVisualCalc=function(e,t){var r={Language:e.language,Expression:e.expression,Name:e.name};return this.addAnnotations(e,{NativeVisualCalculation:r})},h.prototype.addAnnotations=function(e,t){return this.serializeAnnotations&&(e=e.getAnnotations())&&(t.Annotations=e),t},h.instances=[],v=h,m.Upgrade=function(e,t){var r;return t&&t.condition?(r=i.runDetector(t.condition),e===C.SemanticQueryVersions.Version0&&2!==r?{condition:t.condition}:t):null},I=m,(l=c=t.ExprBuilder||(t.ExprBuilder={})).create=f,l.createStandalone=y,l.createConst=S,l.createFromSourceExpression=y,l.fromNativeVisualCalc=V})(powerbi=powerbi||{}),(function(e){var t,r,i,a;(t=(t=e.data||(e.data={})).transforms||(t.transforms={})).AnomalyDetectionTransformPluginName="SampleAndDetectAnomaly",r="TimeSeriesColumnRole",i="ValueColumnRole",t.AnomalyDetectionColumns={ExpectedValue:"ExpectedValue",ExpectedLow:"ExpectedLow",ExpectedHigh:"ExpectedHigh",RawScore:"RawScore",Anomaly:"Anomaly",BatchStart:"BatchStart",BatchEnd:"BatchEnd"},t.AnomalyDetectionOutputRoles=_.mapValues(t.AnomalyDetectionColumns,(function(e){return"anomalyDetection."+e})),a=_.mapValues(t.AnomalyDetectionColumns,(function(e){return e+"Role"})),r={name:t.AnomalyDetectionTransformPluginName,inputRoles:[{name:r,visualDataRoleMatching:{cartesianKind:0}},{name:i,visualDataRoleMatching:{cartesianKind:1}}],outputRoles:[{name:t.AnomalyDetectionOutputRoles.ExpectedValue,algorithmRole:a.ExpectedValue,columnName:t.AnomalyDetectionColumns.ExpectedValue,kind:e.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:t.AnomalyDetectionOutputRoles.ExpectedLow,algorithmRole:a.ExpectedLow,columnName:t.AnomalyDetectionColumns.ExpectedLow,kind:e.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:t.AnomalyDetectionOutputRoles.ExpectedHigh,algorithmRole:a.ExpectedHigh,columnName:t.AnomalyDetectionColumns.ExpectedHigh,kind:e.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:t.AnomalyDetectionOutputRoles.RawScore,algorithmRole:a.RawScore,columnName:t.AnomalyDetectionColumns.RawScore,kind:e.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:t.AnomalyDetectionOutputRoles.Anomaly,algorithmRole:a.Anomaly,columnName:t.AnomalyDetectionColumns.Anomaly,kind:e.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:t.AnomalyDetectionOutputRoles.BatchStart,algorithmRole:a.BatchStart,columnName:t.AnomalyDetectionColumns.BatchStart,kind:e.VisualDataRoleKind.Measure,joinPredicateBehavior:0},{name:t.AnomalyDetectionOutputRoles.BatchEnd,algorithmRole:a.BatchEnd,columnName:t.AnomalyDetectionColumns.BatchEnd,kind:e.VisualDataRoleKind.Measure,joinPredicateBehavior:0}]},i={name:"Forecast",inputRoles:[{name:"X",visualDataRoleMatching:{cartesianKind:0}},{name:"Y",visualDataRoleMatching:{cartesianKind:1}}],outputRoles:[{name:"forecast.ForecastValue",algorithmRole:"Forecast",columnName:"forecastValue",kind:e.VisualDataRoleKind.Measure},{name:"forecast.ConfidenceHighBound",algorithmRole:"UpperBound",columnName:"confidenceHighBound",kind:e.VisualDataRoleKind.Measure},{name:"forecast.ConfidenceLowBound",algorithmRole:"LowerBound",columnName:"confidenceLowBound",kind:e.VisualDataRoleKind.Measure}]},a={name:"KMeansClustering",inputRoles:[{name:"Attribute",visualDataRoleMatching:{matchMeasure:!0,skipJoinPredicateNone:!0}},{name:"Item",visualDataRoleMatching:{matchGrouping:!0}}],outputRoles:[{name:"Series",algorithmRole:"ClusterId",columnName:"clusterId",kind:e.VisualDataRoleKind.Grouping}]},t.plugins=((i={Forecast:i,KMeansClustering:a})[t.AnomalyDetectionTransformPluginName]=r,i)})(powerbi=powerbi||{}),(function(e){var t,r;function i(){this.plugins=e.data.transforms.plugins}((t=e.data||(e.data={})).transforms||(t.transforms={})).createTransformPluginService=function(){return new r},i.prototype.getTransformPlugin=function(e){if(e)return this.plugins[e]},r=i})(powerbi=powerbi||{}),(function(e){var t,r,i,s,u,c,l;function a(){return null!==r&&r.apply(this,arguments)||this}t=(t=e.data||(e.data={})).dsr||(t.dsr={}),i=e.data.DefaultSQExprVisitorWithArg,s=e.data.SQExprBuilder,u=e.data.SQHierarchyExpr,c=e.data.SQPropertyVariationSourceExpr,l=e.data.SQEntityExpr,__extends(a,r=i),a.prototype.visitColumnRef=function(e,t){var r;return e.hasGroupOnKeys(t)?(t=e.getConceptualProperty(t),r=e.getTargetEntity(),_.map(t.column.keys,(function(e){return s.columnRef(r,e.name)}))):[e]},a.prototype.visitHierarchyLevel=function(e,t){var r=e.arg.getTargetEntity();if(r&&e.arg instanceof u){var i=void 0,a=r.schema,n=e.arg;if(n.arg instanceof c){var o=n.arg,o=t.schema(a).findTargetEntityOfVariation(r.entity,o.property,o.name);if(!o)return[e];i=s.entity(a,o.name)}else i=r,n.arg instanceof l;o=t.schema(a).findHierarchyLevel(i.entity,n.hierarchy,e.level).column.name;return this.visitColumnRef(s.columnRef(i,o),t)}return[e]},a.prototype.visitGroupRef=function(e,t){return this.visitColumnRef(e,t)},a.prototype.visitDefault=function(e){return[e]},i=a,t.SelectToIdentityExpressionsVisitor=i})(powerbi=powerbi||{}),(function(e){var r,l;function o(e,t){return!e||!t||_.isEqual(e,t)}function s(e,t){t&&(e.select||(e.select=[]),(e=e.select).push.apply(e,t||[]))}((r=e.data||(e.data={})).dsr||(r.dsr={})).mergeMappings=function(e,t){var r=e.length;if(1===r)return{mapping:e[0]};for(var i,a,n,o=[],s=e[0].updateType,u=0;u<r;u++){var c=e[u];if(a=c.updateType,n=s,s=null===a||0===a||null===n||0===n?0:a===n?a:1===a||1===n?1:2,!c.categorical)return;0===u&&(i={metadata:c.metadata,categorical:{}}),l.mergeCategorical(i.categorical,c.categorical),o.push(l.createSplit(t,c.categorical))}return i.updateType=s,{mapping:i,splits:o}},(e=l=l||{}).mergeCategorical=function(e,t){var r,i,a,n;t.categories&&(e.categories?(function(e,t){if(!e&&!t)return;if(e&&t){if(!e.categories&&!t.categories)return;var r,i;if(e.categories&&t.categories)return e=e.categories,t=t.categories,o(e.dataReductionAlgorithm,t.dataReductionAlgorithm)&&(i=t,(r=e).bind||i.bind?_.isEqual(r.bind,i.bind):(r=t,(i=e).for||r.for?_.isEqual(i.for,r.for):(i=t,((r=e).select||i.select)&&_.isEqual(r.select,i.select))))}})(e,t):e.categories=t.categories),null==t.dataVolume&&null==e.dataVolume||(r=Math.max(t.dataVolume||0,e.dataVolume||0),t.dataVolume=e.dataVolume=r),t.dataReductionAlgorithm&&(e.dataReductionAlgorithm?o(t.dataReductionAlgorithm,e.dataReductionAlgorithm):e.dataReductionAlgorithm=t.dataReductionAlgorithm),t.values&&(r=(r=e.values)||(e.values={}),i=(t=t.values).group,a=r,((n=t).bind||n.for)&&(a.select||(a.select=[]),a.select.push(n)),s(r,t.select),i)&&((a=e.values.group)?s(a,i.select):e.values.group={select:i.select.concat([]),by:i.by,dataReductionAlgorithm:i.dataReductionAlgorithm})},e.createSplit=function(u,e){var c={selects:{}},t={visitRole:function(e){var t=c,r=u,i=e.items;if(!_.isEmpty(e.items))for(var a=[],n=0,o=i;n<o.length;n++){var s=o[n].queryName,s=r[s];a[s]||(t.selects[s]=!0,a[s]=!0)}}};return r.CompiledDataViewMapping.visitCategoricalCategories(e.categories,t),r.CompiledDataViewMapping.visitGrouped(e.values,t),r.CompiledDataViewMapping.visitCategoricalValues(e.values,t),c}})(powerbi=powerbi||{}),(function(e){(e=(e=e.data||(e.data={})).QueryCacheOptions||(e.QueryCacheOptions={}))[e.None=0]="None",e[e.AllowCache=1]="AllowCache",e[e.AllowQuery=2]="AllowQuery",e[e.CacheResult=4]="CacheResult",e[e.PreventRefresh=8]="PreventRefresh"})(powerbi=powerbi||{}),(function(i){var r,e;function u(){}function t(){}function a(){}r=i.data||(i.data={}),e=r.dsr||(r.dsr={}),u.findAndParseCalculation=function(e,t){e=this.findCalculation(e,t);if(e)return r.PrimitiveValueEncoding.parseValue(e.Value)},u.findAndParseCalculationToSQExpr=function(e,t){e=this.findCalculation(e,t);if(e)return r.PrimitiveValueEncoding.parseValueToSQExpr(e.Value)},u.findCalculation=function(e,t){for(var r=0,i=e.length;r<i;r++){var a=e[r];if(a.Id===t)return a}},u.describeDataType=function(e,t){var r=0;switch(e=e||0){case 2048:r=1;break;case 1:r=3;break;case 3:r=4;break;case 4096:r=5;break;case 20:r=6;break;case 4:r=7;break;case 8:r=9;break;case 67:r=4,t="Years";break;case 35:r=4,t="Months"}return i.ValueType.fromPrimitiveTypeAndCategory(r,t)},u.getTopLevelSecondaryDynamicMember=function(e,t){e=e.SecondaryHierarchy;return e?t&&t.Secondary?u.getDynamicMember(e,t.Secondary.Groupings,0):u.getDynamicMemberFallback(e):null},u.getTopLevelPrimaryDynamicMember=function(e,t,r){var i,a=e.PrimaryHierarchy;return a?(r&&(i=void 0!==e.Calculations),t&&t.Primary?u.getDynamicMember(a,t.Primary.Groupings,0,i):u.getDynamicMemberFallback(a,i)):null},u.getDynamicMember=function(e,t,r,i){if(0!==e.length){if(!t||0===t.length)return u.getDynamicMemberFallback(e,i);var a=t[r].Member;if(!a)return u.getDynamicMemberFallback(e,i);for(var n=0,o=e;n<o.length;n++){var s=o[n];if(s.Id===a)return s}}return null},u.getDynamicMemberFallback=function(e,t){return 2===e.length?e[1]:void 0===t||!0===t?e[0]:null},u.fillMetadataColumnAggregate=function(e,t,r){void 0===r&&(r=!0);var i=t.source.aggregates;switch(i||(t.source.aggregates=i={}),t.aggregateKind){case 1:return void(i.subtotal=e);case 2:return void(i.max=e);case 3:return void(i.min=e);case 4:return void(r||(i.single=e));case 5:return void(i.count=e);case 6:return void(i.average=e);case 8:return void(i.median=e);case 7:var a=t.aggregate.Percentile,n=(n=i.percentiles)||(i.percentiles=[]),o={k:a.K,value:e};return null!=a.Exclusive&&(o.exclusive=a.Exclusive),void n.push(o)}},u.copyAggregates=function(e,t){void 0!==e.subtotal&&(t.subtotal=e.subtotal),void 0!==e.min&&(t.min=e.min),void 0!==e.max&&(t.max=e.max),void 0!==e.minLocal&&(t.minLocal=e.minLocal),void 0!==e.maxLocal&&(t.maxLocal=e.maxLocal),void 0!==e.count&&(t.count=e.count)},u.computeAggIdx=function(e,t,r,i){return e+(i-t)*(r+1)},e.DataShapeUtility=u,Object.defineProperty(t.prototype,"name",{get:function(){return"maxLocal"},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var t;"number"!=typeof e||isNaN(e)||(t=this.current,this.current=void 0===t?e:Math.max(t,e))},t.prototype.value=function(){return this.current},e.MaxValueAggregator=t,Object.defineProperty(a.prototype,"name",{get:function(){return"minLocal"},enumerable:!1,configurable:!0}),a.prototype.update=function(e){var t;"number"!=typeof e||isNaN(e)||(t=this.current,this.current=void 0===t?e:Math.min(t||0,e))},a.prototype.value=function(){return this.current},e.MinValueAggregator=a})(powerbi=powerbi||{}),(function(l){var p=l.ClientErrorStrings,o=jsCommon.StringExtensions,e=(l.DMTS_MultipleGatewaysWithAllDatasourcesToBindError="DMTS_MultipleGatewaysWithAllDatasourcesToBindError",l.DMTS_DatasourceHasNoCredentialError="DMTS_DatasourceHasNoCredentialError",l.DMTS_OAuthTokenRefreshFailedError="DMTS_OAuthTokenRefreshFailedError",l.DM_GWPipeline_Client_GatewayUnreachable="DM_GWPipeline_Client_GatewayUnreachable",l.DM_GWPipeline_Client_OAuthTokenRefreshFailedError="DM_GWPipeline_Client_OAuthTokenRefreshFailedError",l.DMTS_UserLostPermissionToDatasourceError="DMTS_UserLostPermissionToDatasourceError",l.DMTS_UserNotFoundInADGraphError="DMTS_UserNotFoundInADGraphError",l.DM_GWPipeline_Gateway_DataSourceAccessError="DM_GWPipeline_Gateway_DataSourceAccessError",l.DM_GWPipeline_Gateway_ImpersonationError="DM_GWPipeline_Gateway_ImpersonationError",l.DM_GWPipeline_Gateway_InvalidMashupConnectionString="DM_GWPipeline_Gateway_InvalidMashupConnectionString",l.DM_GWPipeline_Gateway_DatabaseLoginError="DM_GWPipeline_Gateway_DatabaseLoginError",l.DM_GWPipeline_Gateway_SqlTimeoutException="DM_GWPipeline_Gateway_SqlTimeoutException",l.DM_GWPipeline_Gateway_AdomdTimeoutException="DM_GWPipeline_Gateway_AdomdTimeoutException",l.DM_GWPipeline_Gateway_InvalidObjectNameException="DM_GWPipeline_Gateway_InvalidObjectNameException",l.DM_GWPipeline_Gateway_InvalidConnectionCredentials="DM_GWPipeline_Gateway_InvalidConnectionCredentials",l.DM_GWPipeline_Gateway_ConnectionBrokenException="DM_GWPipeline_Gateway_ConnectionBrokenException",l.DM_GWPipeline_Gateway_MemoryError="DM_GWPipeline_Gateway_MemoryError",l.DM_GWPipeline_Gateway_MissingStructureError="DM_GWPipeline_Gateway_MissingStructureError",l.DM_GWPipeline_Gateway_UnprocessedStructureError="DM_GWPipeline_Gateway_UnprocessedStructureError",l.DM_GWPipeline_Gateway_ModelLoadError="DM_GWPipeline_Gateway_ModelLoadError",l.DM_GWPipeline_Gateway_CancellationError="DM_GWPipeline_Gateway_CancellationError",l.DM_GWPipeline_Gateway_CancellationOrTimeoutError="DM_GWPipeline_Gateway_CancellationOrTimeoutError",l.DM_GWPipeline_Gateway_QueryExecutionError="DM_GWPipeline_Gateway_QueryExecutionError",l.DM_GWPipeline_Gateway_RecalculationRequiredError="DM_GWPipeline_Gateway_RecalculationRequiredError",l.DM_GWPipeline_Gateway_TimeoutError="DM_GWPipeline_Gateway_TimeoutError",l.DM_GWPipeline_Gateway_AdomdConnectError="DM_GWPipeline_Gateway_AdomdConnectError",l.DM_GWPipeline_Gateway_GatewayOverloadedMemory="DM_GWPipeline_Gateway_GatewayOverloadedMemory",l.DM_GWPipeline_Gateway_GatewayOverloadedConcurrency="DM_GWPipeline_Gateway_GatewayOverloadedConcurrency",l.DM_GWPipeline_Gateway_MashupDataAccessError="DM_GWPipeline_Gateway_MashupDataAccessError",l.DM_GWPipeline_Gateway_DatabaseConnectError="DM_GWPipeline_Gateway_DatabaseConnectError",l.DM_GWPipeline_Gateway_ServerUnreachable="DM_GWPipeline_Gateway_ServerUnreachable",l.DM_GWPipeline_Gateway_GatewayOverloadedProcessor="DM_GWPipeline_Gateway_GatewayOverloadedProcessor",l.RS_AccessDenied="rsAccessDenied",l.azureValues="azure:values",l.KnownDsrClientErrors={ComplexSlicerNotAllowedWithMeasures:{localizedContent:"DsrError_ComplexSlicerNotAllowedWithMeasuresValue"},ComplexHighlightsNotAllowed:{localizedContent:"DsrError_ComplexHighlightsNotAllowed_Details",localizedMessage:"DsrError_ComplexHighlightsNotAllowed_ShortMessage"},CouldNotResolveModelReferencesInSemanticQuery:{localizedMessage:"DsrError_CouldNotResolveModelRefErrorMessage",localizedTitle:"DsrError_CouldNotResolveModelRefErrorKey",localizedContent:"DsrError_CouldNotResolveModelRefErrorValNoItems",localizedContentWithAffectedItems:"DsrError_CouldNotResolveModelRefErrorValFormat",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690865"},ExclusivePercentileOutOfRange:{localizedMessage:"DsrError_ExclusivePercentileOutOfRangeMessage",localizedTitle:"DsrError_ExclusivePercentileOutOfRangeKey",localizedContent:"DsrError_ExclusivePercentileOutOfRangeValue"},InvalidDataShapeNoOutputData:{localizedContent:"DsrError_InvalidDataShapeValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690860"},InvalidUnconstrainedJoin:{localizedTitle:"DsrError_InvalidUnconstrainedJoinKey",localizedContent:"DsrError_InvalidUnconstrainedJoinValue",helpLink:"https://go.microsoft.com/fwlink/?linkid=2186131"},IsRelatedToManyNotSupportedForDetailTable:{localizedMessage:"DsrError_IsRelatedToManyNotSupportedForDetailTableMessage",localizedTitle:"DsrError_IsRelatedToManyNotSupportedForDetailTableKey",localizedContent:"DsrError_IsRelatedToManyNotSupportedForDetailTableValueNoItems",localizedContentWithAffectedItems:"DsrError_IsRelatedToManyNotSupportedForDetailTableValueFormat"},AA_PowerBIScriptPayloadTooLargeError:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=746290"},AA_PowerBIScriptResultTooLargeError:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=746291"},AA_PowerBIScriptReturnedNoImageError:{localizedMessage:"DsrError_ScriptReturnedNoImageMessage",localizedTitle:"DsrError_ScriptReturnedNoImageKey",localizedContent:"DsrError_ScriptReturnedNoImageContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=733479"},AA_PowerBIScriptRuntimeErrorError:{localizedTitle:"DsrError_ScriptRuntimeErrorKey",localizedMessage:"DsrError_ScriptRuntimeErrorMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=733477"},AA_PowerBIScriptTimeoutError:{localizedMessage:"DsrError_ScriptTimeoutMessage",localizedTitle:"DsrError_ScriptTimeoutKey",localizedContent:"DsrError_ScriptTimeoutContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=733478"},AA_PowerBIRequestsQueueOverflowError:{localizedTitle:"DsrError_RequestsQueueOverflowKey",localizedMessage:"DsrError_RequestsQueueOverflowMessage",localizedContent:"DsrError_RequestsQueueOverflowContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799576"},AA_PowerBIScriptRuntimeMaxMemoryError:{localizedTitle:"DsrError_ScriptRuntimeMaxMemoryKey",localizedMessage:"DsrError_ScriptRuntimeMaxMemoryMessage",localizedContent:"DsrError_ScriptRuntimeMaxMemoryContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799578"},AA_PowerBIScriptRuntimeMaxDiskIOError:{localizedTitle:"DsrError_ScriptRuntimeMaxDiskIOKey",localizedMessage:"DsrError_ScriptRuntimeMaxDiskIOMessage",localizedContent:"DsrError_ScriptRuntimeMaxDiskIOContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799579"},AA_PowerBIScriptMissingDependencyError:{localizedTitle:"DsrError_ScriptRuntimeMissingDependencyKey",localizedMessage:"DsrError_ScriptRuntimeMissingDependencyMessage",localizedContent:"DsrError_ScriptRuntimeMissingDependencyContent",helpLink:"https://go.microsoft.com/fwlink/?LinkId=799857"},AA_PowerBIScriptSpecificPackageWithMissingDependencyError:{localizedTitle:"DsrError_ScriptRuntimeSpecificPackageWithMissingDependencyKey",localizedMessage:"DsrError_ScriptRuntimeSpecificPackageWithMissingDependencyMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=799858"},AA_PowerBIScriptSpecificPackageMissingSpecificDependencyError:{localizedTitle:"DsrError_ScriptRuntimeSpecificPackageMissingSpecificDependencyKey",localizedMessage:"DsrError_ScriptRuntimeSpecificPackageMissingSpecificDependencyMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=799859"},AA_PowerBIScriptMissingSpecificPackageError:{localizedTitle:"DsrError_ScriptRuntimeMissingSpecificPackageKey",localizedMessage:"DsrError_ScriptRuntimeMissingSpecificPackageMessage",useODataErrorMessageAsContent:!0,helpLink:"https://go.microsoft.com/fwlink/?LinkId=800225"},ModelMeasuresNotSupportedForDetailTable:{localizedMessage:"DsrError_ModelMeasuresNotSupportedForDetailTableMessage",localizedTitle:"DsrError_ModelMeasuresNotSupportedForDetailTableKey",localizedContent:"DsrError_ModelMeasuresNotSupportedForDetailTableValueNoItems",localizedContentWithAffectedItems:"DsrError_ModelMeasuresNotSupportedForDetailTableValueFormat"},ModelUnavailable:{localizedContent:"DsrError_ModelUnavailableValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690862"},NoUniqueKeyForDetailTable:{localizedContent:"DsrError_NoUniqueKeyForDetailTableValue"},OverlappingKeysOnOppositeHierarchies:{localizedTitle:"DsrError_OverlappingKeysKey",localizedContent:"DsrError_OverlappingKeysValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690863"},rsQueryMemoryLimitExceeded:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690864"},rsQueryTimeoutExceeded:{localizedMessage:"DsrError_ResourcesExceededMessage",localizedTitle:"DsrError_ResourcesExceededKey",localizedContent:"DsrError_ResourcesExceededValue",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690864"},rsAccessDenied:{localizedMessage:"DsrError_NoPermissionMessage",localizedTitle:"DsrError_NoPermissionKey",localizedContent:"DsrError_NoAccessForVisual",helpLink:"https://go.microsoft.com/fwlink/?LinkID=690862"},UnsupportedDateTimeLiteral:{localizedMessage:"DsrError_UnsupportedDateTimeMessage",localizedTitle:"DsrError_UnsupportedDateTimeKey",localizedContent:"DsrError_UnsupportedDateTimeValueNoItems",localizedContentWithAffectedItems:"DsrError_UnsupportedDateTimeValueFormat"},InvalidExtensionDax_UnclosedBracketIdentifier:{localizedContentWithAffectedItemsAndPosition:"DsrError_InvalidExtensionDax_UnclosedBracketIdentifier"},InvalidExtensionDax_UnexpectedCloseParenthesis:{localizedContentWithAffectedItemsAndPosition:"DsrError_InvalidExtensionDax_UnexpectedCloseParenthesis"},InvalidFilterComparisonIncompatibleExpressions:{localizedContent:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpression",localizedContentWithAffectedItems:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpressionWithAffectedItems"},InvalidFilterConditionIncompatibleDataType:{localizedContent:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpression",localizedContentWithAffectedItems:"DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpressionWithAffectedItems"},ExtensionMeasureEmptyExpression:{localizedContentWithAffectedItems:"DsrError_ExtensionMeasureEmptyExpression"},ExtensionMeasureNameNotUniqueModel:{localizedContentWithAffectedItems:"DsrError_ExtensionMeasureNameNotUniqueModel"},ExtensionMeasureNameNotUnique:{localizedContentWithAffectedItems:"DsrError_ExtensionMeasureNameNotUnique"},CouldNotResolveModelReferencesInQueryExtensionSchema:{localizedMessage:"DsrError_CouldNotResolveModelRefErrorMessage",localizedTitle:"DsrError_CouldNotResolveModelRefErrorKey",localizedContentWithAffectedItems:"DsrError_CouldNotResolveModelReferencesInQueryExtensionSchema"},QueryExtensionMeasureError:{localizedContentWithAffectedItemsAndPosition:"DsrError_QueryExtensionMeasureError",localizedContentWithAffectedItemsAndPositionAndDetails:"DsrError_QueryExtensionMeasureErrorWithDetails"},QueryExtensionMeasureUnexpectedEndOfUserInput:{localizedContentWithAffectedItems:"DsrError_QueryExtensionMeasureUnexpectedEndOfUserInput"},UnsupportedDataSourceVariables:{localizedMessage:"DsrError_UnsupportedDataSourceVariablesMessage",localizedTitle:"DsrError_UnsupportedDataSourceVariablesKey",localizedContent:"DsrError_UnsupportedDataSourceVariablesContent"},DataExtensionMissingResultSet:{localizedMessage:"DsrError_DataExtensionMissingResultSetMessage",localizedTitle:"DsrError_DataExtensionMissingResultSetKey",localizedContent:"DsrError_DataExtensionMissingResultSetContent"},ProxyModelChainLimitExceeded:{localizedTitle:"DsrError_ProxyModelChainLimitExceededErrorKey",localizedContent:"DsrError_ProxyModelChainLimitExceededErrorContent",helpLink:"https://go.microsoft.com/fwlink/?LinkID=2225640"},CannotUseMultiColumnFilteringWithMappedColumns:{localizedContent:"DsrError_DQP_CannotUseMultiColumnFilteringWithMappedColumns",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},DifferentMappingsWithinSubqueries:{localizedContent:"DsrError_DQP_DifferentMappingsWithinSubqueries",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},FilterIncompatibleWithParameter:{localizedContent:"DsrError_DQP_FilterIncompatibleWithParameter",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},FoundMultipleTargetsWithAtLeastOneMapping:{localizedContent:"DsrError_DQP_FoundMultipleTargetsWithAtLeastOneMapping",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},FoundParameterMappingOnUnsupportedFilter:{localizedContent:"DsrError_DQP_FoundParameterMappingOnUnsupportedFilter",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},InTableConditionNotSupportedWithMappedParameters:{localizedContent:"DsrError_DQP_InTableConditionNotSupportedWithMappedParameters",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},InvalidMappedParameterValueExpression:{localizedContent:"DsrError_DQP_InvalidMappedParameterValueExpression",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MappedTargetMustMatchMappedCondition:{localizedContent:"DsrError_DQP_MappedTargetMustMatchMappedCondition",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MixOfAssignedAndUnassignedColumnsWithinORExpression:{localizedContent:"DsrError_DQP_MixOfAssignedAndUnassignedColumnsWithinORExpression",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MultipleParameterAssignmentsWithinORUnsupported:{localizedContent:"DsrError_DQP_MultipleParameterAssignmentsWithinORUnsupported",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},MultipleParameterMappingsUnsupported:{localizedContent:"DsrError_DQP_MultipleParameterMappingsUnsupported",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},ParameterMappingFilterConflict:{localizedContent:"DsrError_DQP_ParameterMappingFilterConflict",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},ParameterMappingsFoundWithinFilteredEvalExpressionFilter:{localizedContent:"DsrError_DQP_ParameterMappingsFoundWithinFilteredEvalExpressionFilter",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},ParameterMappingsNotSupportedOnHighlights:{localizedContent:"DsrError_DQP_ParameterMappingsNotSupportedOnHighlights",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"},SingleValueParameterWithMultipleValues:{localizedContent:"DsrError_DQP_SingleValueParameterWithMultipleValues",helpLink:"https://go.microsoft.com/fwlink/?linkid=2139315"}},Object.defineProperty(d,"maxNumberOfCommaValues",{get:function(){return 9},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"code",{get:function(){return this.oDataCode},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"oDataErrorMessage",{get:function(){if(this.oDataError&&this.oDataError.message&&this.oDataError.message.value)return this.oDataError.message.value},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"source",{get:function(){switch(this.oDataError.source){case"PowerBI":return"PowerBI";case"External":return"External";case"Unknown":return;case"User":return d.isCodeKnown(this.code)?"User":void 0}"unknown DsrClientError source: ".concat(this.oDataError.source)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"AdditionalErrorMessages",{get:function(){if(this.oDataError){var e=this.oDataError[l.azureValues];if(!_.isEmpty(e))for(var t=0,r=e;t<r.length;t++){var i=r[t];if(!_.isEmpty(i.additionalMessages))return i.additionalMessages}}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"powerBiErrorDetails",{get:function(){if(this.oDataError){var e=this.oDataError[l.azureValues];if(!_.isEmpty(e))for(var t=0,r=e;t<r.length;t++){var i=r[t];if(!_.isEmpty(i.powerBiErrorDetails))return i.powerBiErrorDetails}}},enumerable:!1,configurable:!0}),d.prototype.getDetails=function(e){var t=this.oDataError[l.azureValues],r=null;if(t)for(var i=0,a=t;i<a.length;i++){var n=a[i];if(n.details){r=n.details;break}}var t=d.getErrorDetailsFromStatusCode(this.code,this.oDataErrorMessage,r,this.AdditionalErrorMessages,e),o=t.displayableErrorInfo[0].errorInfoKey;return!d.isCodeKnown(this.code)&&r&&(t.displayableErrorInfo=[]),r&&(o=0===t.displayableErrorInfo.length?o:e.get("DsrError_MoreInfo"),t.displayableErrorInfo.push({errorInfoKey:o,errorInfoValue:r})),d.isDynamicQueryParameterErrorCode(this.code)&&(t.hideDebugInfo=!0),t},d.getErrorDetailsFromStatusCode=function(e,t,r,i,a){var n=a.get("DsrError_Key"),o=a.get("DsrError_UnknownErrorValue"),s=a.get("DsrError_Message"),u=jsCommon.PowerBIDefaultHelpPage,c=l.KnownDsrClientErrors[e],r=(c&&(n=c.localizedTitle?a.get(c.localizedTitle):n,o=d.getContent(e,r,i,c,a)||o,s=c.localizedMessage?a.get(c.localizedMessage):s,u=c.helpLink||u,c.useODataErrorMessageAsContent)&&(o=t||s),{message:s,displayableErrorInfo:[{errorInfoKey:n,errorInfoValue:o}],helpLink:u});return r.debugErrorInfo=[],!c&&e&&r.debugErrorInfo.push({errorInfoKey:p.ErrorCode,errorInfoValue:e}),c&&c.useODataErrorMessageAsContent||!t||r.debugErrorInfo.push({errorInfoKey:p.ODataErrorMessage,errorInfoValue:t}),r},d.getContent=function(e,t,r,i,a){if(i.localizedContentWithAffectedItemsAndPosition||i.localizedContentWithAffectedItemsAndPositionAndDetails){var n=d.findAdditionalMessageWithAffectedItemsAndPosition(e,r);if(i.localizedContentWithAffectedItemsAndPositionAndDetails&&t&&n)return o.format(a.get(i.localizedContentWithAffectedItemsAndPositionAndDetails),o.constructCommaSeparatedList(n.AffectedItems,a,d.maxNumberOfCommaValues),l.formattingService.formatValue(n.Line),l.formattingService.formatValue(n.Position),t);if(i.localizedContentWithAffectedItemsAndPosition&&n)return o.format(a.get(i.localizedContentWithAffectedItemsAndPosition),o.constructCommaSeparatedList(n.AffectedItems,a,d.maxNumberOfCommaValues),l.formattingService.formatValue(n.Line),l.formattingService.formatValue(n.Position))}if(i.localizedContentWithAffectedItems){t=d.getAffectedItemsFromStatusCode(e,r);if(0<t.length)return o.format(a.get(i.localizedContentWithAffectedItems),o.constructCommaSeparatedList(t,a,d.maxNumberOfCommaValues))}if(i.localizedContent)return a.get(i.localizedContent)},d.findAdditionalMessageWithAffectedItemsAndPosition=function(t,e){return _.find(e,(function(e){return e.Code===t&&!_.isEmpty(e.AffectedItems)&&null!=e.Position&&null!=e.Line}))},d.getAffectedItemsFromStatusCode=function(e,t){for(var r=0,i=t;r<i.length;r++){var a=i[r];if(a.Code===e)return a.AffectedItems||[]}return[]},d.prototype.parseCode=function(){var e=this.oDataError.code,t=this.oDataError[l.azureValues],r=[];if(t)for(var i=0,a=t;i<a.length;i++){var n=a[i];n.additionalMessages&&(r=n.additionalMessages)}if(0<r.length)for(var o=0,s=r;o<s.length;o++){var u=s[o];if(d.isCodeKnown(u.Code)){e=u.Code;break}}return e},d.isCodeKnown=function(e){return d.isGeneralKnownErrorCode(e)||d.isDynamicQueryParameterErrorCode(e)},d.isGeneralKnownErrorCode=function(e){switch(e){case"ComplexSlicerNotAllowedWithMeasures":case"ComplexHighlightsNotAllowed":case"ExclusivePercentileOutOfRange":case"InvalidDataShapeNoOutputData":case"InvalidFilterComparisonIncompatibleExpressions":case"InvalidFilterConditionIncompatibleDataType":case"InvalidUnconstrainedJoin":case"ModelUnavailable":case"OverlappingKeysOnOppositeHierarchies":case"rsQueryMemoryLimitExceeded":case"rsQueryTimeoutExceeded":case"CouldNotResolveModelReferencesInSemanticQuery":case"QueryExtensionMeasureUnexpectedEndOfUserInput":case"rsAccessDenied":case"NoUniqueKeyForDetailTable":case"IsRelatedToManyNotSupportedForDetailTable":case"ModelMeasuresNotSupportedForDetailTable":case"UnsupportedDateTimeLiteral":case"InvalidExtensionDax_UnclosedBracketIdentifier":case"InvalidExtensionDax_UnexpectedCloseParenthesis":case"ExtensionMeasureEmptyExpression":case"ExtensionMeasureNameNotUniqueModel":case"ExtensionMeasureNameNotUnique":case"CouldNotResolveModelReferencesInQueryExtensionSchema":case"QueryExtensionMeasureError":case"UnsupportedDataSourceVariables":case"DataExtensionMissingResultSet":case"ProxyModelChainLimitExceeded":return!0;default:return!1}},d.isDynamicQueryParameterErrorCode=function(e){switch(e){case"CannotUseMultiColumnFilteringWithMappedColumns":case"DifferentMappingsWithinSubqueries":case"FilterIncompatibleWithParameter":case"FoundMultipleTargetsWithAtLeastOneMapping":case"FoundParameterMappingOnUnsupportedFilter":case"InTableConditionNotSupportedWithMappedParameters":case"InvalidMappedParameterValueExpression":case"MappedTargetMustMatchMappedCondition":case"MixOfAssignedAndUnassignedColumnsWithinORExpression":case"MultipleParameterAssignmentsWithinORUnsupported":case"MultipleParameterMappingsUnsupported":case"ParameterMappingFilterConflict":case"ParameterMappingsFoundWithinFilteredEvalExpressionFilter":case"ParameterMappingsNotSupportedOnHighlights":case"SingleValueParameterWithMultipleValues":return!0;default:return!1}},d);function d(e){this.oDataError=e,this.oDataCode=this.parseCode()}l.DsrClientError=e})(powerbi=powerbi||{}),(function(e){var r,i,u;function s(e,t,r){t&&t.length,this.computeMetadata(e,r,t)}r=e.data||(e.data={}),i=r.dsr||(r.dsr={}),u=jsCommon.StringExtensions,i.LimitMetadata=function(){},Object.defineProperty(s.prototype,"code",{get:function(){return"DsrLimitsWarning"},enumerable:!1,configurable:!0}),s.prototype.computeMetadata=function(e,t,r){var i,a,n,o;this.limits={},e.Limits&&(r=s.getExceededLimitsDetails(e,r),i=e.Limits,a=!!r.Primary,n=!!r.Secondary,r=!!r.Intersection,e.ScriptVisualBinding?this.hasScriptVisualBinding=!0:(o=e.Expressions&&e.Expressions.Primary&&e.Expressions.Primary.Groupings?e.Expressions.Primary.Groupings:[],e=e.Expressions&&e.Expressions.Secondary&&e.Expressions.Secondary.Groupings?e.Expressions.Secondary.Groupings:[],a&&n?(this.groupings=o.concat(e),this.limits.Primary=s.getLimitMetadata(i.Primary,t),this.limits.Secondary=s.getLimitMetadata(i.Secondary,t)):a?(this.groupings=o,this.limits.Primary=s.getLimitMetadata(i.Primary,t)):n&&(this.groupings=e,this.limits.Secondary=s.getLimitMetadata(i.Secondary,t)),r&&(this.limits.Intersection=s.getLimitMetadata(i.Intersection,t))))},s.prototype.getDetails=function(e){var t=!!this.limits.Primary,r=!!this.limits.Secondary,i=null,a=-1;return this.hasScriptVisualBinding?i=e.get("DsrLimitWarning_TooMuchDataValMultipleColumns"):t||r?i=t&&r?(a=this.limits.Primary.Type,this.getErrorInfoValue(this.groupings,e.get("DsrLimitsWarning_MultipleColumnsWithIssuesFormat"),e)):(a=(t?this.limits.Primary:this.limits.Secondary).Type,this.getErrorInfoValue(this.groupings,s.getDetailedMessageFormatForOneColumn(a,e),e)):this.limits.Intersection&&(a=this.limits.Intersection.Type,i=s.getDetailedMessageFormatForOneColumn(a,e)),i=i||e.get("DsrLimitWarning_TooMuchDataValMultipleColumns"),{message:s.getMessage(a,e),displayableErrorInfo:[{errorInfoKey:s.getKey(a,e),errorInfoValue:i}],helpLink:s.getHelpLink(a)}},s.getExceededLimitsDetails=function(e,t){for(var r=e.Limits,i={},a=0,n=t;a<n.length;a++){var o=n[a];r.Primary&&o.Id===r.Primary.Id?i.Primary=r.Primary:r.Secondary&&o.Id===r.Secondary.Id?i.Secondary=r.Secondary:r.Intersection&&o.Id===r.Intersection.Id&&(i.Intersection=r.Intersection)}return i},s.prototype.getErrorInfoValue=function(e,t,r){if(!e||0===e.length)return null;for(var i=[],a=0,n=e.length;a<n;a++){var o=e[a],o=this.getGroupingNameFromGroupingKeys(o);o&&i.push(o)}var s=i.length;return 0===s?null:(s=1===s?i[0]:i.join(r.get("ListJoin_Separator")),u.format(t,s))},s.prototype.getGroupingNameFromGroupingKeys=function(e){for(var t=e.Keys,r=0,i=t.length;r<i;r++){var a=t[r];if(null!==a.Select&&void 0!==a.Select)return this.columnNameFromIndex?this.columnNameFromIndex(a.Select):void 0}},s.getMessage=function(e,t){switch(e){case 2:return t.get("DsrLimitWarning_RepresentativeSampleMessage");case 3:case 4:return t.get("DsrLimitWarning_HighDensitySampleMessage");default:return t.get("DsrLimitWarning_TooMuchDataMessage")}},s.getKey=function(e,t){switch(e){case 2:return t.get("DsrLimitWarning_RepresentativeSampleKey");case 3:case 4:return t.get("DsrLimitWarning_HighDensitySampleKey");default:return t.get("DsrLimitWarning_TooMuchDataKey")}},s.getDetailedMessageFormatForOneColumn=function(e,t){switch(e){case 2:return t.get("DsrLimitWarning_RepresentativeSampleVal");case 3:return t.get("DsrLimitWarning_HighDensitySampleVal");case 4:return t.get("DsrLimitWarning_OverlappingPointsDetails");default:return t.get("DsrLimitWarning_TooMuchDataVal")}},s.getHelpLink=function(e){switch(e){case 3:return"https://go.microsoft.com/fwlink/?linkid=848757";case 4:return"https://go.microsoft.com/fwlink/?linkid=853820"}},s.getLimitMetadata=function(e,t){return e.Top?{Type:0,Count:s.getLimitCount(e.Top,t)}:e.Bottom?{Type:1,Count:s.getLimitCount(e.Bottom,t)}:e.Sample?{Type:2,Count:s.getLimitCount(e.Sample,t)}:e.BinnedLineSample?{Type:3,Count:s.getBinnedLineSampleCount(e.BinnedLineSample)}:e.OverlappingPointsSample?{Type:4,Count:s.getLimitCount(e.OverlappingPointsSample,t)}:{Type:-1,Count:null}},s.getLimitCount=function(e,t){if(e.Calc&&t){t=i.DataShapeUtility.findCalculation(t,e.Calc);if(t){t=r.PrimitiveValueEncoding.parseValue(t.Value);if(_.isNumber(t))return t}}return e.Count},s.getBinnedLineSampleCount=function(e){return e.MaxTargetPointCount},i.DsrLimitsWarning=s})(powerbi=powerbi||{}),(function(e){var r;function t(e){this.dataShapeMessage=e}e=e.data||(e.data={}),(r=e.dsr||(e.dsr={})).getDsrMessageSeverityValue=function(e){if(0===e)return"Warning"},r.KnownDsrMessages={"ForecastErrorType.DataIsTooSmall":{localizedMessage:"DsrMessage_NotEnoughDataMessage",localizedTitle:"DsrMessage_NotEnoughDataTitle",localizedContent:"DsrMessage_NotEnoughDataContent",isTransformMessage:!0},"ForecastErrorType.TooManyMissingValues":{localizedMessage:"DsrMessage_DataIsTooRandomOrMissingValuesMessage",localizedTitle:"DsrMessage_DataIsTooRandomOrMissingValuesTitle",localizedContent:"DsrMessage_DataIsTooRandomOrMissingValuesContent",isTransformMessage:!0},"ForecastErrorType.NoDominantStepDetected":{localizedMessage:"DsrMessage_DataIsTooRandomOrMissingValuesMessage",localizedTitle:"DsrMessage_DataIsTooRandomOrMissingValuesTitle",localizedContent:"DsrMessage_DataIsTooRandomOrMissingValuesContent",isTransformMessage:!0},"ForecastErrorType.InputTimeStampsNotSorted":{localizedMessage:"DsrMessage_UnsortedDataMessage",localizedTitle:"DsrMessage_UnsortedDataTitle",localizedContent:"DsrMessage_UnsortedDataContent",isTransformMessage:!0},"ForecastErrorType.XAxisIsNull":{localizedMessage:"DsrMessage_ForecastXValueNullMessage",localizedTitle:"DsrMessage_ForecastXValueNullTitle",localizedContent:"DsrMessage_ForecastXValueNullContent",isTransformMessage:!0},"ForecastErrorType.InvalidSeasonality":{localizedMessage:"DsrMessage_ForecastInvalidSeasonalityMessage",localizedTitle:"DsrMessage_ForecastInvalidSeasonalityTitle",localizedContent:"DsrMessage_ForecastInvalidSeasonalityContent",isTransformMessage:!0},"ForecastErrorType.InvalidDataType":{localizedMessage:"DsrMessage_ForecastVariantDataTypeMessage",localizedTitle:"DsrMessage_ForecastVariantDataTypeTitle",localizedContent:"DsrMessage_ForecastVariantDataTypeContent",isTransformMessage:!0},"ForecastErrorType.Unexpected":{localizedMessage:"DsrMessage_ForecastErrorMessage",localizedTitle:"DsrMessage_ForecastErrorTitle",localizedContent:"DsrMessage_ForecastErrorContent",isTransformMessage:!0},ForecastTransformUnsupported:{localizedMessage:"DsrMessage_ForecastNotSupportedMessage",localizedTitle:"DsrMessage_ForecastNotSupportedTitle",localizedContent:"DsrMessage_ForecastNotSupportedContent",isTransformMessage:!0},"ClusteringErrorType.LessThanKDataPoints":{localizedMessage:"DsrMessage_ClusterTooManyClustersTitle",localizedTitle:"DsrMessage_ClusterTooManyClustersTitle",localizedContent:"DsrMessage_ClusterTooManyClustersContent",isTransformMessage:!0},"ClusteringErrorType.TooManyDataPoints":{localizedMessage:"DsrMessage_ClusterExceedsLimitTitle",localizedTitle:"DsrMessage_ClusterExceedsLimitTitle",localizedContent:"DsrMessage_ClusterExceedsLimitContent",isTransformMessage:!0},"ClusteringErrorType.InvalidDataType":{localizedMessage:"DsrMessage_ClusterVariantDataTypeTitle",localizedTitle:"DsrMessage_ClusterVariantDataTypeTitle",localizedContent:"DsrMessage_ClusterVariantDataTypeContent",isTransformMessage:!0}},Object.defineProperty(t.prototype,"code",{get:function(){return this.dataShapeMessage.Code},enumerable:!1,configurable:!0}),t.prototype.getDetails=function(e){var t=r.KnownDsrMessages[this.dataShapeMessage.Code];return{message:e.get(t.localizedMessage),displayableErrorInfo:[{errorInfoKey:e.get(t.localizedTitle),errorInfoValue:e.get(t.localizedContent)}]}},t.prototype.isTransformMessage=function(){var e=r.KnownDsrMessages[this.code];return e&&e.isTransformMessage},r.DsrMessage=t})(powerbi=powerbi||{}),(function(x){var C,E,o,D;function I(e){if(2===e.Version)return!0}function l(e,t,r,i,a,n,o,s,u,c,l,p,d,h,m){if(!r)return null;var f;if(s=s||{},4&e&&(e|=8),I(r)){if(f="dsr2-read",performance&&performance.mark&&performance.mark(f+"-start"),s.mode="V2",1!==_.size(r.DS))return null;var y=E.createDsrParserContext(t),g=E.reader.V2.createDsrParser(r,y),y=(function(e,t,r,i,a){var n,o,s,u,c,l={columns:e.createDataViewMetadataColumns()},p={dataView:{metadata:l}};(function(e,t){e.reset();e=e.dataShapes();e.count(),e.next(),e.complete()||(t.dataView.metadata.segment={},t.restartToken=e.restartTokens())})(t,p),e.includes(2)&&(d=D((function(){(n=E.converters.createMatrix(e,t,l,a,i.synchronizedGroupsEnabled,i.scopedMeasuresEnabled))&&(p.dataView.matrix=n,t.lockCache())})),n)&&(r.matrix=d);e.includes(1)&&(d=D((function(){(o=E.converters.categorical(e,t,l,i))&&(p.dataView.categorical=o,t.lockCache())})),o)&&(r.categorical=d);e.includes(8)&&(d=D((function(){(s=E.converters.createTable(e,t,l))&&(p.dataView.table=s,t.lockCache())})),s)&&(r.table=d);e.includes(16)&&(d=D((function(){(u=E.converters.createTree(e,t))&&(p.dataView.tree=u,t.lockCache())})),u)&&(r.tree=d);{var d;e.includes(4)&&(d=D((function(){(c=E.converters.createSingle(e,t))&&(p.dataView.single=c)})),c)&&(r.single=d)}return p})(new E.DataViewConverterContext(e,t,y,h,g.dataShapes()),g,s,i,h),i=(g.reset(),g.dataShapes()),g=(i.next(),i.limitsExceeded()&&(y.warnings||(y.warnings=[]),h=new E.DsrLimitsWarning(t,E.toDsrV1Limit(i),E.toDsrV1Calc(i)),y.warnings.push(h),E.reader.V1.applyReductionMetadata(y.dataView,h.limits)),i),v=y,S=g.messages();if(S)for(;S.next();)E.KnownDsrMessages[S.code()]&&S.severity()===E.getDsrMessageSeverityValue(0)&&(v.warnings||(v.warnings=[]),v.warnings.push(S.dsrMessage()));y.dataView&&!_.isEmpty(n)&&(C.ClientSideFilter.applyClientSideFilters(y.dataView,n),y.disallowPersisting=!0)}else f="dsr1-read",performance&&performance.mark&&performance.mark(f+"-start"),s.mode="V1Old",y=E.reader.V1.read(e,t,r,s,a,n,o);return y&&(y.timestamp=l,y.fromCache=p,d)&&!y.fromCache&&(y.performanceActivities=E.parseExecutionEvents(d.Events,m&&m.getProperty("rootId"))),performance&&(performance.mark&&performance.mark(f+"-end"),performance.measure)&&performance.measure(f,f+"-start",f+"-end"),s.total=jsCommon.performance.now()-c,u&&u.logEvent(x.telemetry.DataDsrToDataView,{jsonparse:s.jsonParse,categorical:s.categorical,table:s.table,tree:s.tree,matrix:s.matrix,single:s.single,script:s.script,total:s.total,mode:s.mode,targetDataView:e,dsrLength:s.dsrLength,id:o}),y}C=x.data||(x.data={}),E=C.dsr||(C.dsr={}),o=jsCommon.JsonExtensions,D=jsCommon.PerfTimer.logTime,E.isDsrV2=I,E.getDsrV2MinorVersion=function(e){return e.MinorVersion},E.read=function(e,t,r,i,a,n){var o,s,u,c;return t?(t.data&&(t=t.data),n&&n.isRunning()&&(o=n.createChildActivity({name:"Parse Query Result"})),s={},u=t,c=jsCommon.performance.now(),_.isString(t)&&(s.dsrLength=t.length,s.jsonParse=D((function(){u=JSON.parse(t)})),o)&&o.setProperty("metrics",{jsonParse:s.jsonParse}),e=l(e,u.descriptor,u.dsr,r,u.requestId,u.clientSideFilters,a,s,i,c,u.timestamp,u.fromCache,u.metrics,r.scopedAggregates,n),null!=r&&r.queryContext&&(a=u.queryContext)&&(e.queryContext=a),o&&o.resolve(),e):null},E.readDsr=l,E.containsRestartToken=function(e){if(e){e=e.data;if(_.isString(e)&&(e=o.tryParseJSON(e)),!_.isEmpty(e)&&(r=e.dsr))if(I(r)){for(var t=E.reader.V2.createDsrParser(r,void 0).dataShapes();t.next();)if(t.hasRestartTokens())return!0}else for(var r=r.DataShapes,i=0,a=r;i<a.length;i++){var n=a[i];if(!_.isEmpty(n.RestartTokens))return!0}}return!1}})(powerbi=powerbi||{}),(function(e){var M,t;function p(e,t,r,i,a){null==t.Select&&t.ScriptVisualBinding,this.targets=e,this.descriptor=t,this.selects=t.Select,this.selectIndexToColumn={},this.aggregateCalcMetadata={},this._calcInfo={},this.calcIdToColumnIndices={},this.dataMemberIdToIdentityBuilder={};e=t.Expressions;this._primaryAxisGroupings=e&&e.Primary&&e.Primary.Groupings,this._secondaryAxisGroupings=e&&e.Secondary&&e.Secondary.Groupings,this.measureSelectIndices=[],this.dataMemberIdToMetadata=r.dataMemberIdToMetadata,this.maxPrimaryDepth=r.maxPrimaryDepth,this.maxSecondaryDepth=r.maxSecondaryDepth,this.primarySynchronizedGroups=r.primarySynchronizedGroups,this.scopedAggregatesEnabled=i,this.dataShapeParser=a}e=e.data||(e.data={}),M=e.dsr||(e.dsr={}),t=jsCommon.EnumExtensions,Object.defineProperty(p.prototype,"primaryAxisGroupings",{get:function(){return this._primaryAxisGroupings},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"secondaryAxisGroupings",{get:function(){return this._secondaryAxisGroupings},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"calcInfo",{get:function(){return this._calcInfo},enumerable:!1,configurable:!0}),p.prototype.createContextForPrimarySynchronizedGroup=function(e,t){var r=this,t=new p(this.targets,this.descriptor,e.context,this.scopedAggregatesEnabled,t);return t._primaryAxisGroupings=_.map(e.groupings,(function(e){return r.primaryAxisGroupings[e].SynchronizedGroup})),t._secondaryAxisGroupings=void 0,t._calcInfo=this._calcInfo,t},p.prototype.includes=function(e){return t.hasFlag(this.targets,e)},p.prototype.createDataViewMetadataColumns=function(){var e=this.selects;if(!_.isEmpty(e)){var t=[],r=e.length;this.selectIndexToColumnIndex=new Array(r);for(var i,a=0,n=r;a<n;a++){var o=e[a];if(o){o.Kind,M.SelectKind.None;var s=this.createColumns(t,a),u=s.column,c=s.columnIdx,s=s.dynamicFormatColumn,l=(this.selectIndexToColumn[a]=u,this.selectIndexToColumnIndex[a]=c,o.Kind===M.SelectKind.Measure&&this.measureSelectIndices.push(a),o.Aggregates);if(l)for(var p=0,d=l;p<d.length;p++){var h=d[p],m=this.getAggregateKind(h.Aggregate);this.createAggregateCalcMetadata(h.Ids,m,u,a,h.Aggregate)}l=o.Value;l&&(this.calcIdToColumnIndices[l]||(this.calcIdToColumnIndices[l]=[]),this.calcIdToColumnIndices[l].push(c),null!=o.Depth&&null!=o.SecondaryDepth||(this.aggregateCalcMetadata[l]={source:u,aggregateKind:4,selectIdx:a})),o.Kind===M.SelectKind.Measure&&(o.Subtotal&&this.createAggregateCalcMetadata(o.Subtotal,1,u,a),o.SubtotalDynamicFormat&&this.createAggregateCalcMetadata(_.map(o.SubtotalDynamicFormat,(function(e){return e&&e.Format})),1,s,a),o.Count&&(_.size(o.Count),this.createAggregateCalcMetadata(o.Count,5,u,a)),o.Max&&this.createAggregateCalcMetadata(o.Max,2,u,a),o.Min)&&this.createAggregateCalcMetadata(o.Min,3,u,a)}}for(i in this.parseAxisGroupings(this.primaryAxisGroupings),this.parseAxisGroupings(this.secondaryAxisGroupings),this.calcIdToColumnIndices)1<_.size(this.calcIdToColumnIndices[i])&&(this.calcInfo[i].hasDuplicateColumnIndices=!0,this.calcInfo[i].isGroupKeyButNotSelect);return this.scopedAggregatesEnabled&&(this.createScopedAggregateMetadata(),this.fillDataShapeScopeAggregateValues()),t}},p.prototype.parseAxisGroupings=function(e){if(e)for(var t=0,r=e;t<r.length;t++){var i=r[t],a=i.SynchronizedGroup;a&&(this.parseGroupingKeys(a.Keys,!0),a=i.SynchronizationIndex)&&(this.calcInfo[a]={kind:M.SelectKind.Measure,calcKind:10}),this.parseGroupingKeys(i.Keys,!1)}},p.prototype.parseGroupingKeys=function(e,t){for(var r,i=this.calcInfo,a=this.selects,n=0,o=e;n<o.length;n++){var s=o[n],u=a[s.Select];null!=u?t?(null!=(r=u.Synchronized)&&r.Value,i[null==(r=u.Synchronized)?void 0:r.Value].forIdentity=!0):i[u.Value].forIdentity=!0:s.Calc&&(i[s.Calc]={kind:M.SelectKind.Group,forIdentity:!0,isGroupKeyButNotSelect:!0})}},p.prototype.createAggregateCalcMetadata=function(e,t,r,i,a){for(var n=0,o=e;n<o.length;n++){var s=o[n],s=this.aggregateCalcMetadata[s]={source:r,aggregateKind:t,selectIdx:i};a&&(s.aggregate=a)}},p.prototype.getAggregateKind=function(e){return e.Average?6:e.Max?2:e.Min?3:e.Median?8:e.Percentile?7:void 0},p.prototype.createColumns=function(e,t){var r=e.length,i=this.createMetadataColumn(t),a=(e.push(i),this.selects[t]),n=a.Kind,o=this.calcInfo,s=(o[a.Value]={kind:n,columnIndex:r,selectIdx:t,calcKind:1},a.Synchronized);if(s&&(M.SelectKind.Group,s.Value,s.GroupKeys,o[s.Value]={kind:n,columnIndex:r,selectIdx:t,calcKind:1},o[a.Value].isSynchronized=!0),a.Subtotal){M.SelectKind.Measure;for(var u=0,c=a.Subtotal;u<c.length;u++)o[I=c[u]]={columnIndex:r,kind:n,selectIdx:t,calcKind:2}}if(a.Highlight){M.SelectKind.Measure;s=a.Highlight.Value,s=(s&&(o[s]={columnIndex:r,kind:n,selectIdx:t,calcKind:3}),a.Highlight.Subtotal);if(s)for(var l=0,p=s;l<p.length;l++)o[I=p[l]]={columnIndex:r,kind:n,selectIdx:t,calcKind:9}}if(this.scopedAggregatesEnabled){if(!_.isEmpty(a.Aggregates))for(var d=0,h=a.Aggregates;d<h.length;d++)if((y=h[d]).Aggregate.Scope)for(var m=0,f=y.Ids;m<f.length;m++)o[f[m]]={columnIndex:r,kind:n,selectIdx:t,calcKind:7};s=a.Highlight;if(s&&!_.isEmpty(s.Aggregates))for(var y,g=0,v=s.Aggregates;g<v.length;g++)if((y=v[g]).Aggregate.Scope)for(var S=0,x=y.Ids;S<x.length;S++)o[x[S]]={columnIndex:r,kind:n,selectIdx:t,calcKind:8}}s=this.tryCreateDynamicFormatColumnMetadata(t,i);if(s){M.SelectKind.Measure;var C=r+1;if(e.push(s),o[a.DynamicFormat.Format]={columnIndex:C,kind:M.SelectKind.Measure,selectIdx:t,calcKind:4},a.SubtotalDynamicFormat)for(var E=0,D=a.SubtotalDynamicFormat;E<D.length;E++){var I,w=(I=D[E])&&I.Format;w&&(o[w]={columnIndex:C,kind:M.SelectKind.Measure,selectIdx:t,calcKind:5})}e=a.Highlight&&a.Highlight.DynamicFormat&&a.Highlight.DynamicFormat.Format;e&&(o[e]={columnIndex:C,kind:M.SelectKind.Measure,selectIdx:t,calcKind:6})}return{column:i,columnIdx:r,dynamicFormatColumn:s}},p.prototype.createMetadataColumn=function(e){var t=this.selects[e],r={displayName:"",index:e},i=(t.Format&&(r.format=t.Format),r.type=M.DataShapeUtility.describeDataType(t.Type,t.DataCategory),t.Kind===M.SelectKind.Measure&&(r.isMeasure=!0),t.GroupKeys);if(i)for(var a=r.identityExprs=new Array(i.length),n=0;n<i.length;n++)a[n]=M.convertKey(i[n],e,this.selects);return r},p.prototype.tryCreateDynamicFormatColumnMetadata=function(e,t){var e=this.selects[e];if(e.DynamicFormat&&e.DynamicFormat.Format)return t.formatSource={formatString:e={displayName:"",isMeasure:!0}},e},p.prototype.createScopedAggregateMetadata=function(){for(var e=this.selects,t=e.length,r=this.selectIndexToColumn,i=0,a=t;i<a;i++){var n=e[i];if(n){var o=n.Aggregates,s=r[i];if(!_.isEmpty(o))for(var u=0,c=o;u<c.length;u++){var l=c[u];this.createScopedAggregateCalcMetadata(l,s)}o=n.Highlight;if(o&&!_.isEmpty(o.Aggregates))for(var p=0,d=o.Aggregates;p<d.length;p++){l=d[p];this.createScopedAggregateCalcMetadata(l,s)}}}},p.prototype.createScopedAggregateCalcMetadata=function(e,t){var r=e.Aggregate,i=r.Scope;if(i){for(var a=this.selectIndexToColumn,n=i.PrimaryDepth,o=(i.SecondaryDepth,new Array(n)),s=this.primaryAxisGroupings,u=0,c=0;c<n;c++)for(var l=0,p=s[c].Keys;l<p.length;l++){var d=p[l].Select,d=a[d];o[u++]=d}for(var h={column:t,inputScope:o,respectInstanceFilters:r.RespectInstanceFilters},i=e.Ids,m=this.calcInfo,f=0,y=i;f<y.length;f++){var g=m[y[f]];g.scopedAggregateCalcMetadata={metadata:h,aggregateKind:this.getAggregateKind(r)}}}},p.prototype.fillDataShapeScopeAggregateValues=function(){var c=this.dataShapeParser;if(c){var l=this.calcInfo;for(c.reset(),c.next();c.nextCalc();)!(function(){var e=l[c.calcId()];if(!e||!e.scopedAggregateCalcMetadata)return;var t=e.scopedAggregateCalcMetadata,r=t.metadata,i=r.column,a=r.inputScope,n=r.respectInstanceFilters,o={inputScope:a,respectInstanceFilters:n,values:{},highlight:{}},s=(i.scopedAggregates?(r=_.find(i.scopedAggregates,(function(e){return p.sameScopedAggregatesInputScope(e.inputScope,a)&&e.respectInstanceFilters===n})))?o=r:i.scopedAggregates.push(o):i.scopedAggregates=[o],void 0);switch(e.calcKind){case 7:s=o.values;break;case 8:s=o.highlight}var u=c.calcValue();switch(t.aggregateKind){case 3:s.min=u;break;case 2:s.max=u;break;case 6:s.avg=u}})()}},p.sameScopedAggregatesInputScope=function(e,t){if(e!==t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1}return!0},M.DataViewConverterContext=p})(powerbi=powerbi||{}),(function(a){var e,n;function o(t,e,r,i,a,n,o){Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){return i.logEvent(a,{targetDataView:n,visualType:o}),delete e[r],t[r]},set:function(e){t[r]=e}})}e=a.data||(a.data={}),n=a.Prototype,(e.DataViewTelemetry||(e.DataViewTelemetry={})).wrapKindProperties=function(e,t,r){var i=n.inherit(e);return o(e,i,"tree",t,a.telemetry.DataDataViewKindAccess,16,r),o(e,i,"single",t,a.telemetry.DataSampledDataViewKindAccess,4,r),i}})(powerbi=powerbi||{}),(function(e){var a,S,r;function t(e){this.values=e,this.parsedValues=new Array(e.length),this.parsedValueExprs=new Array(e.length)}function i(e){if(e)for(var t in this.resolvedValueDictionaries={},e)this.resolvedValueDictionaries[t]=new r(e[t])}function x(e,t,r,i,a,n){var o,i=i[r]=[],a=(function(e,t){for(var r=e.length,i=new Array(r),a=0;a<r;a++)i[a]=u(e[a],e[a].Select,t);return i})(t.Keys,a),s=t.Member,s=(s&&(i.push(s),o=e[s]={identityFields:a,axisGrouping:t,kind:1,depth:r+1},n?o.forSynchronization=!0:t.SynchronizedGroup&&(o.isSynchronized=!0),t.RestartIdentities)&&(o.restartValuesBuilder=new S.RestartValuesBuilder(t.RestartIdentities)),t.SubtotalMember);s&&(i.push(s),o={identityFields:a,kind:2,depth:r},n?o.forSynchronization=!0:t.SynchronizedGroup&&(o.isSynchronized=!0),e[s]=o)}function u(e,t,r){var e=e.Source;return e?a.SQExprBuilder.columnRef(a.SQExprBuilder.entity(S.schemaName(e),e.Entity||e.EntitySet),e.Property):(0<=t&&_.size(r),(e=r[t].Name)?a.SQExprBuilder.selectRef(e):void 0)}a=e.data||(e.data={}),S=a.dsr||(a.dsr={}),t.prototype.getCalcValue=function(e,t){var r;if(!(e>=this.parsedValues.length))return void 0===(r=this.parsedValues[e])&&(r=a.PrimitiveValueEncoding.parseOptimizedValue(this.values[e],t),this.parsedValues[e]=r),r},t.prototype.getCalcValueExpr=function(e,t,r){var i;if(!(t>=this.parsedValues.length))return void 0===(i=this.parsedValueExprs[t])&&(i=a.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(e,this.values[t],r),this.parsedValueExprs[t]=i),i},r=t,i.prototype.getCalcValue=function(e,t,r){if(t&&"number"==typeof e)return this.resolvedValueDictionaries,this.resolvedValueDictionaries[t].getCalcValue(e,r)},i.prototype.getCalcValueExpr=function(e,t,r,i){if(r&&"number"==typeof t)return this.resolvedValueDictionaries,this.resolvedValueDictionaries[r].getCalcValueExpr(e,t,i)},S.ValueDictionaryHandler=i,S.createDsrParserContext=function(e){var t=e.Select,r=e.Expressions,i=r&&r.Primary,a=i&&i.Groupings,n=i&&i.Synchronization,o=r&&r.Secondary&&r.Secondary.Groupings,s={},u=a&&[],c=o&&[];if(a)for(var l=0,p=a.length;l<p;l++)x(s,a[l],l,u,t);if(o)for(l=0,p=o.length;l<p;l++)c[l]=[],x(s,o[l],l,c,t);var d=0,h=[];if(t&&o)for(l=0;l<t.length;l++){var m=t[l];m&&m.Kind===S.SelectKind.Measure&&null==m.Depth&&null==m.SecondaryDepth&&(h[d++]=l)}var f={intersectionMeasureToSelectIndex:h,secondaryLeafDataMemberId:o&&[],dataMemberIdToMetadata:s,selects:t,maxPrimaryDepth:_.size(a),maxSecondaryDepth:_.size(o),memberInstanceCalcMetadataCache:{},calcIdToCalcMetadata:{},intersectionCalcMetadataCache:{},primaryDataMemberIdCache:u,secondaryDataMemberIdCache:c,instancesCalcCache:{},lastIntersectionCalcCache:{},locked:!1};if(n){var y=n.length;f.primarySynchronizedGroups=new Array(y);for(l=0;l<y;l++){var g=n[l],v=_.last(g.Groupings);f.primarySynchronizedGroups[l]={groupings:g.Groupings,dataShapeId:g.DataShape,synchronizationIndexCalcId:a[v].SynchronizationIndex,context:(function(e,t){e.Expressions.Primary;for(var r=e.Expressions.Primary.Groupings,i=e.Select,a={},n=[],o=t.Groupings,s=0;s<o.length;s++){var u=o[s];x(a,r[u].SynchronizedGroup,s,n,i,!0)}return{dataMemberIdToMetadata:a,selects:i,maxPrimaryDepth:_.size(o),primaryDataMemberIdCache:n,memberInstanceCalcMetadataCache:{},calcIdToCalcMetadata:{},locked:!1,intersectionCalcMetadataCache:{},maxSecondaryDepth:0,secondaryDataMemberIdCache:void 0,instancesCalcCache:{},lastIntersectionCalcCache:{},intersectionMeasureToSelectIndex:[],secondaryLeafDataMemberId:void 0}})(e,g)}}}return f},S.convertKey=u})(powerbi=powerbi||{}),(function(e){var n;function t(e,t){this.context=e,this.calcIdToGroupingKeysIndex={},this.initialize(t)}n=e.data||(e.data={}),e=n.dsr||(n.dsr={}),t.prototype.initialize=function(e){var t,r=this.context,i=r.selects,a=r.dataMemberIdToMetadata[e];this.identityFields=a.identityFields,this.identityFieldsCount=this.identityFields.length;var n=a.axisGrouping.Keys;n.length,this.identityFieldsCount;for(var o=0;o<this.identityFieldsCount;o++){var s=n[o],u=void 0;s.Calc?u=s.Calc:null!=s.Select&&0<=s.Select&&(u=a.forSynchronization?null==(t=i[s.Select].Synchronized)?void 0:t.Value:i[s.Select].Value),this.calcIdToGroupingKeysIndex[u]=o}},t.prototype.reset=function(){this.identityParts=new Array(this.identityFieldsCount)},t.prototype.addExpr=function(e,t){var e=this.calcIdToGroupingKeysIndex[e],r=this.identityFields[e];r&&(this.identityParts[e]=n.SQExprBuilder.equal(r,t))},t.prototype.getIdentity=function(){for(var e,t=this.identityParts,r=this.identityFieldsCount,i=0;i<r;i++)e=n.SQExprBuilder.and(e,t[i]);var a=n.createDataViewScopeIdentity(e);return a},t.prototype.getIdentityFields=function(){return this.identityFields},e.IdentityBuilder=t})(powerbi=powerbi||{}),(function(e){var u;function t(e){this.context=e,this.measureValueAggregatorsBySelectIdx=[]}e=e.data||(e.data={}),u=e.dsr||(e.dsr={}),t.prototype.read=function(e,t){void 0===t&&(t=!0);for(var r=this.context,i=r.selects,a=new Array(i.length),n=new Array(i.length);e.nextCalc();){var o=r.aggregateCalcMetadata[e.calcId()];o&&o.aggregateKind&&(u.DataShapeUtility.fillMetadataColumnAggregate(e.calcValue(),o,!1),3===o.aggregateKind&&(a[o.selectIdx]=!0),2===o.aggregateKind)&&(n[o.selectIdx]=!0)}t&&this.addLocalAggregators(a,n)},t.prototype.addLocalAggregators=function(e,t){for(var r=this.measureValueAggregatorsBySelectIdx,i=this.context.measureSelectIndices,a=i.length,n=!1,o=0;o<a;o++){var s=i[o];e[s]||(n=!0,r[s]||(r[s]=[]),r[s].push(new u.MinValueAggregator)),t[s]||(n=!0,r[s]||(r[s]=[]),r[s].push(new u.MaxValueAggregator))}this.hasLocalAggregators=n},t.prototype.update=function(e,t){if(this.hasLocalAggregators){t=this.measureValueAggregatorsBySelectIdx[t];if(t)for(var r=0,i=t;r<i.length;r++)i[r].update(e)}},t.prototype.copyToColumns=function(){for(var e=this.context.measureSelectIndices,t=e.length,r=0;r<t;r++){var i=e[r],a=this.context.selectIndexToColumn[i],i=this.measureValueAggregatorsBySelectIdx[i];if(i&&i)for(var n=0,o=i;n<o.length;n++){var s=o[n],u=s.value();void 0!==u&&(a.aggregates||(a.aggregates={}),a.aggregates[s.name]=u)}}},u.Aggregator=t})(powerbi=powerbi||{}),(function(e){var a,h,n;function t(){}a=e.data||(e.data={}),((h=a.dsr||(a.dsr={})).converters||(h.converters={})).categorical=function(e,t,r,i){if(n.isCompatible(e))return(new n).run(e,t,r)},t.prototype.run=function(e,t,r){this.metadata=r,this.context=e,this.dsrParser=t,this.selectIndexToCategoryColumn={},this.selectIndexToPrimaryValueColumn={},this.selectIndexToDynamicFormatColumn={},this.intersectionValueColumnsMap=[],this.intersectionDynamicFormatColumnsMap=[],this.primaryMeasureCount=0,this.intersectionMeasureCount=0,this.seriesSelectIndex=-1,this.primaryMeasureSelectIndexMap=[],this.intersectionMeasuresSelectIndexMap=[],this.selectIndexToValueColumnsMap=[],t.reset(),this.aggregator=new h.Aggregator(e);var i,r=this.dsrParser.dataShapes(),t=(r.next(),{});return 0===e.maxPrimaryDepth?(this.readSelectsAndCreateCategoryColumns(void 0,void 0),i=t.values=a.DataViewTransform.createValueColumns(),this.readMeasuresWithNoGrouping(r,i)):(e=[],i=void this.readSelectsAndCreateCategoryColumns(t.categories=[],e),(0<this.intersectionMeasureCount||0<this.primaryMeasureCount||0<=this.seriesSelectIndex)&&(t.values=i=a.DataViewTransform.createValueColumns()),this.readSecondaryAndCreateValueColumns(i),this.readData(r,i,e,r={}),void 0!==r.value&&(t.lastMergeIndex=r.value)),t},t.isCompatible=function(e){return e.maxPrimaryDepth<=1&&e.maxSecondaryDepth<=1&&!(0===e.maxPrimaryDepth&&0<e.maxSecondaryDepth)&&0<_.size(e.selects)},t.prototype.readSelectsAndCreateCategoryColumns=function(e,t){for(var r=this.context,i=r.selectIndexToColumn,a=r.selects,n=a.length,r=this.dsrParser.dataShapes().secondaryHierarchy(),o=(this.primaryMeasureSelectIndexMap=new Array(a.length),this.intersectionMeasuresSelectIndexMap=new Array(a.length),!!r),s=0;s<n;s++){var u,c=a[s];c&&c.Value&&(c.Kind===h.SelectKind.Group?null!=c.SecondaryDepth?this.seriesSelectIndex=s:null!=c.Depth&&(u={source:i[s],values:[],identity:t},e.push(u),this.selectIndexToCategoryColumn[s]=u):c.Kind===h.SelectKind.Measure&&(o&&null==c.Depth?this.intersectionMeasuresSelectIndexMap[this.intersectionMeasureCount++]=s:this.primaryMeasureSelectIndexMap[this.primaryMeasureCount++]=s))}},t.prototype.readSecondaryAndCreateValueColumns=function(e){var t=this.dsrParser.dataShapes().secondaryHierarchy();!t?this.addPrimaryValueColumns(e,!0):(this.addIntersectionValueColumns(e,t),0<this.primaryMeasureCount&&this.addPrimaryValueColumns(e))},t.prototype.addIntersectionValueColumns=function(e,t){for(var r=new Array,i=this.context;t.next();){var a=t.id(),n=t.instances();if(2===i.dataMemberIdToMetadata[a].kind)for(;n.next(););else{for(var o=i.dataMemberIdToIdentityBuilder[a],s=(o||(o=new h.IdentityBuilder(i,a),i.dataMemberIdToIdentityBuilder[a]=o),a=o.getIdentityFields(),-1);n.next();){s++,o.reset();for(var u=void 0,c=void 0;n.nextCalc();){var c=n.calcId(),l=this.context.calcInfo[c];l.isGroupKeyButNotSelect||(u=n.calcValue()),l.forIdentity&&o.addExpr(c,n.calcValueAsExpr())}this.addIntersectionValueColumnsCore(e,r,c,u,s,o.getIdentity()),n.intersections(),n.members()}0===e.length&&0===r.length&&this.addIntersectionValueColumnsCore(e,r,void 0,void 0,0,void 0),e.grouped=function(){return r},e.source=this.context.selectIndexToColumn[this.seriesSelectIndex],e.identityFields=a}}},t.prototype.addIntersectionValueColumnsCore=function(o,e,t,s,u,c){for(var l,p=this.context,d=p.selects,r=this.intersectionMeasureCount,h=new Array(r),m=this.metadata.columns,f=this,i=0;i<r;i++)!(function(e){var t=void 0,r=f.intersectionMeasuresSelectIndexMap[e],i=(void 0!==s?((t=p.createColumns(m,r).column).groupName=s,t.rootSource=p.selectIndexToColumn[r]):t=_.find(m,(function(e){return e.index===r})),f.createValueColumn(t,c,r,!!d[r].Highlight,!1)),e=(o.push(i),h[e]=i,d[r]),a=f.intersectionValueColumnsMap[u],n=((a=a||(f.intersectionValueColumnsMap[u]={}))[e.Value]=i,e.Highlight&&e.Highlight.Value);n&&(a[n]=i),t.formatSource&&t.formatSource.formatString&&(null!=(l=e.DynamicFormat)&&l.Format,a=f.createValueColumn(t.formatSource.formatString,void 0,r,!!d[r].Highlight,!0),(n=(n=f.intersectionDynamicFormatColumnsMap[u])||(f.intersectionDynamicFormatColumnsMap[u]={}))[e.DynamicFormat.Format]=a,o.push(a),i=null==(l=null==(l=e.Highlight)?void 0:l.DynamicFormat)?void 0:l.Format)&&(n[i]=a)})(i);var a={values:h};void 0!==s&&(a.name=s),void 0!==c&&(a.identity=c),e.push(a)},t.prototype.addPrimaryValueColumns=function(e,t){for(var r,i=new Array,a=this.context,n=a.selects,o=0;o<this.primaryMeasureCount;o++){var s=this.primaryMeasureSelectIndexMap[o],u=a.selectIndexToColumn[s],c=this.createValueColumn(u,void 0,s,!!n[s].Highlight,!1);this.selectIndexToPrimaryValueColumn[s]=c,i.push(c),e.push(c),u.formatSource&&u.formatSource.formatString&&(c=this.createValueColumn(u.formatSource.formatString,void 0,s,!!n[s].Highlight,!0),this.selectIndexToDynamicFormatColumn[s]=c,e.push(c),i.push(c))}t&&e&&(r=[{values:i}],e.grouped=function(){return r})},t.prototype.createValueColumn=function(e,t,r,i,a){e={source:e,values:[]};return i&&(e.highlights=[]),t&&(e.identity=t),a||(this.selectIndexToValueColumnsMap[r]||(this.selectIndexToValueColumnsMap[r]=[])).push(e),e},t.prototype.readData=function(e,t,r,i){var a=this.context,n=e.primaryHierarchy();for(this.aggregator.read(e,0===this.intersectionMeasureCount);n.next();){var o=n.id(),s=a.dataMemberIdToMetadata[o];if(s){for(var s=1===s.kind,u=a.dataMemberIdToIdentityBuilder[o],c=(!u&&s&&(u=new h.IdentityBuilder(a,o),a.dataMemberIdToIdentityBuilder[o]=u),n.instances());c.next();){for(u&&u.reset(),1===c.restartFlagKind()&&(i.value=c.currentIndex());c.nextCalc();)this.readPrimaryHierarchyCalc(c,u);u&&r.push(u.getIdentity()),this.parseIntersections(c),c.members()}if(s)for(var l=u.getIdentityFields(),p=0;p<a.selects.length;p++){var d=this.selectIndexToCategoryColumn[p];d&&(d.identityFields=l)}}}this.aggregator.copyToColumns(),this.copyAggregatesToValueColumns()},t.prototype.copyAggregatesToValueColumns=function(){for(var e=this.context.measureSelectIndices,t=this.context.selectIndexToColumn,r=e.length,i=0;i<r;i++){var a=e[i],n=t[a].aggregates;if(n){var o=this.selectIndexToPrimaryValueColumn[a],o=(o&&h.DataShapeUtility.copyAggregates(n,o),this.selectIndexToValueColumnsMap[a]);if(o)for(var s=0,u=o;s<u.length;s++){var c=u[s];h.DataShapeUtility.copyAggregates(n,c)}}}},t.prototype.readPrimaryHierarchyCalc=function(e,t){var r,i=e.calcId(),a=this.context.aggregateCalcMetadata[i];a&&1===a.aggregateKind?h.DataShapeUtility.fillMetadataColumnAggregate(e.calcValue(),a):(a=this.context.calcInfo[i])&&(r=e.calcValue(),a.kind===h.SelectKind.Group?(a.isGroupKeyButNotSelect||this.selectIndexToCategoryColumn[a.selectIdx].values.push(r),a.forIdentity&&t.addExpr(i,e.calcValueAsExpr())):a.kind===h.SelectKind.Measure&&(1===(t=a.calcKind)?(this.selectIndexToPrimaryValueColumn[a.selectIdx].values.push(r),this.aggregator.update(r,a.selectIdx)):4===t?this.selectIndexToDynamicFormatColumn[a.selectIdx].values.push(r):3===t?this.selectIndexToPrimaryValueColumn[a.selectIdx].highlights.push(r):6===t&&this.selectIndexToDynamicFormatColumn[a.selectIdx].highlights.push(r)))},t.prototype.parseIntersections=function(e){var t=e.intersections();if(t)for(var r=this.context.calcInfo,i=0;t.next();){var a=this.intersectionValueColumnsMap[i],n=this.intersectionDynamicFormatColumnsMap[i];if(t.nextCalc()&&this.parseIntersectionCalc(t,a,n,r))for(i++;t.nextCalc();)this.parseIntersectionCalc(t,a,n,r)}},t.prototype.parseIntersectionCalc=function(e,t,r,i){var a=e.calcId(),i=i[a];if(i)switch(i.kind,h.SelectKind.Measure,i.calcKind){case 1:return t[a].values.push(e.calcValue()),!0;case 3:return t[a].highlights.push(e.calcValue()),!0;case 4:return r[a].values.push(e.calcValue()),!0;case 6:return r[a].highlights.push(e.calcValue()),!0;case 2:case 5:return!1}},t.prototype.readMeasuresWithNoGrouping=function(e,t){this.aggregator.read(e),this.aggregator.copyToColumns();e=e.primaryHierarchy();if(e.next()){this.addPrimaryValueColumns(t,!0);for(var r=this.context.calcInfo,i=e.instances();i.next();)for(;i.nextCalc();){var a=r[i.calcId()];a&&(a.selectIdx,1===a.calcKind?this.selectIndexToPrimaryValueColumn[a.selectIdx].values.push(i.calcValue()):3===a.calcKind?this.selectIndexToPrimaryValueColumn[a.selectIdx].highlights.push(i.calcValue()):4===a.calcKind?this.selectIndexToDynamicFormatColumn[a.selectIdx].values.push(i.calcValue()):6===a.calcKind&&this.selectIndexToDynamicFormatColumn[a.selectIdx].highlights.push(i.calcValue()))}}},n=t})(powerbi=powerbi||{}),(function(g){var e,F,o;function t(e,t,r,i,a,n){this.context=e,this.dsrParser=t,this.metadata=r,this.synchronizedGroupsEnabled=a,this.scopedMeasuresEnabled=n,r.columns,this.aggregator=new F.Aggregator(e),this.scopedAggregatesEnabled=i}e=g.data||(g.data={}),((F=e.dsr||(e.dsr={})).converters||(F.converters={})).createMatrix=function(e,t,r,i,a,n){return new o(e,t,r,i,a,n).run()},t.prototype.run=function(){var e=this.aggregator,t=this.dsrParser,t=(t.reset(),t.dataShapes()),r=(this.calcInfoCache={},t.next(),this.createHierarchiesLevels(),this.readValueSources(t),0<this.context.maxPrimaryDepth||_.isEmpty(this.context.measureSelectIndices),e.read(t,1===this.context.maxPrimaryDepth&&0===this.context.maxSecondaryDepth),t.secondaryHierarchy()),r=this.readHierarchy(1,r,t),i=t.primaryHierarchy(),i=this.readHierarchy(0,i,t);return e.copyToColumns(),{rows:i,columns:r,valueSources:this.valueSources}},t.prototype.createHierarchiesLevels=function(){var e=this.context.selects,t=this.context.maxPrimaryDepth,r=this.context.maxSecondaryDepth;this.primaryHierarchyLevels=new Array(t),this.secondaryHierarchyLevels=new Array(r);for(var i=0;i<t;i++)this.primaryHierarchyLevels[i]={sources:[]};for(i=0;i<r;i++)this.secondaryHierarchyLevels[i]={sources:[]};for(var a=this.metadata.columns,n=a.length,o=this.columnIndexToZoneIndex=new Array(n),i=0;i<n;i++){var s,u=a[i],c=u.index;null!=c&&(s=void 0,(c=e[c]).Kind===F.SelectKind.Group)&&(null!=c.Depth?s=this.primaryHierarchyLevels[c.Depth].sources:null!=c.SecondaryDepth&&(s=this.secondaryHierarchyLevels[c.SecondaryDepth].sources),o[i]=s.length,s.push(u))}},t.prototype.readHierarchy=function(e,t,r){var i,a=this.valueSources.length;switch(e){case 0:if(i=this.context.primaryAxisGroupings,this.context.maxPrimaryDepth,i)break;return this.createRowHierarchyForNoGroupings(t);case 1:if(i=this.context.secondaryAxisGroupings,this.context.maxSecondaryDepth,i)break;return 0===a?{levels:[],root:{children:[]}}:this.createColumnHierarchyForNoGroupings()}_.size(i);var n={levels:0===e?this.primaryHierarchyLevels:this.secondaryHierarchyLevels,root:{}},o=(1===e&&1<a&&n.levels.push(this.createColumnHierarchyMeasuresLevel()),this.synchronizedGroupsEnabled&&(o=this.context.primarySynchronizedGroups,0===e)&&o&&this.readRowsSynchronizedGroups(o,n,r),this.context);return this.readNodeChildren(o,o.calcInfo,this.columnIndexToZoneIndex,o.dataMemberIdToIdentityBuilder,o.dataMemberIdToMetadata,n.root,t,0,e,a,this.context.maxSecondaryDepth,n.levels),_.isEmpty(n.root.children)||_.isEmpty(n.synchronizedGroups)||this.ensureRowNodeSynchronization(n.root,0),n},t.prototype.readRowsSynchronizedGroups=function(e,t,r){for(var i=e.length,a=(t.synchronizedGroups=new Array(i),this.primarySynchronizedGroupByLevel=new Array(t.levels.length),r.nestedDataShapes()),n=0;n<i;n++){for(var o=e[n],s=o.groupings,u=(_.isEmpty(s),a[o.dataShapeId]),c=(u.next(),u.primaryHierarchy()),l=t.synchronizedGroups[n]={levels:new Array,root:{}},p=0;p<s.length;p++){var d=s[p],h=l.levels[p]=t.levels[d];h.valueSources&&((t.levels[d]=g.Prototype.inherit(h)).valueSources=h.valueSources,delete h.valueSources)}this.primarySynchronizedGroupByLevel[s[0]]=l;for(var m=this.metadata.columns,f=new Array(m.length),y=0;y<m.length;y++)!(function(e){for(var t=m[e],r=0,i=l.levels;r<i.length;r++){var a=i[r],a=_.findIndex(a.sources,(function(e){return e===t}));if(-1<a){f[e]=a;break}}})(y);o=this.context.createContextForPrimarySynchronizedGroup(o,u);this.readNodeChildren(o,o.calcInfo,f,o.dataMemberIdToIdentityBuilder,o.dataMemberIdToMetadata,l.root,c,0,0,0,o.maxSecondaryDepth,l.levels,{currentIndex:0})}},t.prototype.readNodeChildren=function(e,t,r,i,a,n,o,s,u,c,l,p,d){if(o&&0!==o.count())for(;o.next();){var h=o.id(),m=a[h];if(m){var f=2===m.kind,y=f&&0===s,g=void 0,v=void 0,S=(f||(v=(g=(g=i[h])||(i[h]=new F.IdentityBuilder(e,h))).getIdentityFields()),o.instances());if(S&&0!==S.count()){v&&(n.childIdentityFields=v);var x=x||(n.children=[]),C=this.calcInfoCache[h];for(null==C&&(C=this.calcInfoCache[h]=[]);S.next();){var E=this.readNode(e,m,i,a,t,r,S,s,f,y,C,u,c,l,g,m.restartValuesBuilder,p,d);x.push(E),d&&d.currentIndex++}}}}},t.prototype.readNode=function(e,t,r,i,a,n,o,s,u,c,l,p,d,h,m,f,y,g){for(var v=e.aggregateCalcMetadata,S={level:s},x=(t.forSynchronization&&(S.synchronizationIndex=g.currentIndex),1===o.restartFlagKind()&&(S.isMerge=!0),u?S.isSubtotal=!0:m.reset(),[]),C=this.synchronizedGroupsEnabled&&t.isSynchronized,E=0;o.nextCalc();E++){var D=o.calcId(),I=l[E];if(!I){if(!(I=a[D]))continue;l[E]=I}if(10===I.calcKind){var w=o.calcValue();S.synchronizationIndex=w}else{var w=I.columnIndex,M=(I.isGroupKeyButNotSelect,n[w]),b=(I.isGroupKeyButNotSelect,I.kind),V=void 0;if(b===F.SelectKind.Group)C||(V=(R=o.calcValueAsExpr()).value,I.isGroupKeyButNotSelect||(x[M]={value:V,levelSourceIndex:M}),m.addExpr(D,R));else if(b===F.SelectKind.Measure){if(!this.scopedMeasuresEnabled&&0<h)continue;I.selectIdx,"Measure Calc ".concat(D," on DataMember instances must be related to a Select");var R=this.measuresGroupingScopeBySelectIndex[I.selectIdx],b=("Calc ".concat(D," has an undefined grouping scope"),R.secondary,"Calc ".concat(D," is grouped by Secondary while appearing on DataMember"),void 0),P=(b=0===h&&R.primary===y.length?(null==S.values&&(b=S.values={}),S.values):(y[s].valueSources[0].length,S.nodeValues||(S.nodeValues={0:{}}),S.nodeValues[0]))[M];P||(P=b[M]={},0<M&&(P.valueSourceIndex=M)),V=o.calcValue(),this.readNodeValueCalc(P,V,I),this.scopedAggregatesEnabled&&I.scopedAggregateCalcMetadata&&this.setScopeAggregateValue(S,V,I,y[s-1]),!c||2!==I.calcKind&&5!==I.calcKind||(e.aggregateCalcMetadata[D],F.DataShapeUtility.fillMetadataColumnAggregate(V,v[D]))}if(!C&&I.hasDuplicateColumnIndices)for(var T=0,A=e.calcIdToColumnIndices[D];T<A.length;T++){var N=n[A[T]];x[N]||(x[N]={value:V,levelSourceIndex:N})}}}u||C||(S.levelValues=x,S.value=x[0].value,S.identity=m.getIdentity(),(u=o.restartKind())&&(1===u?S.restartKind=1:2===u?S.restartKind=2:3===u&&(S.restartKind=3),S.restartKind)&&(S.restartValues=f.getRestartValues(o)));var u=o.intersections(),f=o.members();return u?this.readIntersectionsValues(a,n,d,S,u):f?(this.readNodeChildren(e,a,n,r,i,S,f,s+1,p,d,h,y,g),t.isSynchronized&&!_.isEmpty(S.children)&&void 0!==(u=S.children[0].synchronizationIndex)&&(S.synchronizationIndex=u)):1===p&&1<d&&(s===h-1||S.isSubtotal)&&this.createColumnHierarchyMeasuresNodes(S),S},t.prototype.setScopeAggregateValue=function(e,t,r,i){var a,n=r.scopedAggregateCalcMetadata,o=this.findDataViewNodeAggregates(e,n.metadata);switch(r.calcKind){case 7:a=o.values;break;case 8:a=o.highlight}switch(n.aggregateKind){case 2:a.max=t;break;case 3:a.min=t;break;case 6:a.avg=t}var s=n.metadata,e=i.aggregates;e?_.some(e,(function(e){return e.column===s.column&&F.DataViewConverterContext.sameScopedAggregatesInputScope(e.inputScope,s.inputScope)&&e.respectInstanceFilters===s.respectInstanceFilters}))||e.push(s):i.aggregates=[s]},t.prototype.findDataViewNodeAggregates=function(e,t){var r,i=e.aggregateValues;return i?(r=_.find(i,(function(e){e=e.metadata;return e.column===t.column&&F.DataViewConverterContext.sameScopedAggregatesInputScope(e.inputScope,t.inputScope)&&e.respectInstanceFilters===t.respectInstanceFilters})))||i.push(r={metadata:t,values:{},highlight:{}}):e.aggregateValues=[r={metadata:t,values:{},highlight:{}}],r},t.prototype.readIntersectionsValues=function(e,t,r,i,a){if(0!==r)for(var n=i.values={},o=0;a.next();){for(var s=0;s<r;s++){var u=n[r*o+s]={};0<s&&(u.valueSourceIndex=s)}for(;a.nextCalc();){var c=e[a.calcId()];c&&(u=n[r*o+t[c.columnIndex]],this.readNodeValueCalc(u,a.calcValue(),c))}o++}},t.prototype.readNodeValueCalc=function(e,t,r){switch(r.calcKind){case 1:case 4:e.value=t,this.aggregator.update(t,r.selectIdx);break;case 2:case 5:e.value=t;break;case 3:case 6:case 9:e.highlight=t;break;case 7:case 8:case 10:break;default:r.calcKind}},t.prototype.createRowHierarchyForNoGroupings=function(e){var t={level:0,values:{}},r={levels:[],root:{children:[t]}},e=(e.count(),e.next(),e.instances());return this.readNodeForNoGroupings(t,e),r},t.prototype.readNodeForNoGroupings=function(e,t){t.count();for(var r=this.context.calcInfo,i=this.columnIndexToZoneIndex,a=(t.next(),e.values={});t.nextCalc();){var n,o,s=r[t.calcId()];s&&((o=a[n=i[s.columnIndex]])||(o=a[n]={},0<n&&(o.valueSourceIndex=n)),this.readNodeValueCalc(o,t.calcValue(),s))}},t.prototype.createColumnHierarchyForNoGroupings=function(){var e=[],t={};return 0<this.valueSources.length&&(e=[this.createColumnHierarchyMeasuresLevel()],this.createColumnHierarchyMeasuresNodes(t)),{levels:e,root:t}},t.prototype.createColumnHierarchyMeasuresLevel=function(){for(var e=this.valueSources.length,t=new Array(e),r=0;r<e;r++)t[r]=this.valueSources[r];return{sources:t}},t.prototype.createColumnHierarchyMeasuresNodes=function(e){for(var t=null==e.level?0:this.context.maxSecondaryDepth,r=this.valueSources.length,i=e.children=new Array(r),a=e.isSubtotal,n=0;n<r;n++){var o=i[n]={level:t};0<n&&(o.levelSourceIndex=n),a&&(o.isSubtotal=!0)}},t.prototype.readValueSources=function(e){var t=this.context,r=t.selects,i=t.measureSelectIndices,a=i.length,n=t.selectIndexToColumn,o=t.selectIndexToColumnIndex,s=this.columnIndexToZoneIndex,u=(this.valueSources=[],this.measuresGroupingScopeBySelectIndex={},{});if(0<e.calcCount()){for(;e.nextCalc();)u[e.calcId()]=!0;e.restartCalcs()}for(var c=0;c<a;c++){var l,p,d=i[c],h=r[d],m=(h.Kind,F.SelectKind.Measure,h.Value,o[d]),f=this.measuresGroupingScopeBySelectIndex[d]=this.getMeasureGroupingScope(h,u[h.Value]);f&&(p=f.primary,f=f.secondary,l=void 0,l=(p!==this.context.maxPrimaryDepth||f!==this.context.maxSecondaryDepth)&&this.scopedMeasuresEnabled?(this.primaryHierarchyLevels.length,(f=this.primaryHierarchyLevels[p-1]).valueSources||(f.valueSources={0:[]}),f.valueSources[0]):this.valueSources,p=n[d],s[m]=l.length,l.push(p),h.DynamicFormat)&&h.DynamicFormat.Format&&(f=p.formatSource&&p.formatSource.formatString,s[m+1]=l.length,l.push(f))}},t.prototype.getMeasureGroupingScope=function(e,t){return null==e.Depth&&null==e.SecondaryDepth?t?null:{primary:this.context.maxPrimaryDepth,secondary:this.context.maxSecondaryDepth}:{primary:null!=e.Depth?e.Depth+1:0,secondary:null!=e.SecondaryDepth?e.SecondaryDepth+1:0}},t.prototype.ensureRowNodeSynchronization=function(e,t){if(this.isRowLeaf(e),!this.isRowLeaf(e)){var r=this.primarySynchronizedGroupByLevel[t];if(r)this.synchronizeNodeChildren(e,r.root);else for(var r=e.children,i=t+1,a=0,n=r;a<n.length;a++){var o=n[a];this.ensureRowNodeSynchronization(o,i)}}},t.prototype.synchronizeNodeChildren=function(e,t){if(!this.isRowLeaf(e)){var r=e.level+1,i=t.children;if(_.isEmpty(i))this.ensureRowNodeSynchronization(e,r);else for(var a=i.length,n=e.children||[],o=new Array(a),s=(e.children=o,0),u=s<n.length?n[s]:void 0,c=null==u?void 0:u.synchronizationIndex,l=0;l<a;l++){var p=i[l],d=p.synchronizationIndex,h=this.copyFromMasterNode(p);h.level=r,o[l]=h,u&&c===d?(u.level,this.copyFromExistingNode(u,h),this.synchronizeNodeChildren(h,p),c=null==(u=++s<n.length?n[s]:void 0)?void 0:u.synchronizationIndex):(void 0===c||d<c)&&!this.isRowLeaf(h)&&(h.children=[],this.synchronizeNodeChildren(h,p))}}},t.prototype.copyFromMasterNode=function(e){var t={};if(t.synchronizationIndex=e.synchronizationIndex,e.identity&&(t.identity=e.identity),void 0!==e.value&&(t.value=e.value),void 0!==e.isSubtotal&&(t.isSubtotal=e.isSubtotal),e.levelValues){var r=e.levelValues.length;t.levelValues=new Array(r);for(var i=0;i<r;i++){var a=e.levelValues[i];t.levelValues[i]={value:a.value,levelSourceIndex:a.levelSourceIndex}}}return void 0!==e.restartKind&&(t.restartKind=e.restartKind),void 0!==e.restartValues&&(t.restartValues=e.restartValues),t},t.prototype.copyFromExistingNode=function(e,t){e.aggregateValues&&(t.aggregateValues=e.aggregateValues),e.values&&(t.values=e.values),e.nodeValues&&(t.nodeValues=e.nodeValues),_.isEmpty(e.children)&&_.isEmpty(t.children),e.children&&(t.children=e.children),e.childIdentityFields&&!t.childIdentityFields&&(t.childIdentityFields=e.childIdentityFields)},t.prototype.isRowLeaf=function(e){return!(e.level!==this.context.maxPrimaryDepth-1&&!e.isSubtotal||(_.isEmpty(e.children),0))},o=t})(powerbi=powerbi||{}),(function(e){var E,i;function t(e,t,r){this.context=e,this.dsrParser=t,this.metadata=r,this.aggregator=new E.Aggregator(e)}e=e.data||(e.data={}),((E=e.dsr||(e.dsr={})).converters||(E.converters={})).createTable=function(e,t,r){return new i(e,t,r).run()},t.prototype.run=function(){var e,t,r;if(this.isCompatible())return e={columns:this.metadata.columns},(r=this.dsrParser).reset(),(r=r.dataShapes()).next(),(t=this.aggregator).read(r),r=r.primaryHierarchy(),1===this.context.maxPrimaryDepth?this.readRows(e,r):0===this.context.maxPrimaryDepth&&this.readRowWithoutGrouping(e,r),t.copyToColumns(),e},t.prototype.readRows=function(e,t){var r,i=this.context,a=this.getRowCellsCount(t);for(t.reset();t.next();){var n=t.id(),o=i.dataMemberIdToMetadata[n];if(o){var s=o.kind,u=t.instances(),c=[];if(1===s){for(var l=(l=i.dataMemberIdToIdentityBuilder[n])||(i.dataMemberIdToIdentityBuilder[n]=new E.IdentityBuilder(i,n)),p=o.axisGrouping,n=u.count(),d=new Array(n),h=new Array(n),m=0;u.next();m++)1===u.restartFlagKind()&&(r=m),l.reset(),d[m]=this.readRow(u,p,c,a,l,!1),h[m]=l.getIdentity();_.isEmpty(h)||(e.identity=h),e.identityFields=l.getIdentityFields()}else if(2===s){if(0===a)continue;for(;u.next();){e.totals;for(var f=this.readRow(u,null,c,a,null,!0),y=f.length,m=0;m<y;m++)void 0===f[m]&&(f[m]=null);e.totals=f}}e.rows=d,void 0!==r&&(e.lastMergeIndex=r)}}},t.prototype.readRow=function(e,t,r,i,a,n){for(var o,s=this.aggregator,u=new Array(i),c=0===r.length,l=(c&&t&&(e.calcCount(),o=this.createCalcIdToGroupingIdentityIndexMap(t),r.length=e.calcCount()),this.context),p=l.aggregateCalcMetadata,d=0;e.nextCalc();d++){var h,m,f,y=e.calcId(),g=(c&&(h=o&&o[y],m=(g=l.calcInfo[y])&&g.columnIndex,f=g&&g.selectIdx,!g||3!==g.calcKind&&6!==g.calcKind&&9!==g.calcKind||(m=null),r[d]={axisGroupingIndex:h,columnIndex:m,hasDuplicateColumnIndices:g&&g.hasDuplicateColumnIndices,isGroupKeyOnly:null!=h&&null==m,selectIndex:f,aggregateMetadata:p[y]}),r[d]);if(null!=g.columnIndex){var v=e.calcValue();if(u[g.columnIndex]=v,n?E.DataShapeUtility.fillMetadataColumnAggregate(v,g.aggregateMetadata):s.update(v,g.selectIndex),g.hasDuplicateColumnIndices)for(var S=0,x=l.calcIdToColumnIndices[y];S<x.length;S++){var C=x[S];void 0===u[C]&&(u[C]=v)}}a&&a.addExpr(y,e.calcValueAsExpr())}return u},t.prototype.readRowWithoutGrouping=function(e,t){if(t.count(),t.next()){var r=t.instances(),t=[];if(r.count(),r.next()){for(var i=[];r.nextCalc();){var a=r.calcId(),a=this.context.calcInfo[a];a&&3!==a.calcKind&&(i[a.columnIndex]=r.calcValue())}t.push(i)}e.rows=t}},t.prototype.getRowCellsCount=function(e){for(e.reset();e.next();){var t=e.id(),t=this.context.dataMemberIdToMetadata[t];if(t&&1===t.kind){var r=e.instances();if(r.next()){for(var i=0;r.nextCalc();){var a=r.calcId(),n=this.context.calcInfo[a];!n||1!==n.calcKind&&2!==n.calcKind||(n.hasDuplicateColumnIndices?i+=_.size(this.context.calcIdToColumnIndices[a]):i++)}return i}}}return 0},t.prototype.createCalcIdToGroupingIdentityIndexMap=function(e){for(var t={},r=e.Keys,i=this.context.selects,a=r.length,n=0;n<a;n++){var o=r[n];t[o.Calc||i[o.Select].Value]=n}return t},t.prototype.isCompatible=function(){var e=this.context;return 0===e.maxSecondaryDepth&&e.maxPrimaryDepth<=1},i=t})(powerbi=powerbi||{}),(function(e){var I,r;function t(e,t){this.context=e,this.dsrParser=t,this.calcIndexToCalcMetadataDictionary={},this.aggregator=new I.Aggregator(e)}e=e.data||(e.data={}),((I=e.dsr||(e.dsr={})).converters||(I.converters={})).createTree=function(e,t){return new r(e,t).run()},t.prototype.run=function(){var e;if(this.isCompatible())return this.parseTree(e={}),{root:e}},t.prototype.parseTree=function(e){var t=this.dsrParser,t=(t.reset(),t.dataShapes()),r=(t.next(),this.context.maxPrimaryDepth);this.aggregator.read(t,1===r),0===r?this.parseDataMembersWithNoGrouping(e,t.primaryHierarchy()):this.parseDataMembers(e,t.primaryHierarchy(),0),this.parseAggregates(e)},t.prototype.parseDataMembers=function(e,t,r){for(;t.next();){var i=this.context,a=t.id(),n=i.dataMemberIdToMetadata[a];if(n){var o=t.instances(),s=this.calcIndexToCalcMetadataDictionary[a];switch(s||(this.calcIndexToCalcMetadataDictionary[a]=s=[]),n.kind){case 1:var u=i.dataMemberIdToIdentityBuilder[a],c=(u||(u=new I.IdentityBuilder(i,a),i.dataMemberIdToIdentityBuilder[a]=u),u.getIdentityFields());c&&(e.childIdentityFields=c),this.parseInstances(e,o,s,u,!1,r);break;case 2:this.parseInstances(e,o,s,null,!0,r)}}}},t.prototype.parseInstances=function(e,t,r,i,a,n){var o=this.context,s=this.aggregator,u=o.aggregateCalcMetadata,c=e.children;for(a||!c&&0<t.count()&&(c=e.children=new Array(t.count()));t.next();){var l=void 0,p=void 0,d=void 0,h=(a||i.reset(),0===r.length);h&&(r.length=t.calcCount());for(var m,f,y=0;t.nextCalc();y++){var g,v,S,x,C,l=(l=a?e.values:l)||{},E=t.calcId(),D=(h&&(D=o.calcInfo[E],r[y]=D),r[y]);D&&(g=t.calcValue(),v=D.calcKind,S=D.kind,x=D.selectIdx,a?(I.SelectKind.Group,this.addTreeNodeMeasureValues(l,x,v,g),0===n&&I.DataShapeUtility.fillMetadataColumnAggregate(g,u[E])):((C=D.isGroupKeyButNotSelect)||this.addTreeNodeMeasureValues(l,x,v,g),S===I.SelectKind.Group?(C||(d=g),i.addExpr(E,t.calcValueAsExpr())):S===I.SelectKind.Measure&&1===v&&s.update(p=g,x)))}a?(e.values=l,1===t.restartFlagKind()&&(e.isMerge=!0)):(m={values:l,identity:i.getIdentity()},void 0!==d&&(m.name=d),void 0!==p&&(m.value=p),1===t.restartFlagKind()&&(m.isMerge=!0),(f=t.members())&&this.parseDataMembers(m,f,n+1),c[t.currentIndex()]=m)}},t.prototype.addTreeNodeMeasureValues=function(e,t,r,i){var a=e[t];switch(!a&&this.isSupportedMeasureType(r)&&(a=e[t]={}),r){case 1:a.value=i;break;case 2:a.subtotal=i;break;case 3:a.highlight=i}},t.prototype.isSupportedMeasureType=function(e){return 1===e||2===e||3===e},t.prototype.parseDataMembersWithNoGrouping=function(e,t){t.count(),t.next();for(var r,i=t.instances(),a=(i.count(),i.next(),this.context.calcInfo);i.nextCalc();){e.values||(e.values=r={});var n,o,s=a[i.calcId()];s&&(n=s.calcKind,o=i.calcValue(),this.addTreeNodeMeasureValues(r,s.selectIdx,n,o),1===n)&&(e.value=o)}},t.prototype.isCompatible=function(){return 0===_.size(this.context.secondaryAxisGroupings)},t.prototype.parseAggregates=function(e){for(var t=this.context,r=(this.aggregator.copyToColumns(),t.measureSelectIndices),i=r.length,a=0;a<i;a++){var n,o=r[a],s=t.selectIndexToColumn[o].aggregates,u=e.values;s&&(n=(n=(u=u||(e.values={}))[o])||(u[o]={}),I.DataShapeUtility.copyAggregates(s,n))}},r=t})(powerbi=powerbi||{}),(function(e){var c,r;function t(e,t){this.context=e,this.dsrParser=t,this.aggregator=new c.Aggregator(e)}e=e.data||(e.data={}),((c=e.dsr||(e.dsr={})).converters||(c.converters={})).createSingle=function(e,t){if(r.isCompatible(e))return new r(e,t).run()},t.prototype.run=function(){return this.parseSingle()},t.prototype.parseSingle=function(){var e=this.dsrParser,e=(e.reset(),e.dataShapes());e.next();return this.aggregator.read(e,!1),this.aggregator.copyToColumns(),0===this.context.maxPrimaryDepth?this.parseMeasureValue(e.primaryHierarchy()):this.parseSubtotal(e.primaryHierarchy())},t.prototype.parseMeasureValue=function(e){if(e.count(),e.next())return this.parseInstance(e.instances())},t.prototype.parseSubtotal=function(e){for(;e.next();)if(2===this.context.dataMemberIdToMetadata[e.id()].kind)return this.parseInstance(e.instances())},t.prototype.parseInstance=function(e){for(var t,r,i=this.context,a=i.calcInfo;e.next();)for(;e.nextCalc();){var n,o,s=e.calcId(),u=a[s];u&&(o=2===(n=u.calcKind),1===n||o)&&(t=e.calcValue(),r=u.selectIdx,o)&&(i.aggregateCalcMetadata[s],c.DataShapeUtility.fillMetadataColumnAggregate(t,i.aggregateCalcMetadata[s]))}if(void 0!==t)return{column:i.selectIndexToColumn[r],value:t}},t.isCompatible=function(e){return 0===e.maxSecondaryDepth&&1===e.measureSelectIndices.length},r=t})(powerbi=powerbi||{}),(function(y){var S,t,V,e,h,r,x,d,m,f,g,v,C;function E(e,t){var r;e.metadata.dataReduction={},e.categorical&&(r=e.metadata.dataReduction.categorical={},t.Primary&&(r.categories=i(t.Primary)),t.Secondary&&(r.values=i(t.Secondary)),t.Intersection)&&(r.metadata=i(t.Intersection)),e.matrix&&(r=e.metadata.dataReduction.matrix={},t.Primary)&&(r.rows=i(t.Primary))}function i(e){switch(e.Type){case 3:return{binnedLineSample:{}};case 4:return{overlappingPointsSample:{}};default:return{}}}function D(e,t){var r=e.values;return(r=r||(e.values={}))[t]||(r[t]={})}function I(e){for(var t={sources:[]},r=0,i=e.length;r<i;r++)t.sources.push(e[r]);return t}function w(e){return e.isSubtotal?e.level:e.level+1}function M(e){return e&&e.Groupings?e.Groupings.length:0}function b(e,t,r,i){e.children=[];for(var a=0;a<t;a++){var n={level:r};0<a&&(n.levelSourceIndex=a),e.children.push(n),i&&(n.isSubtotal=!0)}}function R(e,t,r,i,a){var n={};return (function e(t,r,i,a,n,o,s){if(!a)return;var u=t.selects;var c=P(r,o);for(var l=0,p=a.length;l<p;l++)for(var d=a[l],h=0,m=0,f=d.Instances.length;m<f;m++){var y=d.Instances[m];if(0===h&&4===(h=A(u,n,o,d,y)))break;var g={level:o},v=(i.children||(i.children=[]),i.children.push(g),1===h?(v=T(u,y.Calculations,c),_.isEmpty(v)||(g.levelValues=v,v=_.last(v),g.value=v.value,0<v.levelSourceIndex&&(g.levelSourceIndex=v.levelSourceIndex))):3===h&&(g.isSubtotal=!0),y.RestartFlag&&1===y.RestartFlag&&(g.isMerge=!0),n&&1===h&&(i.childIdentityFields=t.readKeys(n,o),g.identity=t.readIdentity(n,y,o)),y.Members);v&&0<v.length?e(t,r,g,v,n,o+1,s):s&&s(t,h,y,g,o+1)}})(e,t,n,r,i,0,a),n}function P(e,t){var r=[],i=e&&e[t]&&e[t].sources;if(!_.isEmpty(i))for(var a=0,n=i.length;a<n;a++){var o=i[a];o.index,r[o.index]=a}return r}function T(e,t,r){for(var i,a=0,n=e.length;a<n;a++){var o=e[a];o&&o.Value&&o.Kind===V.SelectKind.Group&&void 0!==(o=V.DataShapeUtility.findAndParseCalculation(t,o.Value))&&(i=i||[]).push({levelSourceIndex:r[a],value:o})}return i}function A(e,t,r,i,a){if(t&&t.length>r&&null!=i.Id){t=t[r];if(i.Id===t.Member)return 1;if(i.Id===t.SubtotalMember)return 3}var n=a.Calculations;if(n){for(var o=!1,s=0,u=e.length;s<u;s++){var c=e[s];if(c&&V.DataShapeUtility.findCalculation(n,c.Value)){if(c.Kind===V.SelectKind.Group)return 1;o||c.Kind!==V.SelectKind.Measure||(o=!0)}}if(o)return 2}return 4}function N(e,t,r,i,a,n,o,s){if(r)for(var u={index:0},c=0,l=t.length;c<l;c++){var p=t[c],d=(p.Kind,V.SelectKind.Measure,p.Highlight),h=d&&d.Value,d=d&&d.DynamicFormat&&d.DynamicFormat.Format;F(e,r,i,a,u,n,o,s,0,p.Value,h,p.Subtotal),p.DynamicFormat&&p.DynamicFormat.Format&&(h=_.map(p.SubtotalDynamicFormat,(function(e){return e&&e.Format})),F(e,r,i,a,u,n,o,s,0,p.DynamicFormat.Format,d,h))}}function F(e,t,r,i,a,n,o,s,u,c,l,p){var d=D(r,i.index),h=null;null==(h=3!==e?V.DataShapeUtility.findAndParseCalculation(t,c):h)&&void 0!==(e=(function(e,t,r,i,a,n){if(t){r=V.DataShapeUtility.computeAggIdx(r,i,a,n);if(r<t.length)return V.DataShapeUtility.findAndParseCalculation(e,t[r])}return})(t,p,w(r),n,o,s))&&(h=e),l&&(d.highlight=V.DataShapeUtility.findAndParseCalculation(t,l)),d.value=h,0<a.index&&(d.valueSourceIndex=a.index),i.index++,a.index++}function a(e){this._context=e}function u(e){this.context=e}function n(e){this._context=e,this._categoriesMetadata=[],this._primaryMeasureSelects=[],this._measureSelects=[],this._secondarySelects=[],this._seriesColumn=null}function o(e,t,r,i){null==t.Select&&t.ScriptVisualBinding,this.targets=e,this.selects=t.Select,this.scriptVisualBinding=t.ScriptVisualBinding,this.perfId=r||"",this.stats={id:r||void 0,primary:0,secondary:0},this.aggregateReader=i,this.cacheItems=[],this.selectIndexToColumnIndexMap={}}function s(e,t){null==e.Select&&e.ScriptVisualBinding,this.dataShape=t}function Q(e,t,r,i){this.node=e,this.aggregateReader=t,this.selects=r,this.aggregators=i}S=y.data||(y.data={}),V=t=S.dsr||(S.dsr={}),e=(e=V.reader||(V.reader={})).V1||(e.V1={}),r=jsCommon.EnumExtensions,x=jsCommon.PerfTimer,e.read=function(e,t,r,i,a,n,o){if(!(s=r)||1!==_.size(s.DataShapes))return null;var s=r.DataShapes[0];if(s["odata.error"])return r=new y.DsrClientError(s["odata.error"]),a&&(r.requestId=a),{error:r};var a=new g(e,t,o,new v(t,s)),u={dataView:r=(function(e){if(null!=e.scriptVisualBinding)return new d(e);for(var t=0,r=0,i=e.selects,a=0,n=i.length;a<n;a++){var o=i[a];o&&(null!=o.Depth&&(t=Math.max(t,o.Depth+1)),null!=o.SecondaryDepth)&&(r=Math.max(r,o.SecondaryDepth+1))}return new(1<=r&&1===t?f:m)(e)})(a).read(t.Expressions,s,i)};if(s.RestartTokens&&(u.restartToken=s.RestartTokens),s.DataLimitsExceeded&&0<s.DataLimitsExceeded.length&&(u.warnings||(u.warnings=[]),e=new V.DsrLimitsWarning(t,s.DataLimitsExceeded,s.Calculations),u.warnings.push(e),E(r,e.limits)),s.DataShapeMessages&&0<s.DataShapeMessages.length)for(var c=0,l=s.DataShapeMessages;c<l.length;c++){var p=l[c];V.KnownDsrMessages[p.Code]&&p.Severity===S.dsr.getDsrMessageSeverityValue(0)&&(u.warnings||(u.warnings=[]),u.warnings.push(new V.DsrMessage(p)))}return u.dataView&&!_.isEmpty(n)&&(S.ClientSideFilter.applyClientSideFilters(u.dataView,n),u.disallowPersisting=!0),a.stats,u},e.applyReductionMetadata=E,(h||(h={})).parse=function(e,t,r,i){e.includes(2);for(var a=x.start("DSR.matrix(".concat(e.perfId,")")),n=[],o=[],s=[],u=e,c=n,l=o,p=s,d=i.columns,h=u.selects,m=0,f=h.length;m<f;m++){var y,g,v=h[m];v&&(y=(function(e,t,r){for(var i=0,a=t.length;i<a;i++){var n=t[i];if(n&&n.index===r&&void 0===n.groupName)return n}return e.createColumns(t,r)})(u,d,m),v.Kind===V.SelectKind.Measure?p.push(y):null!=v.Depth?null!=(g=c[v.Depth])?g.sources.push(y):c[v.Depth]=I([y]):null!=v.SecondaryDepth&&(null!=(g=l[v.SecondaryDepth])?g.sources.push(y):l[v.SecondaryDepth]=I([y])),v.DynamicFormat)&&v.DynamicFormat.Format&&(y.formatSource&&y.formatSource.formatString,p.push(y.formatSource.formatString))}(1<(i=p.length)||0<i&&(0===c.length||0===l.length))&&l.push(I(p));var i=[],S=(function(s,u,e,t,r,c){{var i;if(!r.SecondaryHierarchy||0===r.SecondaryHierarchy.length)return b(i={},e,0,!1),i}var a;t&&t.Secondary&&(a=t.Secondary.Groupings);return R(s,u,r.SecondaryHierarchy,a,(function(e,t,r,i,a){var n,o;a<u.length&&(i.isSubtotal?(n=u.length-1,1<(o=u[n].sources.length)&&b(i,o,n,!0)):(u.length,b(i,u[a].sources.length,a,!1))),c.push(w(i)),s.stats.secondary++}))})(e,o,s.length,t,r,i),e={rows:{root:(function(e,t,r,i,y){var a,g,v,S;if(i.PrimaryHierarchy&&0!==i.PrimaryHierarchy.length)return r&&r.Primary&&(a=r.Primary.Groupings),v=g=0,r&&(g=M(r.Primary),v=M(r.Secondary)),S=_.filter(e.selects,(function(e){return e&&e.Kind===V.SelectKind.Measure})),R(e,t,i.PrimaryHierarchy,a,(function(e,t,r,i,a){var n=t,o=S,t=r,s=i,u=y,c=g,l=v,p=t.Intersections,d={index:0};if(p)for(var h,m=0,f=p.length;m<f;m++)p[m].Calculations&&(h=u[m],N(n,o,p[m].Calculations,s,d,h,c,l));else N(n,o,t.Calculations,s,d,0,c,l);e.stats.primary++}))})(e,n,t,r,i),levels:n},columns:{root:S,levels:o},valueSources:s};return a(),e},a.prototype.read=function(e,r,t){var i=this,a={metadata:{columns:[]}};return t.script=x.logTime((function(){var e,t;r.PrimaryHierarchy&&0<r.PrimaryHierarchy.length&&(t=r.PrimaryHierarchy[0])&&0<t.Instances.length&&(t=t.Instances[0].Calculations,e=i._context.scriptVisualBinding.PayloadCalculationId||i._context.scriptVisualBinding.ImageCalculationId,t=V.DataShapeUtility.findCalculation(t,e))&&(e=t.Value,t=S.PrimitiveValueEncoding.parseBinary(e))&&(a.scriptResult={payloadBase64:t})})),a},d=a,u.prototype.read=function(t,r,e){var i,a,n=this,o=this.context,s=this.readMetadata(r.IsComplete),u={metadata:s},c=o.includes(16),l=o.includes(1),p=o.includes(4),d=o.includes(8);return(c||l||p||d)&&(a=x.logTime((function(){i=n.parseTree(s.columns,t,r)})),c&&(e.tree=a+x.logTime((function(){var e=n.createTree(s,i);e&&(u.tree=e)}))),l&&(e.categorical=a+x.logTime((function(){var e=n.categorize(s,i);e&&(u.categorical=e)}))),p&&(e.single=a+x.logTime((function(){var e=n.createSingleValue(s,i);e&&(u.single=e)}))),d)&&(e.table=a+x.logTime((function(){var e=n.createTable(s,i);e&&(u.table=e)}))),o.includes(2)&&(e.matrix=x.logTime((function(){var e=h.parse(n.context,t,r,u.metadata);e&&(u.matrix=e)}))),u},u.prototype.readMetadata=function(e){for(var t={columns:[]},r=this.context,i=r.selects,a=0,n=i.length;a<n;a++)i[a]?r.createColumns(t.columns,a):r.actionHistory|=1;return e||(t.segment={}),t},u.prototype.parseTree=function(e,t,r){var i,a=x.start("DSR.tree(".concat(this.context.perfId,")")),n={},o=this.context.selects,s=(this.parseRootAggregates(e,n),V.DataShapeUtility.getTopLevelPrimaryDynamicMember(r,t,!0));return s?(i=void(s!==(i=r.PrimaryHierarchy[0])&&this.parseValues(o,n,u.getFirstInstanceCalcs(i))),t&&t.Primary&&(i=t.Primary.Groupings),this.parseRecursive(n,s,i,0,e)):_.isEmpty(r.PrimaryHierarchy)||this.parseValues(o,n,u.getFirstInstanceCalcs(r.PrimaryHierarchy[0])),a(),n},u.prototype.parseRecursive=function(e,t,r,i,a){var n,o=this.context,s=t.Instances,u=s.length;u&&(e.children=[],0===i)&&(n=C.create(e,o)),r&&(e.childIdentityFields=o.readKeys(r,i));for(var c=0;c<u;c++){var l=s[c],p={},d=(e.children.push(p),l.RestartFlag&&1===l.RestartFlag&&(p.isMerge=!0),this.parseValues(o.selects,p,l.Calculations,n),r&&(p.identity=o.readIdentity(r,l,i)),l.Members);this.parseAggregates(o.selects,p,l.Calculations,d,i+1),_.isEmpty(d)||(l=V.DataShapeUtility.getDynamicMember(d,r,i+1))&&this.parseRecursive(p,l,r,i+1)}n&&n.complete(a)},u.getFirstInstanceCalcs=function(e){e=e.Instances;return 0<e.length?e[0].Calculations:null},u.prototype.parseRootAggregates=function(e,t){for(var r=0,i=e.length;r<i;r++){var a=e[r].aggregates;a&&V.DataShapeUtility.copyAggregates(a,D(t,r))}},u.prototype.parseAggregates=function(e,t,r,i,a){for(var n=0,o=e.length;n<o;n++){var s,u=e[n];u&&(u=v.parseAggregates(u,r,i,a))&&(s=this.context.selectIndexToColumnIndexMap[n],V.DataShapeUtility.copyAggregates(u,D(t,s)))}},u.prototype.parseValues=function(e,t,r,i){if(!_.isEmpty(r))for(var a=0,n=0,o=e.length;a<o;a++){var s,u,c=e[a];c&&(c.Value&&void 0!==(u=V.DataShapeUtility.findAndParseCalculation(r,c.Value))&&(c.Kind===V.SelectKind.Group?t.name=u:(t.value=u,i&&i.add(n,u)),D(t,n).value=u),c.Highlight&&void 0!==(s=V.DataShapeUtility.findAndParseCalculation(r,c.Highlight.Value))&&(D(t,n).highlight=s),n++,c.DynamicFormat)&&c.DynamicFormat.Format&&(u=V.DataShapeUtility.findAndParseCalculation(r,c.DynamicFormat.Format),D(t,n).value=u,n++)}},u.prototype.categorize=function(e,t){if(!this.canCategorize())return null;for(var r,i=x.start("DSR.categorical(".concat(this.context.perfId,")")),a={},n=0,o=e.columns.length;n<o;n++){var s,u,c=e.columns[n];void 0!==c.index&&(c.isMeasure?(s={source:c,values:[]},(u=c.aggregates)&&V.DataShapeUtility.copyAggregates(u,s),a.values||(a.values=S.DataViewTransform.createValueColumns()),a.values.push(s)):(r=r||[]).push({columnIndex:n,metadataColumn:c}))}if(r){a.categories=[];for(var l=void 0,p=0,d=r.length;p<d;p++){var h=r[p],m=t.children,f={source:h.metadataColumn,values:[]};if(m)for(var y=0,g=m.length;y<g;y++){var v=m[y];f.values.push(v.values[h.columnIndex].value),0===p&&(this.writeCategoricalValues(e,v,a.values),v.identity)&&(l=l||[]).push(v.identity),v.isMerge&&(a.lastMergeIndex=y)}l&&(f.identity=l),t.childIdentityFields&&(f.identityFields=t.childIdentityFields),a.categories.push(f)}}else this.writeCategoricalValues(e,t,a.values);return i(),a},u.prototype.canCategorize=function(){for(var e=this.context.selects,t=0,r=e.length;t<r;t++){var i=e[t];if(i&&0<i.Depth)return!1}return!0},u.prototype.createTree=function(e,t){var r=this.context;if(!(2&r.actionHistory||1&r.actionHistory))return{root:t};var r=y.Prototype.inherit(t),i=e.columns,a=t.values;if(a){for(var n={},o=0;o<i.length;o++){var s=i[o];void 0!==s.index&&void 0!==a[o]&&(n[s.index]=a[o])}r.values=n}e=t.children;return e&&(r.children=this.removeFormatSourceFromTreeChildren(i,e)),{root:r}},u.prototype.removeFormatSourceFromTreeChildren=function(e,t){for(var r=t.length,i=_.map(t,(function(e){return e})),a=0;a<r;a++){for(var n=y.Prototype.inherit(i[a]),o=(i[a]=n,{}),s=0;s<e.length;s++){var u=e[s];void 0!==u.index&&void 0!==i[a].values[s]&&(o[u.index]=i[a].values[s])}i[a].values=o;n=i[a].children;n&&(i[a].children=this.removeFormatSourceFromTreeChildren(e,n))}return i},u.prototype.createTable=function(e,t){for(var r,i,a=this.context.selects,n=0,o=a.length;n<o;n++)a[n]&&0<=(i=a[n].Depth)&&(r=Math.max(i,r||0));if(0<r)return null;var s,u,c=x.start("DSR.table(".concat(this.context.perfId,")")),l=[],p=e.columns.length;if(0<=r){var d=t.children;if(d)for(var n=0,h=d.length;n<h;n++){var m=d[n];this.toTableRow(m,p,l),m.isMerge&&(s=n),m.identity&&(u=u||[]).push(m.identity)}}else y.DataViewAnalysis.countGroups(e.columns),this.toTableRow(t,p,l);var f=this.toTotals(t,p),e={rows:l,columns:e.columns};return u&&(e.identity=u),t.childIdentityFields&&(e.identityFields=t.childIdentityFields),f&&(e.totals=f),0<=s&&(e.lastMergeIndex=s),c(),e},u.prototype.toTableRow=function(e,t,r){for(var i=[],a=0;a<t;a++){var n=e.values[a];n&&i.push(n.value)}r.push(i)},u.prototype.toTotals=function(e,t){var r=[],i=e.values,a=!1;if(i)for(var n=0;n<t;n++){var o=i[n],o=o?o.subtotal:null,a=a||null!=o;r.push(o)}return a?r:null},u.prototype.writeCategoricalValues=function(e,t,r){for(var i=e.columns,a=0,n=0,o=i.length;n<o;n++){var s,u=i[n];u.isMeasure&&void 0!==u.index&&(u=t.values[n])&&((s=r[a++]).values.push(u.value),void 0!==u.highlight)&&(s.highlights||(s.highlights=[]),s.highlights.push(u.highlight))}},u.prototype.createSingleValue=function(e,t){if(t.values){for(var r=e.columns,i=null,a=void 0,n=0,o=r.length;n<o;n++)if(r[n].isMeasure&&null!=r[n].index){if(i)return null;i=r[n],a=n}return i?!(t=t.values[a])||void 0===(e=0===y.DataViewAnalysis.countGroups(e.columns)?t.value:t.subtotal)?null:{column:i,value:e}:null}return null},m=u,n.prototype.read=function(t,r,e){var i=this,a=this._context,n={metadata:this.readMetadata(r.IsComplete)};return a.includes(1)&&(e.categorical=x.logTime((function(){var e=i.categorize(r,n.metadata,t);e&&(n.categorical=e)}))),a.includes(2)&&(e.matrix=x.logTime((function(){var e=h.parse(i._context,t,r,n.metadata);e&&(n.matrix=e)}))),n},n.prototype.readMetadata=function(e){for(var t={columns:[]},r=this._context,i=r.selects,a=0,n=i.length;a<n;a++){var o,s=i[a];s&&(s.Kind===V.SelectKind.Measure?(0===s.Depth?this._primaryMeasureSelects:this._measureSelects).push(s):(s.Kind,V.SelectKind.Group,o=r.createColumns(t.columns,a),0<=s.SecondaryDepth?(this._secondarySelects.push(s),this._secondaryDepth=Math.max(this._secondaryDepth||0,s.SecondaryDepth),this._seriesColumn=o):0===s.Depth&&this._categoriesMetadata.push({select:s,column:o})))}return e||(t.segment={}),t},n.prototype.categorize=function(e,t,r){var i,a,n,o;return 0!==this._secondaryDepth||0===this._categoriesMetadata.length?null:(i=x.start("DSR.categorical(".concat(this._context.perfId,", secondary)")),r&&(r.Primary&&(a=r.Primary.Groupings),r.Secondary)&&(o=r.Secondary.Groupings),n=V.DataShapeUtility.getTopLevelSecondaryDynamicMember(e,r),n=this.readColumnsFromSecondary(n,t,o,e.Calculations),o=V.DataShapeUtility.getTopLevelPrimaryDynamicMember(e,r),r={categories:(e=this.readCategoriesAndValues(o,t,n,a)).categories,values:n},void 0!==e.lastMergeIndex&&(r.lastMergeIndex=e.lastMergeIndex),i(),r)},n.prototype.readColumnsFromSecondary=function(e,t,r,i){var a,n=this._context,o=(r&&(a=n.readKeys(r,0)),[]),s=n.selects,u=this._measureSelects.length,c=[],l=e.Instances,p=l.length;if(p)for(var d=0;d<p;d++){var h=l[d],m=h.Calculations,f=void 0;r&&(f=n.readIdentity(r,h,0));for(var y=0,g=this._secondarySelects.length;y<g;y++){for(var v=this._secondarySelects[y],S=V.DataShapeUtility.findAndParseCalculation(m,v.Value),x=[],C=0;C<u;C++){var E=this._measureSelects[C],D=s.indexOf(E),I=n.createColumns(t.columns,D,!0),w=(void 0!==S&&(I.groupName=S),{source:I,values:[]});f&&(w.identity=f),this.addColumnAggregates(i,E,w),o.push(w),x.push(w)}c.push({identity:f,name:S,values:x})}}else{for(C=0;C<u;C++){E=this._measureSelects[C],D=s.indexOf(E),w={source:I=n.createColumns(t.columns,D),values:[]};this.addColumnAggregates(i,E,w),o.push(w)}c.push({values:__spreadArray([],o||[],!0)})}for(var C=0,M=this._primaryMeasureSelects.length;C<M;C++){var b=this._primaryMeasureSelects[C],D=s.indexOf(b),w={source:I=n.createColumns(t.columns,D),values:[]};o.push(w)}a&&(o.identityFields=a);e=this._seriesColumn;return e&&(o.source=e),o.grouped=function(){return c},o},n.prototype.addColumnAggregates=function(e,t,r){e&&(t.Max&&(r.max=V.DataShapeUtility.findAndParseCalculation(e,t.Max[0])),t.Min)&&(r.min=V.DataShapeUtility.findAndParseCalculation(e,t.Min[0]))},n.prototype.readCategoriesAndValues=function(e,t,r,i){for(var a,n=[],o=this._categoriesMetadata,s=o.length,u=this._context,c=0;c<s;c++){var l={source:o[c].column,values:[]};n.push(l),i&&(l.identity=a=a||[],l.identityFields=u.readKeys(i,0))}for(var p,d=e.Instances,h=this._primaryMeasureSelects,c=0,m=d.length;c<m;c++){var f=d[c];1===f.RestartFlag&&(p=c);for(var y=0;y<s;y++)(l=n[y]).values.push(V.DataShapeUtility.findAndParseCalculation(f.Calculations,o[y].select.Value));a&&a.push(u.readIdentity(i,f,0));for(var g=f.Intersections,v=0,S=0,x=g.length;S<x;S++)for(var C=g[S].Calculations,E=0,D=this._measureSelects.length;E<D;E++){var I,w=this._measureSelects[E];void 0!==(_=V.DataShapeUtility.findAndParseCalculation(C,w.Value))&&((M=r[v++]).values.push(_),w.Highlight)&&(M.highlights||(M.highlights=[]),I=V.DataShapeUtility.findAndParseCalculation(C,w.Highlight.Value),M.highlights.push(I))}for(S=0,x=h.length;S<x;S++){var M,b,w=h[S],C=f.Calculations,_=V.DataShapeUtility.findAndParseCalculation(C,w.Value);(M=r[v++]).values.push(_),w.Highlight&&(M.highlights||(M.highlights=[]),b=V.DataShapeUtility.findAndParseCalculation(C,w.Highlight.Value),M.highlights.push(b))}}return{categories:n,lastMergeIndex:p}},f=n,o.prototype.createColumns=function(e,t,r){var i=e.length,i=this.columnMetadata(t,i,r),r=(e.push(i),e.length),t=this.tryCreatingDynamicFormatColumnMetadata(t,r,i);return t&&e.push(t),i},o.prototype.columnMetadata=function(e,t,r){var i=this.selects[e],a={displayName:"",index:e},r=(i.Format&&(a.format=i.Format),a.type=V.DataShapeUtility.describeDataType(i.Type,i.DataCategory),i.Kind===V.SelectKind.Measure&&(a.isMeasure=!0),r||(r=this.aggregateReader.compute(i,t))&&(a.aggregates=r),i.GroupKeys);if(r)for(var n=a.identityExprs=[],o=0,s=r;o<s.length;o++){var u=s[o],u=this.convertKey(u);n.push(u)}return this.selectIndexToColumnIndexMap[e]=t,a},o.prototype.tryCreatingDynamicFormatColumnMetadata=function(e,t,r,i){var e=this.selects[e];if(e.DynamicFormat&&e.DynamicFormat.Format)return r.formatSource={formatString:r={displayName:"",isMeasure:!0}},e={Kind:V.SelectKind.Measure,Subtotal:_.map(e.SubtotalDynamicFormat,(function(e){return e&&e.Format}))},i||(i=this.aggregateReader.compute(e,t))&&(r.aggregates=i),this.actionHistory|=2,r},o.prototype.readIdentity=function(e,t,r){for(var i=this.readKeys(e,r),a=e[r].Keys,n=0,o=a.length;n<o;n++)var s=a[n],s=s.Calc||this.selects[s.Select].Value,s=V.DataShapeUtility.findAndParseCalculationToSQExpr(t.Calculations,s),s=S.SQExprBuilder.equal(i[n],s),u=S.SQExprBuilder.and(u,s);return S.createDataViewScopeIdentity(u)},o.prototype.readKeys=function(e,t){var r=this.getAxisCache(e);if(void 0===(i=r.exprs[t]))for(var i=r.exprs[t]=[],a=e[t].Keys,n=0,o=a.length;n<o;n++)i.push(this.convertKey(a[n]));return i},o.prototype.includes=function(e){return r.hasFlag(this.targets,e)},o.prototype.getAxisCache=function(e){for(var t=this.cacheItems,r=0,i=t.length;r<i;r++){var a=t[r];if(a.axisGroupings===e)return a}var n={axisGroupings:e,exprs:[]};return t.push(n),n},o.prototype.convertKey=function(e){e=e.Source;return S.SQExprBuilder.columnRef(S.SQExprBuilder.entity(t.schemaName(e),e.Entity||e.EntitySet),e.Property)},g=o,s.prototype.compute=function(e,t,r){var i=this.cache;if(i){var a=i[t];if(a)return a}if(e)return i||(this.cache=i={}),a=this.dataShape,e=s.parseAggregates(e,a.Calculations,a.PrimaryHierarchy,0),i[t]=e=r&&!e?{}:e},s.prototype.updateAggregates=function(e,t,r,i){e=this.compute(e,t,!0);if(e)return e[r]=i,e},((v=s)||(v={})).parseAggregates=function(e,t,r,i){var a,r=!_.isEmpty(r)&&m.getFirstInstanceCalcs(r[0]);if(!_.isEmpty(t)||!_.isEmpty(r)){if(_.isEmpty(r)||e.Subtotal&&(s=e.Subtotal[i])&&void 0!==(u=V.DataShapeUtility.findAndParseCalculation(r,s))&&((a=a||{}).subtotal=u),!_.isEmpty(t)){e.Max&&(s=e.Max[i])&&void 0!==(u=V.DataShapeUtility.findAndParseCalculation(t,s))&&((a=a||{}).max=u),e.Min&&(s=e.Min[i])&&void 0!==(u=V.DataShapeUtility.findAndParseCalculation(t,s))&&((a=a||{}).min=u),e.Count&&(s=e.Count[i])&&void 0!==(u=V.DataShapeUtility.findAndParseCalculation(t,s))&&((a=a||{}).count=u);r=e.Aggregates;if(r)for(var n=0,o=r;n<o.length;n++){var s,u,c,l=o[n],p=l.Aggregate;(s=l.Ids[i])&&void 0!==(u=V.DataShapeUtility.findAndParseCalculation(t,s))&&((l=p.Percentile)?(c={k:l.K,value:u},l.Exclusive&&(c.exclusive=l.Exclusive),((a=a||{}).percentiles||(a.percentiles=[])).push(c)):p.Average?(a=a||{}).average=u:p.Median&&((a=a||{}).median=u))}0===i&&(s=e.Value)&&void 0!==(u=V.DataShapeUtility.findAndParseCalculation(t,s))&&((a=a||{}).single=u)}return a}},Q.create=function(e,t){for(var r=e.values,i=t.selects,a=!1,n={},o=0,s=0,u=i.length;o<u;o++){var c=i[o];if(c)if(c.Kind!==V.SelectKind.Measure)s++;else{var l=void 0,p=void 0;if(r&&(p=r[s])){if(l=[],void 0===p.min&&l.push(new V.MinValueAggregator),void 0===p.max&&l.push(new V.MaxValueAggregator),0===l.length){s++;continue}}else l=[new V.MinValueAggregator,new V.MaxValueAggregator];n[s]=l,a=!0,s++,c.DynamicFormat&&c.DynamicFormat.Format&&s++}}if(a)return new Q(e,t.aggregateReader,t.selects,n)},Q.prototype.add=function(e,t){var r=this.aggregators[e];if(r)for(var i=0,a=r.length;i<a;i++)r[i].update(t)},Q.prototype.complete=function(e){for(var t=this.aggregators,r=this.node,i=this.aggregateReader,a=0,n=0,o=this.selects.length;a<o;a++){var s=this.selects[a];if(s){var u=t[n];if(u){for(var c=0,l=u.length;c<l;c++){var p=u[c],d=p.value();void 0!==d&&(p=p.name,D(r,n)[p]=d,e[n].aggregates=i.updateAggregates(s,n,p,d))}n++,s&&s.DynamicFormat&&s.DynamicFormat.Format&&n++}else n++}}},C=Q})(powerbi=powerbi||{}),(function(e){var a,n,o,r,i,t,s,u,c,l,p,d,h,m,f,y,g,v;function S(e,t){this.dsrParserContext=t,this.parser=new u(e.DS,this.dsrParserContext)}function x(e){this.calculationContainerKind=e,this.nullValuesHandler=new y,this.repeatedValuesHandler=new g}function C(e,t,r){this.context=e,this.calcMetadataCacheKey=r,this.baseCalculationParser=new i(t)}function E(e,t,r){var i=s.call(this,t,1)||this;return i.parserContext=t,i.rootDataShape=r,i.it=new o.Iterator(e),i}function D(e){this.it=new o.Iterator(e)}function I(e){this.it=new o.Iterator(e)}function w(e,t,r,i){this.context=t,this.hierarchy=r,this.depth=i,this.it=new o.Iterator(e)}function M(e,t,r,i,a){t=d.call(this,t,2,r)||this;return t.parentDataMemberId=r,t.hierarchy=i,t.depth=a,t.it=new o.Iterator(e),t}function b(e,t,r){this.context=t,this.parentDataMemberId=r,this.it=new o.Iterator(null),this.reset(e),this.baseCalculationParser=new i(3),this.intersectionMeasureCount=_.size(this.context.intersectionMeasureToSelectIndex),this.expectedIntersectionCount=_.size(this.context.secondaryLeafDataMemberId);e=t.dataMemberIdToMetadata[r];this.primaryMemberIsGroupMember=1===e.kind,this.primaryDataMemberDepth=e.depth,t.intersectionCalcMetadataCache,this.calcMetadataCache=t.intersectionCalcMetadataCache[r],this.calcMetadataCache||t.locked||(this.calcMetadataCache=t.intersectionCalcMetadataCache[r]=new Array(this.expectedIntersectionCount))}function V(){}function R(){this.bitSequenceHandler=new f}function P(){this.bitSequenceHandler=new f}function T(e){e=e.toString(2),e=e.substr(0,e.length-v);return parseInt(e,2)}a=e.data||(e.data={}),n=a.dsr||(a.dsr={}),o=n.reader||(n.reader={}),(e=o.V2||(o.V2={})).createDsrParser=function(e,t){return new r(e,t)},S.prototype.dataShapes=function(){return this.parser},S.prototype.reset=function(){this.parser.reset()},S.prototype.lockCache=function(){this.dsrParserContext.locked||(this.dsrParserContext.locked=!0)},r=S,x.prototype.initialize=function(e,t){this.lastContainerCalculations=t,this.repeatedValuesHandler.initialize(e&&e.R,t),this.nullValuesHandler.initialize(e&&e.Ø)},x.prototype.getCurrentCalc=function(e,t,r,i){var a;return r?(void 0===(a=this.repeatedValuesHandler.tryRead(e))&&(void 0!==(a=this.nullValuesHandler.tryRead(e))?this.lastContainerCalculations[e]=null:t?t.next()&&(a=t.current(),this.lastContainerCalculations[e]=a):(a=r[i],this.lastContainerCalculations[e]=a=void 0===a?null:a)),a):(this.calculationContainerKind,null)},i=x,C.prototype.setCalculations=function(e){this.calculationContainer=e;var t,r,i=this.context;i&&(t=this.calcMetadataCacheKey,(r=e.S)&&(this.metadata=r,t&&!i.locked&&(i.memberInstanceCalcMetadataCache[t]=r),this.lastContainerCalculations||(this.lastContainerCalculations=new Array(r.length))),i.instancesCalcCache[t]&&(this.lastContainerCalculations=i.instancesCalcCache[t]),this.baseCalculationParser.initialize(e,this.lastContainerCalculations),i=e.C,(r=this.getCalcMetadata())?this.calcMetadataIt=new o.Iterator(r):this.calcMetadataIt&&this.calcMetadataIt.reset(),0<_.size(i)?this.calcIt=new o.Iterator(i):this.calcIt=void 0)},C.prototype.restartCalcs=function(){this.calcMetadataIt,this.calcIt,this.calcIt&&this.calcIt.reset(),this.calcMetadataIt.reset(),delete this.dsrCalcValue},C.prototype.nextCalc=function(){var e=!1,t=this.calcMetadataIt;return t&&((e=t.next()||e)&&(this.dsrCalcValue=this.baseCalculationParser.getCurrentCalc(t.index(),this.calcIt,this.calculationContainer,this.calcId())),t.done())&&(this.context.instancesCalcCache[this.calcMetadataCacheKey]=this.lastContainerCalculations),e||!1},C.prototype.calcId=function(){return this.metadata[this.calcMetadataIt.index()].N},C.prototype.getCalcMetadata=function(){return this.metadata||(this.metadata=this.context.memberInstanceCalcMetadataCache[this.calcMetadataCacheKey])},C.prototype.calcValue=function(){var e=this.metadata[this.calcMetadataIt.index()],t=this.context.valueDictionaryHandler.getCalcValue(this.dsrCalcValue,e.DN,e.T);return t=void 0===t?a.PrimitiveValueEncoding.parseOptimizedValue(this.dsrCalcValue,e.T):t},C.prototype.calcValueAsExpr=function(){this.dsrCalcValue;var e=this.calcMetadataIt.current(),t=this.calcValue();return this.context.valueDictionaryHandler.getCalcValueExpr(t,this.dsrCalcValue,e.DN,e.T)||a.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(t,this.dsrCalcValue,e.T)},C.prototype.calcCount=function(){return this.calcMetadataIt?this.calcMetadataIt.count():this.calcIt?this.calcIt.count():0},__extends(E,s=t=C),E.prototype.reset=function(){this.it.reset()},E.prototype.index=function(){return this.it.index()},E.prototype.count=function(){return this.it.count()},E.prototype.next=function(){this.primaryHierarchyParser=this.secondaryHierarchyParser=this.messageParser=void 0;var e,t=this.it.next();return t&&(e=this.it.current(),this.setCalculations(e),this.context)&&(this.context.valueDictionaryHandler=new n.ValueDictionaryHandler(e.ValueDicts||(null==(e=this.rootDataShape)?void 0:e.ValueDicts))),t},E.prototype.id=function(){return this.it.current().N},E.prototype.nestedDataShapes=function(){this.context.primarySynchronizedGroups;var r=this.it.current(),i=r.DS;if(!_.isArray(i)||i.length<1)return{};for(var a={},n=this,e=0,t=this.context.primarySynchronizedGroups;e<t.length;e++)!(function(t){var e=_.find(i,(function(e){return e.N===t.dataShapeId}));t.dataShapeId,e&&(a[e.N]=new E([e],t.context,n.rootDataShape||r))})(t[e]);return a},E.prototype.primaryHierarchy=function(){var e;return this.parserContext,!this.primaryHierarchyParser&&this.parserContext&&(e=this.it.current().PH,this.primaryHierarchyParser=e&&new p(e,this.parserContext,0,0)),this.primaryHierarchyParser},E.prototype.secondaryHierarchy=function(){var e;return this.parserContext,!this.secondaryHierarchyParser&&this.parserContext&&(e=this.it.current().SH,this.secondaryHierarchyParser=e&&new p(e,this.parserContext,1,0)),this.secondaryHierarchyParser},E.prototype.messages=function(){return!this.messageParser&&0<_.size(this.it.current().Msg)&&(this.messageParser=new l(this.it.current().Msg)),this.messageParser},E.prototype.hasRestartTokens=function(){return 0<_.size(this.restartTokens())},E.prototype.restartTokens=function(){var e=this.it.current(),t=e.DW;return(_.isEmpty(t)?e:(t.length,t[0])).RT},E.prototype.complete=function(){var e=this.it.current(),t=e.DW;return(_.isEmpty(t)?e:(t.length,t[0])).IC},E.prototype.hasAllData=function(){return this.it.current().HAD},E.prototype.limitsExceeded=function(){return 0<_.size(this.it.current().DLEx)},E.prototype.limits=function(){return this.limitsParser||(this.limitsParser=new c(this.it.current().DLEx)),this.limitsParser},u=E,D.prototype.next=function(){return this.it.next()},D.prototype.id=function(){return this.it.current().N},D.prototype.count=function(){return this.it.count()},c=D,I.prototype.next=function(){return this.it.next()},I.prototype.code=function(){return this.it.current().Code},I.prototype.severity=function(){return this.it.current().Severity},I.prototype.dsrMessage=function(){return new n.DsrMessage(this.it.current())},l=I,w.prototype.count=function(){return this.it.count()},w.prototype.reset=function(){this.it.reset(),this.dataMemberId=void 0},w.prototype.next=function(){this.instancesParser&&(this.instancesParser=void 0),this.dataMemberId&&(this.dataMemberId=void 0);var e=this.it.next();if(e){var t=this.dataMemberIdCache();if(0<_.size(t))for(var r=this.it.current(),i=0,a=t[this.depth];i<a.length;i++){var n=a[i];r[n]&&(this.dataMemberId=n)}void 0===this.dataMemberId&&(t=Object.keys(this.it.current()),1===_.size(t))&&(this.dataMemberId=t[0])}return e},w.prototype.id=function(){return this.dataMemberId},w.prototype.dataMemberIdCache=function(){return 0===this.hierarchy?this.context.primaryDataMemberIdCache:this.context.secondaryDataMemberIdCache},w.prototype.instances=function(){var e;return this.instancesParser||(e=this.it.current()[this.dataMemberId],this.instancesParser=e&&new h(e,this.context,this.id(),this.hierarchy,this.depth)),this.instancesParser},p=w,__extends(M,d=t),M.prototype.next=function(){var e,t=this.it.next();return t&&(e=this.it.current(),this.context.locked||e.M||1!==this.hierarchy||this.context.secondaryLeafDataMemberId.push(this.parentDataMemberId),this.setCalculations(e),this.dataMemberIt=void 0,this.intersectionParserDirty=!0,1===this.hierarchy)&&e.Intersections,t},M.prototype.count=function(){return this.it.count()},M.prototype.currentIndex=function(){return this.it.index()},M.prototype.intersections=function(){var e;return this.intersectionParser?(this.intersectionParserDirty&&(this.intersectionParserDirty=!1,this.intersectionParser.reset(this.it.current().X)),this.intersectionParser):(this.intersectionParserDirty=!1,e=this.it.current().X,this.intersectionParser=e&&new m(e,this.context,this.parentDataMemberId))},M.prototype.restartFlagKind=function(){return this.it.current().RF},M.prototype.restartKind=function(){return this.it.current().RK},M.prototype.members=function(){var e;return this.dataMemberIt||(e=this.it.current().M,this.dataMemberIt=e&&new p(e,this.context,this.hierarchy,this.depth+1)),this.dataMemberIt},h=M,b.prototype.reset=function(e){this.it.reset(e),this.logicalIntersectionIndex=-1,this.physicalIntersectionIndex=-1,this.hasIntersectionElements=0<e.length},b.prototype.next=function(){if(this.resetCalcIt(),this.logicalIntersectionIndex++,this.logicalIntersectionIndex>=this.expectedIntersectionCount)return!1;if(this.setIntersectionId(),this.it.count()===this.expectedIntersectionCount)return(e=this.it.next())&&this.initialize(this.it.current()),e;if(this.hasIntersectionElements){var e=void 0;if((0===this.logicalIntersectionIndex||this.physicalIntersectionIndex<this.logicalIntersectionIndex)&&this.it.next()&&((e=this.it.current()).I||0===this.logicalIntersectionIndex?this.physicalIntersectionIndex=e.I||0:this.physicalIntersectionIndex++),this.physicalIntersectionIndex===this.logicalIntersectionIndex)return e=e||this.it.current(),this.initialize(e),!0}return this.initialize(),!0},b.prototype.setIntersectionId=function(){this.intersectionId=this.parentDataMemberId+this.context.secondaryLeafDataMemberId[this.logicalIntersectionIndex]},b.prototype.resetCalcIt=function(e){e=e&&e.C;this.currentCalcIndex=-1,this.currentCalc=void 0,this.calcIt=e?new o.Iterator(e):void 0},b.prototype.initialize=function(e){if(this.logicalIntersectionIndex,this.resetCalcIt(e),e){var t=e.S;if(t&&!this.context.locked){void 0===this.intersectionCalcCount&&(this.intersectionCalcCount=t.length),this.calcMetadataCache[this.logicalIntersectionIndex],this.calcMetadataCache[this.logicalIntersectionIndex]=t;for(var r=this.context.calcIdToCalcMetadata,i=0,a=t;i<a.length;i++)r[a[i].N]=t}}this.calculationContainer=e;var n=this.context.lastIntersectionCalcCache[this.intersectionId],e=(!n&&this.intersectionId&&(n=this.context.lastIntersectionCalcCache[this.intersectionId]=new Array(this.intersectionCalcCount)),this.baseCalculationParser.initialize(e,n),this.getCalcMetadata());e&&(this.currentCalcMetadata=e,void 0===this.intersectionCalcCount)&&(0<this.intersectionMeasureCount?this.intersectionCalcCount=this.currentCalcMetadata.length:this.intersectionCalcCount=0)},b.prototype.restartCalcs=function(){this.calcIt&&this.calcIt.reset(),this.currentCalcIndex=-1,delete this.currentCalc},b.prototype.nextCalc=function(){var e=++this.currentCalcIndex;return e<this.intersectionCalcCount?(this.currentCalc=this.baseCalculationParser.getCurrentCalc(e,this.calcIt,this.calculationContainer,this.calcId()),!0):(this.currentCalc=void 0,!1)},b.prototype.calcId=function(){return this.currentCalcMetadata[this.currentCalcIndex].N},b.prototype.getCalcMetadata=function(){this.logicalIntersectionIndex;var e,t=this.calcMetadataCache[this.logicalIntersectionIndex];return t||this.context.locked||(e=this.getExpectedCalcId())&&(t=this.calcMetadataCache[this.logicalIntersectionIndex]=this.context.calcIdToCalcMetadata[e]),t},b.prototype.getExpectedCalcId=function(){var e,t,r,i;if(0!==this.intersectionMeasureCount)return i=1===(t=(e=this.context).dataMemberIdToMetadata[e.secondaryLeafDataMemberId[this.logicalIntersectionIndex]]).kind,r=this.currentCalcIndex<0?e.intersectionMeasureToSelectIndex[0]:e.intersectionMeasureToSelectIndex[this.currentCalcIndex],r=e.selects[r],i&&this.primaryMemberIsGroupMember?r.Value:r.Subtotal?(i=n.DataShapeUtility.computeAggIdx(this.primaryDataMemberDepth,t.depth,e.maxPrimaryDepth,e.maxSecondaryDepth),r.Subtotal.length>i&&r.Subtotal[i]):void 0},b.prototype.calcValue=function(){return void 0!==this.currentCalc&&null!==this.currentCalc?this.parseCalcValue(this.currentCalc):null},b.prototype.parseCalcValue=function(e){var t=this.calcMetadataCache[this.logicalIntersectionIndex][this.currentCalcIndex],r=this.context.valueDictionaryHandler.getCalcValue(e,t.DN,t.T);return r=void 0===r?a.PrimitiveValueEncoding.parseOptimizedValue(e,t.T):r},b.prototype.calcValueAsExpr=function(){var e;return void 0!==this.currentCalc?this.parseCalcValueExpr(this.currentCalc,this.calcValue()):this.it.index()!==this.logicalIntersectionIndex||null===(e=this.calcValue())?a.SQExprBuilder.nullConstant():this.parseCalcValueExpr(this.it.current()[this.calcId()],e)},b.prototype.parseCalcValueExpr=function(e,t){var r=this.calcMetadataCache[this.logicalIntersectionIndex][this.currentCalcIndex],i=this.context.valueDictionaryHandler.getCalcValueExpr(t,e,r.DN,r.T);return i=void 0===i?a.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(t,e,r.T):i},b.prototype.calcCount=function(){return this.calcIt?this.calcIt.count():0},m=b,V.prototype.initialize=function(e){this.value=e,this.overflowValue=V.MaxSignedNumberFor32Bits<e?T(e):0},V.prototype.hasBitAtPosition=function(e){var t,r;return!(52<e)&&(0<this.value?(t=0,r=this.value,e<31?t=1<<e:(t=1<<e-31,r=this.overflowValue),0<(r&t)):void 0)},V.MaxSignedNumberFor32Bits=Math.pow(2,31)-1,f=V,e.BitSequenceHandler=f,R.prototype.initialize=function(e){this.bitSequenceHandler.initialize(e)},R.prototype.tryRead=function(e){if(this.bitSequenceHandler.hasBitAtPosition(e))return null},y=R,P.prototype.initialize=function(e,t){this.bitSequenceHandler.initialize(e),this.lastContainerCalculations=t},P.prototype.tryRead=function(e){if(this.bitSequenceHandler.hasBitAtPosition(e))return this.lastContainerCalculations[e]},g=P,v=31,e.getLast33BitsIn64Bits=T})(powerbi=powerbi||{}),(function(r){var e,d,o;function t(e,t,r,i,a){this.addVisualIdToQueryDataAsHttpBodyId=a,this.preferredMaxBatchesConfigured=0<e,this.maxBatches=this.preferredMaxBatchesConfigured?e:4,this.queryExecuteCallback=t,this.pending=[],this.timeoutService=r,this.telemetryV2Enabled=i,this.useHttp2QueryDataEnabled=jsCommon.BrowserUtils.browserSupportsHttp2()}e=r.data||(r.data={}),d=e.dsr||(e.dsr={}),o=jsCommon.JsonComparer,d.http2MaxConnections=20,t.prototype.enqueue=function(e){var t=this;if(!(function(e,t){var r=t.options;if(1===r.executionType){r.queryId;t=_.findIndex(e,(function(e){return e.options.queryId===r.queryId}));if(-1<t)return e[t].execution.rejected(),1}return})(this.pending,e))return this.pending.push(e),this.currentBatchDeferred||(this.currentBatchDeferred=e.options.telemetryV2Enabled?new r.PbiDeferred(!0):$.Deferred(),this.timeoutService.setTimeout(-1,this.telemetryV2Enabled).promise.then((function(){var e=t.createBatches();t.clearPending(),t.queryExecuteCallback(e),t.currentBatchDeferred.resolve(),t.currentBatchDeferred=void 0}))),e.options.telemetryV2Enabled?this.currentBatchDeferred.promise:this.currentBatchDeferred.promise()},t.prototype.clearPending=function(){this.pending=[]},t.prototype.setMaxBatches=function(e){this.maxBatches=e,this.preferredMaxBatchesConfigured=0<e},t.prototype.createBatches=function(){var e=[],t=this.sortQueriesByDataSource(),r=this.maxBatches,i=!1;if(this.preferredMaxBatchesConfigured||!this.useHttp2QueryDataEnabled||_.some(t,(function(e){return _.some(e.dataSources,(function(e){return e.isLimitedParallelQueryModel}))}))||(r=d.http2MaxConnections,i=!0),t.length>=r)for(var a=0,n=t.length;a<n;++a)e.push(this.createBatchFromDataSourceGroup(t[a]));else e=this.splitDataSourcesIntoBatches(t,r);return i&&_.forEach(e,(function(e){return e.useSynchronous=!0})),e},t.prototype.sortQueriesByDataSource=function(){var e,i=this,t=(e=this.addVisualIdToQueryDataAsHttpBodyId?_.groupBy(this.pending,(function(e){return null==(e=null==(e=null==(e=null==(e=e.options)?void 0:e.applicationContext)?void 0:e.Sources)?void 0:e[0])?void 0:e.VisualId})):{"":this.pending},[]);return _.forEach(e,(function(e){var r=[];_.forEach(e,(function(e){var t;!(function(e){if(d.isRejectableQueuedExecution(e))return e.execution.rejected();return})(e)&&((t=i.findDataSourceGroup(e.options.dataSources,r,e.options.cacheResponseOnServer))?t.queuedExecutions.push(e):(t={dataSources:e.options.dataSources,queuedExecutions:[e],cacheResponseOnServer:e.options.cacheResponseOnServer,cacheOptions:e.options.cacheOptions},r.push(t)))})),t.push.apply(t,r)})),t},t.prototype.findDataSourceGroup=function(e,t,r){for(var i=0,a=t.length;i<a;++i){var n=t[i];if(o.equals(e,n.dataSources)&&n.cacheResponseOnServer===r)return n}return null},t.prototype.createBatchFromDataSourceGroup=function(e){for(var t=[],r=[],i=[],a=e.queuedExecutions,n=[],o=[],s=0,u=a.length;s<u;++s){var c=a[s],l=a[s].options,p=a[s].enqueueActivity;d.isRejectableQueuedExecution(c)?(t.push(l),i.push(c.deferred),p&&n.push(p),a[s].queryActivity&&o.push(a[s].queryActivity)):(l.executionType,r.push(l))}return{dataSources:e.dataSources,queryOptions:t,cancelQueryOptions:r,promises:i,cacheOptions:e.cacheOptions,cacheResponseOnServer:e.cacheResponseOnServer,enqueueActivities:n,queryActivities:o}},t.prototype.splitDataSourcesIntoBatches=function(e,t){for(var r=[],i=0,a=e.length;i<a;++i)r.push(this.createBatchFromDataSourceGroup(e[i]));return r=this.splitBatches(r,t)},t.prototype.splitBatches=function(e,t){for(var r=e.slice();r.length<t;){for(var i=void 0,a=0,n=r.length;a<n;++a){var o=r[a];1<o.queryOptions.length&&(!i||i.queryOptions.length<o.queryOptions.length)&&(i=o)}if(!i)return r;r.push(this.splitBatch(i)),i=null}return r},t.prototype.splitBatch=function(e){var t=e.queryOptions.length,r=e.queryOptions.splice(t/2),i=e.promises.splice(t/2),a=e.enqueueActivities.splice(t/2),t=e.queryActivities.splice(t/2),n=e.cancelQueryOptions.length,o=[];return n&&(o=e.cancelQueryOptions.splice(n/2)),{dataSources:e.dataSources,queryOptions:r,promises:i,cacheOptions:e.cacheOptions,cacheResponseOnServer:e.cacheResponseOnServer,cancelQueryOptions:o,enqueueActivities:a,queryActivities:t}},d.ExecuteSemanticQueryBatcher=t,d.createBatchFromQueries=function(e,t,r,i,a){return{queryOptions:_.map(e,(function(e){return{command:e,dataSources:t}})),cancelQueryOptions:[],cacheOptions:r,dataSources:t,cacheResponseOnServer:i,promises:[],enqueueActivities:[],queryActivities:[],useSynchronous:a}}})(powerbi=powerbi||{}),(function(v){var e,f,t,i,l,c,r,p,a,n;function o(e,t,r,i,a,n,o,s,u){void 0===u&&(u=!1),this.useSynchronous=!1,this.httpService=e,this.impersonationStateProvider=n,this.promiseFactory=i,this.telemetryService=t,this.localeProvider=r,this.uri=a,this.featureSwitches=o,this.directToMwcConnectionInfoService=s,this.useSynchronous=u}function s(e,t,r,i,a,n,o,s){var u=this;this.communication=t,this.telemetryService=i,this.featureSwitches=o,this.queryContextProvider=s,this.promiseFactory=e.promiseFactory(),this.delayedQueryResultResolver=a||new c,this.batcher=new f.ExecuteSemanticQueryBatcher(null==n?0:n,function(e){for(var t=0,r=e.length;t<r;++t)u.executeBatch(e[t])},r,o&&o.telemetryV2,o&&o.addVisualIdToQueryDataAsHttpBodyId),this.queryCache=f.createQueryCache(this.promiseFactory,this.telemetryService,(function(e,t){var r={options:e,deferred:t.deferred,execution:t.promise,enqueueActivity:e.performanceActivity&&e.performanceActivity.isRunning()&&e.performanceActivity.createChildActivity({name:"Query Pending"}),queryActivity:e.performanceActivity};null!=(t=u.featureSwitches)&&t.queryContext?u.setQueryContext(r).then((function(){return u.enqueueExecution(r)})):u.enqueueExecution(r)}),(function(e,t){u.telemetryService.logEvent(v.telemetry.DataQueryCancellation,{source:t}),u.enqueueExecution({options:e,enqueueActivity:e.performanceActivity&&e.performanceActivity.isRunning()&&e.performanceActivity.createChildActivity({name:"Query Pending"}),queryActivity:e.performanceActivity})}),o)}function u(){}function d(e){var t=this;return(t=r.call(this,"ExecuteSemanticQueryUnknownError")||this).httpRequestId=e,t}function h(e){var t=this;return(t=a.call(this,"DelayedQueryTimeoutError")||this).jobId=e,t}function m(e){return null!=e&&void 0!==e.deferred&&void 0!==e.execution}e=v.data||(v.data={}),f=e.dsr||(e.dsr={}),t=v.ClientErrorStrings,e=v.telemetry.DataQueryDataEventName,i=jsCommon.HttpUtils,f.createExecuteSemanticQueryProxyHttpCommunication=function(e,t,r,i,a,n,o,s,u,c){return new l(e,t,r,i,a,n,o,s,c=void 0===c?!1:c)},f.executeSemanticQueryRequestVersion1="1.0.0",o.prototype.execute=function(e){for(var t=this.httpService.powerbiRequestOptions(null,"ExecuteSemanticQuery",void 0,!0),r=f.generateSemanticQueryRequest(e,this.localeProvider,this.impersonationStateProvider),i=0,a=e.enqueueActivities;i<a.length;i++)a[i].resolve();var n,o=this.featureSwitches&&this.featureSwitches().telemetryV2,s=this.featureSwitches&&this.featureSwitches().addVisualIdToQueryDataAsHttpBodyId,o=this.promiseFactory.defer(o),u=e.cacheOptions,c=e.useSynchronous||this.useSynchronous,l=e.dataSources[0].dbName,p=!1,d=((!l||1<e.dataSources.length)&&(this.telemetryService.logEvent(v.telemetry.Error,{message:"A direct to MWC request was missing a dbName or more then one source was used in this request. This will cause issues routing with AutoPremium"}),p=!0),this.uri),s=((c||s)&&(h={},c&&(h.synchronous="true"),s&&(s=null==(s=null==(s=null==(s=null==(s=null==(s=e.queryOptions)?void 0:s[0])?void 0:s.applicationContext)?void 0:s.Sources)?void 0:s[0])?void 0:s.VisualId)&&(h.$httpBodyId=s),d=jsCommon.UrlUtils.setQueryParameters(d,h,!0)),d),h=t.authorizationHeaderOverride,m=r.modelId;return!this.directToMwcConnectionInfoService||!(n=this.directToMwcConnectionInfoService.checkModelConnectionInfo(m))||this.impersonationStateProvider&&this.impersonationStateProvider.impersonating||p?this.sendHttpRequest(d,r,t,o,u,e.queryActivities,c):this.sendDirectToMwcRequestWithFallbackOnFailure(n,d,r,t,o,m,s,h,u,l,e.queryActivities,c),o.promise},o.prototype.sendDirectToMwcRequestWithFallbackOnFailure=function(e,n,a,o,s,u,c,l,p,t,d,h){for(var m=this,f=(n=e.capacityUri+"query",o.useMwcTokenAuthorization=!0,o.authorizationHeaderOverride=e.mwcToken,this.telemetryService.startEvent(v.telemetry.DataQueryData,{endPoint:this.uri,clientAndServerRequestIdMatch:!0,synchronous:h,cacheOptions:p})),y=(o.headers["x-ms-root-activity-id"]=o.headers.RequestId,o.headers["x-ms-parent-activity-id"]=o.headers.RequestId,o.headers["x-ms-workload-resource-moniker"]=t,[]),r=0,i=d;r<i.length;r++){var g=i[r].createChildActivity({name:"Query Executing"});g&&y.push(g)}this.httpService.post(n,a,o).then((function(e){m.attachHttpMetadataToTelemetry(f.event.info,e,n),m.attachCacheMetadataToTelemetryDirectToMwc(f.event,e);var t=e.headers("x-ms-mwc-throttling-delay");_.isEmpty(t)||m.directToMwcConnectionInfoService.notifyThrottlingOnNotificationBar();for(var r=0,i=y;r<i.length;r++){var a=i[r];m.attachHttpMetadataToContextActivity(a,e),a.resolve()}f.resolve(),s.resolve(m.attachHttpMetadataToResult(e))}),(function(e){m.attachHttpMetadataToTelemetry(f.event.info,e,n),m.attachCacheMetadataToTelemetryDirectToMwc(f.event,e);for(var t=0,r=y;t<r.length;t++){var i=r[t];m.attachHttpMetadataToContextActivity(i,e),i.reject()}f.reject(v.errorDetailsHelper.getTelemetryErrorDetails(e.error,e.status)),m.directToMwcConnectionInfoService.removeModelConnectionInfo(u),o.authorizationHeaderOverride=l,o.useMwcTokenAuthorization=null,m.sendHttpRequest(c,a,o,s,p,d,h)}))},o.prototype.sendHttpRequest=function(a,e,t,n,r,i,o){for(var s=this,u=this.telemetryService.startEvent(v.telemetry.DataQueryData,{endPoint:this.uri,clientAndServerRequestIdMatch:!0,synchronous:o,cacheOptions:r}),c=[],l=0,p=i;l<p.length;l++){var d=p[l].createChildActivity({name:"Query Executing"});d&&c.push(d)}this.httpService.post(a,e,t).then((function(e){s.attachHttpMetadataToTelemetry(u.event.info,e,a);for(var t=0,r=c;t<r.length;t++){var i=r[t];s.attachHttpMetadataToContextActivity(i,e),i.resolve()}u.resolve(),n.resolve(s.attachHttpMetadataToResult(e))}),(function(e){s.attachHttpMetadataToTelemetry(u.event.info,e,a);for(var t=0,r=c;t<r.length;t++){var i=r[t];s.attachHttpMetadataToContextActivity(i,e),i.reject()}u.reject(v.errorDetailsHelper.getTelemetryErrorDetails(e.error,e.status)),n.reject(s.attachHttpMetadataToResult(e))}))},o.prototype.attachHttpMetadataToContextActivity=function(e,t){var r;e.isRunning()&&t.performanceTimings&&(e.setProperty("transferSize",null==(r=t.performanceTimings)?void 0:r.transferSize),e.setProperty("contentType",t.headers("content-type")),e.setProperty("httpStatus",t.status.toString()),e.setProperty("requestId",t.requestId),e.setProperty("requestStart",null==(r=t.performanceTimings)?void 0:r.requestStart),e.setProperty("responseStart",null==(r=t.performanceTimings)?void 0:r.responseStart),e.setProperty("start",t.performanceTimings.startTime),e.setProperty("end",t.performanceTimings.responseEnd))},o.prototype.attachHttpMetadataToTelemetry=function(e,t,r){e.endPoint=r,e.clientAndServerRequestIdMatch=i.clientAndServerRequestIdMatch(t),e.responseRequestId=i.getResponseRequestId(t),e.requestId=t.requestId,e.status=t.status,t.performanceTimings&&jsCommon.HttpUtils.attachPerformanceTiming(t.performanceTimings,e)},o.prototype.attachCacheMetadataToTelemetryDirectToMwc=function(e,t){t.data.results&&(e.info.fromCache=_.reduce(t.data.results,(function(e,t){return t.fromCache?++e:e}),0),e.info.resultCount=t.data.results.length)},o.prototype.attachHttpMetadataToResult=function(e){var t;return e&&e.data?((t=e.data).requestId=e.responseRequestId||e.requestId,t.httpStatusCode=e.status,t):{jobIds:null,results:null,requestId:e.responseRequestId||e.requestId,httpStatusCode:e.status}},__decorate([v.MonitorWith(e)],o.prototype,"execute",null),l=o,s.prototype.setQueryContext=function(i){var a;return __awaiter(this,void 0,v.Promise,(function(){var t,r;return __generator(this,(function(e){switch(e.label){case 0:if(null==(a=this.featureSwitches)||!a.queryContext)return[2];if(!this.queryContextProvider||!i.options.applicationContext)return[2];_.size(i.options.applicationContext.Sources),t=i.options.applicationContext.Sources[0],e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.queryContextProvider.generateQueryContext()];case 2:return(r=e.sent())?(t.CustomProperties=__assign(__assign({},t.CustomProperties),r),[3,4]):[2];case 3:return e.sent(),[2];case 4:return[2]}}))}))},s.prototype.enqueueExecution=function(e){this.isCommunicationStopped?(this.pausedQueries=this.pausedQueries||[],this.pausedQueries.push(e)):this.batcher.enqueue(e)},s.prototype.execute=function(e){var t,r;return _.isEmpty(e.dataSources)?(t=this.promiseFactory.defer(e.telemetryV2Enabled),r=v.createRejectablePromise2(t),t.resolve(e.command),r):this.queryCache.ensure(e)},s.prototype.stopCommunication=function(){this.isCommunicationStopped=!0},s.prototype.resumeCommunication=function(){this.isCommunicationStopped=!1;var e=this.pausedQueries;if(e){for(var t=0,r=e.length;t<r;t++){var i=e[t];!(function(e){if(m(e))return e.execution.pending();return})(i)||this.batcher.enqueue(i)}this.pausedQueries=void 0}},s.prototype.cache=function(){return this.queryCache},s.prototype.setLocalCacheResult=function(e,t){this.queryCache.put(e.dataSources,e.command,t)},s.prototype.setPreferredMaxConnections=function(e){this.batcher.setMaxBatches(e)},s.prototype.executeBatch=function(e){var t=this,r=(e.queryOptions.length,e.promises.length,e.promises);this.communication.execute(e).then((function(e){return t.onSuccess(e,r)}),(function(e){return t.onError(e,r)}))},s.prototype.onSuccess=function(e,t){this.rejectExecutionsForMissingJobs(e,t);for(var r=e.jobIds,i={},a=0,n=t.length;a<n;++a)i[r[a]]=t[a];for(var o=e.results,a=0,n=o.length;a<n;++a){var s=o[a],u=s.result,c=i[d=s.jobId],l=(delete i[d],u.data),p=u.error;l?(l={descriptor:l.descriptor,dsr:l.dsr,metrics:l.metrics,requestId:e.requestId,timestamp:l.timestamp,fromCache:l.fromCache},c.resolve(l)):p?((l=new v.ServiceErrorToClientError(p)).requestId=e.requestId,c.reject(l)):u.asyncResult&&this.delayedQueryResultResolver.resolveDelayedQuery(s.jobId,e.requestId,c)}if(!_.isEmpty(Object.keys(i))){var d,p=new f.ExecuteSemanticQueryProxyError(e.requestId,"MissingJobResult");for(d in i)i[d].reject(p)}},s.prototype.rejectExecutionsForMissingJobs=function(e,t){var r=e.jobIds.length,i=t.length;if(r<i)for(var a=new f.ExecuteSemanticQueryProxyError(e.requestId,"MissingJobId"),n=r;n<i;n++)t[n].reject(a)},s.prototype.onError=function(e,t){var r,i,a,n,o;(r=e&&e.requestError?new v.ServiceErrorToClientError(e.requestError):r)?r.requestId=e.requestId:(i=n=a=void 0,(o=e.error)&&(a=o.message,n=o.code,null!=(o=o["pbi.error"]&&o["pbi.error"].exceptionCulprit))&&(i=v.errorDetailsHelper.getErrorSource(o)),r=e&&null!=e.httpStatusCode&&e.requestId?new v.HttpClientError(e.httpStatusCode,e.requestId,n,a,i):new p(e.requestId));for(var s=0,u=t.length;s<u;s++)t[s].reject(r)},f.ExecuteSemanticQueryProxy=s,u.prototype.resolveDelayedQuery=function(e,t,r){r.reject(new n(e))},c=u,r=v.UnknownClientError,__extends(d,r),Object.defineProperty(d.prototype,"requestId",{get:function(){return this.httpRequestId},enumerable:!1,configurable:!0}),d.prototype.getDetails=function(e){e=r.prototype.getDetails.call(this,e);return e.debugErrorInfo=e.debugErrorInfo||[],e.debugErrorInfo.push({errorInfoKey:t.HttpRequestId,errorInfoValue:this.httpRequestId}),e},p=d,a=v.UnknownClientError,__extends(h,a),h.prototype.getDetails=function(e){e=a.prototype.getDetails.call(this,e);return e.debugErrorInfo=e.debugErrorInfo||[],e.debugErrorInfo.push({errorInfoKey:t.JobId,errorInfoValue:this.jobId}),e},n=h,f.single=function(e){return e.length,_.head(e)},f.isRejectableQueuedExecution=m})(powerbi=powerbi||{}),(function(t){var e;function r(e,t){this.requestId=e,this.errorCode=t}e=(e=t.data||(t.data={})).dsr||(e.dsr={}),Object.defineProperty(r.prototype,"code",{get:function(){return this.errorCode},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.getDetails=function(e){return{message:e.get("ServiceError_CannotLoadVisual"),displayableErrorInfo:[{errorInfoKey:e.get("ServiceError_ExecuteSemanticQueryErrorKey"),errorInfoValue:e.get("ServiceError_ExecuteSemanticQueryErrorValue")},{errorInfoKey:e.get("AdditionalErrorInfo_ErrorText"),errorInfoValue:this.code}],debugErrorInfo:[{errorInfoKey:t.ClientErrorStrings.ClientErrorCode,errorInfoValue:this.code}]}},e.ExecuteSemanticQueryProxyError=r})(powerbi=powerbi||{}),(function(e){var u;e=(e=e.data||(e.data={})).dsr||(e.dsr={}),u=jsCommon.DateExtensions,e.parseExecutionEvents=function(e,t){for(var r=[],i={},a=0,n=e;a<n.length;a++){var o=n[a],s={id:o.Id,name:o.Name,component:o.Component,pageHidden:void 0,start:u.parseIsoDate(o.Start).valueOf(),end:o.End?u.parseIsoDate(o.End).valueOf():void 0,metrics:o.Metrics,status:1,rootId:t,parentId:o.ParentId};(o.ParentId?(i[o.ParentId]||(i[o.ParentId]=[]),i[o.ParentId]):r).push(s)}return (function e(t,r){for(var i=0,a=t;i<a.length;i++){var n=a[i];r[n.id]&&(n.children=r[n.id],e(n.children,r))}})(r,i),r}})(powerbi=powerbi||{}),(function(e){var f,t,y;function g(e,t){e.query=e.query.addSelect(t);var r=e.query.select(),i=f.SQExprUtils.indexOfNamedExpr(r,t),r=r[i];return(e.additionalProjections||(e.additionalProjections=[])).push({queryName:r.name,selector:null}),{index:i,expr:t,queryName:r.name}}f=e.data||(e.data={}),t=f.dsr||(f.dsr={}),y=e.data.SQExprBuilder,(t.AggregatesQueryRewriter||(t.AggregatesQueryRewriter={})).run=function(e){var t=e.mappings;if(1===t.length){t=(function(e){var a,n;if(f.CompiledDataViewMapping.visitMapping(e,{visitRole:function(e){if(e.aggregates&&!_.isEmpty(e.items)){a||(a={},n=[]);for(var t=0,r=e.items;t<r.length;t++){var i=r[t];a[i.queryName]=e.aggregates}n.push(e)}}}),a)return{queryNames:a,roles:n}})(t[0]);if(t){var r,i=(i=e.queryRewrites)||(e.queryRewrites=[]),a=e,n=t.queryNames,o=i,s=a.query.select();for(r in n){var u=s.withName(r).expr,c=n[r],l={};c.min&&(l.min=g(a,y.aggregate(u,3))),c.max&&(l.max=g(a,y.aggregate(u,4))),o.push({aggregatesAdded:{originalQueryRef:r,aggregates:l}})}for(var i=t,p=i.queryNames,d=0,h=i.roles;d<h.length;d++){var m=h[d];m.items,_.remove(m.items,(function(e){return p[e.queryName]}))}}}return e}})(powerbi=powerbi||{}),(function(e){var x,C,o;function E(e,t,r,i){var a=r.queryName,n=(n=e[a])||(e[a]={categoryAndValueGroup:[],categoryOnly:[]}),e={roleName:t,roleItem:r};(i?n.categoryAndValueGroup:n.categoryOnly).push(e)}function D(e,t){for(var r={for:{in:t}},i=0,a=e;i<a.length;i++){var n=a[i];if(o.equals(n,r))return}e.push(r)}x=e.data||(e.data={}),C=x.dsr||(x.dsr={}),o=jsCommon.JsonComparer,(C.MultiMappedQueryRewriter||(C.MultiMappedQueryRewriter={})).run=function(e){var t,r=e.mappings.length;if(1===r)return e;if(1<r){r=(function(e){for(var t=e.query,r=e.mappings,i=e.additionalProjections,e=e.queryRewrites,a=[],n=[],o={by:null,select:[]},s={categories:{select:a},values:{group:o,select:n}},u={},c=0,l=r;c<l.length;c++){var p=l[c];if(!p.categorical)return;p=p.categorical;!(function(e,n,t,o,s){var u,r=e.values;r&&(x.CompiledDataViewMapping.visitCategoricalCategories(e.categories,{visitRole:function(e){D(t,e)}}),x.CompiledDataViewMapping.visitGrouped(r,{visitRole:function(e){if((s.by=e).items)for(var t=0,r=e.items;t<r.length;t++){var i=r[t];E(n,e.role,i,!0),u=!0}}}),x.CompiledDataViewMapping.visitCategoricalValues(r,{visitRole:function(e,t){if(D("CategoricalValueGroup"===t?s.select:o,e),e.items)for(var r=0,i=e.items;r<i.length;r++){var a=i[r];E(n,e.role,a,u)}}}))})(p,u,a,n,o),null!=s.dataVolume&&null!=p.dataVolume&&p.dataVolume,null!=p.dataVolume&&null==s.dataVolume&&(s.dataVolume=p.dataVolume)}var d,h=e?__spreadArray([],e,!0):[],m=t;for(d in u){var f=u[d];if(!_.isEmpty(f.categoryAndValueGroup)&&!_.isEmpty(f.categoryOnly))for(var y=0,g=f.categoryAndValueGroup;y<g.length;y++){var v=g[y],S=v.roleItem,v=C.QueryRewriterUtils.duplicateSelect(m,S.queryName,v.roleName);S.queryName=v.newQueryName,m=v.newQuery,h.push.apply(h,v.rewriteRecords)}}return{query:m,mappings:[{metadata:r[0].metadata,categorical:s}],queryRewrites:_.isEmpty(h)?void 0:h,additionalProjections:i}})(e);if(_.isEmpty(r.additionalProjections))return r;for(var e=r.query,i=r.mappings,a=r.queryRewrites,n=__spreadArray([],r.additionalProjections,!0),o=(i.length,C.CompiledDataViewMappingsByRole.findActive(i[0])),s=a?__spreadArray([],a,!0):[],u=e,c=0;c<n.length-1;c++)for(var l=n[c],p=c+1;p<n.length;p++){var d,h=n[p];!(function(e,t,r,i){return e.queryName===t.queryName&&(e=x.DataBoundObjectQueryExtender.getScopeRefs(e.selector.data,r,i),t=x.DataBoundObjectQueryExtender.getScopeRefs(t.selector.data,r,i),r=_.xor(e,t),!_.isEmpty(r))})(l,h,u.select(),o)||(d=C.QueryRewriterUtils.duplicateSelect(u,h.queryName),u=d.newQuery,s.push.apply(s,null!=(t=d.rewriteRecords)?t:[]),n[p]=__assign(__assign({},h),{queryName:d.newQueryName}))}return{query:u,mappings:i,queryRewrites:_.isEmpty(s)?void 0:s,additionalProjections:n}}}})(powerbi=powerbi||{}),(function(e){var t;e=e.data||(e.data={}),(t=e.dsr||(e.dsr={})).DefaultSchemaName=void 0,t.schemaName=function(e){return e.Schema||t.DefaultSchemaName},(e=t.SelectKind||(t.SelectKind={}))[e.None=0]="None",e[e.Group=1]="Group",e[e.Measure=2]="Measure"})(powerbi=powerbi||{}),(function(e){e=e.data||(e.data={});function r(e,t,r){if(e){t.visitDescriptor(e,r);var i=e.Select;if(i&&i.length)for(var a=0,n=i.length;a<n;a++)t.visitSelect(i[a],r);var o,s,e=e.Expressions;e&&(e=e,s=r,(o=t).visitExpressions(e,s),e.Primary,u(e.Primary,o,s),e=e.Secondary)&&u(e,o,s)}}function u(e,t,r){t.visitDataShapeExpressionsAxis(e,r);for(var i=e.Groupings,a=0,n=i.length;a<n;a++){p=l=c=u=s=o=void 0;for(var o=i[a],s=t,u=r,c=(s.visitDataShapeExpressionsAxisGrouping(o,u),o.Keys),l=0,p=c.length;l<p;l++){d=void 0;h=void 0;m=void 0;var d=c[l];var h=s;var m=u;h.visitDataShapeExpressionsAxisGroupingKey(d,m),d.Source,h.visitConceptualPropertyReference(d.Source,m)}}}(e=e.dsr||(e.dsr={})).traverseQueryBindingDescriptor=function(e,t){r(e,t,void 0)},e.traverseQueryBindingDescriptorWithArg=r,i.prototype.visitDescriptor=function(e,t){},i.prototype.visitSelect=function(e,t){},i.prototype.visitExpressions=function(e,t){},i.prototype.visitDataShapeExpressionsAxis=function(e,t){},i.prototype.visitDataShapeExpressionsAxisGrouping=function(e,t){},i.prototype.visitDataShapeExpressionsAxisGroupingKey=function(e,t){},i.prototype.visitConceptualPropertyReference=function(e,t){};var t=i;function i(){}e.DefaultQueryBindingDescriptorVisitorWithArg=t,__extends(n,a=t);var a,t=n;function n(){return null!==a&&a.apply(this,arguments)||this}e.DefaultQueryBindingDescriptorVisitor=n})(powerbi=powerbi||{}),(function(e){var t,u;function r(e,t){e.Select,t.ScriptVisualBinding||(t.Select,e.Select.length,t.Select.length),this._metadata=e,this._binding=t}e=e.data||(e.data={}),t=e.dsr||(e.dsr={}),u=jsCommon.ArrayExtensions,r.prototype.getSelectRestatements=function(){return this.getRestatements()},r.prototype.getGroupRestatements=function(){return this.getRestatements(t.SelectKind.Group)},r.prototype.getMeasureRestatements=function(){return this.getRestatements(t.SelectKind.Measure)},r.prototype.getFilterRestatements=function(){var e=this._metadata.Filters;if(_.isEmpty(e))return null;for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a?a.Restatement:"")}return u.emptyToNull(t)},r.prototype.getRestatements=function(e){var t=this._metadata,r=this._binding,i=[];if(!r.ScriptVisualBinding)for(var a=0,n=t.Select.length;a<n;a++){var o=r.Select[a],s=t.Select[a];!o||void 0!==e&&o.Kind!==e||i.push(s.Restatement||"")}return u.emptyToNull(i)},t.QueryDescription=r})(powerbi=powerbi||{}),(function(i){var C,p,l,E,a,n,d,x,t,e,D,f,r,o,s,u,c,h,v;function m(e,t){this.serializer=e,this.featureSwitches=t}function I(e,t,r,i,a,n,o,s,u,c,l,p,d){var h,m,f,y,g,v=e();if(v.withRestartToken(o).withHighlightFilter(n).withAdditionalProjections(a),r.table?v=v.withGroupBy(s):_.isEmpty(s),2!==r.updateType)if(r.categorical)y=v,o=r.categorical,g=p,C.CompiledDataViewMapping.visitCategoricalCategories(o.categories,{visitRole:function(e){y.withPrimaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,!0,g)},visitReduction:function(e){y.withPrimaryDataReduction(e)}}),C.CompiledDataViewMapping.visitGrouped(o.values,{visitRole:function(e){y.withSecondaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,g)},visitReduction:function(e){y.withSecondaryDataReduction(e)}}),C.CompiledDataViewMapping.visitCategoricalValues(o.values,{visitRole:function(e,t){y.withCurrentInnermostPrimaryGrouping(e.items,e.showAll,e.subtotalType,"CategoricalValueGroup"!==t)}}),y.withIntersectionDataReduction(o.dataReductionAlgorithm).withDataVolume(o.dataVolume).withIncludeEmptyGroups(o.includeEmptyGroups);else if(r.table)f=v,n=r.table,C.CompiledDataViewMapping.visitTable(n,{visitRole:function(e){f.withPrimaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,!0,!1)},visitReduction:function(e){f.withPrimaryDataReduction(e)}}),f.withDataVolume(n.dataVolume);else if(r.matrix){var S=v;s=r.matrix;o=c;var x=p;n=d;c=new D(S,x),c=(C.CompiledDataViewMapping.visitMatrixRows(s.rows,c),o&&o.length,(function(e,t,r,i,a){if(null!=e&&!(_.isEmpty(i)||_.isEmpty(t)&&a)){a=_.find(i,(function(e){return _.isEqual(e.roles,r)}));if(!_.isEmpty(a.levels))return e=_.uniqBy(e,(function(e){return e.queryName})),t=_.uniq(t),i=(_.isEmpty(t)?e:t).length-1,E.DataShapeBindingExpansionStateSerializer.serializeExpansionState(a,i)}})(c.primaryRoleItems,c.primaryActiveRoleItems,c.primaryRoles,o,x));c&&S.withPrimaryExpansion(c);n&&S.withPrimaryWindowExpansion(n);C.CompiledDataViewMapping.visitMatrixColumns(s.columns,{visitRole:function(e){S.withSecondaryGroupingNested(e.items,e.activeItems,e.showAll,e.subtotalType,x)},visitReduction:function(e){S.withSecondaryDataReduction(e)}}),C.CompiledDataViewMapping.visitMatrixValues(s.values,{visitRole:function(e){S.withCurrentInnermostGrouping(e.items,e.showAll,e.subtotalType)}}),S.withDataVolume(s.dataVolume),S.withIncludeEmptyGroups(s.includeEmptyGroups)}else if(r.tree)h=v,d=r.tree,m=p,C.CompiledDataViewMapping.visitTreeNodes(d.nodes,{visitRole:function(e){h.withPrimaryGroupingNested(e.items,e.activeItems,e.showAll,e.subtotalType,m)},visitReduction:function(e){h.withPrimaryDataReduction(e)}}),C.CompiledDataViewMapping.visitTreeValues(d.values,{visitRole:function(e){h.withCurrentInnermostPrimaryGrouping(e.items,e.showAll,e.subtotalType)}}),h.withDataVolume(d.dataVolume);else if(r.scriptResult)return I(e,t,r.scriptResult.dataInput,i,a);return u&&v.withDataVolume(u),v.withTopLevelAggregates(r.scopedAggregates),v.toQueryShape(r)}function y(e,t){this.inComposite=!1,this.startedCompositeNest=!1,this.builder=e,this.noDefaultProjections=t}function g(e,t){if(t)for(var r=0,i=t.Groupings;r<i.length;r++){var a=i[r];if(_.includes(a.Projections,e))return!0}}function S(e,t,r,i,a){this.disableHidden=a,this.indicesByName=e,this.querySelects=t,this.reduction={DataVolume:3},this.joinPredicateBehaviors=[],this.insertProjection=r?l.insertUnique:l.insertSorted,this.featureSwitches=i||{},this.hiddenProjections=[]}function w(e,t){return[new o,new h(e,t),new u]}function M(){return null!==r&&r.apply(this,arguments)||this}function b(){return null!==s&&s.apply(this,arguments)||this}function V(e,t){var r=c.call(this)||this;return r.mappings=e,r.selects=t,r}function R(){this.queryReferencesByRole={}}C=i.data||(i.data={}),p=C.dsr||(C.dsr={}),l=jsCommon.ArrayExtensions,E=i.data.services,a=i.data.FilterKindDetector,n=i.data.dsr.SelectToIdentityExpressionsVisitor,d=i.data.SQExpr,p.createQueryGenerator=function(e){return new t(C.services.SemanticQuerySerializer,e)},m.prototype.execute=function(e){var t,r,i,a,n=this.executeForQueryOnlyImpl(e);return!n||!n.dataShapeBinding&&n.mergedQueries&&n.mergedQueries.mapping&&2===n.mergedQueries.mapping.updateType?{command:void 0}:(t=n.mergedQueries,r=n.dataShapeBinding,i=n.query,this.adjustIntersectionDataReduction(r,t.mapping,i,e.highVolumeOverride),_.isEmpty(i.groupBy())||this.applyDataReductionForGroupByQuery(r,i),a=n.mergedQueries&&n.mergedQueries.mapping&&1===n.mergedQueries.mapping.updateType&&_.isEmpty(e.additionalProjections),{command:this.createDataQuery(i,n.queryExtensionSchema,e.dataSourceVariables,r,n.compiledDataViewMappings,e.dataWindow,e.executionMetricsKinds,e.anchorTime,n.visualShape),splits:t.splits,queryRewrites:n.queryRewrites,deferred:a})},m.prototype.executeForQueryOnly=function(e){e=this.executeForQueryOnlyImpl(e);return e&&e.query},m.prototype.produceIdentities=function(e,t){var r=new n;return e.accept(r,t)},m.prototype.executeForQueryOnlyImpl=function(e){var t,r,i,a=this.getQueryableMappings(e.mappings),n=this.prepareQuery(e.query,a,e.additionalProjections),o=n.query,s=n.mappings,u=n.queryRewrites,n=n.additionalProjections,c=x.getIndicesByName(o),a=p.mergeMappings(a,c),l=(C.applyDataReductionDefaults(e.mappings),e.highVolumeOverride&&(t=6),a.mapping.categorical&&x.updateMappingsWithScalarKeys(a.mapping,c),p.generateDataShapeBinding(this.serializer,c,a.mapping,o.select(),n,e.highlightFilter,e.restartToken,o.groupBy(),t,e.expansionStates,e.keepProjectionOrder,e.noDefaultProjections,e.windowExpansion,this.featureSwitches,e.disableHidden));return C.DataViewPivotCategoricalToPrimaryGroups.pivotBinding(l,s,a.mapping,o.select(),3,t),this.queryHasMeasureFilter(o)&&l&&(this.processTargetsForMeasureFilters(o,s,l),o=this.adjustQueryMeasureFilters(o,l)),o.hasVisualCalculations()&&(r=p.generateVisualShape(this.serializer,c,a.mapping,o.select(),n,e.restartToken,o.groupBy(),t,e.expansionStates,e.noDefaultProjections,e.windowExpansion)),e.queryExtensionLookup&&(o=(c=e.queryExtensionLookup(o,u)).query,i=c.extensions,u=c.queryRewrites),{query:o,queryExtensionSchema:i,mergedQueries:a,dataShapeBinding:l,compiledDataViewMappings:s,queryRewrites:u,visualShape:r}},m.prototype.hasAmbiguousEqualitySemantics=function(e){return d.equals(e,C.SQExprBuilder.boolean(!1))||d.equals(e,C.SQExprBuilder.integer(0))},m.prototype.getQueryableMappings=function(e){return _.filter(e,(function(e){return!e.usage||!e.usage.regression}))},m.prototype.prepareQuery=function(e,t,r){for(var i=0,a=w(t,e.select());i<a.length;i++){var n=a[i];e=e.rewrite(n)}t=this.rewriteQuery(e,t,r);return t.query=(function(e){for(var t,r=e.select(),i=r.length-1;0<=i;i--)d.isConstant(r[i].expr)&&(r.splice(i,1),t=!0);if(t)return e.select(r);return e})(t.query),t},m.prototype.rewriteQuery=function(e,t,r){e={query:e,mappings:t,additionalProjections:r},e=p.MultiMappedQueryRewriter.run(e);return e=p.AggregatesQueryRewriter.run(e),e=this.featureSwitches&&this.featureSwitches.scopedMeasuresEnabled?p.ScopedValuesQueryRewriter.run(e,!0):e},m.prototype.adjustIntersectionDataReduction=function(e,t,r,i){var a,n;t.categorical&&(t=t.categorical).dataReductionAlgorithm&&(e.DataReduction&&e.DataReduction.Intersection?(e.Secondary&&e.Primary,e.Primary&&!e.Secondary&&(e.DataReduction.Primary,e.DataReduction.Primary=e.DataReduction.Intersection,e.DataReduction.Intersection=void 0)):(a=e.Primary&&(!e.DataReduction||!e.DataReduction.Primary),n=e.Secondary&&(!e.DataReduction||!e.DataReduction.Secondary),(a||n)&&(e.DataReduction||(e.DataReduction={DataVolume:t.dataVolume||(i?6:3)}),a&&(e.DataReduction.Primary=C.DataShapeBindingDataReduction.createFrom(t.dataReductionAlgorithm,r.select())),n)&&(e.DataReduction.Secondary=C.DataShapeBindingDataReduction.createFrom(t.dataReductionAlgorithm,r.select()))))},m.prototype.applyDataReductionForGroupByQuery=function(e,t){e.DataReduction={},e.DataReduction.Primary=C.DataShapeBindingDataReduction.createFrom({top:{count:1e3}},t.select())},m.prototype.generateScriptVisualCommand=function(e,t){var r=i.ScriptResultUtil.extractScriptResult(e);return(r=r||i.ScriptResultUtil.extractScriptResultDefaultFromDataViewMappings(e))?(r={Version:0,Script:r.source,RenderingEngine:r.provider,ScriptOutputType:r.outputType},t&&t.height&&t.width&&(r.ViewportWidthPx=t.width,r.ViewportHeightPx=t.height),(t=i.ScriptResultUtil.findScriptResultMapping(e))&&t.script.scriptInput&&(r.ScriptInput=t.script.scriptInput),{ScriptVisualCommand:r}):null},m.prototype.queryHasMeasureFilter=function(e){for(var t=0,r=e.where();t<r.length;t++){var i=r[t];if(1===a.runDetector(i.condition))return!0}return!1},m.prototype.removeExprFromTargetExprs=function(e,t){for(var r=0,i=e;r<i.length;r++){var a=i[r].target;if(null!=a)for(var n=0,o=a.length;n<o;n++)d.equals(a[n],t)&&a.splice(n,1)}},m.prototype.processTargetsForMeasureFilters=function(s,e,t){for(var u=this,c=this.getProjectedSelectIndexMap(t),r=0,i=e;r<i.length;r++){var a=i[r];C.CompiledDataViewMapping.visitMapping(a,{visitRole:function(e){var t=e.activeItems,r=e.items;if(t&&!_.isEmpty(t)&&!_.isEmpty(r))for(var i=_.findIndex(r,(function(e){return _.includes(t,e.queryName)})),a=0;a<i;a++){var n=r[a].queryName,o=s.select(),n=l.indexWithName(o,n);c[n]||(o=o[n].expr,u.removeExprFromTargetExprs(s.where(),o))}}})}},m.prototype.adjustQueryMeasureFilters=function(e,t){var r=e.where(),i=[],a=[];if(_.isEmpty(t.Primary.Groupings)||_.isEmpty(t.Primary.Groupings[0].Projections)||!_.isEmpty(t.Secondary))return e;for(var n=e.select(),o=0,s=t.Primary.Groupings[0].Projections;o<s.length;o++){var u=n[s[o]];if(!C.SQExprUtils.isMeasure(u.expr))return e}for(var c=0,l=r;c<l.length;c++){var p=l[c];_.isEmpty(p.target)?a.push(p):i.push(p)}return _.isEmpty(i)?e:(r=C.SemanticQuery.createWith({from:e.from(),select:e.select(),orderBy:e.orderBy(),top:e.top(),transforms:e.transforms(),groupBy:e.groupBy(),where:a}),t=C.SemanticFilter.fromMeasureFilters(e,i,t),r.addSemanticFilter(t))},m.prototype.getProjectedSelectIndexMap=function(e){return e?_.chain([e.Primary,e.Secondary]).filter((function(e){return e&&!_.isEmpty(e.Groupings)})).map((function(e){return e.Groupings})).flatten().filter((function(e){return!_.isEmpty(e.Projections)})).map((function(e){return e.Projections})).flatten(!1).reduce((function(e,t){return e[t]=!0,e}),{}).value():{}},m.prototype.createDataQuery=function(e,t,r,i,a,n,o,s,u){e={Query:this.serializer.serializeQuery(e),Binding:i,AnchorTime:s};t&&(e.Extension=t),r&&(e.DataSourceVariables=r),o&&(e.ExecutionMetricsKind=o);i={Commands:[{SemanticQueryDataShapeCommand:e}]},s=this.generateScriptVisualCommand(a,n);return s&&i.Commands.push(s),_.isEmpty(u)||(e.Query.VisualShape=u),i},t=m,p.generateDataShapeBinding=function(e,t,r,i,a,n,o,s,u,c,l,p,d,h,m){var f,y=n;if(n)for(var g=0,v=w([r],i);g<v.length;g++)var S=v[g],y=y.rewrite(S);return n&&(f=[e.serializeFilter(y)]),x.generateBaseDataShapeBinding(t,r,i,a,f,o,s,u,c,e,l,p,d,h,m)},p.generateVisualShape=function(e,t,r,i,a,n,o,s,u,c,l){return x.generateQueryShape((function(){return new p.VisualShapeBuilder(i)}),t,r,i,a,[],n,o,s,u,e,c,l)},(e=x=x||{}).generateBaseDataShapeBinding=function(e,t,r,i,a,n,o,s,u,c,l,p,d,h,m){return I((function(){return new f(e,r,l,h,m)}),e,t,r,i,a,n,o,s,u,0,p,d)},e.generateQueryShape=I,y.prototype.visitRole=function(e,t){"MatrixRowsScopedValue"===t?this.builder.withCurrentInnermostPrimaryGrouping(e.items,e.showAll,e.subtotalType,!0):this.inComposite?(t=this.startedCompositeNest,this.startedCompositeNest=!0,this.builder.withPrimaryGrouping(e.items,e.activeItems,e.showAll,e.subtotalType,t,this.noDefaultProjections)):this.builder.withPrimaryGroupingNested(e.items,e.activeItems,e.showAll,e.subtotalType,this.noDefaultProjections),this.primaryRoleItems||(this.primaryRoleItems=[]),this.primaryRoles||(this.primaryRoles=[]),this.primaryRoles.push(e.role),(t=this.primaryRoleItems).push.apply(t,e.items||[]),_.isEmpty(e.activeItems)||(this.primaryActiveRoleItems||(this.primaryActiveRoleItems=[]),(t=this.primaryActiveRoleItems).push.apply(t,e.activeItems||[]))},y.prototype.visitReduction=function(e){this.builder.withPrimaryDataReduction(e)},y.prototype.enterComposite=function(e){this.inComposite=!0,this.startedCompositeNest=!1,this.compositeGroupingIndexStart=this.builder.primaryGroupingCount},y.prototype.exitComposite=function(e){var t,r;this.inComposite=!1,this.startedCompositeNest=!1,(e.dataReductionAlgorithm||e.synchronized)&&(r=this.compositeGroupingIndexStart)<(t=this.builder.primaryGroupingCount)&&(r=_.range(r,t),e.synchronized&&this.builder.withPrimarySynchronization({Groupings:r}),e.dataReductionAlgorithm)&&this.builder.withScopedDataReduction(e.dataReductionAlgorithm,{Primary:r})},D=y,e.getIndicesByName=function(e){for(var t={},r=e.select(),i=e.groupBy(),a=0,n=r.length;a<n;a++)t[r[a].name]=a;for(a=0,n=i.length;a<n;a++)t[i[a].name]=a;return t},e.updateMappingsWithScalarKeys=function(e,t){function r(e){this.indicesByName=e}r.prototype.visitRole=function(e,t){if(!_.isEmpty(e.items)){for(var r,i=0,a=e.items;i<a.length;i++){var n=a[i];n.scalarKeyInfo&&null!=n.scalarKeyInfo.scalarKeyQueryName&&(r=n.scalarKeyInfo.scalarKeyQueryName)}r&&(this.primaryScalarKey,this.primaryScalarKey=this.indicesByName[r])}};var i=new r(t);C.CompiledDataViewMapping.visitMapping(e,i),null!=i.primaryScalarKey&&C.CompiledDataViewMapping.visitMapping(e,{visitRole:function(){},visitReduction:function(e){e.binnedLineSample&&(e.binnedLineSample.primaryScalarKey=i.primaryScalarKey)}})},Object.defineProperty(S.prototype,"primaryGroupingCount",{get:function(){return this.primary&&this.primary.Groupings&&this.primary.Groupings.length||0},enumerable:!1,configurable:!0}),S.prototype.withRestartToken=function(e){return this.restartToken=e,this},S.prototype.withPrimaryWindowExpansion=function(e){return this.reduction.Primary&&this.reduction.Primary.TopNPerLevel&&(this.reduction.Primary.TopNPerLevel.WindowExpansion=E.DataShapeBindingWindowExpansionStateSerializer.serializeWindowExpansionState(e)),this},S.prototype.withDataVolume=function(e){return null!=e&&(this.reduction.DataVolume=e),this},S.prototype.withIncludeEmptyGroups=function(e){return this.includeEmptyGroups=e,this},S.prototype.withHighlightFilter=function(e){return this.highlightFilter=e,this},S.prototype.withGroupBy=function(e){return _.isEmpty(e)||(this.groupByNames=_.map(e,(function(e){return e.name}))),this},S.prototype.withPrimaryGrouping=function(e,t,r,i,a,n){var o;return this.secondary,e=this.filterItems(e,t,n),_.isEmpty(e)||(this.primary?a?o=_.last(this.primary.Groupings):this.primary.Groupings.push(o={Projections:[]}):this.primary={Groupings:[o={Projections:[]}]},this.updateGrouping(o,e,r,i),t=this.getAggregatesForRoleItems(e),this.applyTopLevelAggregates(t)),this},S.prototype.withPrimaryExpansion=function(e){return this.ensurePrimaryAxis(),this.primary.Expansion=e,this},S.prototype.withPrimarySynchronization=function(e){return this.ensurePrimaryAxis(),this.primary.Synchronization||(this.primary.Synchronization=[]),this.primary.Synchronization.push(e),this},S.prototype.ensurePrimaryAxis=function(){this.primary||(this.primary={Groupings:[]})},S.prototype.ensureSecondaryAxis=function(){this.secondary||(this.secondary={Groupings:[]})},S.prototype.withPrimaryGroupingNested=function(e,t,r,i,a){return this.secondary,e=this.filterItems(e,t,a),_.isEmpty(e)?this:(this.primary||(this.primary={Groupings:[]}),t=this.primary.Groupings,this.withNested(t,e,r,i))},S.prototype.withSecondaryGrouping=function(e,t,r,i,a){var n;return e=this.filterItems(e,t,a),_.isEmpty(e)||(this.primary?(t=_.last(this.primary.Groupings),this.containsAll(t,e)?n=t:(this.secondary||(this.secondary={Groupings:[]}),this.secondary.Groupings.push(n={Projections:[]}))):(this.primary={Groupings:[n={Projections:[]}]},this.pivotedSecondaryToPrimary=!0),this.updateGrouping(n,e,r,i),a=this.getAggregatesForRoleItems(e),this.applyTopLevelAggregates(a)),this},S.prototype.withSecondaryExpansion=function(e){return this.ensureSecondaryAxis(),this.secondary.Expansion=e,this},S.prototype.withSecondaryGroupingNested=function(e,t,r,i,a){var n;return e=this.filterItems(e,t,a),_.isEmpty(e)?this:(this.primary?(this.secondary||(this.secondary={Groupings:[]}),n=this.secondary.Groupings):(this.primary={Groupings:n=[]},this.pivotedSecondaryToPrimary=!0),this.withNested(n,e,r,i))},S.prototype.withCurrentInnermostGrouping=function(e,t,r){var i;return e=this.filterItems(e,null,!1),_.isEmpty(e)||(this.secondary&&(i=_.last(this.secondary.Groupings)),this.addValuesToGrouping(e,t,r,i)),this},S.prototype.withCurrentInnermostPrimaryGrouping=function(e,t,r,i){if(e=this.filterItems(e,null,!1),!_.isEmpty(e)&&(this.addValuesToGrouping(e,t,r),i)){this.primaryOnlyProjections=this.primaryOnlyProjections||[];for(var a=0,n=e;a<n.length;a++){var o=n[a];this.primaryOnlyProjections.push(this.indicesByName[o.queryName])}}return this},S.prototype.addValuesToGrouping=function(e,t,r,i){i=i||this.ensureInnermostPrimaryGrouping(),this.updateGrouping(i,e,t,r);i=this.getAggregatesForRoleItems(e);this.applyTopLevelAggregates(i)},S.prototype.ensureInnermostPrimaryGrouping=function(){var e;return this.primary?e=_.last(this.primary.Groupings):this.primary={Groupings:[e={Projections:[]}]},e},S.prototype.withPrimaryDataReduction=function(e){return e&&this.primary&&(this.reduction.Primary=C.DataShapeBindingDataReduction.createFrom(e,this.querySelects)),this},S.prototype.withScopedDataReduction=function(e,t){return e&&(this.reduction.Scoped||(this.reduction.Scoped=[]),this.reduction.Scoped.push({Scope:t,Algorithm:C.DataShapeBindingDataReduction.createFrom(e,this.querySelects)})),this},S.prototype.withSecondaryDataReduction=function(e){var t;return this.pivotedSecondaryToPrimary?this.withPrimaryDataReduction(e):(e&&this.secondary&&(this.reduction.Scoped&&!_.isEmpty(this.secondary.Groupings)?(t=this.secondary.Groupings.length,t=_.range(0,t),this.withScopedDataReduction(e,{Secondary:t})):this.reduction.Secondary=C.DataShapeBindingDataReduction.createFrom(e,this.querySelects)),this)},S.prototype.withIntersectionDataReduction=function(e){return!e||this.reduction.Primary||this.reduction.Secondary||e.binnedLineSample&&(this.reduction.Intersection=C.DataShapeBindingDataReduction.createFrom(e,this.querySelects)),this},S.prototype.withTopLevelAggregates=function(e){var t=this;return this.featureSwitches.scopedAggregates&&!_.isEmpty(e)&&(e=this.convertDataViewMappingAggregate(e,(function(e){return t.toAggregateScope(e,t.primary.Groupings,0)})),e=this.getDataShapeBindingAggregates(e),this.applyTopLevelAggregates(e)),this},S.prototype.toAggregateScope=function(r,e,i){for(var a=0,n=this.querySelects,t=0,o=e;t<o.length;t++){var s=o[t];if(!_.isEmpty(s.ShowItemsWithNoData))return;for(var u=0,c=s.Projections;u<c.length;u++){var l=(function(e){var t,e=n[e];return C.SQExprUtils.isMeasure(e.expr)?"continue":(t=e.name,r.some((function(e){return e===t}))?void 0:i<a?{value:{PrimaryDepth:a}}:{value:void 0})})(c[u]);if("object"==typeof l)return l.value}a++}return i<a?{PrimaryDepth:a}:void 0},S.prototype.updateScopeAggregatesForGroupings=function(t,e){var r=this,i=this.featureSwitches;if(i.scopedAggregates&&e&&t)for(var a=0,n=0,o=e;n<o.length;n++){var s=o[n],s=s.aggregates&&s.aggregates.filter(C.CompiledDataViewMapping.isCompiledDataViewMappingScopedAggregate);_.isEmpty(s)||(s=this.convertDataViewMappingAggregate(s,(function(e){return r.toAggregateScope(e,t,a+1)})),s=this.getDataShapeBindingAggregates(s),_.isEmpty(s)||(t[a].Aggregates=s),a++)}},S.prototype.getDataShapeBindingAggregates=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++)_.forEach(i[r],(function(e,t){for(var r=n[t]=n[t]||[],i=0,a=e;i<a.length;i++)!(function(t){r.some((function(e){return _.isEqual(e,t)}))||r.push(t)})(a[i])}));return _.map(n,(function(e,t){return{Select:+t,Aggregations:e}}))},S.prototype.updateGrouping=function(e,t,r,i){this.addProjections(e.Projections,t);var a=this.indicesByName;if(r){e.ShowItemsWithNoData||(e.ShowItemsWithNoData=[]);for(var n=0,o=t;n<o.length;n++){var s=o[n];this.insertProjection(e.ShowItemsWithNoData,a[s.queryName])}}for(var u=t[0].subtotalType,c=1,l=t.length;c<l;c++)if(t[c].subtotalType!==u){u=void 0;break}r=(function(e){switch(e){case 1:return 1;case 2:return 2;case 0:return}})(null!=u?u:i),null!=r&&(e.Subtotal=r),i=this.groupByNames;i&&(e.GroupBy=_.map(i,(function(e){return a[e]})))},S.prototype.withNested=function(e,t,r,i){for(var a=0,n=t;a<n.length;a++){var o=n[a],s={Projections:[]};this.updateGrouping(s,[o],r,i),e.push(s)}this.updateScopeAggregatesForGroupings(e,t);t=this.getAggregatesForRoleItems(t);return this.applyTopLevelAggregates(t),this},S.prototype.filterItems=function(e,t,r){if(!_.isEmpty(e)){e=_.uniqBy(e,(function(e){return e.queryName}));var i,a=this.indicesByName;t&&(i=[]);for(var n=0,o=e.length;n<o;n++){var s=e[n],u=null,c=t&&!_.isEmpty(t)&&!_.includes(t,s.queryName);null==a[s.queryName]?u=n-1:(c||this.isReferenced(s))&&(u=n),null!=u?i=i||(u<0?[]:l.range(e,0,u)):i&&i.push(s)}return i||(r?[]:e)}},S.prototype.isReferenced=function(e){e=this.indicesByName[e.queryName];return g(e,this.primary)||g(e,this.secondary)||_.includes(this.projections,e)},S.prototype.containsAll=function(e,t){for(var r=e.Projections,i=this.indicesByName,a=0,n=t;a<n.length;a++){var o=n[a];if(!_.includes(r,i[o.queryName]))return!1}return!0},S.prototype.addProjections=function(e,t){for(var r=this.indicesByName,i=0,a=t;i<a.length;i++){var n,o=a[i],s=r[o.queryName];o.hidden&&(n={QueryReference:{ExpressionName:o.queryName}},this.hiddenProjections.push(n)),this.insertProjection(e,s),this.addJoinPredicateBehavior(s,o.joinPredicate)}},S.prototype.addJoinPredicateBehavior=function(e,t){this.joinPredicateBehaviors[e]?void 0===t&&(this.joinPredicateBehaviors[e].behavior=t):this.joinPredicateBehaviors[e]={behavior:t}},S.prototype.withAdditionalProjections=function(e){return _.isEmpty(e)||(this.additionalProjections=e),this},S.prototype.applyAdditional=function(e){var t=this,r=this.querySelects,i=this.additionalProjections,a=v.findActive(e);if(!_.isEmpty(i))for(var n=this.primary,o=this.secondary,s=this.projections,u=0,c=i;u<c.length;u++){var l,p,d,h,m=c[u],f=C.DataBoundObjectQueryExtender.getScopeRefs(null==(f=m.selector)?void 0:f.data,r,a),y=this.indicesByName[m.queryName],g=this.convertProjectionAggregates(y,m.aggregates);g&&this.applyTopLevelAggregates([g]),null===f?m.aggregates||(s||(this.projections=s=[]),this.insertProjection(s,y),this.addJoinPredicateBehavior(y,m.joinPredicate)):(g=_.map(f,(function(e){return t.indicesByName[e]})),f=o&&!_.isEmpty(o.Groupings),h=(l=!!e.categorical&&f&&this.featureSwitches.categoricalSecondaryCF)?o:n,l=l?n:o,p=g.length,h=((d=n&&this.addAdditional(y,g,h))&&f&&h===n&&this.addSuppressedProjection(_.last(o.Groupings),y),g.length),d||(d=f&&this.addAdditional(y,g,l))&&l===n&&p===h&&this.addSuppressedProjection(_.last(o.Groupings),y),d&&this.addJoinPredicateBehavior(y,m.joinPredicate))}},S.prototype.addAdditional=function(e,t,r){r.Groupings;for(var i,a=r.Groupings,n=!1,o=0;o<a.length;o++)if(i=a[o],n)this.addSuppressedProjection(i,e);else if(_.remove(t,(function(e){return _.includes(i.Projections,e)})),0===t.length){if(!this.isProjectingOnNonLeafGrouping(o,r))return this.insertProjection(_.last(a).Projections,e),!0;this.insertProjection(i.Projections,e),n=!0}return n},S.prototype.isProjectingOnNonLeafGrouping=function(e,t){t.Groupings,0<=e&&t.Groupings.length;var r=t.Groupings.length;return e!==r-1&&!(2!==r||!t.Synchronization)},S.prototype.addSuppressedProjection=function(e,t){e.SuppressedProjections||(e.SuppressedProjections=[]),this.insertProjection(e.SuppressedProjections,t)},S.prototype.applyTopLevelAggregates=function(e){var t;_.isEmpty(e)||(this.aggregates||(this.aggregates=[]),(t=this.aggregates).push.apply(t,e))},S.prototype.getAggregatesForRoleItems=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var a=i[r];a.aggregates&&t.push(this.convertDataViewMappingAggregate(a.aggregates,a.queryName))}if(!_.isEmpty(t))return this.getDataShapeBindingAggregates.apply(this,t)},S.prototype.convertDataViewMappingAggregate=function(e,t){_.isFunction(t)?i=t:r=this.indicesByName[t];for(var r,i,a={},n=0,o=e;n<o.length;n++){var s=o[n],u=void 0,c=void 0;if(C.CompiledDataViewMapping.isCompiledDataViewMappingScopedAggregate(s)){if(!i)continue;if(u=s.queryName?this.indicesByName[s.queryName]:r,!(c=s.scope&&i(s.scope)))continue}else u=r;var u=a[u]=a[u]||[],l=!!c||void 0;s.min||s.max||s.average,s.min&&u.push({Scope:c,RespectInstanceFilters:l,Min:{}}),s.max&&u.push({Scope:c,RespectInstanceFilters:l,Max:{}}),s.average&&u.push({Scope:c,RespectInstanceFilters:l,Average:{}})}return _.isEmpty(a)?void 0:a},S.prototype.convertProjectionAggregates=function(e,t){if(t){var r,i=[],e={Select:e,Aggregations:i};if(t.min&&i.push({Min:{}}),t.max&&i.push({Max:{}}),t.average&&i.push({Average:{}}),t.median&&i.push({Median:{}}),t.percentiles)for(var a=0,n=t.percentiles;a<n.length;a++){var o=n[a];i.push((r=void 0,r={K:(o=o).k},o.exclusive&&(r.Exclusive=o.exclusive),{Percentile:r}))}return _.isEmpty(e.Aggregations),e}},S.prototype.suppressProjectionsIfNeeded=function(){if(!_.isEmpty(this.primaryOnlyProjections)&&this.secondary)for(var e=_.last(this.secondary.Groupings),t=0,r=this.primaryOnlyProjections;t<r.length;t++){var i=r[t];this.addSuppressedProjection(e,i)}},S.prototype.toQueryShape=function(e){this.applyAdditional(e),this.suppressProjectionsIfNeeded();var e=this.primary,t=this.projections;if(!e){if(!t)return;e={Groupings:[{Projections:t}]},t=null}var r=this.restartToken;if(r)if(this.reduction.Primary&&this.reduction.Primary.Window&&(this.reduction.Primary.Window.RestartTokens=r,0),this.reduction.Scoped)for(var i=0,a=this.reduction.Scoped;i<a.length;i++){var n=a[i];n.Algorithm.Window&&(n.Algorithm.Window.RestartTokens=r,n.Algorithm.Window.RestartMatchingBehavior=1,0)}for(var o,e={Primary:e},t=(this.secondary&&(e.Secondary=this.secondary),t&&(e.Projections=t),(this.reduction.Primary||this.reduction.Secondary||this.reduction.Intersection||this.reduction.Scoped)&&(e.DataReduction=this.reduction),this.includeEmptyGroups&&(e.IncludeEmptyGroups=this.includeEmptyGroups),this.aggregates),s=(t&&(e.Aggregates=t),[]),u=0;u<this.joinPredicateBehaviors.length;u++)!this.joinPredicateBehaviors[u]||0!==this.joinPredicateBehaviors[u].behavior||(o=null==(o=this.querySelects[u])?void 0:o.expr)&&d.isNativeVisualCalc(o)||s.push(u);return _.isEmpty(s)||(e.SuppressedJoinPredicates=s),this.disableHidden||_.isEmpty(this.hiddenProjections)||(e.HiddenProjections=this.hiddenProjections),e.Version=1,this.highlightFilter&&(e.Highlights=this.highlightFilter),e},f=S,e.DataShapeBindingBuilder=f,r=C.SQExprRewriter,__extends(M,r),M.prototype.visitScopedEval=function(e){return _.isEmpty(e.scope)?e:C.SQExprBuilder.scopedEval(e.expression,_.filter(e.scope,(function(e){return!d.isWithRef(e)})))},o=M,s=C.SQExprRewriter,__extends(b,s),b.prototype.visitGroupRef=function(e){return new C.SQColumnRefExpr(e.source,e.ref)},u=b,c=C.SQExprRewriter,__extends(V,c),V.prototype.visitScopedEval=function(e){for(var r=[],t=!1,i=0,a=e.scope;i<a.length;i++){var n=a[i];if(d.isRoleRef(n))for(var t=!0,o=0,s=this.mappings;o<s.length;o++){var u=s[o],u=v.findActive(u)[n.role];if(u)for(var c=this,l=0,p=u;l<p.length;l++)!(function(t){var e=_.find(c.selects,(function(e){return e.name===t}));e&&r.push(e.expr)})(p[l])}else r.push(n)}return t?C.SQExprBuilder.scopedEval(e.expression,_.uniqBy(r,(function(e){return C.services.SemanticQuerySerializer.serializeExpr(e)}))):e},h=V,R.findActive=function(e){var t=new R;return C.CompiledDataViewMapping.visitMapping(e,t),t.queryReferencesByRole},R.prototype.visitRole=function(t){var e=t.items;_.isEmpty(t.activeItems)||(e=_.filter(e,(function(e){return _.includes(t.activeItems,e.queryName)}))),this.queryReferencesByRole[t.role]=_.map(e,(function(e){return e.queryName}))},v=R,p.CompiledDataViewMappingsByRole=v})(powerbi=powerbi||{}),(function(e){var t;function r(e){if(e&&t.isCompositeDataQuery(e),e)return JSON.stringify(e)}function i(e){if(e)return JSON.stringify(e)}e=e.data||(e.data={}),(t=e.dsr||(e.dsr={})).generateCacheKeyDataQuery=function(e){return e&&e.Commands&&e.Commands.length,t.isCompositeDataQuery(e)?r(e):i(e.Commands[0].SemanticQueryDataShapeCommand)},t.generateCacheKeyForCompositeDataQuery=r,t.generateCacheKey=i})(powerbi=powerbi||{}),(function(c){var n,l,e,t,p,d,o;function h(e,t,r,i,a){this.featureSwitches=a,this.createQuery=r,this.createCancelQuery=i,this.promiseFactory=e,this.cacheByModel={},this.telemetryService=t}function i(e,t,r){return l.isCompositeDataQuery(e),r&&l.generateCacheKeyForCompositeDataQuery(e),{key:r||l.generateCacheKeyForCompositeDataQuery(e),keyWithoutReduction:(function(e){if(e&&l.isCompositeDataQuery(e),e)return u((e=_.cloneDeep(e)).Commands[0].SemanticQueryDataShapeCommand),JSON.stringify(e)})(e),keyWithoutViewport:(function(e){if(e&&l.isCompositeDataQuery(e),e)return e.Commands,e.Commands.length,e.Commands[1].ScriptVisualCommand,(function(e){e&&(e.ViewportHeightPx=void 0,e.ViewportWidthPx=void 0)})((e=_.cloneDeep(e)).Commands[1].ScriptVisualCommand),JSON.stringify(e)})(e),keyWithoutFilter:void 0,queryFilters:void 0,compositeDataQuery:!0,queryId:s(t)}}function a(e,t,r){r&&l.generateCacheKey(e);var i=d.isDataShapeCommandSuitableForClientSideFiltering(e);return{key:r||l.generateCacheKey(e),keyWithoutReduction:(function(e){if(e)return u(e=_.cloneDeep(e)),JSON.stringify(e)})(e),keyWithoutViewport:void 0,keyWithoutFilter:i?(function(e){if(e)return (function(e){e&&e.Query&&e.Query.Where&&(e.Query.Where=void 0)})(e=_.cloneDeep(e)),JSON.stringify(e)})(e):void 0,queryFilters:i?(function(e){e=e&&e.Query;if(e&&!_.isEmpty(e.Where)){e=g(e),e=e&&e.where();if(!_.isEmpty(e))return e}})(e):void 0,compositeDataQuery:!1,queryId:s(t)}}function s(e){return e&&e.queryCancellation?t():""}function u(e){e&&e.Binding&&"object"==typeof e.Binding&&(e.Binding.DataReduction=void 0,e.Binding.Limits=void 0)}function m(e,t){if(!t.compositeDataQuery&&!!t.keyWithoutFilter){var r=!e.compositeDataQuery&&e.keyWithoutFilter&&e.hasAllData;if(r&&e.keyWithoutFilter===t.keyWithoutFilter){var i,r=f(e.queryFilters,t.queryFilters);if(r=r,i=t.queryFilters,_.every(r,(function(t){return _.some(i,(function(e){return n.ClientSideFilter.isMoreRestrictiveFilter(e,t)}))}))){r=f(t.queryFilters,e.queryFilters);if(!_.isEmpty(r)){e=t,t=r;e&&e.compositeDataQuery;var a=g((e=JSON.parse(e.key))&&e.Query);if(a)return _.every(t,(function(e){return n.SQFilter.contains(a.where(),e)})),n.ClientSideFilter.tryConvertToClientSideFilters(a.select(),t)}}}}}function f(e,t){return _.isEmpty(t)?e:_.filter(e,(function(e){return!n.SQFilter.contains(t,e)}))}function y(e){return e&&e.Window&&null!=e.Window.RestartTokens}function r(e){return!e||e.Window}function g(e){if(e&&e.From&&e.Select)return n.services.SemanticQuerySerializer.deserializeQuery(e)}n=c.data||(c.data={}),l=n.dsr||(n.dsr={}),e=jsCommon.Utility,l.createQueryCache=function(e,t,r,i,a){return new o(e,t,r,i,a)},t=e.generateGuid,l.setGenerateGuid=function(e){t=e},h.prototype.ensure=function(e){var i=this,t=(e.command,e.command),r=(t&&t.Commands&&t.Commands.length,t.Commands[0].SemanticQueryDataShapeCommand),a=this.ensureCache(e.dataSources),n=l.generateCacheKeyDataQuery(t);if(a.hasCacheEntry(n)){if(h.allowResultFromClientCacheOrDefault(e))return this.telemetryService.logEvent(c.telemetry.DataClientCacheHit,{cacheHit:!0,isCacheFull:a.isFull(),entryCount:a.getEntryCount()}),a.bindCacheEntry(n,void 0,e.telemetryV2Enabled);a.clearEntry(n)}this.telemetryService.logEvent(c.telemetry.DataClientCacheHit,{cacheHit:!1,isCacheFull:a.isFull(),entryCount:a.getEntryCount()});var o=p.createCacheItemContext(t,this.featureSwitches,n),t=this.findEquivalentCache(e,a,o);if(t)return t;var s=__assign({},e),t=(s.queryId=o.queryId,s.executionType=0,null!=(t=this.featureSwitches)&&t.queryContext&&(u=function(e){var t,r=i.findQueryContext(s);return r?((t=__assign({},e)).queryContext=r,t):e}),a.createCacheEntry(n,o,u,h.rewriteCachedResult,e.telemetryV2Enabled));if(t.promise.catch((function(e){c.isHttpClientError(e)||i.featureSwitches&&i.featureSwitches.queryCancellation&&i.createCancelQuery({dataSources:s.dataSources,command:s.command,allowResultFromClientCache:s.allowResultFromClientCache,allowClientSideFilters:s.allowClientSideFilters,cacheResponseOnServer:s.cacheResponseOnServer,ignoreViewportForCache:s.ignoreViewportForCache,cacheOptions:s.cacheOptions,queryId:s.queryId,executionType:1},e&&e.queryCancellationSource)})),s.clientCacheOnly)return t.promise.reject(new c.QueryCacheMissError),t.promise;this.createQuery(s,t);var u=a.bindCacheEntry(n,void 0,e.telemetryV2Enabled);return!1===e.cacheResponseOnClient&&a.clearEntry(n),r.Binding&&r.Binding.DataReduction&&(y(r.Binding.DataReduction.Primary)||y(r.Binding.DataReduction.Secondary))||u.then((function(e){e&&e.dsr&&(function(e,t){{if(!l.isDsrV2(e))return _.every(e.DataShapes,(function(e){return e&&e.IsComplete&&_.isEmpty(e.DataLimitsExceeded)&&!e.RestartTokens}));if(t){for(var r=l.reader.V2.createDsrParser(e,void 0).dataShapes(),i=l.getDsrV2MinorVersion(e);r.next();)if(i&&1<=i){if(!0!==r.hasAllData())return}else if(!r.complete()||r.limitsExceeded()||r.hasRestartTokens())return;return 1}}})(e.dsr,i.featureSwitches&&i.featureSwitches.dsrV2)&&(o.hasAllData=!0)}),(function(){})),u},h.prototype.findQueryContext=function(e){e=e.applicationContext;if(e)return _.size(e.Sources),e.Sources[0].CustomProperties},h.prototype.clear=function(e){e=this.getCache(e);e&&e.clearAllEntries()},h.prototype.rewrite=function(e,n){var o=this,s=this.getCache(e);s&&(e={},n.rewriteCacheKey&&n.rewriteDataQueryCacheKey&&(e.rewriteKey=function(e){var t,r,i,a=JSON.parse(e),e=s.getEntryContext(e);return e.compositeDataQuery?(r=n.rewriteDataQueryCacheKey(t=a))&&r!==t&&(i=p.createCacheItemContextForCompositeDataQuery(r,o.featureSwitches),_.assign(e,i)):(r=n.rewriteCacheKey(t=a))&&r!==t&&(i=p.createCacheItemContextForNonCompositeDataQuery(r,o.featureSwitches),_.assign(e,i)),e.key}),n.rewriteCacheResult&&(e.rewriteResult=function(e){var t=n.rewriteCacheResult({descriptor:e.descriptor,dsr:e.dsr});return t?{descriptor:t.descriptor,dsr:t.dsr}:{descriptor:e.descriptor,dsr:e.dsr}}),s.rewriteAllEntries(e))},h.prototype.put=function(e,t,r){var e=this.ensureCache(e),i=l.generateCacheKeyDataQuery(t);e.hasCacheEntry(i)?e.putCacheResult(i,r,h.rewriteCachedResult):(t=p.createCacheItemContext(t,this.featureSwitches,i),e.createCacheEntry(i,t,void 0,h.rewriteCachedResult).deferred.resolve(r))},h.allowResultFromClientCacheOrDefault=function(e){return!1!==e.allowResultFromClientCache},h.prototype.findEquivalentCache=function(e,t,r){if(h.allowResultFromClientCacheOrDefault(e))if(r.compositeDataQuery){if(e.ignoreViewportForCache)for(var i=0,a=t.keys();i<a.length;i++){p=a[i];if((l=t.getEntryContext(p))&&l.keyWithoutViewport&&l.keyWithoutViewport===r.keyWithoutViewport)return t.bindCacheEntry(l.key,void 0,e.telemetryV2Enabled)}}else{for(var n=e.command,n=(n&&_.isEmpty(n.Commands),n.Commands[0].SemanticQueryDataShapeCommand.Binding),o=!!(n&&n.DataReduction&&n.DataReduction.Primary&&n.DataReduction.Primary.TopNPerLevel),s=!1,u=0,c=t.keys();u<c.length;u++){var l,p=c[u];if(l=t.getEntryContext(p)){if(!o&&l.hasAllData&&l.keyWithoutReduction===r.keyWithoutReduction)return t.bindCacheEntry(l.key,void 0,e.telemetryV2Enabled);if(d.tryReuseCacheWithClientSideFilters(t,l,e,r,e.telemetryV2Enabled)){s=!0;break}}}s&&jsCommon.Trace.information("Reused cache with client side filters")}},h.prototype.getCache=function(e){return this.cacheByModel[this.generateModelKey(e)]},h.prototype.ensureCache=function(e){var t,e=this.generateModelKey(e),r=this.cacheByModel,i=r[e];return i=void 0===i?null!=(t=this.featureSwitches)&&t.lruCacheEvictionPolicy?r[e]=new c.RejectablePromiseCache(this.promiseFactory,1):r[e]=new c.RejectablePromiseCache(this.promiseFactory,0):i},h.prototype.generateModelKey=function(e){if(!_.isEmpty(e))return JSON.stringify(_.map(e,(function(e){return{dbName:e.dbName,vsName:e.vsName,schemaName:e.schemaName}})))},h.rewriteCachedResult=function(e){var t;return e&&(delete(t=__assign({},e)).metrics,t.fromClientCache=!0,t)},o=h,(e=p=p||{}).createCacheItemContext=function(e,t,r){return e&&e.Commands&&e.Commands.length,l.isCompositeDataQuery(e)?i(e,t,r):(e.Commands.length,a(e.Commands[0].SemanticQueryDataShapeCommand,t,r))},e.createCacheItemContextForCompositeDataQuery=i,e.createCacheItemContextForNonCompositeDataQuery=a,(e=d=d||{}).isDataShapeCommandSuitableForClientSideFiltering=function(e){var t;return!(!e||(t=(e=e.Binding&&e.Binding.DataReduction)&&e.Primary,e=e&&e.Secondary,!r(t))||!r(e)||y(t)||y(e))},e.tryReuseCacheWithClientSideFilters=function(e,t,r,i,a){var n;if(void 0===a&&(a=!1),o.allowResultFromClientCacheOrDefault(r),r.allowClientSideFilters)return n=m(t,i),_.isEmpty(n)?void 0:e.bindCacheEntry(t.key,(function(e){var t=n;return(e=__assign({},e)).clientSideFilters=t,e}),a)},e.tryComputeClientSideFilters=m})(powerbi=powerbi||{}),(function(a){var n,e,o,s,u;function c(e,t){var r,i,a=typeof e;if("string"==a){if(_.endsWith(e,"L"))return r=parseInt(e,10),t?n.SQExprBuilder.integer(r,e):r;if(_.endsWith(e,"D"))return r=l(e),t?n.SQExprBuilder.double(r,e):r;if(_.endsWith(e,"M"))return r=l(e),t?n.SQExprBuilder.decimal(r,e):r;if(_.endsWith(e,"'")){if("'"===e.charAt(0))return r=e.substring(1,e.length-1).replace(o,"'"),t?n.SQExprBuilder.text(r,e):r;if(0===e.indexOf("datetime'"))return r=e.replace(s,"'"),i=e.substring(9,r.length-1),i=u.parseIsoDate(i),t?n.SQExprBuilder.dateTime(i,r):i}if("null"===e)return t?n.SQExprBuilder.nullConstant():null;if("true"===e)return!t||n.SQExprBuilder.boolean(!0);if("false"===e)return!!t&&n.SQExprBuilder.boolean(!1)}return"boolean"==a?t?n.SQExprBuilder.boolean(e):e:null===e?t?n.SQExprBuilder.nullConstant():null:e}function l(e){var t=parseFloat(e);return isNaN(t)?parseFloat(e.replace("INF","Infinity")):t}n=a.data||(a.data={}),u=jsCommon.DateExtensions,e=n.PrimitiveValueEncoding||(n.PrimitiveValueEncoding={}),o=/''/g,s=/\.000'$/,e.parseValue=function(e){return c(e)},e.parseValueToSQExpr=function(e){return c(e,!0)},e.parseBinary=function(e){return e&&_.startsWith(e,"base64'")?e.substring("base64'".length,e.length-1):null},e.parseOptimizedValue=function(e,t){if(null===e)return null;switch(t){case 4:return"Expected only string or number values for type ".concat(t),"number"==typeof e?e:parseInt(e,10);case 2:case 3:return"Expected only string or number values for type ".concat(t),"number"==typeof e?e:l(e);case 7:case 6:var r,i;return"Expected only string or number values for type ".concat(t),"number"==typeof e?("Expected positive miliseconds since UNIX epoch for type ".concat(t),r=new Date(e),i=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),(r=new Date(r.getTime()+6e4*i.getTimezoneOffset())).epochTimeStamp=e,r):(i=u.parseIsoDate(e))&&a.dateWithEpochValueFromLocalDate(i);case 1:return"Expected only string values for type ".concat(t),e;case 5:return"Expected number or boolean values for type ".concat(t),"number"==typeof e?1===e:e;case 13:return"Expected only string or boolean values for type ".concat(t),c(e);default:"unsupported dsrValue for type ".concat(t)}},e.parseOptimizedValueToSQExpr=function(e,t,r){if(null===e)return n.SQExprBuilder.nullConstant();switch(r){case 4:return"number"==typeof t?n.SQExprBuilder.integer(+e):n.SQExprBuilder.fromRawValue(260,+e,t.toString());case 2:return"number"==typeof t?n.SQExprBuilder.decimal(+e):n.SQExprBuilder.fromRawValue(258,+e,t.toString());case 3:return"number"==typeof t?n.SQExprBuilder.double(+e):n.SQExprBuilder.fromRawValue(259,+e,t.toString());case 7:case 6:return"number"==typeof t?new n.SQConstantExpr(a.ValueType.fromExtendedType(519),e):n.SQExprBuilder.fromRawValue(519,e,t.toString());case 1:return n.SQExprBuilder.text(e.toString());case 5:return n.SQExprBuilder.boolean(!!e);case 13:return c(t,!0);default:"unsupported dsrValue for type ".concat(r)}},e.parseTypeEncodedValue=c})(powerbi=powerbi||{}),(function(e){var a=e.data||(e.data={});function n(e){return new l(e)}function o(e){return new t(e)}function s(e){return new h(e)}function u(e){return new y(e)}a.createSchemaChangeRewriters=function(e){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];a.measureMove&&t.push(n(a.measureMove)),a.entityRename&&t.push(o(a.entityRename)),a.propertyRename&&t.push(s(a.propertyRename)),a.hierarchyLevelRename&&t.push(u(a.hierarchyLevelRename))}return t},a.createMoveMeasureRewriter=n,a.createEntityRenameRewriter=o,a.createPropertyRenameRewriter=s,a.createHierarchyLevelRenameRewriter=u,a.createSetSchemaMeasureRewriter=function(e){return new S(e)},r=a.SQExprRewriter,__extends(i,r),i.prototype.visitColumnRef=function(e){var t;return(a.SQExpr.isEntity(e.source)||a.SQExpr.isSubqueryRef(e.source))&&(t=e.source.accept(this))!==e.source?new a.SQColumnRefExpr(t,e.ref):e},i.prototype.visitEntity=function(e){var t=this.change;return e.schema===t.schema&&e.entity===t.before?new a.SQEntityExpr(e.schema,t.after,e.variable):e},i.prototype.visitSubqueryRef=function(e){var t;return e.query&&(t=e.query.rewrite(this))!==e.query?new a.SQSubqueryRefExpr(t):e};var r,t=i;function i(e){var t=this;return(t=r.call(this)||this).change=e,t}c=a.SQExprRewriter,__extends(p,c),p.prototype.visitMeasureRef=function(e){var t=this.change,r=a.FieldExprPattern.toFieldExprEntityItemPattern(a.SQExprConverter.asFieldPattern(e));return r.schema===t.schema&&r.entity===t.source&&e.ref===t.property?(r=new a.SQEntityExpr(r.schema,t.destination),new a.SQMeasureRefExpr(r,t.property)):e},p.prototype.visitSubqueryRef=function(e){var t;return e.query&&(t=e.query.rewrite(this))!==e.query?new a.SQSubqueryRefExpr(t):e};var c,l=p;function p(e){var t=this;return(t=c.call(this)||this).change=e,t}d=a.SQExprRewriter,__extends(m,d),m.prototype.visitColumnRef=function(e){var t;return a.SQExpr.isSubqueryRef(e.source)?(t=e.source.accept(this))!==e.source?new a.SQColumnRefExpr(t,e.ref):e:!a.SQExpr.isTransformTableRef(e.source)&&(t=this.change,this.matches(t,e))?new a.SQColumnRefExpr(e.source,t.after):e},m.prototype.visitMeasureRef=function(e){var t=this.change;return this.matches(t,e)?new a.SQMeasureRefExpr(e.source,t.after):e},m.prototype.visitGroupRef=function(e){var t=this,r=e,i=this.change,i=(this.matches(i,e)&&(r=new a.SQGroupRefExpr(i.after,e.source,e.groupedExprs)),_.map(e.groupedExprs,(function(e){return e.accept(t)})));return r=a.SQExprUtils.sequenceEqual(i,e.groupedExprs)?r:new a.SQGroupRefExpr(r.ref,r.source,i)},m.prototype.visitHierarchy=function(e){e.arg;var t=e.arg.accept(this);return t!==e.arg?new a.SQHierarchyExpr(t,e.hierarchy):(t=this.change,this.hierarchyMatches(t,e)?new a.SQHierarchyExpr(e.arg,t.after):e)},m.prototype.visitPropertyVariationSource=function(e){var t=this.change;return this.variationMatches(t,e)?new a.SQPropertyVariationSourceExpr(e.arg,e.name,t.after):e},m.prototype.visitSubqueryRef=function(e){var t;return e.query&&(t=e.query.rewrite(this))!==e.query?new a.SQSubqueryRefExpr(t):e},m.prototype.variationMatches=function(e,t){var r=t.arg;return 0 instanceof a.SQEntityExpr,r.schema===e.schema&&r.entity===e.entity&&t.property===e.before},m.prototype.hierarchyMatches=function(e,t){var r=t.arg;if(a.SQExpr.isEntity(r))return"Hierarchy"===e.objectType&&r.schema===e.schema&&r.entity===e.entity&&t.hierarchy===e.before},m.prototype.matches=function(e,t){var r=a.FieldExprPattern.toFieldExprEntityItemPattern(a.SQExprConverter.asFieldPattern(t));return r.schema===e.schema&&r.entity===e.entity&&t.ref===e.before};var d,h=m;function m(e){var t=this;return(t=d.call(this)||this).change=e,t}f=a.SQExprRewriter,__extends(g,f),g.prototype.visitHierarchyLevel=function(e){e.arg;var t=this.change;return this.matches(t,e)?new a.SQHierarchyLevelExpr(e.arg,t.after):e},g.prototype.matches=function(e,t){var r,i=a.SQExprConverter.asFieldPattern(t);if(!i.columnHierarchyLevelVariation)return i=a.FieldExprPattern.toFieldExprEntityItemPattern(i),r=t.arg,i.schema===e.schema&&i.entity===e.entity&&r.hierarchy===e.hierarchy&&t.level===e.before};var f,y=g;function g(e){var t=this;return(t=f.call(this)||this).change=e,t}v=a.SQExprRewriter,__extends(x,v),x.prototype.visitMeasureRef=function(e){var t=this.change,r=a.FieldExprPattern.toFieldExprEntityItemPattern(a.SQExprConverter.asFieldPattern(e));return r.schema!==t.schema&&r.entity===t.entity&&e.ref===t.name?(r=new a.SQEntityExpr(t.schema,t.entity),new a.SQMeasureRefExpr(r,t.name)):e};var v,S=x;function x(e){var t=this;return(t=v.call(this)||this).change=e,t}})(powerbi=powerbi||{}),(function(e){var t;function r(e){this.clauses={from:e,select:[]}}t=e.data||(e.data={}),r.prototype.addWhere=function(e){var t=this.clauses;t.where||(t.where=[]),t.where.push(e)},r.prototype.addWheres=function(e){var t=this.clauses;t.where||(t.where=[]);for(var r=0,i=e;r<i.length;r++){var a=i[r];t.where.push(a)}},r.prototype.addOrderBy=function(e){var t=this.clauses;t.orderBy||(t.orderBy=[]),t.orderBy.push(e)},r.prototype.addSelect=function(e){this.clauses.select.push(e)},r.prototype.addGroupBy=function(e){var t=this.clauses;t.groupBy||(t.groupBy=[]),t.groupBy.push(e)},r.prototype.addTransform=function(e){var t=this.clauses;t.transforms||(t.transforms=[]),t.transforms.push(e)},r.prototype.setTop=function(e){this.clauses.top=e},r.prototype.toQuery=function(){return t.SemanticQuery.createWith(this.clauses,!0)},r.prototype.toFilter=function(){var e=this.clauses;if(e.orderBy||e.select.length,e.from&&e.where)return new t.SemanticFilter(e.from,e.where)},t.SemanticQueryBuilder=r})(powerbi=powerbi||{}),(function(e){(e=(e=e.data||(e.data={})).SemanticQueryVersions||(e.SemanticQueryVersions={}))[e.Version0=0]="Version0",e[e.Version1=1]="Version1",e[e.Version2=2]="Version2"})(powerbi=powerbi||{}),(function(e){var d,h;function c(e){for(var t={Version:0,Sources:[],GroupedColumns:[]},r=new d.SQFrom,i=0,a=e.groupedColumns;i<a.length;i++){var n=a[i],o=d.SQExprRewriterWithSourceRenames.rewrite(n,void 0,r);t.GroupedColumns.push(h.SemanticQuerySerializer.serializeExprWithRef(o))}if(e.groupItems){t.GroupItems=[];for(var s=0,u=e.groupItems;s<u.length;s++){var c=u[s],l={DisplayName:c.name};c.expression&&(o=d.SQExprRewriterWithSourceRenames.rewrite(c.expression,void 0,r),l.Expression=h.SemanticQuerySerializer.serializeExprWithRef(o)),c.blankDefaultPlaceholder&&(l.BlankDefaultPlaceholder=!0),t.GroupItems.push(l)}}e.binItem&&(t.BinItem={Expression:h.SemanticQuerySerializer.serializeExprWithRef(d.SQExprRewriterWithSourceRenames.rewrite(e.binItem,void 0,r))}),h.SemanticQuerySerializer.serializeFrom(r,t.Sources);var p=e.partitionTable;return p&&(t.PartitionTable={Definition:{TableDefinition:h.SemanticQuerySerializer.serializeQuery(p.mappingTable),ItemIdColumns:p.itemIdColumns,PartitionIdColumn:p.partitionIdColumn}},(p=p.partitions)&&(t.PartitionTable.Definition.Partitions=m(p)),(p=e.partitionTableResult)&&(t.PartitionTable.Result={TableName:p.tableName,PartitionIdColumn:p.partitionIdColumn}),p=e.partitionTable.defaultPartitionPrefix)&&(t.PartitionTable.Definition.DefaultPartitionPrefix=p),t}function l(e){if(0===e.Version){for(var t,r,i={groupedColumns:[]},a=h.SemanticQuerySerializer.deserializeFrom(e.Sources),n=0,o=e.GroupedColumns;n<o.length;n++){var s=o[n];i.groupedColumns.push(h.SemanticQuerySerializer.deserializeExprWithRef(s,a))}if(e.GroupItems){i.groupItems=[];for(var u=0,c=e.GroupItems;u<c.length;u++){var l=c[u],p={name:l.DisplayName};l.Expression&&(p.expression=h.SemanticQuerySerializer.deserializeExprWithRef(l.Expression,a)),l.BlankDefaultPlaceholder&&(p.blankDefaultPlaceholder=!0),i.groupItems.push(p)}}return e.BinItem&&(i.binItem=h.SemanticQuerySerializer.deserializeExprWithRef(e.BinItem.Expression,a)),e.PartitionTable&&(r=(t=e.PartitionTable.Definition).TableDefinition,i.partitionTable={mappingTable:h.SemanticQuerySerializer.deserializeQuery(r),itemIdColumns:t.ItemIdColumns,partitionIdColumn:t.PartitionIdColumn},(r=t.Partitions)&&(i.partitionTable.partitions=_.map(r,(function(e){return{displayName:e.DisplayName,partitionIds:_.map(e.PartitionIds,h.SemanticQuerySerializer.deserializeExpr)}}))),(r=e.PartitionTable.Result)&&(i.partitionTableResult={tableName:r.TableName,partitionIdColumn:r.PartitionIdColumn}),e=t.DefaultPartitionPrefix)&&(i.partitionTable.defaultPartitionPrefix=e),i}}function m(e){return _.map(e,(function(e){return{DisplayName:e.displayName,PartitionIds:_.map(e.partitionIds,(function(e){return h.SemanticQuerySerializer.serializeExpr(e)}))}}))}d=e.data||(e.data={}),h=d.services||(d.services={}),(e=h.SemanticGroupingSerializer||(h.SemanticGroupingSerializer={})).serialize=c,e.deserialize=l,e.serializePartitions=m,e.normalizeFromRefs=function(e,t){for(var e=l(c(e)),r=new d.SQFrom,i=e.groupedColumns,a=0;a<i.length;a++)i[a]=d.SQExprRewriterWithSourceRenames.rewrite(i[a],r,t);for(var n=0,o=e.groupItems;n<o.length;n++){var s=o[n];s.expression&&(s.expression=d.SQExprRewriterWithSourceRenames.rewrite(s.expression,r,t))}var u=e.binItem;return u&&(e.binItem=d.SQExprRewriterWithSourceRenames.rewrite(u,r,t)),e}})(powerbi=powerbi||{}),(function(t){var e,r;function i(e){this.innerError=e,this.code="QueryPipelineError",this.eventFactory=t.telemetry.DataException,this.ignorable=!(null==e||!e.ignorable)}function a(){}function n(){}function o(){}e=t.data||(t.data={}),r=t.ClientErrorStrings,i.prototype.getDetails=function(e){return{message:"",displayableErrorInfo:[]}},e.QueryPipelineError=i,Object.defineProperty(a.prototype,"code",{get:function(){return"FailedRealTimeUpdate"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.getDetails=function(e){return{message:e.get("Realtime_UpdateFailedValue"),displayableErrorInfo:[{errorInfoKey:e.get("Realtime_UpdateFailedKey"),errorInfoValue:e.get("Realtime_UpdateFailedValue")}],debugErrorInfo:[{errorInfoKey:r.ClientErrorCode,errorInfoValue:this.code}]}},e.FailedRealTimeUpdateClientError=a,Object.defineProperty(n.prototype,"code",{get:function(){return"EmptyData"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.getDetails=function(e){return{message:e.get("ServiceError_CannotLoadVisual"),displayableErrorInfo:[{errorInfoKey:e.get("ServiceError_ExecuteSemanticQueryErrorKey"),errorInfoValue:e.get("InvalidDataFormat_DataFormatIsInvalid")}],debugErrorInfo:[{errorInfoKey:r.ClientErrorCode,errorInfoValue:this.code}]}},e.EmptyDataClientError=n,Object.defineProperty(o.prototype,"code",{get:function(){return"InvalidDataResponse"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ignorable",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.getDetails=function(e){return{message:e.get("ServiceError_CannotLoadVisual"),displayableErrorInfo:[{errorInfoKey:e.get("ServiceError_ExecuteSemanticQueryErrorKey"),errorInfoValue:e.get("InvalidDataResponse_ServerError")}],debugErrorInfo:[{errorInfoKey:r.ClientErrorCode,errorInfoValue:this.code}]}},e.InvalidDataResponseClientError=o})(powerbi=powerbi||{}),(function(u){var c=u.data||(u.data={}),r=jsCommon.JsonComparer;function o(e,t){return!(!e.query||!t.query)&&e.type===t.type&&e.kinds===t.kinds&&e.perfId===t.perfId&&e.query.allowResultFromClientCache===t.query.allowResultFromClientCache&&e.query.allowClientSideFilters===t.query.allowClientSideFilters&&e.query.cacheResponseOnServer===t.query.cacheResponseOnServer&&e.query.ignoreViewportForCache===t.query.ignoreViewportForCache&&r.equals(e.query.cacheOptions,t.query.cacheOptions)&&r.equals(e.query.command,t.query.command)&&r.equals(e.query.dataSources,t.query.dataSources)}c.areEquivalentOptions=o,c.createDataProxy=function(e,t,r){return new i(e,t,r)},c.createSingleExecutableDataProxy=function(e,t,r,i){return new a(e,t,r)},c.setCreateSingleExecutableDataProxy=function(e){c.createSingleExecutableDataProxy=e},e.prototype.execute=function(e){return this.getReader(e.type).execute(e.query,e.kinds,e.perfId)},e.prototype.getReader=function(e){var t=this.dataReaders[e];return t||(t=this.dataReaderProvider.reader(e),"Could not find data reader for type: ".concat(e),this.dataReaders[e]=new n(e,t,this.promiseFactory,this.telemetryService))},e.prototype.stopCommunication=function(e){this.getReader(e).stopCommunication()},e.prototype.resumeCommunication=function(e){this.getReader(e).resumeCommunication()},e.prototype.clearCache=function(e,t){this.getReader(e).clearCache(t)},e.prototype.rewriteCacheEntries=function(e,t,r){this.getReader(e).rewriteCacheEntries(t,r)},e.prototype.setLocalCacheResult=function(e,t){return this.getReader(e.type).setLocalCacheResult(e.query,t)};var i=e;function e(e,t,r){this.promiseFactory=e,this.dataReaderProvider=t,this.dataReaders={},this.telemetryService=r}t.prototype.execute=function(e){var i=this,t=this.lastExecute;if(t&&t.promise.pending()){if(o(e,t.query))return(t=u.createRejectablePromise2(t.deferred)).matchesLastExecuteQuery=!0,t;this.lastExecute.ended=!0,this.lastExecute.promise.reject(new u.QueryCancellationClientError("NewQuery"))}var t=e&&e.query&&e.query.telemetryV2Enabled,r=this.promiseFactory.defer(t),a=u.createRejectablePromise2(r),n=this.lastExecute={query:e,deferred:r,promise:a,ended:!1};return this.queuedExecution||(r=(this.queuedExecution=!0)===e.isColdLoad?-1:0,this.timeoutService.setTimeout(r,t).promise.then((function(){i.queuedExecution=!1;var t,r=i.lastExecute;r&&!r.ended&&((t=i.proxy.execute(r.query)).then((function(e){r.ended?r.deferred.reject():r.deferred.resolve(e)}),(function(e){return r.deferred.reject(e)})),r.promise.catch((function(e){return t.reject(e)})))})).catch((function(){}))),a.finally((function(){n.ended=!0,n===i.lastExecute&&(i.lastExecute=void 0)})).catch((function(){})),a},t.prototype.cancelQuery=function(e){var t=this.lastExecute;t&&t.promise.pending()&&(t.ended=!0,t.promise.reject("PausedQuery"===e?new u.QueryCacheMissError:new u.QueryCancellationClientError(e)))};var a=t;function t(e,t,r){this.proxy=e,this.promiseFactory=t,this.timeoutService=r}s.prototype.execute=function(i,a,n){var t,o=this,s=this.promiseFactory.defer(i.telemetryV2Enabled),e=this.reader;return e.execute?((t=e.execute(i,n)).then((function(e){var t,r;e?(r=(t=o.transform(e,a,n,i.performanceActivity)).error,t.performanceActivities&&r&&(r.performanceActivities=t.performanceActivities),r?(s.reject(r),o.telemetryService.logEvent(u.telemetry.DataExecuteQuery,{requestId:e.requestId,isError:!0,errorSource:"PowerBI",errorCode:r.code})):s.resolve({dataReaderResult:t,dataViewSource:{data:e}})):(s.reject(new c.EmptyDataClientError),o.telemetryService.logEvent(u.telemetry.DataExecuteQuery,{isError:!0,errorSource:"PowerBI",errorCode:"DataProxy_EmptyData"}))}),(function(e){s.reject(e),e&&e.ignorable||o.telemetryService.logEvent(u.telemetry.DataExecuteQuery,{requestId:null==e?void 0:e.requestId,isError:!0,errorSource:"PowerBI",errorCode:e?e.code:"DataProxy_ProviderError"})})).catch((function(e){s.reject(e)})),(e=u.createRejectablePromise2(s)).catch((function(e){e=e||new c.InvalidDataResponseClientError,t.reject(e)})),e):(i.command?s.resolve({dataReaderResult:this.transform(i.command,a,n)}):s.reject(),u.createRejectablePromise2(s))},s.prototype.stopCommunication=function(){var e=this.reader;e.stopCommunication&&e.stopCommunication()},s.prototype.resumeCommunication=function(){var e=this.reader;e.resumeCommunication&&e.resumeCommunication()},s.prototype.clearCache=function(e){var t=this.reader.cache;t&&t.clear(e)},s.prototype.rewriteCacheEntries=function(e,t){var r=this.reader.cache;r&&r.rewrite(e,t)},s.prototype.setLocalCacheResult=function(e,t){var r=this.reader;r.setLocalCacheResult&&r.setLocalCacheResult(e,t)},s.prototype.transform=function(e,t,r,i){var a=this.reader;return a.transform?a.transform(e,t||31,r,i):((a={metadata:{columns:[]}})[this.name]=e,{dataView:a})};var n=s;function s(e,t,r,i){this.name=e,this.reader=t,this.promiseFactory=r,this.telemetryService=i}})(powerbi=powerbi||{}),(function(s){var d=s.data||(s.data={}),t=jsCommon.EnumExtensions,h=s.data.FederatedConceptualSchema,n=(d.createConceptualSchemaProxy=function(e,t,r,i,a){return new n(e,t,r,i,a)},e.prototype.get=function(e,t){var o=this,s=this.featureSwitchService&&this.featureSwitchService.featureSwitches&&this.featureSwitchService.featureSwitches.telemetryV2;if(!e)return this.promiseFactory.reject({clientError:{code:d.DataSourcesUndefined}},s);var r=this.generateSchemaKey(e),i=this.mergedConceptualSchemaCache[r];if(this.isSchemaPaused(i))return this.promiseFactory.reject(this.getPauseReason(i),s);if(i&&i.promise)return t&&t.setProperty("isConceptualSchemaCached",!0),i.promise;var a,n=this.promiseFactory.defer(s),u={deferred:n,promise:n.promise},c=((this.mergedConceptualSchemaCache[r]=u).promise.then((function(){return delete u.deferred}),(function(){return delete o.mergedConceptualSchemaCache[r]})),[]),l=m(e),p=this;for(a in l)!(function(e){var t,r,i=l[e],a=p.generateSchemaKey(i),n=p.individualConceptualSchemaCache[a];p.isSchemaPaused(n)?c.push(p.promiseFactory.reject(p.getPauseReason(n),s)):n?c.push(n.promise):(n=(t=p.promiseFactory.defer(s)).promise,c.push(n),p.individualConceptualSchemaCache[a]={deferred:t,promise:n},n.finally((function(){o.individualConceptualSchemaCache[a]&&delete o.individualConceptualSchemaCache[a].deferred})),(r=p.dataReaderProvider.schemaReader(e))?r.execute({dataSources:i}).then((function(e){return o.onSuccess(r,e,a,t)}),(function(e){return o.onError(r,e,a,t)})):("No schema reader exists for data source type: ".concat(e),t.reject({clientError:{code:d.SchemaReaderUndefined}})))})(a);return this.promiseFactory.all(c,s).then((function(e){e=h.merge(e);o.validator&&o.validator.validate(e),u.result=e,n.resolve(e)})).catch((function(e){n.reject(e)})),u.promise},e.prototype.getWithWireContract=function(r){var i=this;return r&&1<_.uniqBy(r,(function(e){return d.DataReaderUtils.readerType(e)})).length?this.promiseFactory.reject():this.get(r).then((function(e){var t=i.individualConceptualSchemaCache[i.generateSchemaKey(r)];if(t)return{data:t.data,contract:e}}))},e.prototype.getLatestCapabilities=function(e,t){var r,i=m(e);for(r in i){var a=i[r],a=this.generateSchemaKey(a),a=this.individualConceptualSchemaCache[a];if(a&&a.result){a=a.result.schema(t);if(a)return a.capabilities}}},e.prototype.clearCache=function(t,e){var r=this;if(e){var i,a=m(e);for(i in a){var n=a[i],o=this.generateSchemaKey(n),n=JSON.stringify(_.map(n,(function(e){return e.id})));this.telemetryService.logEvent(s.telemetry.DataClearConceptualSchemaCache,{datasetIds:n,requestId:t&&t.requestId,reason:t&&t.clientError.code}),this.forSchemasContainingKey(this.individualConceptualSchemaCache,o,(function(e){r.rejectPendingDeferred(t,e),delete r.individualConceptualSchemaCache[e]})),this.forSchemasContainingKey(this.mergedConceptualSchemaCache,o,(function(e){delete r.mergedConceptualSchemaCache[e]}))}}else this.rejectPendingDeferred(t),this.individualConceptualSchemaCache={},this.mergedConceptualSchemaCache={}},e.prototype.stopCommunication=function(e,t){var r={clientError:e};if(t){var i,a=m(t);for(i in a){var n,o=a[i],o=this.generateSchemaKey(o);(n=this.individualConceptualSchemaCache[o])||(this.individualConceptualSchemaCache[o]=n={}),n.pauseReason=r,this.rejectPendingDeferred(r,o)}}else this.pauseAllSchemasReason=r,this.rejectPendingDeferred(r);for(var s=0,u=this.stopCommunicationHandlers;s<u.length;s++)(0,u[s])()},e.prototype.resumeCommunication=function(e){for(var t=this,e=e?_.map(m(e),(function(e){return t.generateSchemaKey(e)})):(this.pauseAllSchemasReason=void 0,Object.keys(this.individualConceptualSchemaCache)),r=0,i=e;r<i.length;r++){var a=i[r],n=this.individualConceptualSchemaCache[a];this.isSchemaPaused(n)&&(delete this.individualConceptualSchemaCache[a],this.forSchemasContainingKey(this.mergedConceptualSchemaCache,a,(function(e){return delete t.mergedConceptualSchemaCache[e]})))}for(var o=0,s=this.resumeCommunicationHandlers;o<s.length;o++)(0,s[o])()},e.prototype.registerStopCommunicationHandlers=function(e){var t=this;return this.stopCommunicationHandlers.push(e),function(){return _.pull(t.stopCommunicationHandlers,e)}},e.prototype.registerResumeCommunicationHandlers=function(e){var t=this;return this.resumeCommunicationHandlers.push(e),function(){return _.pull(t.resumeCommunicationHandlers,e)}},e.prototype.isEmpty=function(i){return __awaiter(this,void 0,s.Promise,(function(){var t,r=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.get(i)];case 1:return t=e.sent(),[2,_.every(t.schemas,(function(e){return _.isEmpty(e.entities)||r.isSystemEntity(e.entities)}))]}}))}))},e.prototype.isSystemEntity=function(e){return _.every(e,(function(e){return t.hasFlag(e.visibility,4)||t.hasFlag(e.visibility,2)}))},e.prototype.isSchemaPaused=function(e){return!!this.pauseAllSchemasReason||e&&!e.promise},e.prototype.getPauseReason=function(e){return e&&e.pauseReason?e.pauseReason:this.pauseAllSchemasReason},e.prototype.rejectPendingDeferred=function(r,e){var t,i,a;for(a in e?(t={})[e]=null:t=this.individualConceptualSchemaCache,t)(i=this.individualConceptualSchemaCache[a])&&(i.deferred&&i.deferred.reject(r),delete i.promise,delete i.deferred,this.forSchemasContainingKey(this.mergedConceptualSchemaCache,a,(function(e,t){t.deferred&&t.deferred.reject(r),delete t.promise,delete t.deferred})))},e.prototype.onSuccess=function(e,t,r,i){var a,e=e.transform(t);e.error?this.onErrorCore(e,r,i):((a=this.individualConceptualSchemaCache[r])&&(a.result=e.schema,a.data=t.data),(t=this.tryGetAdditionalIndividualCacheKey(r,e))&&(this.individualConceptualSchemaCache[t]=a),i.resolve(e.schema))},e.prototype.onError=function(e,t,r,i){e=e.transform(t);this.onErrorCore(e,r,i)},e.prototype.onErrorCore=function(e,t,r){var i=this;delete this.individualConceptualSchemaCache[t],e.error&&e.error.serviceError&&(e.error.clientError=new s.ServiceErrorToClientError(e.error.serviceError),e.error.clientError.requestId=e.error.requestId),r.reject(e.error),this.forSchemasContainingKey(this.mergedConceptualSchemaCache,t,(function(e){delete i.mergedConceptualSchemaCache[e]}))},e.prototype.tryGetAdditionalIndividualCacheKey=function(e,t){t=t.schema.schemas;if(t){t.length;t=t[0];if(t.cubeName){e=JSON.parse(e),e=(e.length,e[0]);if(t.name,e.name,!e.perspectiveId)return e.perspectiveId=t.cubeName,this.generateSchemaKey([e])}}},e.prototype.forSchemasContainingKey=function(e,t,r){for(var i=0,a=JSON.parse(t);i<a.length;i++){var n,o=a[i];for(n in e)for(var s=0,u=JSON.parse(n);s<u.length;s++){var c=u[s];o.id===c.id&&o.name===c.name&&o.type===c.type&&r(n,e[n])}}},e.prototype.generateSchemaKey=function(e){return JSON.stringify(_.chain(e).map((function(e){return{id:e.id,name:e.name,type:d.DataReaderUtils.readerType(e),perspectiveId:e.perspectiveId}})).orderBy(["type","name","id","perspectiveId"]).value())},e);function e(e,t,r,i,a){this.stopCommunicationHandlers=[],this.resumeCommunicationHandlers=[],this.promiseFactory=e,this.dataReaderProvider=t,this.featureSwitchService=r,this.telemetryService=i,this.validator=a,this.individualConceptualSchemaCache={},this.mergedConceptualSchemaCache={}}function m(e){return _.groupBy(e,(function(e){return d.DataReaderUtils.readerType(e)}))}})(powerbi=powerbi||{}),(function(m){var y=m.data||(m.data={}),g=jsCommon.EnumExtensions;function e(){}e.getDataPointsDescription=function(e,t){if(e&&!_.isEmpty(t)){for(var r=this.getDataViewKind(e),i=[],a=0,n=t;a<n.length;a++){var o=n[a],s=this.query([e],o,r,[],!0),o=y.Selector.convertSelectorsByColumnToSelector(o);i.push({selector:o,values:s})}return i}},e.getDataViewKind=function(e){var t=0;if(e.matrix)t=2;else if(e.table)t=8;else{if(!e.categorical)return;t=1}return t},e.query=function(e,t,r,i,a){if(_.isEmpty(e)||!t)return[];var n=y.Selector.getScopeIdentities(t);if(_.some(n,(function(e){return!y.Selector.isScopeIdentity(e)})))return[];var o=i&&!a?i:t.metadata,s=[];if(g.hasFlag(r,8))for(var u=0,c=e;u<c.length;u++){var l=c[u],p=new C(t,o,a);x.visitTable(l.table,p),s.push.apply(s,p.valueDetails||[])}else if(g.hasFlag(r,1))for(var d=0,h=e;d<h.length;d++){l=h[d],p=new v(t,o,a);x.visitCategorical(l,p),s.push.apply(s,p.valueDetails||[])}else if(g.hasFlag(r,2))for(var m=0,f=e;m<f.length;m++){l=f[m],p=new S(t);x.visitMatrix(l.matrix,p),s.push.apply(s,p.valueDetails||[])}return s},y.DataViewQueryEngine=e,t.prototype.visitCategoryColumns=function(e,a){if(!_.isEmpty(e))for(var n=this,t=0,r=e;t<r.length;t++)!(function(t){if(n.ignoreQueryName||_.includes(n.requestedValues,t.source.queryName))for(var e=0;e<t.identity.length;e++){var r=t.identity[e];if(_.includes(n.identities,r)){var i=_.find(a.columns,(function(e){return e.index===t.source.index}));n.valueDetails.push({identity:r,value:t.values[e],expr:i.expr,formattedValue:m.visuals.valueFormatter.format(t.values[e],t.source.format)});break}}})(r[t])},t.prototype.visitValueColumnGroups=function(e,t){if(!_.isEmpty(e)&&t&&(this.ignoreQueryName||_.includes(this.requestedValues,t.queryName)))for(var r=0,i=e;r<i.length;r++){var a=i[r];if(_.includes(this.identities,a.identity))return void this.valueDetails.push({value:a.name,formattedValue:m.visuals.valueFormatter.format(a.name,t.format),expr:t.expr,identity:a.identity})}},t.prototype.visitValueColumn=function(e){return!!_.isEmpty(this.requestedValues)||_.includes(this.requestedValues,e.source.queryName)},t.prototype.visitValue=function(e,t,r,i,a){x.isIdentityFilteredOut(this.identities,t.data)||this.valueDetails.push({expr:r.expr,value:e,formattedValue:m.visuals.valueFormatter.format(e,r.format),identity:_.head(t.data)})};var v=t;function t(e,t,r){this.ignoreQueryName=r,this.requestedValues=t,this.identities=y.Selector.getScopeIdentities(e),this.valueDetails=[]}r.prototype.visitHierarchy=function(e){for(var t=e.root;t&&t.children&&0<this.identitiesToSearch.length;)t=this.searchNode(t,e.levels)},r.prototype.searchNode=function(e,t){for(var r=0,i=this.identitiesToSearch;r<i.length;r++)for(var a=i[r],n=0,o=e.children;n<o.length;n++){var s=o[n];if(s.identity===a){var u=s.levelValues,c=t[s.level||0];if(!_.isEmpty(u))for(var l=0,p=u;l<p.length;l++){var d=p[l],h=c.sources[d.levelSourceIndex||0];this.valueDetails.push({expr:h.expr,identity:a,value:d.value,formattedValue:m.visuals.valueFormatter.format(d.value,h.format)})}return _.remove(this.identitiesToSearch,a),s}}};var S=r;function r(e){this.valueDetails=[],this.identitiesToSearch=y.Selector.getScopeIdentities(e)}a.prototype.visitColumn=function(e,t){(this.ignoreQueryName||e.isMeasure&&(_.isEmpty(this.requestedValues)||_.includes(this.requestedValues,e.queryName)))&&this.requestedColumnsIndices.push(t)},a.prototype.visitRow=function(e,t){e.rows[t];if(!e.identity||!x.isIdentityFilteredOut(this.identities,[e.identity[t]]))for(var r=0,i=this.requestedColumnsIndices;r<i.length;r++){var a=i[r],n=e.rows[t][a],a=e.columns[a];this.valueDetails.push({expr:a.expr,value:n,formattedValue:m.visuals.valueFormatter.format(n,a.format),identity:e.identity&&e.identity[t]})}};var x,i,C=a;function a(e,t,r){this.ignoreQueryName=r,this.requestedValues=t,this.identities=y.Selector.getScopeIdentities(e),this.valueDetails=[],this.requestedColumnsIndices=[]}(i=x=y.DataViewScan||(y.DataViewScan={})).isIdentityFilteredOut=function(e,r){if(e)for(var t=0,i=e;t<i.length;t++){var a=(function(t){if(!_.some(r,(function(e){return m.DataViewScopeIdentity.equals(t,e)})))return{value:!0}})(i[t]);if("object"==typeof a)return a.value}return!1},i.visitCategorical=function(e,t){var r=e.categorical;if(r&&!_.isEmpty(r.values)){var i=y.DataViewConcatenateCategoricalColumns.getUntransformedCategories(r),i=(t.visitCategoryColumns(i,e.metadata),_.head(r.categories)),a=i&&_.clone(i.identity),e=r.values.grouped();t.visitValueColumnGroups(e,r.values.source);for(var n=0,o=e;n<o.length;n++)for(var s=o[n],u=s.identity,c=0,l=s.values;c<l.length;c++){var p=l[c];if(t.visitValueColumn(p))for(var d=Object.keys(p.values),h=0;h<d.length;h++){var m=d[h],m=p.values[m],f=p.source,f={data:a?[a[h]]:[],metadata:f.queryName};u&&f.data.push(u),t.visitValue(m,f,p.source,r.categories,h)}}}},i.visitTable=function(e,t){if(e&&!_.isEmpty(e.rows)){for(var r=e.columns,i=0;i<r.length;i++)t.visitColumn(r[i],i);for(var a=0;a<e.rows.length;a++)t.visitRow(e,a)}},i.visitMatrix=function(e,t){e.rows&&t.visitHierarchy(e.rows),e.columns&&t.visitHierarchy(e.columns)}})(powerbi=powerbi||{}),(function(e){(e.data||(e.data={})).createDefaultFederatedSchemaValidator=function(){return{validate:_.noop}}})(powerbi=powerbi||{}),(function(e){var t,r;t=e.data||(e.data={}),r=t.services||(t.services={}),(e=r.DataViewScopeIdentitySerializer||(r.DataViewScopeIdentitySerializer={})).serializeScopeIdentity=function(e){return{scopeId:r.SemanticQuerySerializer.serializeExpr(e.expr)}},e.deserializeScopeIdentity=function(e){if(e.scopeId){e=r.SemanticQuerySerializer.deserializeExpr(e.scopeId);if(e)return t.createDataViewScopeIdentity(e)}}})(powerbi=powerbi||{}),(function(e){var o;e=e.data||(e.data={}),(e=(o=e.services||(e.services={})).DisplayNameSerializer||(o.DisplayNameSerializer={})).serializeFilterLabelIdPairs=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];n.identity&&n.identity.expr&&(a=o.DataViewScopeIdentitySerializer.serializeScopeIdentity(n.identity))&&t.push({id:a,displayName:n.displayName})}return t}},e.deserializeFilterLabelIdPairs=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];n.id&&(a=o.DataViewScopeIdentitySerializer.deserializeScopeIdentity(n.id))&&t.push({identity:a,displayName:n.displayName})}return t}},e.serializeIdentityValueMap=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];_.isEmpty(n.identities)||(a=_.map(n.identities,(function(e){return o.DataViewScopeIdentitySerializer.serializeScopeIdentity(e)})))&&t.push({identities:a,valueMap:n.valueMap})}return t}},e.deserializeIdentityValueMap=function(e){if(e&&!(e.length<1)){for(var t=[],r=0,i=e;r<i.length;r++){var a,n=i[r];_.isEmpty(n.identities)||(a=_.map(n.identities,(function(e){return o.DataViewScopeIdentitySerializer.deserializeScopeIdentity(e)})))&&t.push({identities:a,valueMap:n.valueMap})}return t}}})(powerbi=powerbi||{}),(function(e){var r,i;function a(e){var t;if(!_.isEmpty(e.expressions))return t={expressions:_.map(e.expressions,(function(e){return i.SemanticQuerySerializer.serializeExpr(e)}))},_.isEmpty(e.cachedValueItems)||(t.cachedValueItems=i.DisplayNameSerializer.serializeIdentityValueMap(e.cachedValueItems)),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t}function n(e){var t;if(!_.isEmpty(e.expressions))return t={expressions:_.map(e.expressions,(function(e){return i.SemanticQuerySerializer.deserializeExpr(e)}))},_.isEmpty(e.cachedValueItems)||(t.cachedValueItems=i.DisplayNameSerializer.deserializeIdentityValueMap(e.cachedValueItems)),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t}function o(e){return!!e.decomposedIdentities}r=e.data||(e.data={}),i=r.services||(r.services={}),(e=i.FilterExpressionMetadataSerializer||(i.FilterExpressionMetadataSerializer={})).isFilterExpressionMetadataOverLimit=function(e){return e.cachedValueItems&&e.cachedValueItems.length>i.DataViewObjectSerializer.IdentityLimit},e.isDecomposedFilterExpressionMetadataOverLimit=function(e){return e.decomposedIdentities&&e.decomposedIdentities.values[0].length>i.DataViewObjectSerializer.IdentityLimit},e.serializeFilterExpressionMetadata=function(e,t){if(!_.isEmpty(e.expressions))return t?(t=r.DecomposedIdentities.decomposeFilterExpressionMetadata(e),i.DataViewObjectSerializer.serializeDecomposedFilterExpressionMetadata(t)):a(e)},e.deserializeFilterExpressionMetadata=function(e){var t;if(!_.isEmpty(e.expressions))return o(e)?(t=i.DataViewObjectSerializer.deserializeDecomposedFilterExpressionMetadata(e),r.DecomposedIdentities.convertDecomposedFilterExpressionMetadata(t)):n(e)},e.serializeOldFilterExpressionMetadata=a,e.deserializeOldFilterExpressionMetadata=n,e.isDecomposedFilterExpressionMetadata=o,e.isFilterExpressionMetadata=function(e){return!!e.cachedValueItems}})(powerbi=powerbi||{}),(function(e){var o,h;function s(e,t){return{Expressions:_.map(e.identityKeys,(function(e){e=o.SQExprRewriterWithSourceRenames.rewrite(e,t,t);return h.SemanticQuerySerializer.serializeExprWithRef(e)})),Default:e.isCollapsed?0:1}}o=e.data||(e.data={}),h=o.services||(o.services={}),(e=h.DataShapeBindingExpansionStateSerializer||(h.DataShapeBindingExpansionStateSerializer={})).serializeExpansionState=function(e,t){if(!_.isEmpty(e.levels)&&0!==t){e.root;var r=(function e(t,r,i,a){var n=-1===r;var o=r+1===i;var s=!n&&!!a[r].isCollapsed;if(!t.isToggled&&(s||o||_.isEmpty(t.children)))return;n=!n&&!s&&t.isToggled;s=!o&&!_.isEmpty(t.children)&&!n;var u;var c=0;if(s){u=[];for(var l=0,p=t.children;l<p.length;l++){var d=p[l],d=(d.identityValues,e(d,r+1,i,a));d&&(c=Math.max(c,d.depth+1),u.push(d.instance))}}if(!t.isToggled&&_.isEmpty(u))return;o={};_.isEmpty(t.identityValues)||(o.Values=_.map(t.identityValues,(function(e){return h.SemanticQuerySerializer.serializeExpr(e)})));_.isEmpty(u)||(o.Children=u);return{depth:c,instance:o}})(e.root,-1,t,e.levels);if(r){for(var i=new Array(r.depth),a=new o.SQFrom(null),n=0;n<r.depth;n++)i[n]=s(e.levels[n],a);t=[];return h.SemanticQuerySerializer.serializeFrom(a,t),{From:t,Levels:i,Instances:r.instance}}}},e.serializeLevelExpansionState=s})(powerbi=powerbi||{}),(function(r){var e,u,s;e=r.data||(r.data={}),u=e.services||(e.services={}),s=r.data.ExpansionState,(e=u.ExpansionStateSerializer||(u.ExpansionStateSerializer={})).serializeExpansionStates=function(e){return _.filter(_.map(e,(function(e){var t;if(debug.assertValue(e,"expansionState"),debug.assertValue(!_.isEmpty(e.roles),"expansionState.roles"),r.data.ExpansionState.hasNodes(e)||r.data.ExpansionState.hasPinnedLevels(e))return t={roles:e.roles},_.isEmpty(e.levels)||(e.root,t.levels=_.map(e.levels,(function(e){var t;if(debug.assertAnyValue(e,"level"),e)return e.queryRefs,t={queryRefs:_.clone(e.queryRefs)},e.isCollapsed&&(t.isCollapsed=!0),e.identityKeys&&(t.identityKeys=_.map(e.identityKeys,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)}))),e.isPinned&&(t.isPinned=e.isPinned),e.isLocked&&(t.isLocked=e.isLocked),e.AIInformation&&(t.AIInformation=_.cloneDeep(e.AIInformation)),t})),t.root=(function e(t){var r={identityValues:t.identityValues?_.map(t.identityValues,(function(e){return u.SemanticQuerySerializer.serializeExpr(e)})):null};t.isToggled&&(r.isToggled=!0);if(!_.isEmpty(t.children)){r.children=[];for(var i=0,a=t.children;i<a.length;i++){var n=a[i],n=(_.isEmpty(n.identityValues),e(n));r.children.push(n)}}return r})(e.root)),t})),(function(e){return e}))},e.deserializeExpansionStates=function(e,t){if(e){for(var r=[],i=0,a=e;i<a.length;i++){var n,o=a[i];o&&(_.isEmpty(o.roles),n=new s(o.roles,t),_.isEmpty(o.levels)||(o.root,n.levels=_.map(o.levels,(function(e){var t={queryRefs:_.clone(e.queryRefs),isCollapsed:!!e.isCollapsed,toggledNodes:[],isPinned:e.isPinned,isLocked:e.isLocked,AIInformation:_.cloneDeep(e.AIInformation)};return e.identityKeys&&(t.identityKeys=_.map(e.identityKeys,(function(e){return u.SemanticQuerySerializer.deserializeExpr(e)}))),t})),n.root=(function t(e,r,i,a,n){var o={identityValues:e.identityValues?_.map(e.identityValues,(function(e){return u.SemanticQuerySerializer.deserializeExpr(e)})):null,parent:i,children:[]};e.isToggled&&(o.isToggled=!0,0<=r)&&a[r].toggledNodes.push(o);{var s;_.isEmpty(e.children)||(s=r+1,o.children=_.map(e.children,(function(e){return t(e,s,o,a,n)})))}return o})(o.root,-1,null,n.levels,!!t.canCollapseRoot)),r.push(n))}return r}}})(powerbi=powerbi||{}),(function(c){var s,l,e,t,p,d,h,m;function i(e){return e&&"ExprContext"===e.propertyDefinitionKind}function r(e){return!_.isArray(e)&&!!e.decomposedIdentities}function f(e){var t;return null===e?null:e?(t={},e.data&&(t.data=_.chain(e.data).map(g).filter((function(e){return null!=e})).value()),e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),void 0!==e.highlightMatching&&(t.highlightMatching=e.highlightMatching),t):void 0}function a(e){if(e){var t={};if(e.dataMap)for(var r in t.dataMap={},e.dataMap)t.dataMap[r]=_.chain(e.dataMap[r]).map(g).filter((function(e){return null!=e})).value();return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),t}}function n(e){for(var t=[],r=0,i=e.values;r<i.length;r++){for(var a=[],n=0,o=i[r];n<o.length;n++){var s=o[n],s=_.mapValues(s,(function(e){return _.map(e,(function(e){return l.SemanticQuerySerializer.deserializeExpr(e)}))}));a.push(s)}t.push(a)}return{values:t,columns:_.map(e.columns,y)}}function o(e,t,r){e.decomposedIdentities&&(t.decomposedIdentities=r(e.decomposedIdentities)),e.queryNames&&(t.queryNames=e.queryNames),e.queryNameMap&&(t.queryNameMap=e.queryNameMap),e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id)}function u(e){if(e)return o(e,e={},n),e}function y(e){var t={};return e.left&&e.right?(t.left=y(e.left),t.right=y(e.right),t):e.value?(e=l.SemanticQuerySerializer.deserializeExpr(e.value),(s.SQExpr.isEntity(e)||s.SQExpr.isMeasure(e)||s.SQExpr.isColumn(e)||s.SQExpr.isAggregation(e))&&(t.value=e),t):void 0}function g(e){return e.scopeId?l.DataViewScopeIdentitySerializer.deserializeScopeIdentity(e):e.wildcard?s.DataViewScopeWildcard.fromExprs(_.map(e.wildcard,l.SemanticQuerySerializer.deserializeExpr)):e.roles?s.DataViewRoleWildcard.fromRoles(e.roles):e.total?s.DataViewScopeTotal.fromExprs(_.map(e.total,l.SemanticQuerySerializer.deserializeExpr)):e.dataViewWildcard?s.DataViewWildcard.create(e.dataViewWildcard.matchingOption):void 0}function v(e,t,r){return t?(t=F(t.type),i(e)?{propertyDefinitionKind:"ExprWithContext",value:S(e.value,t.value),context:C(e.context)}:t.value?S(e,t.value):x(e,t.structural)):r&&e?i(e)?{propertyDefinitionKind:"ExprWithContext",value:l.SemanticQuerySerializer.deserializeExpr(e.value.expr),context:C(e.context)}:e.expr?l.SemanticQuerySerializer.deserializeExpr(e.expr):e.solid?x(e,m):e.filter?l.SemanticQuerySerializer.deserializeFilter(e.filter):void 0:void 0}function S(e,t){if(void 0!==t.primitiveType&&e.expr)return l.SemanticQuerySerializer.deserializeExpr(e.expr)}function x(e,t){if(t.fill&&t.fill.solid&&t.fill.solid.color&&e)return e.solid&&e.solid.color?{solid:{color:S(e.solid.color,c.ValueType.fromPrimitiveTypeAndCategory(1))}}:void 0;if(t.fillRule){var r=Q(e,S);if(r)return r}var i,a,n,o,s,u,r=e;return t.filter&&r&&r.filter?l.SemanticQuerySerializer.deserializeFilter(r.filter):t.image&&r&&r.image?(i=r.image,a={name:S(i.name,h),url:S(i.url,c.ValueType.fromDescriptor(c.ImageDefinition.urlType))},i.scaling&&(a.scaling=S(i.scaling,h)),a):t.geoJson&&r&&r.geoJson?{type:S((i=r.geoJson).type,h),name:S(i.name,h),content:S(i.content,h)}:t.paragraphs&&e?(a=e,_.map(a,(function(e){var t={textRuns:_.map(e.textRuns,(function(e){return c.ParagraphsDefinition.isTextRunDefinitionGeneric(e)?E(e):c.ParagraphsDefinition.isConditionalDefinitionGeneric(e)?(e=e,{cases:_.map(e.cases,(function(e){return{pattern:S(e.pattern,h),textRuns:_.map(e.textRuns,E)}})),defaultCase:{textRuns:_.map(e.defaultCase.textRuns,E)},expression:(function(e){var t;(t=S(e,h))||(e=e,c.isValueRef(e)&&(t=e));return t})(e.expression)}):void 0}))};return e.horizontalTextAlignment&&(t.horizontalTextAlignment=e.horizontalTextAlignment),e.listType&&(t.listType=e.listType),e.indent&&(t.indent=e.indent),t}))):t.queryTransform&&e?{algorithm:(n=e).algorithm,parameters:_.map(n.parameters,(function(e){return{name:e.Name,expr:l.SemanticQuerySerializer.deserializeExpr(e)}}))}:t.dataBars&&e?{minValue:(n=e).minValue?S(n.minValue,d):void 0,maxValue:n.maxValue?S(n.maxValue,d):void 0,positiveColor:x(n.positiveColor,m),negativeColor:x(n.negativeColor,m),axisColor:x(n.axisColor,m),reverseDirection:S(n.reverseDirection,p),hideText:S(n.hideText,p)}:t.icon&&e&&"Icon"===e.kind?(s={kind:"Icon"},(o=e).layout&&(s.layout=S(o.layout,h)),o.verticalAlignment&&(s.verticalAlignment=S(o.verticalAlignment,p)),o.value&&(s.value=S(o.value,h)),s):t.exprList&&e&&"ExprList"===e.kind?(o=e,(s={exprs:[],kind:"ExprList"}).exprs=_.map(o.exprs,(function(e){return l.SemanticQuerySerializer.deserializeExpr(e.expr)})),s):t.errorRange&&e&&"ErrorRange"===e.kind?(t={kind:"ErrorRange"},(e=e).explicit?(u=e.explicit,t.explicit={isRelative:l.SemanticQuerySerializer.deserializeExpr(u.isRelative.expr)},u.lowerBound&&(t.explicit.lowerBound=l.SemanticQuerySerializer.deserializeExpr(u.lowerBound.expr)),u.upperBound&&(t.explicit.upperBound=l.SemanticQuerySerializer.deserializeExpr(u.upperBound.expr))):e.symmetricalExplicit?(u=e.symmetricalExplicit,t.symmetricalExplicit={delta:l.SemanticQuerySerializer.deserializeExpr(u.delta.expr)}):e.standardDeviation?(u=e.standardDeviation,t.standardDeviation={value:l.SemanticQuerySerializer.deserializeExpr(u.value.expr),multiplier:l.SemanticQuerySerializer.deserializeExpr(u.multiplier.expr)}):e.percentage?(u=e.percentage,t.percentage={lowerBoundDelta:l.SemanticQuerySerializer.deserializeExpr(u.lowerBoundDelta.expr),upperBoundDelta:l.SemanticQuerySerializer.deserializeExpr(u.upperBoundDelta.expr)}):e.percentile&&((u=e.percentile).lowerBound.expr.Percentile,u.upperBound.expr.Percentile,t.percentile={lowerBound:l.SemanticQuerySerializer.deserializeExpr(u.lowerBound.expr),upperBound:l.SemanticQuerySerializer.deserializeExpr(u.upperBound.expr)}),t):void 0}function C(e){var t={};return _.isEmpty(e.filterContext)||(t.filterContext=_.map(e.filterContext,(function(e){return{filter:l.SemanticQuerySerializer.deserializeFilter(e.filter),metadata:e.metadata?l.FilterExpressionMetadataSerializer.deserializeFilterExpressionMetadata(e.metadata):void 0}}))),t}function E(e){var t={value:(function(e){var t;_.isString(e)?t=e:(t=S(e,h))||(e=e,c.isValueRef(e)&&(t=e));return t})(e.value)};return e.textStyle&&(t.textStyle=e.textStyle),e.url&&(t.url=e.url),e.mentionEmail&&(t.mentionEmail=e.mentionEmail),t}function D(e){var t;return null===e?null:e?(t={},e.data&&(t.data=_.chain(e.data).map(V).filter((function(e){return null!=e})).value()),e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),void 0!==e.highlightMatching&&(t.highlightMatching=e.highlightMatching),t):void 0}function I(e){if(e){var t={};if(e.dataMap)for(var r in t.dataMap={},e.dataMap){var i=jsCommon.ArrayExtensions.ensureArray(e.dataMap[r]);t.dataMap[r]=_.chain(i).map(V).filter((function(e){return null!=e})).value()}return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),t}}function w(e){if(e){for(var t=[],r=0,i=e.values;r<i.length;r++){for(var a=[],n=0,o=i[r];n<o.length;n++){var s=o[n],s=_.mapValues(s,(function(e){return _.map(e,(function(e){return l.SemanticQuerySerializer.serializeExpr(e)}))}));a.push(s)}t.push(a)}return{values:t,columns:_.map(e.columns,b)}}}function M(e){if(e)return o(e,e={},w),e}function b(e){var t={};return e.left&&e.right?(t.left=b(e.left),t.right=b(e.right),t):e.value?(t.value=l.SemanticQuerySerializer.serializeExpr(e.value),t):void 0}function V(e){return s.Selector.isScopeIdentity(e)&&e.expr?l.DataViewScopeIdentitySerializer.serializeScopeIdentity(e):s.Selector.isScopeWildcard(e)&&e.exprs?{wildcard:_.map(e.exprs,(function(e){return l.SemanticQuerySerializer.serializeExpr(e)}))}:s.Selector.isRoleWildcard(e)&&e.roles?{roles:e.roles}:s.Selector.isScopeTotal(e)&&e.exprs?{total:_.map(e.exprs,(function(e){return l.SemanticQuerySerializer.serializeExpr(e)}))}:s.Selector.isWildcard(e)?{dataViewWildcard:{matchingOption:e.matchingOption}}:void 0}function R(e,t,r,i){return t?(t=F(t.type),s.DataViewObjectDefinitions.isObjectPropertySQExprWithContext(e)?{propertyDefinitionKind:"ExprContext",value:P(e.value,t.value),context:A(e.context,i)}:t.value?P(e,t.value):T(e,t.structural)):r&&e?s.DataViewObjectDefinitions.isObjectPropertySQExprWithContext(e)?{propertyDefinitionKind:"ExprContext",value:{expr:l.SemanticQuerySerializer.serializeExpr(e.value)},context:A(e.context,i)}:e instanceof s.SQExpr?{expr:l.SemanticQuerySerializer.serializeExpr(e)}:e instanceof s.SemanticFilter?{filter:l.SemanticQuerySerializer.serializeFilter(e)}:e.solid?T(e,m):void 0:void 0}function P(e,t){if(void 0!==t.primitiveType&&e instanceof s.SQExpr)return{expr:l.SemanticQuerySerializer.serializeExpr(e,!0)}}function T(e,t){if(e){var r,i,a,n;if(t.fill&&t.fill.solid&&t.fill.solid.color)return{solid:{color:P(e.solid.color,h)}};if(t.fillRule){var o=Q(e,P);if(o)return o}return t.filter?{filter:l.SemanticQuerySerializer.serializeFilter(e)}:t.image?{image:(function(e){var t={name:P(e.name,h),url:P(e.url,c.ValueType.fromDescriptor(c.ImageDefinition.urlType))};e.scaling&&(t.scaling=P(e.scaling,h));return t})(e)}:t.geoJson?{geoJson:{type:P((o=e).type,h),name:P(o.name,h),content:P(o.content,h)}}:t.paragraphs?(r=e,_.map(r,(function(e){var t={textRuns:_.map(e.textRuns,(function(e){return c.ParagraphsDefinition.isTextRunDefinition(e)?N(e):c.ParagraphsDefinition.isTextRunConditionalDefinition(e)?{cases:_.map(e.cases,(function(e){return{pattern:P(e.pattern,h),textRuns:_.map(e.textRuns,N)}})),defaultCase:{textRuns:_.map(e.defaultCase.textRuns,N)},expression:(function(e){var t;e instanceof s.SQExpr?t=P(e,h):c.isValueRef(e)&&(t=e);return t})(e.expression)}:void 0}))};return e.horizontalTextAlignment&&(t.horizontalTextAlignment=e.horizontalTextAlignment),e.listType&&(t.listType=e.listType),e.indent&&(t.indent=e.indent),t}))):t.queryTransform?{algorithm:e.algorithm,parameters:_.map(e.parameters,(function(e){var t=l.SemanticQuerySerializer.serializeExpr(e.expr);return t.Name=e.name,t}))}:t.dataBars?{minValue:P((r=e).minValue,d),maxValue:P(r.maxValue,d),positiveColor:T(r.positiveColor,m),negativeColor:T(r.negativeColor,m),axisColor:T(r.axisColor,m),reverseDirection:P(r.reverseDirection,p),hideText:P(r.hideText,p)}:t.icon&&"Icon"===e.kind?(a={kind:"Icon"},(i=e).layout&&(a.layout=P(i.layout,h)),i.verticalAlignment&&(a.verticalAlignment=P(i.verticalAlignment,p)),i.value&&(a.value=P(i.value,h)),a):t.exprList&&"ExprList"===e.kind?(i=e,(a={exprs:[],kind:"ExprList"}).exprs=_.map(i.exprs,(function(e){return P(e,h)})),a):t.errorRange&&"ErrorRange"===e.kind?(t={kind:"ErrorRange"},(e=e).explicit?(n=e.explicit,t.explicit={isRelative:P(n.isRelative,p)},n.lowerBound&&(t.explicit.lowerBound=P(n.lowerBound,d)),n.upperBound&&(t.explicit.upperBound=P(n.upperBound,d))):e.symmetricalExplicit?(n=e.symmetricalExplicit,t.symmetricalExplicit={delta:P(n.delta,d)}):e.standardDeviation?(n=e.standardDeviation,t.standardDeviation={value:P(n.value,d),multiplier:P(n.multiplier,d)}):e.percentage?(n=e.percentage,t.percentage={lowerBoundDelta:P(n.lowerBoundDelta,d),upperBoundDelta:P(n.upperBoundDelta,d)}):e.percentile&&(n=e.percentile,t.percentile={lowerBound:P(n.lowerBound,d),upperBound:P(n.upperBound,d)}),t):void 0}}function A(e,t){var r={};return _.isEmpty(e.filterContext)||(r.filterContext=_.map(e.filterContext,(function(e){return{filter:l.SemanticQuerySerializer.serializeFilter(e.filter),metadata:e.metadata?l.FilterExpressionMetadataSerializer.serializeFilterExpressionMetadata(e.metadata,t):void 0}}))),r}function N(e){var t={value:(function(e){var t;e instanceof s.SQExpr?t=P(e,h):(_.isString(e)||c.isValueRef(e))&&(t=e);return t})(e.value)};return e.textStyle&&(t.textStyle=e.textStyle),e.url&&(t.url=e.url),e.mentionEmail&&(t.mentionEmail=e.mentionEmail),t}function F(e){var t=c.ValueType.fromDescriptor(e);return 0!==t.primitiveType?{value:t}:{structural:e}}function Q(e,t){var r,i;return e.linearGradient2?(i={min:{color:t((r=e.linearGradient2).min.color,c.ValueType.fromPrimitiveTypeAndCategory(1))},max:{color:t(r.max.color,c.ValueType.fromPrimitiveTypeAndCategory(1))}},r.min.value&&(i.min.value=t(r.min.value,c.ValueType.fromPrimitiveTypeAndCategory(3))),r.max.value&&(i.max.value=t(r.max.value,c.ValueType.fromPrimitiveTypeAndCategory(3))),r.nullColoringStrategy&&(i.nullColoringStrategy={strategy:t(r.nullColoringStrategy.strategy,c.ValueType.fromPrimitiveTypeAndCategory(1))},r.nullColoringStrategy.color)&&(i.nullColoringStrategy.color=t(r.nullColoringStrategy.color,c.ValueType.fromPrimitiveTypeAndCategory(1))),{linearGradient2:i}):e.linearGradient3?(i={min:{color:t((r=e.linearGradient3).min.color,c.ValueType.fromPrimitiveTypeAndCategory(1))},mid:{color:t(r.mid.color,c.ValueType.fromPrimitiveTypeAndCategory(1))},max:{color:t(r.max.color,c.ValueType.fromPrimitiveTypeAndCategory(1))}},r.min.value&&(i.min.value=t(r.min.value,c.ValueType.fromPrimitiveTypeAndCategory(3))),r.mid.value&&(i.mid.value=t(r.mid.value,c.ValueType.fromPrimitiveTypeAndCategory(3))),r.max.value&&(i.max.value=t(r.max.value,c.ValueType.fromPrimitiveTypeAndCategory(3))),r.nullColoringStrategy&&(i.nullColoringStrategy={strategy:t(r.nullColoringStrategy.strategy,c.ValueType.fromPrimitiveTypeAndCategory(1))},r.nullColoringStrategy.color)&&(i.nullColoringStrategy.color=t(r.nullColoringStrategy.color,c.ValueType.fromPrimitiveTypeAndCategory(1))),{linearGradient3:i}):null}s=c.data||(c.data={}),l=s.services||(s.services={}),((e=l.wireContracts||(l.wireContracts={})).DataViewObjectDefinitions||(e.DataViewObjectDefinitions={})).getObjectDefinitionProperties=function(e,t){var r=e&&e[t];if(r){for(var i,a=0,n=r.length;a<n;a++){var o=r[a];if(null==o.selector){i=o;break}}if(i)return i.properties}},t=l.DataViewObjectSerializer||(l.DataViewObjectSerializer={}),p=c.ValueType.fromDescriptor({bool:!0}),d=c.ValueType.fromDescriptor({numeric:!0}),h=c.ValueType.fromDescriptor({text:!0}),m={fill:{solid:{color:!0}}},t.IdentityLimit=300,t.isObjectPropertyWithContext=i,t.isDecomposedSelectors=r,t.isSelectorsByColumn=function(e){return _.isArray(e)&&!!e[0].dataMap},t.isDecomposedSelectorOverLimit=function(e){return e.decomposedIdentities.values[0].length>t.IdentityLimit},t.isSelectorsByColumnOverLimit=function(e){return e.length>t.IdentityLimit},t.deserializeObjects=function(e,t){if(e){var r,i={};for(r in e){var a=void 0;if(!t||(a=t[r]))for(var n=e[r],o=i[r]=[],s=0,u=n.length;s<u;s++)o.push(function(e,t,r){if(debug.assertAnyValue(e,"input"),debug.assertAnyValue(t,"descriptor"),e)return t={properties:(function(e,t,r){if(debug.assertAnyValue(e,"input"),debug.assertAnyValue(t,"propertyDescriptors"),e){var i,a={};for(i in e){var n=v(e[i],t?t[i]:null,r);void 0!==n&&(a[i]=n)}return a}})(e.properties,t?t.properties:null,r)},(r=f(e.selector))&&(t.selector=r),t}(n[s],a,!t))}return i}},t.deserializeSelectors=function(e){if(e)return _.map(e,f)},t.serializeSelectors=function(e){if(e)return _.map(e,D)},t.serializeValueType=function(e){if(e)return{category:e.categoryString,underlyingType:e.extendedType}},t.deserializeValueType=function(e){if(e)return new c.ValueType(e.underlyingType,e.category)},t.deserializeSelector=f,t.deserializeSelectorsByColumn=a,t.deserializeDecomposedIdentities=n,t.deserializeDecomposedSelectors=u,t.deserializeDecomposedFilterExpressionMetadata=function(e){var t;if(e)return t={expressions:_.map(e.expressions,(function(e){return l.SemanticQuerySerializer.deserializeExpr(e)}))},e.decomposedIdentities&&(t.decomposedIdentities=n(e.decomposedIdentities)),e.valueMap&&(t.valueMap=e.valueMap),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t},t.deserializeDecomposedTree=y,t.deserializeVisualObjects=function(e){if(e)return _.map(e,(function(e){return{objectName:e.objectName,selectorsByColumn:a(e.selectorsByColumn)}}))},t.deserializeObjectProperty=v,t.serializeObjects=function(e,t,r){if(e){var i,a={};for(i in e){var n=void 0;if(!t||(n=t[i]))for(var o=e[i],s=a[i]=[],u=0,c=o.length;u<c;u++)s.push(function(e,t,r,i){if(debug.assertAnyValue(e,"contract"),debug.assertAnyValue(t,"descriptor"),e){t=(function(e,t,r,i){if(debug.assertAnyValue(e,"contract"),debug.assertAnyValue(t,"descriptors"),e){var a,n={};for(a in e){var o=t?t[a]:null;(r||o)&&void 0!==(o=R(e[a],o,r,i))&&(n[a]=o)}return n}})(e.properties,t?t.properties:null,r,i);if(t)return r={properties:t},(i=D(e.selector))&&(r.selector=i),r}}(o[u],n,!t,r))}return a}},t.serializeSelector=D,t.serializeSelectorsByColumn=I,t.serializeDecomposedIdentities=w,t.serializeDecomposedSelectors=M,t.serializeSelection=function(e,t){return t?M(s.DecomposedIdentities.decomposeSelectorsByColumn(e)):_.map(e,I)},t.deserializeSelection=function(e){var t;return r(e)?(t=u(e),s.DecomposedIdentities.convertDecomposedSelectors(t)):_.map(e,a)},t.serializeDecomposedFilterExpressionMetadata=function(e){var t;if(e)return t={expressions:_.map(e.expressions,(function(e){return l.SemanticQuerySerializer.serializeExpr(e)}))},e.decomposedIdentities&&(t.decomposedIdentities=w(e.decomposedIdentities)),e.valueMap&&(t.valueMap=e.valueMap),e.jsonFilter&&(t.jsonFilter=e.jsonFilter),t},t.serializeDecomposedTree=b,t.serializeVisualObjects=function(e){if(e)return _.map(e,(function(e){return{objectName:e.objectName,selectorsByColumn:I(e.selectorsByColumn)}}))},t.serializeObjectProperty=R})(powerbi=powerbi||{}),(function(i){var h,n,o;function s(){}h=i.data||(i.data={}),n=h.services||(h.services={}),o=i.data.services.ExpansionStateSerializer,s.deserializeDataViewSelectTransforms=function(e){return n.DataViewTransformActionsUpgrade.V1.upgradeDataViewSelectTransform(e),_.map(e,(function(e){var t={displayName:e.displayName,format:e.format,kpi:e.kpi,queryName:e.queryName,roles:e.roles,sort:e.sort,sortOrder:e.sortOrder,type:n.DataViewObjectSerializer.deserializeValueType(e.type)};return e.expr&&(t.expr=n.SemanticQuerySerializer.deserializeExpr(e.expr)),e.aggregateSources&&(t.aggregateSources=e.aggregateSources),e.relatedSelects&&(t.relatedSelects=e.relatedSelects),e.relatedObjects&&(t.relatedObjects=e.relatedObjects),t}))},s.serializeDataViewSelectTransforms=function(e){return _.map(e,(function(e){var t={displayName:e.displayName,format:e.format,kpi:e.kpi,queryName:e.queryName,roles:e.roles,sort:e.sort,sortOrder:e.sortOrder,type:n.DataViewObjectSerializer.serializeValueType(e.type)};return e.expr&&(t.expr=n.SemanticQuerySerializer.serializeExpr(e.expr)),e.aggregateSources&&(t.aggregateSources=e.aggregateSources),e.relatedSelects&&(t.relatedSelects=e.relatedSelects),e.relatedObjects&&(t.relatedObjects=e.relatedObjects),t}))},s.serializeDataViewTransformActions=function(e,t){var r={objects:(e=e||{}).objects,projectionOrdering:e.roles&&e.roles.ordering,projectionActiveItems:e.roles&&e.roles.activeItems,splits:e.splits,queryMetadata:null,visualElements:null};return e&&e.objects&&(r.objects=n.DataViewObjectSerializer.serializeObjects(e.objects,t)),e&&e.selects&&(r.selects=s.serializeDataViewSelectTransforms(e.selects)),e&&!_.isEmpty(e.expansionStates)&&(r.expansionStates=o.serializeExpansionStates(e.expansionStates)),r},s.deserializeDataViewTransformActions=function(e,t){var r,i=t&&t.objects,a=e.objects?n.DataViewObjectSerializer.deserializeObjects(e.objects,i):null,i=s.createTransformActions(e.queryMetadata,e.visualElements,i,a)||{},a=e&&e.projectionActiveItems;return _.isEmpty(a)||this.upgradeActiveItemsIfNeeded(a),i.roles={ordering:e.projectionOrdering,activeItems:a},i.splits=e.splits,e.selects&&(i.selects=s.deserializeDataViewSelectTransforms(e.selects)),e.expansionStates&&(a=t&&t.expandCollapse&&t.expandCollapse.supportsMerge,r=t&&t.noDefaultProjections,t=t&&t.expandCollapse&&t.expandCollapse.collapseParentAfterRemovingChildLevel,i.expansionStates=o.deserializeExpansionStates(e.expansionStates,{supportsMerge:a,canCollapseRoot:r,collapseParentAfterRemovingChildLevel:t})),this.upgradeComboChartFromCY16SU04AndPrior(i),i},s.isStringArray=function(e){return _.isString(e[0])},s.upgradeActiveItemsIfNeeded=function(e){for(var t in e){var r=e[t],i=void 0;!_.isEmpty(r)&&this.isStringArray(r)&&(i=_.map(r,(function(e){return{queryRef:e}}))),e[t]=i||r}},s.upgradeComboChartFromCY16SU04AndPrior=function(e){var t,r,i,a,n=e.roles&&e.roles.ordering;n&&void 0!==(n=n.Y&&1===n.Y.length&&_.includes(n.Y2,n.Y[0])?n.Y[0]:void 0)&&(r=e.splits&&2===e.splits.length&&!e.splits[0].selects[n]&&e.splits[1].selects[n]?e.splits[0]:void 0)&&(i=_.chain(Object.keys(r.selects)).filter((function(e){return r.selects[e]})).map((function(e){return parseInt(e,10)})).maxBy((function(e){return e})).value())!==Number.NEGATIVE_INFINITY&&e.selects&&e.selects.length===i&&(n=e.selects[n])&&n.roles.Y&&n.roles.Y2&&(delete n.roles.Y,(a=__assign({},n)).roles=((t={}).Y=!0,t),a.queryName=n.queryName,e.selects[i]=a,e.roles.ordering.Y=[i])},s.serializeTransformActions=function(e){return JSON.stringify(e)},s.createTransformActions=function(e,t,r,i){if(e&&!_.isEmpty(e.Select)||!_.isEmpty(t)||i){var a={};if(e){var n=e.Select;if(n)for(var o=a.selects=[],s=0,u=n.length;s<u;s++){var c,l=n[s];l?(l=this.toTransformSelect(l,s),o.push(l),l.format&&r&&(l.queryName,c=h.DataViewObjectDescriptors.findFormatString(r))&&h.DataViewObjectDefinitions.setValue(i=i||{},c,{metadata:l.queryName},h.SQExprBuilder.text(l.format))):o.push(null)}}if(t){var p=(t=_.unionBy(t,(function(e){return JSON.stringify(e)}))).length;1<p&&(a.splits=[]);for(s=0;s<p;s++){var d=t[s];d.Settings&&0===s&&(i=this.upgradeSettingsToObjects(d.Settings,i)),d.DataRoles&&(a.selects||(a.selects=[]),a.roles||(a.roles={ordering:{}}),this.populateDataRoles(d.DataRoles,a.selects,a.roles.ordering)),a.splits&&a.splits.push(this.populateSplit(d.DataRoles))}}return i&&(a.objects=i),a}},s.toTransformSelect=function(e,t){var r={};return e.Restatement&&(r.displayName=e.Restatement),e.Name?r.queryName=e.Name:r.queryName||(r.queryName="$select"+t),e.Format&&(r.format=e.Format),e.Type&&(r.type=this.describeDataType(e.Type,i.data.conceptualDataCategoryToString(e.DataCategory))),e.kpi&&(r.kpi=e.kpi),e.kpiStatusGraphic&&(r.kpi={graphic:e.kpiStatusGraphic}),r},s.describeDataType=function(e,t){var r=0;switch(e=e||0){case 2048:r=1;break;case 1:r=3;break;case 3:r=4;break;case 4096:r=5;break;case 20:r=6;break;case 4:r=7;break;case 8:r=9;break;case 67:r=4,t="Year";break;case 35:r=4,t="Month"}return i.ValueType.fromPrimitiveTypeAndCategory(r,t)},s.populateDataRoles=function(e,t,r){for(var i=0,a=e.length;i<a;i++){var n=e[i],o=n.Projection,n=n.Name,s=t[o],u=(void 0===s&&(this.fillArray(t,o),s=t[o]={}),s.roles),s=((u=void 0===s.roles?s.roles={}:u)[n]=!0,r[n]);(s=void 0===s?r[n]=[]:s).push(o)}},s.fillArray=function(e,t){for(var r=e.length;r<t;r++)e[r]={}},s.populateSplit=function(e){var t={},r={selects:t};if(e)for(var i=0,a=e.length;i<a;i++)t[e[i].Projection]=!0;return r},s.upgradeSettingsToObjects=function(e,t){if(e){for(var r in t=t||{},e){var i=e[r],a=r,n=i,o="general";switch(r){case"hasScalarCategoryAxis":o="categoryAxis",a="axisType",n=h.SQExprBuilder.text(i?"Scalar":"Categorical");break;case"Totals":a="totals",n=h.SQExprBuilder.boolean(!!i);break;case"textboxSettings":a="paragraphs",i&&i.paragraphs&&(n=i.paragraphs);break;case"VisualType1":a="visualType1",n=h.SQExprBuilder.text(i);break;case"VisualType2":a="visualType2",n=h.SQExprBuilder.text(i);break;case"imageVisualSettings":a="imageUrl",i&&i.imageUrl&&(n=h.SQExprBuilder.text(i.imageUrl));break;default:continue}this.setObjectDefinition(t,o,a,n)}return t}},s.setObjectDefinition=function(e,t,r,i){var a=e[t],e=(a=void 0===a?e[t]=[]:a)[0];(e=void 0===e?a[0]={properties:{}}:e).properties[r]=i},n.DataViewTransformActionsSerializer=s})(powerbi=powerbi||{}),(function(i){var a,e,n;function o(e,t){var r={type:(function(e,t){var r=i.ValueType.fromDescriptor(e);r=r&&r.enum?{enumeration:u(r.enum,t)}:null!=r&&r.flagsEnum?{flagsEnumeration:u(r.flagsEnum,t)}:e;return r})(e.type,t)};return e.rule&&(r.rule=e.rule),e.displayName&&(r.displayName=a.getDisplayName(e.displayName,t)),e.description&&(r.description=a.getDisplayName(e.description,t)),e.placeHolderText&&(r.placeHolderText=a.getDisplayName(e.placeHolderText,t)),r}function s(e){var t={type:(function(e){e=i.ValueType.fromDescriptor(e)?(function(e){var t;if(e.enumeration){var r=c(e.enumeration);t={enumeration:r}}else if(e.flagsEnumeration)t={flagsEnumeration:c(e.flagsEnumeration)};else for(var i in t={},e)t[i]=e[i];return t})(e):e;return e})(e.type)};return e.displayName&&(t.displayName=a.createDisplayNameGetter(e.displayName)),e.description&&(t.description=a.createDisplayNameGetter(e.description)),e.placeHolderText&&(t.placeHolderText=a.createDisplayNameGetter(e.placeHolderText)),e.rule&&(t.rule=e.rule),t}function u(e,t){return _.map(e.members(),(function(e){return e=e,{displayName:a.getDisplayName(e.displayName,t),value:e.value}}))}function c(e){return i.createEnumType(e)}a=i.data||(i.data={}),e=a.services||(a.services={}),n={get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}},(e=e.DataViewObjectDescriptorSerializer||(e.DataViewObjectDescriptorSerializer={})).serialize=function(e,t){var r,i={};for(r in e)i[r]=(function(e,t){if(e){var r,i={properties:{}};for(r in e.displayName&&(i.displayName=a.getDisplayName(e.displayName,t)),e.description&&(i.description=a.getDisplayName(e.description,t)),e.properties)i.properties[r]=o(e.properties[r],t);return i}})(e[r],t||n);return i},e.deserialize=function(e){var t,r={};for(t in e)r[t]=(function(e){var t,r={properties:{}};e.displayName&&(r.displayName=a.createDisplayNameGetter(e.displayName));e.description&&(r.description=a.createDisplayNameGetter(e.description));for(t in e.properties)r.properties[t]=s(e.properties[t]);return r})(e[t]);return r},e.serializePropertyDescriptor=o,e.deserializePropertyDescriptor=s})(powerbi=powerbi||{}),(function(e){((e=(e=(e=e.data||(e.data={})).services||(e.services={})).DataViewTransformActionsUpgrade||(e.DataViewTransformActionsUpgrade={})).V1||(e.V1={})).upgradeDataViewSelectTransform=function(e){if(e)for(var t=0,r=e;t<r.length;t++){var i=r[t];i.kpiStatusGraphic&&(i.kpi={graphic:i.kpiStatusGraphic})}}})(powerbi=powerbi||{}),(function(e){((e=e.data||(e.data={})).tabular||(e.tabular={})).type="tabular"})(powerbi=powerbi||{}),(function(a){var e,i,n,t;function r(e){var t,r,i,a=[];for(t in e=y(e))e.hasOwnProperty(t)&&(i=void 0,r=e[t])&&(_.isDate(r)||null!=f(r.toString().substr(0,26))?i={dateTime:!0}:isNaN(+r)?_.isString(r)&&(i={text:!0}):i={numeric:!0},i)&&a.push({name:t,type:i});return a}function f(e){var t,r=null,i=+e;return isNaN(i)?(e=jsCommon.DateExtensions.parseIsoDate(e.toString()))&&(r=a.dateWithEpochValueFromLocalDate(e)):((e=new Date).setDate(e.getDate()-n),t=e.getTime(),(e=new Date).setDate(e.getDate()+n),e=e.getTime(),i<t&&(i*=1e3),t<i&&i<e&&(r=a.dateWithEpochValueFromLocalTimeStamp(i))),r}function y(e){try{return (function r(e,i,a){i=i||{};_.isObject(e)?_.forOwn(e,(function(e,t){r(e,i,a?a+"."+t:t)})):i[a]=e;return i})(e)}catch(e){}return e}function o(){this.clear()}e=a.data||(a.data={}),(i=e.tabular||(e.tabular={})).createTabularDataCache=function(){return new t},i.getColumnsMetadata=r,i.parseDate=f,i.flattenJSON=y,i.MaxRealTimeDataWindowInMs=36e5,n=7,o.prototype.add=function(e){var t=this.getKey(e.modelId,e.name);return this.tabularDataMap[t]=e,t},o.prototype.get=function(e){return this.tabularDataMap[e]},o.prototype.remove=function(e){delete this.tabularDataMap[e]},o.prototype.clear=function(){this.tabularDataMap={}},o.prototype.getKey=function(e,t){return e+"_"+t},o.prototype.mergeRows=function(e,t,r,i){var a=this.getKey(e,t),a=this.get(a);if(a&&a.rowGroups){var n=[],o=a.rowGroups||[],s=r||[];for(this.fixUpValues(s,a.columns);;){if(_.isEmpty(o)&&_.isEmpty(s))break;var u=_.head(o),c=_.head(s);u&&!c?(this.appendRow(n,u,i),o.shift()):!u&&c?(this.appendRow(n,c,i),s.shift()):u.version<c.version?(this.appendRow(n,u,i),o.shift()):c&&(s.shift(),u.version===c.version&&o.shift(),this.appendRow(n,c,i))}a.rowGroups=n,a.lastVersion=i}else e={modelId:e,name:t,rowGroups:r,lastVersion:i,columns:a&&a.columns},this.constructColumnsMetadataIfNeeded(e),this.fixUpValues(e.rowGroups,e.columns),this.add(e)},o.prototype.constructColumnsMetadataIfNeeded=function(e){var t;e.columns||(t=_.last(e.rowGroups))&&(t=_.last(t.rows))&&(e.columns=r(t))},o.prototype.fixUpValues=function(e,t){if(!_.isEmpty(e)){for(var r={},i={},a=0,n=t;a<n.length;a++){var o=n[a];r[o.name]=o.type&&o.type.dateTime,i[o.name]=o.type&&o.type.numeric}for(var s=0,u=e;s<u.length;s++){var c=u[s];if(c.rows)for(var l=0;l<c.rows.length;l++){var p,d,h,m=c.rows[l]=y(c.rows[l]);for(p in m)m.hasOwnProperty(p)&&(d=m[p])&&(r[p]?(h=f(d))&&(m[p]=h):i[p]&&(h=parseFloat(d.toString()),isNaN(h)||(m[p]=h)))}}}},o.prototype.appendRow=function(e,t,r){r-t.version>i.MaxRealTimeDataWindowInMs||e.push(t)},t=o})(powerbi=powerbi||{}),(function(e){var i,t;function r(e){this.serializer=e}((i=e.data||(e.data={})).tabular||(i.tabular={})).createQueryGenerator=function(){return new t(i.services.SemanticQuerySerializer)},r.prototype.execute=function(e){var t=e.query,r={SemanticQueryDataShapeCommand:{Query:this.serializer.serializeQuery(t),Binding:null}},t=i.SQExprUtils.getActiveTablesNames(t),t=(t.length,t[0]);return{command:{dataWindow:e.dataWindow,tableName:t,mappings:e.mappings,Commands:[r]}}},r.prototype.produceIdentities=function(e,t){return[e]},t=r})(powerbi=powerbi||{}),(function(n){var u,e,o;function g(e){var t=_.indexOf(e,".");return t<0||t>=e.length-1?e:e.substr(t+1)}function v(e,t){this.promiseFactory=e.promiseFactory(),this.tabularDataCache=t,this.columnToIndexMap={}}u=n.data||(n.data={}),e=u.tabular||(u.tabular={}),o=n.data.createDataViewScopeIdentity,e.normalizedName=g,v.prototype.execute=function(e){var t=_.head(e.dataSources),e=e.command,e=this.buildDataView(e,t.modelId),t=this.promiseFactory.defer();return t.resolve(e),n.createRejectablePromise(t)},v.prototype.transform=function(e,t,r){return null==e?{dataView:{metadata:{columns:[]},error:{code:"UndefinedData"}}}:{dataView:e}},v.prototype.buildDataView=function(e,t){var r,i=this,a=e.mappings[0],n=this.tabularDataCache,n=n.get(n.getKey(t,e.tableName)),t=v.getLastVersion(n)-e.dataWindow;if(n.rowGroups)return(r=e&&_.head(e.Commands))&&(r=r.SemanticQueryDataShapeCommand)&&r.Query&&r.Query.Select&&r.Query.Select.map((function(e,t){i.columnToIndexMap[g(e.Name)]=t})),r=this.filterTabularDataRowGroups(n.rowGroups,t),t=this.createDataView({rowGroups:r,columns:n.columns,modelId:n.modelId,name:n.name},a),e.dataWindow&&(t.metadata.objects={categoryAxis:{duration:e.dataWindow}}),t},v.prototype.filterTabularDataRowGroups=function(e,t){return _.filter(e,(function(e){return e.version>=t}))},v.prototype.createDataView=function(e,t){var r,i={metadata:{columns:[]}},a=this.extractColumns(t),n=[];return t.categorical&&(r=this.getCategoricalDataViewInfo(a.categorical,e),i.categorical=r.dataView,_.isEmpty(i.categorical.values)&&(i.categorical.values=void 0),n.push.apply(n,r.columns||[])),t.table&&(r=this.getSingleDataViewInfo(a.table,e),i.single=r.dataView,t=r.columns[0],null==_.find(n,t))&&n.push(t),i.metadata.columns=n,i},v.prototype.getCategoricalDataViewInfo=function(e,t){var r=u.createCategoricalDataViewBuilder(),i=(_.isEmpty(e.categories)||(i=this.getCategoryColumnOption(e.categories,t),r.withCategory(i)),this.getValueColumnOptions(e.categories,e.values,t)),e=(_.isEmpty(e.groupedValues)||e.groupedValues===e.categories?r.withValues({columns:i}):this.addGroupValues(e,t,r,i),r.build());return{dataView:e.categorical,columns:e.metadata.columns}},v.prototype.addGroupValues=function(e,t,r,i){e.groupedValues;for(var a=g(e.groupedValues),n=this.getCategoryColumnOption(a,t),a=this.extractColumnValues(a,t),o=v.getUniqueValues(a),s=this.getValueToIndicesMap(a),u={},c=0,l=e.values;c<l.length;c++)for(var p=g(l[c]),d=this.extractColumnValues(p,t),h=0,m=o;h<m.length;h++){var f=m[h],f=v.valueToString(f),y=(null==u[f]&&(u[f]=[]),s[f]),y=_.at(d,y);u[f].push({values:y})}a=_.values(u);_.isEmpty(a)||r.withGroupedValues({groupColumn:n,valueColumns:i,data:a})},v.prototype.getValueToIndicesMap=function(e){for(var t={},r=0,i=e.length;r<i;r++){var a=v.valueToString(e[r]),n=t[a];n?n.push(r):t[a]=[r]}return t},v.prototype.getSingleDataViewInfo=function(e,t){e=this.getColumnMetadataAndValues(e,t),t=e.values.length-1;return{dataView:{value:e.values[t],column:e.metadataColumn},columns:[e.metadataColumn]}},v.prototype.extractColumns=function(e){function t(e,t){if(e=e.items)for(var r=0,i=e;r<i.length;r++){var a=i[r];t.push(a.queryName)}}var r,i,a,n,o={},s=e.categorical,s=(s&&(r=[],u.CompiledDataViewMapping.visitCategoricalCategories(s.categories,{visitRole:function(e){t(e,r)}}),i=[],u.CompiledDataViewMapping.visitCategoricalValues(s.values,{visitRole:function(e){t(e,i)}}),a=[],u.CompiledDataViewMapping.visitGrouped(s.values,{visitRole:function(e){t(e,a)}}),o.categorical={categories:r[0],groupedValues:a[0],values:i}),e.table);return s&&(n=[],u.CompiledDataViewMapping.visitTable(s,{visitRole:function(e){t(e,n)}}),o.table=n[0]),o},v.prototype.getCategoryColumnOption=function(e,t){var r=this.getColumnMetadataAndValues(e,t),i=v.getUniqueValues(r.values),a=u.SQExprBuilder.columnRef(u.SQExprBuilder.entity(null,t.name),e),t=_.map(i,(function(e){return o(u.SQExprBuilder.equal(a,u.SQExprBuilder.text(e.toString())))}));return{source:r.metadataColumn,values:i,identityFrom:{fields:[a],identities:t}}},v.prototype.getValueColumnOptions=function(e,t,r){for(var i=[],a=0,n=t;a<n.length;a++){var o=n[a],o=this.getColumnMetadataAndValues(o,r,e),s=o.values,o=(e||_.isEmpty(s)||(s=[_.last(s)]),{source:o.metadataColumn,values:s,minLocal:_.min(s),maxLocal:_.max(s)});i.push(o)}return i},v.prototype.getColumnMetadataAndValues=function(e,t,r){var i=t.columns,a=g(e),e=this.columnToIndexMap[a],t=(r=r?(r=g(r),this.extractUniqueColumnValues(a,t,r)):this.extractColumnValues(a,t),_.find(i,(function(e){return e.name===a})));return{metadataColumn:v.createMetadataColumn(a,e,n.ValueType.fromDescriptor(t.type)),values:r}},v.prototype.extractColumnValues=function(e,t){for(var r=[],i=0,a=t.rowGroups;i<a.length;i++)for(var n=0,o=a[i].rows;n<o.length;n++){var s=o[n];r.push(s[e])}return r},v.prototype.extractUniqueColumnValues=function(e,t,r){for(var i={},a=0,n=t.rowGroups;a<n.length;a++)for(var o=0,s=n[a].rows;o<s.length;o++){var u=s[o],c=u[r];i[v.valueToString(c)]=u[e]}return _.values(i)},v.getLastVersion=function(e){if(_.isEmpty(e.rowGroups))return e.lastVersion||Number.NEGATIVE_INFINITY;var t=Number.NEGATIVE_INFINITY;if(e.rowGroups)for(var r=0,i=e.rowGroups;r<i.length;r++){var a=i[r];a.version>t&&(t=a.version)}return t},v.createMetadataColumn=function(e,t,r){e={displayName:e,queryName:e,index:t,isMeasure:!1};return null!=r&&(e.type=r,e.isMeasure=!!r.numeric),e},v.getUniqueValues=function(e){return _.uniqBy(e,(function(e){return v.valueToString(e)}))},v.valueToString=function(e){return _.isDate(e)?e.getTime().toString():e?e.toString():""},e.TabularDataReader=v})(powerbi=powerbi||{}),(function(e){(e=e.alignment||(e.alignment={})).right="right",e.left="left",e.center="center"})(powerbi=powerbi||{}),(function(e){(e=e.data||(e.data={})).DataSourcesUndefined="DataSourcesUndefined",e.SchemaReaderUndefined="SchemaReaderUndefined"})(powerbi=powerbi||{}),(function(e){var o;e=e.data||(e.data={}),(o=e.dsr||(e.dsr={})).transformDataQueryToSemanticQueryDataShapeCommand=function(e){return e.Commands,e.Commands[0].SemanticQueryDataShapeCommand,e.Commands.length,1===e.Commands.length||2!==e.Commands.length||e.Commands[1].ScriptVisualCommand||e.Commands[1].ExportDataCommand,e.Commands[0].SemanticQueryDataShapeCommand},o.generateSemanticQueryRequest=function(r,e,t){var i=_.map(r.queryOptions,(function(e){var t=e.command,t={Query:t,CacheKey:e.cacheResponseOnServer?JSON.stringify(t):void 0,CacheOptions:r.cacheOptions,QueryId:e.queryId};return e.applicationContext&&(t.ApplicationContext=e.applicationContext),1===e.requestPriority&&(t.RequestPriority=1),t})),a=_.map(r.cancelQueryOptions,(function(e){return{QueryId:e.queryId}})),n=o.single(r.dataSources),i={version:o.executeSemanticQueryRequestVersion1,queries:i,cancelQueries:a,modelId:n.modelId,userPreferredLocale:e.getUserPreferredLocale()};return t&&t.impersonating&&(a=t.getImpersonationState()).modelId===i.modelId&&_.extend(i,a),i},o.isCompositeDataQuery=function(e){return e&&e.Commands&&e.Commands.length,1<e.Commands.length}})(powerbi=powerbi||{}),(function(f){var e,t,y,g,v;function S(e){return null==e?"":(e=e.replace(/\"/g,'""'),_.includes(e,"\n")||_.includes(e,t)||_.includes(e,y)||_.includes(e,"\r")||0===e.length?t+e+t:e)}e=(e=f.data||(f.data={})).CsvWriter||(e.CsvWriter={}),t='"',y=",",g="yyyy-MM-dd HH:mm:ss",v="'",e.fromDataView=function(e,t,r){var i=e.table;if(!i)return"";var a=i.columns,n="",o=0;(null==r||r>i.rows.length)&&(r=i.rows.length);for(var s=0;s<r;s++){var u=i.rows[s],c=[];u.length>o&&(o=u.length);for(var l=0,p=u.length;l<p;l++){var d=a[l],h=d&&d.type,m=f.DataViewObjects.getValue(null==(m=u.objects)?void 0:m[l],t)||d&&d.format;c.push(function(e,t,r){if(null==e)return"";t=t||(function(e){return _.isDate(e)?f.ValueType.fromPrimitiveTypeAndCategory(6):_.isBoolean(e)?f.ValueType.fromPrimitiveTypeAndCategory(5):_.isNumber(e)?f.ValueType.fromPrimitiveTypeAndCategory(3):f.ValueType.fromPrimitiveTypeAndCategory(1)})(e);var i="";i=t.dateTime?f.formattingService.formatValue(e,g):t.bool||t.numeric&&!r?e.toString():t.numeric?f.formattingService.formatValue(e,(function(e){return e.replace(/(\r\n|\n|\r|,)/g,"")})(r)):(function(e){"="!==e.charAt(0)&&"-"!==e.charAt(0)&&"+"!==e.charAt(0)&&"@"!==e.charAt(0)||(e=v.concat(e));return e})(e.toString());return S(i)}(u[l],h,m))}0<c.length&&(n+=c.join(y)+"\r\n")}return n=(function(e,t){(t<=0||t>e.length)&&(t=e.length);for(var r=[],i=0;i<t;i++)r.push(S(e[i].displayName));return r.join(y)})(a,o)+"\r\n"+n}})(powerbi=powerbi||{}),(function(t){var r,e,C,l,n,f;function p(e,t,r){for(var i=e.Capabilities,a=e.Source,n={name:e.Name,displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,visibility:b(e.Hidden,e.ShowAsVariationsOnly,e.Private),calculated:e.Calculated,queryable:e.Queryable,properties:C.createWithName(),hierarchies:C.createWithName(),displayFolders:C.createWithName(),navigationProperties:C.createWithName(),errorMessage:e.ErrorMessage,isDateTable:!0===e.IsDateTable,source:{mode:a&&a.Mode,refreshedTime:a&&a.RefreshedTime,directQuerySourceType:a&&a.DirectQuerySourceType,directQuerySourceName:a&&a.DirectQuerySourceName},capabilities:{canRefresh:!i||!1!==i.CanRefresh,canHaveMeasures:!i||!1!==i.CanHaveMeasures,canEditSource:t.canEdit&&(!i||!1!==i.CanEditSource),canRename:t.canEdit&&(!i||!1!==i.CanRename),canDelete:t.canEdit&&(!i||!1!==i.CanDelete),canEditStorageMode:t.canEdit&&(!i||!1!==i.CanEditStorageMode),supportsClustering:t.canEdit&&(!i||!1!==i.SupportsClustering),supportsBinByCount:t.canEdit&&(!i||!1!==i.SupportsBinByCount),limitOnNumberOfGroups:i&&i.LimitOnNumberOfGroups||null,dataView:i&&i.DataView||null}},o=0,s=e.Properties;o<s.length;o++){var u=s[o];n.properties.push(M(u))}n.properties.length,e.Properties.length;for(var c=0,l=e.Properties.length;c<l;++c){var p=n.properties[c],d=e.Properties[c],h=(p.canDelete=t.canEdit&&!1!==d.CanDelete,d.Column),m=(h&&(m=p.column=p.column||{},h.Keys&&(m.keys=I(h.Keys,n.properties)),h.OrderBy)&&(m.orderBy=I(h.OrderBy,n.properties)),d.Measure);m&&((h=p.measure=p.measure||{}).canEdit=!1!==m.canEdit,m.FormatBy&&(h.formatBy=m.FormatBy),m.Kpi&&(w((d=h.kpi=(function(e,t,r){r=r.normalizedFiveStateKpiRange,t={statusMetadata:{graphic:e.StatusGraphic,normalizedFiveStateKpiRange:r},status:t.withName(e.Status),goal:t.withName(e.Goal),trend:t.withName(e.Trend)};e.TrendGraphic&&(t.trendMetadata={graphic:e.TrendGraphic,normalizedFiveStateKpiRange:r});return t})(m.Kpi,n.properties,t)).goal,p,1,r),w(d.status,p,0,r),w(d.trend,p,3,r)),m.Template&&(h.template={name:m.Template.DaxTemplateName}),m.ChangeDetectionMetadata&&(h.changeDetectionMetadata={refreshInterval:m.ChangeDetectionMetadata.RefreshInterval}),null!=m.DistributiveAggregate)&&(h.distributiveAggregate=m.DistributiveAggregate)}if(e.Hierarchies)for(var f=0,y=e.Hierarchies;f<y.length;f++){var g=y[f];n.hierarchies.push(D(g,n.properties))}if(e.DisplayFolders)for(var v=0,S=e.DisplayFolders;v<S.length;v++){var x=S[v];n.displayFolders.push(E(x,n.properties,n.hierarchies))}return e.DefaultLabelColumnRef&&(n.defaultLabel=n.properties.withName(e.DefaultLabelColumnRef)),e.DefaultFieldPropertyRefs&&(n.defaultFields=_.map(e.DefaultFieldPropertyRefs,(function(e){return n.properties.withName(e)}))),n}function E(e,t,r){var i={name:e.Name,displayName:e.DisplayName||e.Name,description:e.Description,properties:C.createWithName(),hierarchies:C.createWithName(),displayFolders:C.createWithName()};if(e.DisplayItems)for(var a=0,n=e.DisplayItems;a<n.length;a++){var o=n[a];o.PropertyRef&&t?i.properties.push(t.withName(o.PropertyRef)):o.HierarchyRef&&r?i.hierarchies.push(r.withName(o.HierarchyRef)):o.DisplayFolder&&i.displayFolders.push(E(o.DisplayFolder,t,r))}return i}function D(e,t){for(var r={name:e.Name,displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,hidden:e.Hidden,levels:C.createWithName(),canDelete:!1!==e.CanDelete},i=0,a=e.Levels;i<a.length;i++){var n=a[i];r.levels.push(o(n,t))}return r}function o(e,t){return{name:e.Name,displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,column:t.withName(e.Column),canDelete:!1!==e.CanDelete}}function I(e,t){for(var r=C.createWithName(),i=0,a=e;i<a.length;i++){var n=a[i];r.push(t.withName(n))}return r}function w(e,t,r,i){if(e){var a=t.displayName;switch(r){case 1:a=n.format(i.kpiGoalFmt,a);break;case 0:a=n.format(i.kpiStatusFmt,a);break;case 3:a=n.format(i.kpiTrendFmt,a)}e.displayName=a,e.hidden=!1,e.kpiValue=t}}function M(e){return{displayName:e.DisplayName||e.Name,stableName:e.StableName,description:e.Description,name:e.Name,type:t.ValueType.fromPrimitiveTypeAndCategory(e.DataType,e.DataCategory),column:e.Column?i(e.Column):null,kind:e.Measure?1:0,format:e.FormatString,hidden:e.Hidden,queryable:e.Queryable,errorMessage:e.ErrorMessage}}function i(e){var t={defaultAggregate:e.DefaultAggregate,idOnEntityKey:e.IdOnEntityKey,calculated:e.Calculated,variations:C.createWithName(),aggregateBehavior:e.AggregateBehavior};return void 0!==e.DefaultValue&&(t.defaultValue=r.PrimitiveValueEncoding.parseValueToSQExpr(e.DefaultValue)),t}function b(e,t,r){var i=0;return e&&(i|=1),t&&(i|=2),r&&(i|=4),i}function d(e){return{canEdit:e&&e.CanEdit||!1,discourageQueryAggregateUsage:e&&e.DiscourageQueryAggregateUsage||!1,isExtendable:e&&e.IsExtendable||!1,isQnaEnabled:e&&e.IsQnaEnabled||!1,normalizedFiveStateKpiRange:e&&e.NormalizedFiveStateKpiRange||!1,supportsMedian:e&&e.SupportsMedian||!1,supportsPercentile:e&&e.SupportsPercentile||!1,supportsScopedEval:e&&e.SupportsScopedEval||!1,supportsStringMinMax:e&&e.SupportsStringMinMax||!1,supportsMultiTableTupleFilters:e&&e.SupportsMultiTableTupleFilters||!1,supportsTimeIntelligenceQuickMeasures:e&&e.SupportsTimeIntelligenceQuickMeasures||!1,supportsCalculatedColumns:e&&!1!==e.SupportsCalculatedColumns||!1,supportsGrouping:e&&!1!==e.SupportsGrouping||!1,limitMultiColumnFiltersToQueryGroupColumns:e&&e.LimitMultiColumnFiltersToQueryGroupColumns||!1,supportsBinnedLineSample:e&&e.SupportsBinnedLineSample||!1,supportsOverlappingPointsSample:e&&e.SupportsOverlappingPointsSample||!1,supportsQna:e&&e.SupportsQna||!1,supportsInstanceFilters:e&&e.SupportsInstanceFilters||!1,supportsDataSourceVariables:e&&e.SupportsDataSourceVariables||!1,insights:e?a(e.Insights):{},supportsFastRefresh:e&&e.SupportsFastRefresh||!1,supportsSubqueryRegrouping:e&&e.SupportsSubqueryRegrouping||!1,supportsTopNPerLevel:e&&e.SupportsTopNPerLevel||!1,supportsExtensionColumns:e&&e.SupportsExtensionColumns||!1,canEditChangeDetectionMeasure:e&&e.CanEditChangeDetectionMeasure||!1,supportsGroupSynchronization:e&&e.SupportsGroupSynchronization||!1,supportsScopedDataReduction:e&&e.SupportsScopedDataReduction||!1,transformCapabilities:s(e&&e.TransformCapabilities),supportChangeDetectionMeasureRefresh:e&&e.SupportChangeDetectionMeasureRefresh||!1,supportsSparklineData:e&&e.SupportsSparklineData||!1,supportsVisualCalculations:e&&e.SupportsVisualCalculations||!1}}function a(e){return e?{supportsDistributionFactors:e.SupportsDistributionFactors||!1,supportsExplainChange:e.SupportsExplainChange||!1,supportsExplore:e.SupportsExplore||!1,supportsKeyDrivers:e.SupportsKeyDrivers||!1,supportsRelatedInsights:e.SupportsRelatedInsights||!1,supportsDecomposition:e.SupportsDecomposition||!1,supportsExplainAnomalies:e.SupportsExplainAnomalies||!1,supportsCompatibleFields:e.SupportsCompatibleFields||!1,supportsQuerySuggestions:e.SupportsQuerySuggestions||!1,supportsExplainVarianceToTarget:e.SupportsExplainVarianceToTarget||!1,supportsGenerateSummaries:e.SupportsGenerateSummaries||!1}:{}}function s(e){return e?{supportedTransforms:e.SupportedTransforms}:{supportedTransforms:[]}}r=t.data||(t.data={}),e=r.dsr||(r.dsr={}),C=jsCommon.ArrayExtensions,l=r.ConceptualSchema,n=jsCommon.StringExtensions,f=jsCommon.Utility,(e=e.ConceptualSchemaFactory||(e.ConceptualSchemaFactory={})).createLocOptions=function(e){return{kpiGoalFmt:e.get("KpiGoalDisplayName"),kpiStatusFmt:e.get("KpiStatusDisplayName"),kpiTrendFmt:e.get("KpiTrendDisplayName")}},e.convertSchema=function(e,t,r,i){var a=new l;a.name=t,a.cubeName=i,a.entities=C.createWithName(),e.canEdit&&(e.Capabilities||(e.Capabilities={}),e.Capabilities.CanEdit=e.canEdit),a.capabilities=d(e.Capabilities);for(var n=0,o=e.Entities;n<o.length;n++){var s=o[n];a.entities.push(p(s,a.capabilities,r))}for(var u=0,c=e.Entities.length;u<c;++u)!(function(e,t,r){var i;if(t.NavigationProperties)for(var a=0,n=t.NavigationProperties;a<n.length;a++){var o=n[a];e.navigationProperties.push(function(e,t,r){r={name:e.Name,isActive:e.Active,sourceColumn:null,targetEntity:r.withName(e.TargetEntity),sourceMultiplicity:e.SourceMultiplicity,targetMultiplicity:e.TargetMultiplicity,behavior:e.Behavior||0,crossFilterDirection:f.valueOrDefault(e.CrossFilterDirection,0)};e.SourceColumn&&(t=t.properties.withName(e.SourceColumn))&&(r.sourceColumn=t.column);return r}(o,e,r))}if(t.Properties)for(var s=0,u=t.Properties.length;s<u;++s){var c=t.Properties[s],l=c.Column;if(l&&l.Variations&&!(function(e,t,r){for(var i=0,a=t.Variations;i<a.length;i++){var n=a[i];e.variations.push(function(e,t){var r={name:e.Name,isDefault:e.Default,navigationProperty:null,defaultHierarchy:null,defaultProperty:null},i=t;e.NavigationProperty&&(r.navigationProperty=t.navigationProperties.withName(e.NavigationProperty),i=r.navigationProperty.targetEntity);e.DefaultHierarchy&&(r.defaultHierarchy=i.hierarchies.withName(e.DefaultHierarchy));e.DefaultProperty&&(r.defaultProperty=i.properties.withName(e.DefaultProperty));return r}(n,r))}})(e.properties[s].column,l,e),l&&l.GroupingMetadata&&(e.properties[s].column.groupingMetadata=(function(e,t){var r={groupedColumns:_.map(e.GroupedColumns,(function(e){return e.ColumnRef&&!e.LevelRef?t.properties.withName(e.ColumnRef):e.LevelRef&&!e.ColumnRef?t.hierarchies.withName(e.LevelRef.Hierarchy).levels.withName(e.LevelRef.Level):void 0}))};e.BinningMetadata&&(r.binningMetadata=(function(e){var t={};e.BinSize&&(t.binSize=(function(e){return{value:e.Value,unit:e.Unit}})(e.BinSize));return t})(e.BinningMetadata));return r})(l.GroupingMetadata,e)),l&&l.ParameterMetadata){var p=(function(e){return{kind:null!=e.Kind?e.Kind:0,mappedMParameterNames:e.MappedMParameterNames,supportsMultipleValues:e.SupportsMultipleValues,supportsSelectAll:e.SupportsSelectAll}})(l.ParameterMetadata);if(2===(e.properties[s].column.parameterMetadata=p).kind)for(var d=0,h=e.properties;d<h.length;d++){var m=h[d];if(null!=(i=null==m?void 0:m.column)&&i.keys&&1===m.column.keys.length&&null!=(null==(i=null==(i=m.column.keys[0].column)?void 0:i.parameterMetadata)?void 0:i.kind)&&2===m.column.keys[0].column.parameterMetadata.kind){m.column.parameterMetadata=p;break}}}l=c.Measure;l&&!_.isEmpty(l.DistributiveBy)&&(e.properties[s].measure.distributiveBy=_.map(l.DistributiveBy,(function(e){return r.withName(e)})))}})(a.entities[u],e.Entities[u],a.entities);return a},e.convertEntity=p,e.convertDisplayFolder=E,e.convertHierarchy=D,e.convertHierarchyLevel=o,e.convertProperty=M,e.convertColumn=i,e.convertVisibility=b,e.convertCapabilities=d,e.convertInsightsCapabilities=a,e.convertTranformCapabilities=s})(powerbi=powerbi||{}),(function(u){var c,l,s,p,r,e,d,n,h;function t(e,t,r,i,a){this.httpService=e,this.promiseFactory=t,this.uri=r,this.featureSwitches=i,this.preloadConceptualSchemaService=a}function i(e,t,r,i,a,n,o){this.promiseFactory=e,this.telemetryService=t,this.localeProvider=r,this.conceptualSchemaProxyCommunication=i,this.locOptions=a,this.featureSwitches=n,this.embedModeService=o}c=u.data||(u.data={}),l=c.dsr||(c.dsr={}),s=u.telemetry.DataGetConceptualSchemaEventName,p=u.fillTelemetryEvent,r=jsCommon.HttpUtils,e=u.MonitorWith,d=jsCommon.HttpUtils.attachPerformanceTimingByUrl,(l.wireContracts||(l.wireContracts={})).InsightsCapabilities=function(){},l.createConceptualSchemaReader=function(e,t,r,i,a,n,o){return new h(e,t,r,i,a,n,o)},l.createConceptualSchemaProxyHttpCommunication=function(e,t,r,i,a){return new n(e,t,r,i,a)},t.prototype.execute=function(t,r){var e,i,a,n=this,o=this.featureSwitches&&this.featureSwitches().telemetryV2,s=this.promiseFactory.defer(o);return r.event.info.endPoint=this.uri,this.preloadConceptualSchemaService&&(e=this.preloadConceptualSchemaService.getPreloadedConceptualSchema(),i=this.preloadConceptualSchemaService.getPreloadConceptualSchemaUrl(),a=this.preloadConceptualSchemaService.getPreloadConceptualSchemaRequestBody()),JSON.stringify(t)===a&&this.uri===i&&e?(e.then((function(e){1!==e.schemas.length||e.schemas[0].modelId!==t.modelIds[0]||e.error?n.httpExecute(t,r,s):(d(n.uri,r.event.info),s.resolve({requestId:n.preloadConceptualSchemaService.getPreloadConceptualSchemaResponseRequestId(),schemas:e.schemas}))}),(function(e){n.httpExecute(t,r,s)})),this.preloadConceptualSchemaService.clear()):this.httpExecute(t,r,s),s.promise},t.prototype.httpExecute=function(e,t,r){var i=this;this.httpService.post(this.uri,e,this.httpService.powerbiRequestOptions(t.event,"GetConceptualSchema")).then((function(e){i.setTelemetryEventInfo(t.event,e),r.resolve({requestId:e.responseRequestId||e.requestId,schemas:e.data.schemas})}),(function(e){e=e||{};i.setTelemetryEventInfo(t.event,e),r.reject({requestId:e.responseRequestId||e.requestId,error:e.error,status:e.status,schemas:void 0})}))},t.prototype.setTelemetryEventInfo=function(e,t){e.info.clientAndServerRequestIdMatch=r.clientAndServerRequestIdMatch(t),e.info.responseRequestId=r.getResponseRequestId(t),e.info.requestId=t.requestId,d(this.uri,e.info)},n=t,i.prototype.execute=function(e){var t,r,i,a,n=this,e=e.dataSources,o=this.featureSwitches&&this.featureSwitches().telemetryV2;return!e||1<e.length?this.promiseFactory.reject({},o):(t=this.promiseFactory.defer(o),r=_.map(e,(function(e){return e.name})),i={modelIds:_.map(e,(function(e){return e.id})),userPreferredLocale:this.localeProvider.getUserPreferredLocale()},e.some((function(e){return e.perspectiveId}))&&(i.perspectiveIds=_.map(e,(function(e){return e.perspectiveId}))),e=JSON.stringify(i.modelIds),o&&p(s,{datasetIds:e}),a=this.telemetryService.startEvent(u.telemetry.DataGetConceptualSchema,{endPoint:"",datasetIds:e,clientAndServerRequestIdMatch:!0,embedType:this.embedModeService&&this.embedModeService.getEmbedTypeDescription()}),this.conceptualSchemaProxyCommunication.execute(i,a).then((function(e){return n.onSuccess(e,r,t,a)}),(function(e){return n.onError(e,t,a)})),t.promise)},i.prototype.transform=function(e){if(!e.data)return{schema:null,error:e.error};for(var t=e.data,r=t.schemas,i=e.schemaNames,a=(i.length,r.length,{}),n=0,o=r.length;n<o;n++){var s=i[n];a[s]=l.ConceptualSchemaFactory.convertSchema(r[n].schema,s,this.locOptions,r[n].cubeName)}return{schema:new c.FederatedConceptualSchema({schemas:a})}},i.prototype.onSuccess=function(e,t,r,i){if(_.isEmpty(e.schemas))this.onError(e,r,i);else{for(var a=0,n=e.schemas;a<n.length;a++){var o,s=n[a].error;if(s)return r.reject({data:null,error:{requestId:e.requestId,serviceError:s,clientError:null,ignorable:!0}}),(o=u.errorDetailsHelper.getTelemetryErrorDetailsFromServiceError(s)).asErrorCode=s.parameters&&s.parameters.ASErrorCode,void i.reject(o)}r.resolve({data:e,schemaNames:t,error:null}),i.resolve()}},i.prototype.onError=function(e,t,r){var i=e.error;t.reject({data:null,error:{requestId:e.requestId,clientError:new u.PowerBIAPIErrorToClientError(e.error)}}),r.reject(u.errorDetailsHelper.getTelemetryErrorDetails(i,e.status))},__decorate([e(s)],i.prototype,"execute",null),h=i})(powerbi=powerbi||{}),(function(e){((e=e.data||(e.data={})).fake||(e.fake={})).queryGenerator={execute:function(e){return{command:{query:e.query,mappings:e.mappings}}},produceIdentities:function(e,t){return[e]}}})(powerbi=powerbi||{}),(function(e){var t,n,r,o,s,i;function a(e,t){this.promiseFactory=e.promiseFactory(),this.schemaProvider=t}function p(e,t){return{displayName:"",queryName:e.name,index:t,type:{}}}function u(e){this.schema=e}n=t=e.data||(e.data={}),r=n.fake||(n.fake={}),o=t.SQExpr,s=t.SQExprUtils,a.prototype.execute=function(r){var i=this.promiseFactory.defer();return this.schemaProvider.get().then((function(e){var t=r.command;t.schema=e,i.resolve(t)}),(function(){i.reject()})),e.createRejectablePromise2(i)},a.prototype.transform=function(e){var t=e.schema,r=e.query,e=e.mappings,r=(function(e,t,r,i){if(debug.assertValue(e,"query"),debug.assertAnyValue(t,"mapping"),debug.assertValue(r,"valueSrc"),debug.assertValue(i,"config"),t)if(t.categorical){t=t.categorical;var o=r;var s=i;var u,c=e.select(),l=n.createCategoricalDataViewBuilder(),a=(n.CompiledDataViewMapping.visitCategoricalCategories(t.categories,{visitRole:function(e){if(!_.isEmpty(e.items))for(var t=0,r=e.items;t<r.length;t++){var i=r[t],i=c.withName(i.queryName),a=i.expr,n=o.generate(a,s.rowCount);l.withCategory({source:p(i,_.indexOf(c,i)),values:n,identityFrom:{fields:[a]}}),u=!0}}}),[]);n.CompiledDataViewMapping.visitCategoricalValues(t.values,{visitRole:function(e){if(!_.isEmpty(e.items))for(var t=0,r=e.items;t<r.length;t++){var i=r[t],i=c.withName(i.queryName);a.push({source:p(i,_.indexOf(c,i)),values:o.generate(i.expr,u?s.rowCount:1)})}}}),_.isEmpty(a)||l.withValues({columns:a});return l.build();return}else return void 0})(r,_.head(e),new i(t),{rowCount:10});if(r)return{dataView:r}},r.FakeDataReader=a,u.prototype.generate=function(e,t){if(o.isConstant(e)){for(var r=[],i=0;i<t;i++)r.push(e.value);return r}var a=e.getMetadata(this.schema);if(a){if(a.aggregate)return _.range(10,11*t,10);var n,a=a.type;if(a){if(a.integer||a.numeric)return _.range(1,1+t);if(a.text)return n=s.defaultName(e,"value ")+" ",_.range(1,1+t).map((function(e){return n+e}))}}return _.range(1,1+t)},i=u})(powerbi=powerbi||{}),(function(e){var s;function t(e,t,r,i){this.deepestNodeLevelInPath=-1,this.measures=t||[],this.dataMap=e||null,this.nodeIsCollapsed=null!=r?r:null,this.nodeIndexes=null!=i?i:[]}e=e.visuals||(e.visuals={}),s="noQueryName",t.prototype.withCategory=function(e,t,r){var i,a;return void 0===r&&(r=!1),e&&e.source&&e.identity&&e.identity[t]&&(i=e.identity[t],a=e.source.queryName||s),this.addItemToDataMap(a,i),this},t.prototype.withSeries=function(e,t,r){var i,a;return void 0===r&&(r=!1),e&&e.source&&t&&(i=t.identity,a=e.source.queryName||s),this.addItemToDataMap(a,i),this},t.prototype.withMeasure=function(e){return this.measures.push(e),this},t.prototype.withMatrixNode=function(e,t,r){var i,a,n,o;return void 0===r&&(r=!1),e&&(r=e.isCollapsed,n=e.level,o=e.nodeIndex,e.identity&&t&&t[n]&&t[n].sources&&t[n].sources[0]&&(i=e.identity,a=t[n].sources[0].queryName||s),this.addItemToDataMap(a,i,r,n,o)),this},t.prototype.withTable=function(e,t,r){var i,a;return void 0===r&&(r=!1),e&&e.identity&&null!=t&&(a=(i=e.identity[t])?JSON.stringify(i):s),this.addItemToDataMap(a,i),this},t.prototype.equals=function(e){return!!(this.compareMeasures(this.measures,e.measures)&&this.compareMetadata(this.getSelector(),e.getSelector())&&this.compareMetadata(e.getSelector(),this.getSelector()))},t.prototype.createSelectionId=function(e){return this.key=JSON.stringify(this.dataMap)+JSON.stringify(this.measures),this},t.prototype.getKey=function(){return this.key},t.prototype.includes=function(e,t){void 0===t&&(t=!1);t=e;return!(this.dataMap||!this.compareMeasures(this.measures,t.measures))||!!(this.dataMap&&t.dataMap&&this.compareMetadata(this.getSelector(),t.getSelector()))},t.prototype.hasIdentity=function(){return!!this.dataMap},t.prototype.compareMeasures=function(e,t){if(e.length!==t.length)return!1;for(var r=0,i=t;r<i.length;r++){var a=i[r];if(-1===e.indexOf(a))return!1}return!0},t.prototype.compareMetadata=function(e,r){if(!e.data&&r.data||e.data&&!r.data)return!1;if(e.data||r.data)for(var t=0,i=e.data;t<i.length;t++){var a=(function(t){if(!r.data.some((function(e){return JSON.stringify(e)===JSON.stringify(t)})))return{value:!1}})(i[t]);if("object"==typeof a)return a.value}return!0},t.prototype.addItemToDataMap=function(e,t,r,i,a){var n,o;t&&(this.dataMap||(this.dataMap={}),null==(o=(n=this.dataMap)[e])?(n[e]=[t],null!=r&&null!=i&&i>this.deepestNodeLevelInPath&&(this.nodeIsCollapsed=r,this.deepestNodeLevelInPath=i),null!=a&&this.nodeIndexes.push(a)):o.push(t))},t.prototype.getSelector=function(){var e={data:void 0,metadata:_.head(this.measures)};if(this.dataMap)for(var t in e.data=[],this.dataMap)this.dataMap[t].length,e.data.push(this.dataMap[t][0]);return e},t.prototype.getSelectorsByColumn=function(){return null},e.CustomVisualSelectionId=t})(powerbi=powerbi||{}),(function(e){((e=e.data||(e.data={})).contracts||(e.contracts={})).primitiveTypeFromDataType=function(e){switch(e){case"Binary":return 11;case"Boolean":return 5;case"Currency":return 2;case"Number":return 3;case"Date":return 6;case"DateTime":return 7;case"Time":return 9;case"WholeNumber":return 4;case"Text":return 1}}})(powerbi=powerbi||{}),(function(e){var a;function n(e){return _.isPlainObject(e)}e=e.data||(e.data={}),(a=e.dsr||(e.dsr={})).registerDsrPlugin=function(e,t){var r=n(t.reader.communication)?a.createExecuteSemanticQueryProxyHttpCommunication(t.reader.communication.httpService,t.telemetryService,t.localeProvider,t.promiseFactory,t.reader.communication.uri,t.reader.communication.impersinationStateProvider,t.reader.featureSwitches,t.reader.directToMwcConnectionInfoService,t.queryContextProvider,t.useSynchronous):t.reader.communication,i=n(t.schemaReader.communication)?a.createConceptualSchemaProxyHttpCommunication(t.schemaReader.communication.httpService,t.promiseFactory,t.schemaReader.communication.uri,t.reader.featureSwitches,t.schemaReader.preloadConceptualSchemaService):t.schemaReader.communication;e.dsr={name:"dsr",reader:function(e){return new a.DsrDataReader(e,r,t.telemetryService,t.reader.featureSwitches(),t.reader.timeoutService,t.reader.delayedQueryResultResolver,t.reader.preferredMaxConnections,t.queryContextProvider)},queryGenerator:function(){return a.createQueryGenerator(t.reader.featureSwitches())},schemaReader:function(){return a.createConceptualSchemaReader(t.promiseFactory,t.telemetryService,t.localeProvider,i,t.schemaReader.localizationOptions,t.reader.featureSwitches,t.embedModeService)},queryExtensionProvider:a.createQueryExtensionProvider()}}})(powerbi=powerbi||{}),(function(e){(e=(e=e.data||(e.data={})).dsr||(e.dsr={})).toDsrV1Calc=function(e){for(var t=new Array(e.calcCount()),r=0;e.nextCalc();r++)t[r]={Id:e.calcId(),Value:e.calcValue()};return t},e.toDsrV1Limit=function(e){for(var t=e.limits(),r=t.count(),i=new Array(r),a=0;a<r;a++)t.next(),i[a]={Id:t.id()};return i}})(powerbi=powerbi||{}),(function(e){var o,t;function r(){this.from={},this.selects={}}o=e.data||(e.data={}),t=e.data.services.SemanticQuerySerializer,r.prototype.withFrom=function(e,t){return this.from[e]={Name:e,Entity:t,Type:0},this},r.prototype.withSelect=function(e,t,r){return this.withNamedSelect(e,t,this.buildSelectName(t,e,r),r)},r.prototype.withNamedSelect=function(e,t,r,i){r={Name:r},e={Expression:{SourceRef:{Source:e}},Property:t};return void 0!==i?r.Aggregation={Expression:{Column:e},Function:i}:r.Column=e,this.selects[r.Name]=r,this},r.prototype.build=function(e){return{Version:null!=e?e:o.SemanticQueryVersions.Version2,From:_.values(this.from),Select:_.values(this.selects)}},r.prototype.buildAndDeserialize=function(e){return t.deserializeQuery(this.build(e))},r.prototype.buildSelectName=function(e,t,r){for(var t=this.from[t],i="".concat(t.Entity,".").concat(e),a=(void 0!==r&&(t=o.aggregateFunctionName(r),i="".concat(t,"(").concat(i,")")),1),n=i;null!=this.selects[i];)i=n+a,a++;return i},o.QueryDefinitionBuilder=r})(powerbi=powerbi||{}),(function(e){var n,c,o,i,a;function t(e){return function(e,t,r){var i={query:e,extensions:void 0,queryRewrites:t},t=new a(t,r);return i.query=e.rewrite(t),i.extensions=t.extensionSchema,i.queryRewrites=t.queryRewrites,i}}function r(e,t){var r=i.call(this)||this;return r.queryRewrites=e,r.extensionSchema=t,r.existingEntityNames={},r.existingExtensionFieldNames={},r}n=e.data||(e.data={}),c=n.dsr||(n.dsr={}),e=e.data.SQExprRewriter,o=jsCommon.StringExtensions,c.createQueryExtensionProvider=function(){return t},c.nativeMeasureFlexibleEntityName="NativeMeasures_778a1d25-9ebf-4f33-a1c3-827ad532874e",c.extensionSchemaName="NativeExpressionExtensions",__extends(r,i=e),r.prototype.visitNativeMeasure=function(t){this.ensureSchemaInitialized(),this.nativeMeasuresTargetEntity||(this.nativeMeasuresTargetEntity={Name:o.findUniqueName(this.existingEntityNames,c.nativeMeasureFlexibleEntityName),NamingBehavior:1,Measures:[]},this.extensionSchema.Entities.push(this.nativeMeasuresTargetEntity));var e,r=_.find(this.nativeMeasuresTargetEntity.Measures,(function(e){return e.DataType===t.dataType&&e.Expression===t.expression}));return r?n.SQExprBuilder.measureRef(n.SQExprBuilder.entity(this.extensionSchema.Name,this.nativeMeasuresTargetEntity.Name),r.Name):(r=o.findUniqueName(this.existingExtensionFieldNames,t.proposedName||"NativeMeasure"),this.existingExtensionFieldNames[r]=!0,e=n.SQExprBuilder.measureRef(n.SQExprBuilder.entity(this.extensionSchema.Name,this.nativeMeasuresTargetEntity.Name),r),this.nativeMeasuresTargetEntity.Measures.push({Name:r,DataType:t.dataType,Expression:t.expression}),e)},r.prototype.visitNativeColumn=function(t){this.ensureSchemaInitialized();var e,r=t.source.getTargetEntity(),i=_.find(this.extensionSchema.Entities,(function(e){return e.Name===r.entity})),a=(i||(i={Name:r.entity,Extends:r.entity,Columns:[]},this.extensionSchema.Entities.push(i)),i.Columns||(i.Columns=[]),_.find(i.Columns,(function(e){return e.DataType===t.dataType&&e.Expression===t.expression})));return a?n.SQExprBuilder.columnRef(n.SQExprBuilder.entity(this.extensionSchema.Name,i.Name),a.Name):(a=o.findUniqueName(this.existingExtensionFieldNames,t.proposedName||"NativeColumn"),this.existingExtensionFieldNames[a]=!0,e=n.SQExprBuilder.columnRef(n.SQExprBuilder.entity(this.extensionSchema.Name,i.Name),a),i.Columns.push({Name:a,DataType:t.dataType,Expression:t.expression,NamingBehavior:1}),this.queryRewrites||(this.queryRewrites=[]),this.queryRewrites.push({selectExprReplaced:{originalExpr:t,replacedExpr:e}}),e)},r.prototype.ensureSchemaInitialized=function(){if(!this.schemaInitialized){this.extensionSchema?this.extensionSchema.Version=Math.max(this.extensionSchema.Version,1):this.extensionSchema={Name:c.extensionSchemaName,Version:1,Extends:c.DefaultSchemaName},this.extensionSchema.Entities||(this.extensionSchema.Entities=[]),this.existingExtensionFieldNames={};for(var e=0,t=this.extensionSchema.Entities;e<t.length;e++){var r=t[e];if(this.existingEntityNames[r.Name]=!0,r.Measures)for(var i=0,a=r.Measures;i<a.length;i++){var n=a[i];this.existingExtensionFieldNames[n.Name]=!0}if(r.Columns)for(var o=0,s=r.Columns;o<s.length;o++){var u=s[o];this.existingExtensionFieldNames[u.Name]=!0}}this.schemaInitialized=!0}},a=r})(powerbi=powerbi||{}),(function(e){((e=(e=e.data||(e.data={})).dsr||(e.dsr={})).QueryRewriterUtils||(e.QueryRewriterUtils={})).duplicateSelect=function(e,t,r){var i=[],a=e.select(),n=null==(n=a.withName(t))?void 0:n.expr,e=e.addSelect(n),o=((n=e.select()).length,a.length,n.length-1),n=n[o],a=(a.withName(n.name),t),t=n.name;return i.push({selectExprAdded:{selectIndex:o,namedSQExpr:n}}),void 0!==r&&i.push({projectionQueryRefChanged:{role:r,oldQueryRef:a,newInternalQueryRef:t}}),{rewriteRecords:i,newQuery:e,newQueryName:t}}})(powerbi=powerbi||{}),(function(e){function t(e){this.restartValuesCount=e.length,this.calcIdToRestartIdentityIndex={};for(var t=0;t<this.restartValuesCount;t++)this.calcIdToRestartIdentityIndex[e[t]]=t}e=(e=e.data||(e.data={})).dsr||(e.dsr={}),t.prototype.getRestartValues=function(e){var t=new Array(this.restartValuesCount);for(e.restartCalcs();e.nextCalc();){var r=this.calcIdToRestartIdentityIndex[e.calcId()];void 0!==r&&(t[r]=e.calcValueAsExpr())}return _.every(t,(function(e){return!!e})),t},e.RestartValuesBuilder=t})(powerbi=powerbi||{}),(function(e){var u,c,n,l,a,o,p,d;function t(){}function r(e,t,r){var i,a=this,e=((a=n.call(this)||this).additionalProjection=e).aggregates&&_.isEmpty(null==(i=e.selector)?void 0:i.data)?[u.DataViewWildcard.create()]:null==(i=e.selector)?void 0:i.data;return a.scopeRefs=u.DataBoundObjectQueryExtender.getScopeRefs(e,t,r),a}function i(e,t,r){var i=a.call(this)||this;return i.roleItem=e,i.roleName=t,i.scopeRefs=r,i}function s(e){this.expectedContext=e,this.scopeRefs=[],this.queryRefsByRole={}}function h(e,t){this.scopeRefs=e,this.expectedContext=t,this.rolesMeasures=[]}u=e.data||(e.data={}),c=u.dsr||(u.dsr={}),t.prototype.conflictsWith=function(e){return this.getQueryName()===e.getQueryName()&&(e=_.xor(this.getScopeRefs(),e.getScopeRefs()),!_.isEmpty(e))},__extends(r,n=e=t),r.prototype.getQueryName=function(){return this.additionalProjection.queryName},r.prototype.getScopeRefs=function(){return this.scopeRefs},r.prototype.updateQueryName=function(e){this.additionalProjection.queryName=e},r.prototype.getRoleName=function(){},l=r,__extends(i,a=e),i.prototype.getQueryName=function(){return this.roleItem.queryName},i.prototype.getScopeRefs=function(){return this.scopeRefs},i.prototype.getRoleName=function(){return this.roleName},i.prototype.updateQueryName=function(e){this.roleItem.queryName=e},o=i,(c.ScopedValuesQueryRewriter||(c.ScopedValuesQueryRewriter={})).run=function(e,t){void 0===t&&(t=!1);var r=[],i=(function(e){var t,r,i,a,n;if(!(1<e.length)&&e[0].matrix)return t=e[0].matrix,r=new p("MatrixRowsGroup"),u.CompiledDataViewMapping.visitMatrixRows(t.rows,r),i=new p("MatrixColumnsGroup"),u.CompiledDataViewMapping.visitMatrixColumns(t.columns,i),a=__spreadArray(__spreadArray([],r.scopeRefs,!0),i.scopeRefs,!0),a=new d(a,"MatrixIntersection"),u.CompiledDataViewMapping.visitMatrixValues(t.values,a),n=new d(r.scopeRefs,"MatrixRowsScopedValue"),u.CompiledDataViewMapping.visitMatrixRows(t.rows,n),{groupingRefsByRole:__assign(__assign({},r.queryRefsByRole),i.queryRefsByRole),roleItemsInfo:__spreadArray(__spreadArray([],a.rolesMeasures,!0),n.rolesMeasures,!0)};e.length<=1||null==e[0].matrix&&e[1].matrix})(e.mappings);if(i){if(r.push.apply(r,i.roleItemsInfo),t&&!_.isEmpty(e.additionalProjections))for(var a=e.query.select(),n=0,o=e.additionalProjections;n<o.length;n++){var s=o[n];r.push(new l(s,a,i.groupingRefsByRole))}_.isEmpty(r)||(e=(function(e,t){for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<r;a++){var n=e[a];i.conflictsWith(n)&&(t=(function(e,t){var r=t.queryRewrites||[],i=t.query,i=c.QueryRewriterUtils.duplicateSelect(i,e.getQueryName(),null==(i=e.getRoleName)?void 0:i.call(e));return e.updateQueryName(i.newQueryName),r.push.apply(r,i.rewriteRecords),{query:i.newQuery,queryRewrites:r,mappings:t.mappings,additionalProjections:t.additionalProjections}})(i,t))}return t})(r,e))}return e},s.prototype.visitRole=function(e,t){if(t===this.expectedContext)for(var t=u.CompiledDataViewMapping.getRoleActiveItems(e),r=this.queryRefsByRole[e.role]=[],i=0,a=t;i<a.length;i++){var n=a[i];this.scopeRefs.push(n.queryName),r.push(n.queryName)}},p=s,h.prototype.visitRole=function(e,t){if(t===this.expectedContext)for(var r=0,i=u.CompiledDataViewMapping.getRoleActiveItems(e);r<i.length;r++){var a=i[r];this.rolesMeasures.push(new o(a,e.role,this.scopeRefs))}},d=h})(powerbi=powerbi||{}),(function(e){var o,s;function t(e){this.selects=e,this.referencedItems=new Set}o=e.data||(e.data={}),e=o.dsr||(o.dsr={}),s=jsCommon.ArrayExtensions,t.prototype.withRestartToken=function(e){return this},t.prototype.withPrimaryWindowExpansion=function(e){return this},t.prototype.withDataVolume=function(e){return this},t.prototype.withIncludeEmptyGroups=function(e){return this},t.prototype.withHighlightFilter=function(e){return this},t.prototype.withGroupBy=function(e){return this},t.prototype.withPrimaryGrouping=function(e,t,r,i,a,n){var o;return e=this.filterItems(e,t,n),_.isEmpty(e)||(this.rows=null!=(t=this.rows)?t:[],(o=a?_.last(this.rows):o)||this.rows.push(o={Keys:[],Subtotal:!1}),this.updateAxisGroup(o,e),null!=i&&0!==i&&(o.Subtotal=!0)),this},t.prototype.withPrimaryExpansion=function(e){return this},t.prototype.withPrimarySynchronization=function(e){return this},t.prototype.withPrimaryGroupingNested=function(e,t,r,i,a){var n=this;return e=this.filterItems(e,t,a),_.isEmpty(e)||_.each(e,(function(e){return n.withPrimaryGrouping([e],t,r,i,!1,a)})),this},t.prototype.withSecondaryGrouping=function(e,t,r,i,a){return e=this.filterItems(e,t,a),_.isEmpty(e)||(this.columns=null!=(t=this.columns)?t:[],this.columns.push(a={Keys:[],Subtotal:!1}),this.updateAxisGroup(a,e),null!=i&&0!==i&&(a.Subtotal=!0)),this},t.prototype.withSecondaryExpansion=function(e){return this},t.prototype.withSecondaryGroupingNested=function(e,t,r,i,a){var n=this;return e=this.filterItems(e,t,a),_.isEmpty(e)||_.each(e,(function(e){return n.withSecondaryGrouping([e],t,r,i,a)})),this},t.prototype.withCurrentInnermostGrouping=function(e,t,r){return this},t.prototype.withCurrentInnermostPrimaryGrouping=function(e,t,r,i){return this},t.prototype.withPrimaryDataReduction=function(e){return this},t.prototype.withScopedDataReduction=function(e,t){return this},t.prototype.withSecondaryDataReduction=function(e){return this},t.prototype.withIntersectionDataReduction=function(e){return this},t.prototype.withTopLevelAggregates=function(e){return this},t.prototype.withAdditionalProjections=function(e){return this},t.prototype.toQueryShape=function(e){var t=[],r=this.createAxis("rows",this.rows),r=(r&&t.push(r),this.createAxis("columns",this.columns));return r&&t.push(r),_.isEmpty(t)?void 0:t},t.prototype.createAxis=function(e,t){if(this.removeEmptyAxisGroups(t),!_.isEmpty(t))return{Name:e,Groups:t}},t.prototype.removeEmptyAxisGroups=function(e){_.isEmpty(e)||_.remove(e,(function(e){return _.isEmpty(e.Keys)}))},t.prototype.updateAxisGroup=function(e,t){for(var r=0,i=t;r<i.length;r++){var a,n=i[r];this.referencedItems.has(n.queryName)||(a=s.findItemWithName(this.selects,n.queryName),o.SQExprUtils.isMeasure(a.expr))||(void 0!==n.subtotalType&&0!==n.subtotalType&&(e.Subtotal=!0),this.referencedItems.add(n.queryName),e.Keys.push(o.services.SemanticQuerySerializer.serializeExprWithRef(a.expr)))}},t.prototype.filterItems=function(e,t,r){var i;return _.isEmpty(t)||_.isEmpty(e)?e:(i=e.findIndex((function(e){return e.queryName===t[0]})),e.slice(i)||(r?[]:e))},e.VisualShapeBuilder=t})(powerbi=powerbi||{}),(function(e){function t(e){this.elements=e,this.currentIndex=-1}e=(e=(e=e.data||(e.data={})).dsr||(e.dsr={})).reader||(e.reader={}),t.prototype.reset=function(e){this.currentIndex=-1,e&&(this.elements,this.elements=e)},t.prototype.count=function(){return _.size(this.elements)},t.prototype.current=function(){return this.currentIndex,this.elements[this.currentIndex]},t.prototype.done=function(){return this.currentIndex===_.size(this.elements)-1},t.prototype.next=function(){return!this.done()&&(this.currentIndex++,!0)},t.prototype.index=function(){return this.currentIndex},e.Iterator=t})(powerbi=powerbi||{}),(function(e){var t,r,i,a,n,o,s,u,c,l,p,d,h;function m(e){this.parser=new o(e.DataShapes)}function f(){}function y(e){var t=n.call(this)||this;return t.it=new i.Iterator(e),t}function g(e){this.it=new i.Iterator(e)}function v(e){this.it=new i.Iterator(e)}function S(e,t){this.hierarchy=t,this.it=new i.Iterator(e)}function x(e,t){var r=l.call(this)||this;return r.hierarchy=t,r.it=new i.Iterator(e),r}function C(e){var t=d.call(this)||this;return t.it=new i.Iterator(e),t}t=e.data||(e.data={}),r=t.dsr||(t.dsr={}),((i=r.reader||(r.reader={})).V1||(i.V1={})).createDsrParser=function(e){return new a(e)},m.prototype.dataShapes=function(){return this.parser},m.prototype.reset=function(){this.parser.reset()},m.prototype.lockCache=function(){},a=m,f.prototype.setCalculations=function(e){this.calcIt?this.calcIt.reset(e):this.calcIt=new i.Iterator(e),this.calcExpr=void 0},f.prototype.restartCalcs=function(){this.calcIt,this.calcIt.reset(),this.calcExpr=void 0},f.prototype.nextCalc=function(){var e=this.calcIt.next();return e&&(this.calcExpr=t.PrimitiveValueEncoding.parseValueToSQExpr(this.calcIt.current().Value)),e},f.prototype.calcId=function(){return this.calcIt.current().Id},f.prototype.calcValue=function(){return this.calcValueAsExpr().value},f.prototype.calcValueAsExpr=function(){return this.calcExpr||(this.calcExpr=t.PrimitiveValueEncoding.parseValueToSQExpr(this.calcIt.current().Value)),this.calcExpr},f.prototype.calcCount=function(){return this.calcIt.count()},__extends(y,n=e=f),y.prototype.reset=function(){this.it.reset()},y.prototype.index=function(){return this.it.index()},y.prototype.count=function(){return this.it.count()},y.prototype.next=function(){this.primaryHierarchyParser=this.secondaryHierarchyParser=this.messageParser=void 0;var e,t=this.it.next();return t&&(e=this.it.current(),this.setCalculations(e.Calculations)),t},y.prototype.id=function(){return this.it.current().Id},y.prototype.nestedDataShapes=function(){return{}},y.prototype.primaryHierarchy=function(){var e;return this.primaryHierarchyParser||(e=this.it.current().PrimaryHierarchy,this.primaryHierarchyParser=e&&new c(e,0)),this.primaryHierarchyParser},y.prototype.secondaryHierarchy=function(){var e;return this.secondaryHierarchyParser||(e=this.it.current().SecondaryHierarchy,this.secondaryHierarchyParser=e&&new c(e,1)),this.secondaryHierarchyParser},y.prototype.messages=function(){return!this.messageParser&&0<_.size(this.it.current().DataShapeMessages)&&(this.messageParser=new u(this.it.current().DataShapeMessages)),this.messageParser},y.prototype.hasRestartTokens=function(){return 0<_.size(this.restartTokens())},y.prototype.restartTokens=function(){return this.it.current().RestartTokens},y.prototype.complete=function(){return this.it.current().IsComplete},y.prototype.hasAllData=function(){},y.prototype.limitsExceeded=function(){return 0<_.size(this.it.current().DataLimitsExceeded)},y.prototype.limits=function(){return this.limitsParser||(this.limitsParser=new s(this.it.current().DataLimitsExceeded)),this.limitsParser},o=y,g.prototype.next=function(){return this.it.next()},g.prototype.id=function(){return this.it.current().Id},g.prototype.count=function(){return this.it.count()},s=g,v.prototype.next=function(){return this.it.next()},v.prototype.code=function(){return this.it.current().Code},v.prototype.severity=function(){return this.it.current().Severity},v.prototype.dsrMessage=function(){return new r.DsrMessage(this.it.current())},u=v,S.prototype.count=function(){return this.it.count()},S.prototype.reset=function(){this.it.reset()},S.prototype.next=function(){return this.instancesParser&&(this.instancesParser=void 0),this.it.next()},S.prototype.id=function(){return this.it.current().Id},S.prototype.instances=function(){var e;return this.instancesParser||(e=this.it.current().Instances,this.instancesParser=e&&new p(e,this.hierarchy)),this.instancesParser},c=S,__extends(x,l=e),x.prototype.next=function(){var e,t=this.it.next();return t&&(e=this.it.current(),this.setCalculations(e.Calculations),this.dataMemberIt=void 0,this.intersectionParserDirty=!0,1===this.hierarchy)&&e.Intersections,t},x.prototype.count=function(){return this.it.count()},x.prototype.currentIndex=function(){return this.it.index()},x.prototype.intersections=function(){var e;return this.intersectionParser?(this.intersectionParserDirty&&this.intersectionParser.reset(this.it.current().Intersections),this.intersectionParser):(this.intersectionParserDirty=!1,e=this.it.current().Intersections,this.intersectionParser=e&&new h(e))},x.prototype.restartFlagKind=function(){return this.it.current().RestartFlag},x.prototype.restartKind=function(){return 0},x.prototype.members=function(){var e;return this.dataMemberIt||(e=this.it.current().Members,this.dataMemberIt=e&&new c(e,this.hierarchy)),this.dataMemberIt},p=x,__extends(C,d=e),C.prototype.reset=function(e){this.it.reset(e)},C.prototype.next=function(){var e=this.it.next();return e&&this.setCalculations(this.it.current().Calculations),e},h=C})(powerbi=powerbi||{}),(function(e){var a,n;a=e.data||(e.data={}),((n=a.services||(a.services={})).DataShapeBindingWindowExpansionStateSerializer||(n.DataShapeBindingWindowExpansionStateSerializer={})).serializeWindowExpansionState=function(e){var t,r,i;if(e&&e.root)return i=(function t(e){if(!e||_.isEmpty(e.Children))return 0;return Math.max.apply(Math,_.map(e.Children,(function(e){return t(e)})))+1})(t=(function t(e){return{Values:_.map(e.identityValues,(function(e){return n.SemanticQuerySerializer.serializeExpr(e)})),WindowExpansionInstanceWindowValue:_.map(e.windowValues,(function(e){return{Values:_.map(e.restartValues,(function(e){return n.SemanticQuerySerializer.serializeExpr(e)})),WindowStartKind:e.windowKind}})),Children:_.map(e.children,(function(e){return t(e)}))}})(e.root)),r=new a.SQFrom(null),_.size(e.levels),e=_.take(e.levels,i),i=_.map(e,(function(e){return e=e,t=r,{Expressions:_.map(e.identityKeys,(function(e){e=a.SQExprRewriterWithSourceRenames.rewrite(e,t,t);return n.SemanticQuerySerializer.serializeExprWithRef(e)})),Default:0};var t})),n.SemanticQuerySerializer.serializeFrom(r,e=[]),{From:e,Levels:i,WindowInstances:t}}})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(o){var r=o.telemetry||(o.telemetry={}),e=jsCommon.Utility,t=o.telemetryEventFactory,i=o.telemetry.EventFactories;e?e.generateGuid:Function.prototype,r.ProvidersExcelWorkbookUploadEventName="PBI.Providers.ExcelWorkbookUpload",r.ProvidersExcelWorkbookUpload=i[r.ProvidersExcelWorkbookUploadEventName]=function(e){return t({name:r.ProvidersExcelWorkbookUploadEventName,baseEvent:r.CustomerAction(e),info:e,category:o.TelemetryCategory.CustomerAction,loggers:r.ProvidersExcelWorkbookUploadLoggers,logExpAssignment:!0})}})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(l){(l.common||(l.common={})).featureSwitchesHostFilters={annotationsUI:8,reportAnnotationsUI:10,userFavoriteResourcePackagesEnabled:516095,queryCancellation:25,personalVisualizationPaneEnabled:516095,exp_deferVCLoadingChangeSection:516095,exp_deferVCLoadingChangeSectionEmbed:8192,noEmptyUpdateEmbed:8192,noEmptyUpdate:516095,exp_noEmptyUpdate:516095,stickyFeatureSwitches:516095}})(powerbi=powerbi||{}),(function(l){(l.common||(l.common={})).ClientFeatureSwitches=function(){this.eimInformationProtectionEditEnabled=null,this.eimInformationProtectionMandatoryLabelSettingEnabled=null,this.cesTeamsGiveUsFeedbackButton=null,this.adminCustomDisclaimerEnabled=null,this.bingMapEnabled=null,this.datamartTenantEnabled=null,this.deprovisionScdInstanceEnabled=null,this.externalDatasetSharingTenantEnabled=null,this.allowCVToExportDataToFileTenantEnabled=null,this.allowCVLocalStorageTenantEnabled=null,this.allowCVWebAccessTenantEnabled=null,this.liveChatWithSalesEnabled=null,this.enableDatasetInPlaceSharingEnabled=null,this.microsoftOrgAppEnabled=null,this.withinDXT=null,this.liveWorkbookTiles=null,this.csvContentProviderEnabled=null,this.vsoVnextAppEnabled=null,this.excelWorkbooksInContentPackEnabled=null,this.ffxlChartSelectionEnabled=null,this.ffxlLocalFilesEnabled=null,this.sharePointDocumentLibrariesEnabled=null,this.sparkAppEnabled=null,this.psaPracticeManagerAppEnabled=null,this.anonymousEmbeddingEnabled=null,this.psaResourceManagerAppEnabled=null,this.psaAccountManagerAppEnabled=null,this.azureUsageAndBillingAppEnabled=null,this.bingAdsAppEnabled=null,this.salesforcePersonasEnabled=null,this.fullFidelityExcelEnabled=!0,this.disableAnimation=null,this.pseudoLocEnabled=null,this.includeFlightingContentProviders=null,this.exportallowed=null,this.ignoreGettingStartedPopups=null,this.insightsDevModeEnabled=null,this.snapshotEmbedEnabled=null,this.closeAccountEnabled=null,this.dataDotChartEnabled=null,this.enterpriseGatewayEnabled=null,this.enterpriseGatewayETLEnabled=null,this.quotaSmallLimitEnabled=null,this.forceFreeUserEnabled=null,this.salesforceAndOneDriveCredentialsEnabled=null,this.scriptVisualEnabled=null,this.embedFullFidelityWorkbooks=null,this.readOnlyGroupEnabled=null,this.sandboxVisualsEnabled=!0,this.pauseQueriesEnabled=null,this.sunburstVisualEnabled=null,this.cloudRlsImpersonationEnabled=null,this.cloudRlsRoleMembershipEnabled=null,this.filledMapDataLabelsEnabled=null,this.enableTableToTableRelationship=null,this.isLabelInteractivityEnabled=null,this.hierarchyAuthoringEnabled=null,this.importPbiviz=null,this.analyzeInExcelEnabled=null,this.dataClassificationEnabled=null,this.scriptVisualAuthoringEnabled=null,this.hierarchyDragDrop=null,this.mapCurrentLocationEnabled=null,this.devToolsVisualApiVersioning=null,this.insightsStoreEnabled=null,this.saasMarketplace=null,this.permissionCenterEnabled=null,this.oneGBUploadFileSizeEnabled=null,this.templatePublishFlightingWorkAroundEnabled=null,this.enableGroupAuthoring=null,this.exportVisualToExcelEnabled=null,this.showGeneratedColumnsInDetailView=null,this.alwaysPromptForContentProviderCreds=null,this.serviceAppsDisabled=null,this.builtInContentProvidersDisabled=null,this.shapeMapVisualEnabled=null,this.exportReportToPowerPointEnabled=null,this.adminAuditingEnabled=null,this.dynamicMessageEnabled=null,this.preloadLinkedDashboardEnabled=null,this.scriptVisualLaunchExternalIDEEnabled=null,this.esriEnabled=null,this.sharePointEmbedEnabled=null,this.emailSubscriptionEnabled=!0,this.downloadReportEnabled=null,this.socialSharingEnabled=!0,this.isSovereignCloud=null,this.scriptVisualAnonymousEmbeddingEnabled=null,this.analyzeInExcelSovereignFormatEnabled=null,this.appTemplatesEnabled=null,this.directQueryScheduledRefresh=null,this.previewDefaultOptIn=null,this.serviceAppsEnabled=null,this.templateAppUpgradeEnabled=null,this.useBackendFSEnabled=null,this.granularTenantControls=null,this.adminCapacityEnabled=null,this.numericSlicerEnabled=null,this.clientUsageMetricsEnabled=null,this.pivotTableVisualEnabled=null,this.multipleODataPredicates=null,this.datasetDownloadPbix=null,this.dashboardEmailSubscription=null,this.approvedResourcesDisabled=null,this.groupCapacity=null,this.reportMeasures=null,this.customVisuals=null,this.showHiddenUsageMetricsModels=null,this.appStoreCdnOverride=null,this.lineMarkersEnabled=null,this.onPremDirectQuerySingleSignOnForSql=null,this.onPremDirectQuerySingleSignOnForOracle=null,this.onPremDirectQuerySingleSignOnForSAP=null,this.onPremDirectQuerySingleSignOnForTeradata=null,this.lineStylesEnabled=null,this.cellLevelFormatting=null,this.canvasItemsPane=null,this.instantEmail=null,this.usageMetricsUpgrade=null,this.authoringCapabilitiesAdminControl=null,this.customVisualsPerformanceTelemetry=null,this.customCommands=null,this.scatterWithDataVolume=null,this.loadBaseTheme=null,this.baseTheme=null,this.reportSharingUI=null,this.scatterXYGrouping=null,this.slowDataSourceModeEnabled=null,this.zOrder=null,this.dsrV2=null,this.drillFilterOtherVisuals=null,this.mapPointSampling=null,this.themeRelative=null,this.CDSA=null,this.useBatchGeocoding=null,this.stickyUserStateUI=null,this.stickyUserStateUIThrottling=null,this.defaultSortMethodology=null,this.showIncrementalRefreshPolicy=null,this.cdsaFrontend=null,this.createAppWorkspaceSettingMigration=null,this.subscribeOthersUI=null,this.dashboardThemesUI=null,this.filtersInDataView=null,this.cdsaExternalStorageReferenceUI=null,this.notifyLegacyExternalUsers=null,this.insightApps=null,this.paginatedReports=null,this.annotationsUI=null,this.urlBookmarksUI=null,this.donutImprovements=null,this.dataClassification=null,this.editWorkspaceShowsRegion=null,this.comparisonODataPredicates=null,this.stickyUserStateCustomViz=null,this.multiGeoGatewaysCredentialsWarning=null,this.gatewayBasicLoadBalancing=null,this.showManageAggregations=null,this.dataViewTargeted=null,this.dateODataType=null,this.nonAsciiODataNames=null,this.inODataPredicates=null,this.bookmarkGrouping=null,this.outspaceBackground=null,this.personalBookmarksUI=null,this.spoWithTutorialVisuals=null,this.securePublishToWeb=null,this.redlineAlignment=null,this.capacityWorkloads=null,this.rdlReportSharingUI=null,this.lessIntrusiveNpsDialog=null,this.cartesianConditionalFormatting=null,this.openExploreErrorDetails=null,this.onPremDirectQuerySingleSignOnForSapBw=null,this.cdsaUseMashupEditorClientLibrary=null,this.capacitySettingsTabs=null,this.copyBetweenPbix=null,this.datasetPropertiesSection=null,this.certifyDatasetsSetting=null,this.allowExploreDatasetOfApp=null,this.exportExcelExcludeMeasures=null,this.exportDataMode=null,this.capacityRestartButton=null,this.cdsaExperimentalConnectors=null,this.optimizePublishToWeb=null,this.sharedDatasetDiscovery=null,this.reportAnnotationsUI=null,this.autoShareAnnotatedArtifact=null,this.onPremDirectQuerySingleSignOnForSapBwMessageServer=null,this.scheduledSubscriptionUI=null,this.userStateBookmarkImprovements=null,this.cdsaCDMFolderReferenceUI=null,this.elevatedGuests=null,this.cdsaFolderStorageAccountUI=null,this.rdlReportJsonRplRenderer=null,this.localizationModern=null,this.workloadMetrics=null,this.removeAuthoringToolSaveButton=null,this.dashboardB2BSharingWithRegularHost=null,this.PbiDedicatedPublicXmlaEndpoint=null,this.keyDrivers=null,this.cdsaDatasetCopyUI=null,this.rolloutCapacitiesList=null,this.visualTabOrders=null,this.helpAndSupportSettings=null,this.servicePrincipalTenantAdminSettings=null,this.exportReportToPdfEnabled=null,this.newLookUI=null,this.httpServiceModern=null,this.cdsaExistingDatasetCopyUI=null,this.defaultTooltipFormatting=null,this.axisInteractivity=null,this.showDataflowsInGetData=null,this.cdsaFastCombineDefaultOffFrontend=null,this.workspacesV2GA=null,this.workspacesV2GAFeatures=null,this.cdsaStorageAccountDetachUI=null,this.dataSourceVariablesOverride=null,this.capacityBanner=null,this.workspaceCapacityManagement=null,this.userFavoriteResourcePackagesEnabled=null,this.performancePane=null,this.unreadAnnotationsBadge=null,this.paginatedReportsSubscriptions=null,this.cdsaStorageUpdateMissingParamsUI=null,this.scheduledRefreshCCNotifications=null,this.sharedDataflowDiscoveryUI=null,this.lineChartLabelPosition=null,this.visualsOutsideNgZone=null,this.workspacesV2ViewerRole=null,this.exprBoundColorValidation=null,this.gatewayMultipleCredentials=null,this.gatewayMultipleCredentialsRDLReports=null,this.gatewayMultipleCredentialsDatapools=null,this.paneColorRefresh=null,this.dataSourceVariablesOverrideShared=null,this.playAxisDataColors=null,this.disableExportDataOnVisualError=null,this.stagingRdlInApps=null,this.rdlReportInGlobalSearch=null,this.useNewCY19SU06BaseTheme=null,this.paginatedReportsSqlAzureSSO=null,this.appRepublishErrorHandlingUpdate=null,this.pbiMarketplace=null,this.tablixIcons=null,this.decompositionTree=null,this.tileEmbedHostEnvChange=null,this.dataBoundPropertiesUseThemeDefaults=null,this.contactsSettingsList=null,this.drillthroughText=null,this.keyDriversDetails=null,this.propertyEvaluationWarnings=null,this.qnaVisual=null,this.workspacesV2OptInUpgrade=null,this.workspacesV2OptInUpgradeButton=null,this.workspacesV2Downgrade=null,this.aiCapacityMetrics=null,this.eimInformationProtectionUI=null,this.homeThumbnailUI=null,this.importJsonModel=null,this.allowCDNUrl=null,this.themeTextStyles=null,this.exprBoundAltText=null,this.disableServicePrincipalNotification=null,this.personalVisualizationPaneEnabled=null,this.newExportDataUI=null,this.newUsageMetrics=null,this.rdlGenerateLinkUI=null,this.queryApplicationContext=null,this.snapshotGenerateUI=null,this.lazyLoadAngularJS=null,this.exprBoundActions=null,this.additionalKPISettings=null,this.externalSharingInvitationHostDeprecation=null,this.invitationHostDeprecation=null,this.visualMultiColumnFilterMetadata=null,this.deprecateArchivedContent=null,this.InsightsContinuationTokens=null,this.insightsContinuationTokensUX=null,this.conditionalTablixWebURL=null,this.addHostEnvHeader=null,this.kerberosDqRefresh=null,this.directToMwc=null,this.rdlBootstrapNotInDashboardService=null,this.themeDialog=null,this.subscriptionUpdatePreventionOnAnonymizedUsers=null,this.manageMarketplaceVisuals=null,this.refreshCenterHistory=null,this.refreshCenterTimetable=null,this.forceCapacityFolderAlmPipeline=null,this.adlsBasedModelTakeover=null,this.canvasZoom=null,this.pbiRSKey=null,this.umv2Upgrade=null,this.reorderAdminPortalNav=null,this.newAdminUsageMetrics=null,this.scopedAggregates=null,this.exportForPBIE=null,this.decompTreeBarsPerLevel=null,this.tableMultiSort=null,this.navAndDrillthroughActionTypes=null,this.allowSubscribingOnlyExternalUsers=null,this.modernPackageRefreshListener=null,this.emailSubscriptionV2=null,this.instantEmailSubscriptionV2=null,this.decompTreeTooltipMeasure=null,this.reusableFluentList=null,this.visualContainerLassoSelect=null,this.fluentAppListView=null,this.webNavigationMigration=null,this.saasReportIsAngular=null,this.saasReportIsAngularToThisPoint=null,this.allowGatewayForRDLWithCloudDS=null,this.decompositionTreeCoreVisual=null,this.visualInsights=null,this.useModernVisualTooltipManager=null,this.totalsConditionalFormatting=null,this.homeGettingStartedP2WSample=null,this.homeGettingStartedP2WSampleForceShow=null,this.homeGettingStartedPbixSample=null,this.updatedGetDataSamples=null,this.hideWorkspacesWidget=null,this.filteredFavoriteFrequent=null,this.discussInTeams=null,this.drillthroughButtonGA=null,this.decompositionTreeCrossHighlight=null,this.deleteSharedDatasetUi=null,this.rebindReportUi=null,this.decompositionTreeResponsiveLayout=null,this.externalTools=null,this.decompositionTreeConditionalFormat=null,this.exportReportWithExecuteScriptAsync=null,this.byoResourcesUI=null,this.byoResourcesStorageAccountUI=null,this.byoResourcesLogAnalyticsUI=null,this.discussInTeamsForDashboard=null,this.fluentTopLevelList=null,this.selfServicePurchase=null,this.fileExportPolling=null,this.openArtifactsInNewTab=null,this.d3v5=null,this.showDisableCommentingTenantSwitch=null,this.azureMapVisual=null,this.azureMapPreviewEnabled=null,this.singlePageExports=null,this.ShowQnaSettingForAllModels=null,this.qnaSupportCommitQuestionOnDemandForAll=null,this.spanishLinguisticsEnabled=null,this.qnaExportLanguageModelPackage=null,this.anomalyDetection=null,this.kustoSSO=null,this.cdpaSSO=null,this.templateAppsSimplifiedAuth=null,this.showThemeLoadError=null,this.dataPointLassoSelect=null,this.interactivityServiceOptimization=null,this.gatewayVNets=null,this.eimInformationProtectionUsageRightsUI=null,this.eimInformationProtectionMandatoryLabelUI=null,this.allowPrivateLinksSecurityGroups=null,this.QnaInterpretVersion=null,this.reportPagePanePositionSetting=null,this.expFlightingTenantSetting=null,this.blankCanvasWatermark=null,this.decompositionAnalysisInsights=null,this.ppuTenantSettings=null,this.sendLocalDatesForSubscription=null,this.postNgMigrationCleanup=null,this.axisZoom=null,this.capacityGen2Create=null,this.capacityGen2Toggle=null,this.capacityGen2Notifications=null,this.autoScaleEmailNotifications=null,this.WorkspaceV1AdminUpgrade=null,this.proTrialToPPUTrialRollout=null,this.serializeSpaceOptimization=null,this.workspaceV1AdminUpgradeAll=null,this.databricksSSO=null,this.commonDataServiceSSO=null,this.capacityGen2UsageMetricsLink=null,this.disablePPUConfirmationDialog=null,this.allowSubscribeOthersWithRLS=null,this.premiumPerUserGA=null,this.qnaThumbsUpDown=null,this.cartesianMultiples=null,this.cartesianMultiplesAuthoring=null,this.lazyLoadAccessRecords=null,this.subscriptionOptionalPreviewImage=null,this.consolidateGroupDeleteState=null,this.analyticsRibbon=null,this.sharepointListLicensing=null,this.visualizeListInPowerBIUI=null,this.powerBIGoals=null,this.fluentListMigration=null,this.scorecardVisual=null,this.enhancedTooltips=null,this.MRUOptimizationFE=null,this.capacityAzureGen2Preview=null,this.cartesianMultiplesGridFormatting=null,this.newEmbedOnLoadFiltersFlow=null,this.automatedInsights=null,this.automatedInsightsBackgroundRefresh=null,this.sharedWithMeOptimizationFE=null,this.azureMapSelectionControl=null,this.promoteTeamsBanner=null,this.smallMultiplesSubheaderFormatting=null,this.lineChartVerticalReferenceLine=null,this.enterDataFooter=null,this.quickCreateDataset=null,this.quickCreateBlankReport=null,this.capacityGen2PaygUI=null,this.autoAssignTrial=null,this.cartesianMultiplesGridPadding=null,this.cancelTrial=null,this.comboMultiples=null,this.accessibilityTopLevelNav=null,this.deprecateOldVisuals=null,this.hiddenContent=null,this.streamingDataflowQueryTest=null,this.useModernFormatPane=null,this.formatPaneGroups=null,this.teamsHomePivot=null,this.topLevelListsAreAngular=null,this.appsAreAngular=null,this.shapeVisual=null,this.showLiftChart=null,this.showAllGateways=null,this.daxTransformEnabled=null,this.expressionBasedFormatting=null,this.areaChartTransparency=null,this.totalDataBars=null,this.cesNewUserDayZeroIntent=null,this.cesCustomerVoiceTest=null,this.smallMultiplesConditionalFormatting=null,this.smallMultiplesResponsive=null,this.enableSelectAllForDynamicQueryParameter=null,this.WorkplaceAnalyticsSSO=null,this.cartesianMultiplesAccessibility=null,this.powerAutomateNativeVisual=null,this.capacityRegionalSpec=null,this.smallMultiplesSortByMeasure=null,this.teamsMobileFormatting=null,this.mobileAuthoringFormattingUI=null,this.dataverseIntegrationUI=null,this.modernCodePaneContainer=null,this.shapeFormattingFeatures=null,this.xAxisRefLineImprovements=null,this.servicePrincipalProfiles=null,this.m365DataSharingSetting=null,this.generateQesTokenPaas=null,this.SPLRegenerateModel=null,this.byolaSGWorkspacePermissionSwitch=null,this.buttonTileFormatting=null,this.lineChartSeriesLabels=null,this.waterfallTotals=null,this.visualTitleContainerPadding=null,this.capacityAzureGen2GA=null,this.useModernFieldWell=null,this.learnPageSamples=null,this.capacityBannerGen2=null,this.gatewaysAdminCenterLink=null,this.azureMapHeatmapLayer=null,this.sparklines=null,this.accessibilitySlicerNav=null,this.modernGroupingDialog=null,this.donutChartStartAngle=null,this.pieChartMarginBetweenSlices=null,this.textboxSuperSubScriptBulletedList=null,this.navigatorVisuals=null,this.sortLegend=null,this.enableBIU=null,this.adminPortalSurvey=null,this.eimInformationProtectionMandatoryLabelOnUploadRdlUI=null,this.EimInformationProtectionMandatoryLabelNewPaginatedReport=null,this.displayAdminInsights=null,this.adminInsightsOnTrident=null,this.NlToDax=null,this.EnableNLToDax=null,this.AllowSendNLToDaxDataToOtherRegions=null,this.showAllowPowerBIASDQOnTenant=null,this.useModernDatePickerSlicer=null,this.substrateDeprovisioningSetting=null,this.useCvSandboxHtmlPack=null,this.almDatamarts=null,this.allowDataMartModelAuthoringRLS=null,this.upgradeOutlineProperties=null,this.tridentCapacityUsageReport=null,this.comboChartNoColumnsLegend=null,this.outlineDropdownToCheckboxes=null,this.slicerAccessibility=null,this.lineChartError=null,this.fillPointStyle=null,this.cvAggregateUpdateMessages=null,this.showDefaultTooltip=null,this.azureMapsGeocoding=null,this.newVisualLegendPositions=null,this.columnChartError=null,this.splitSubTotals=null,this.splitGrandTotals=null,this.logAxisScale=null,this.switchAxisPosition=null,this.removeDefaultToCircleToggle=null,this.bookmarkNavigatorSeparate=null,this.formulaBarPerfImprovements=null,this.ProvideStaticOAuthOption=null,this.quickCreateSave=null,this.comboChartError=null,this.formattingPaneEnhancement=null,this.showEmbedPaasFreeTrialNotification=null,this.keyboardShortcutsLassoSelect=null,this.kustoExtension=null,this.datasetWritePermissions=null,this.MyFolderAdminAccess=null,this.MyFolderPreferredCapacity=null,this.remainingCartesianCategoryLogAxisScale=null,this.errorBarsGA=null,this.goalsDetailsUpdatedPeriodicity=null,this.visualFormattingTelemetry=null,this.myFolderPPU=null,this.slicerSliderColors=null,this.spinButtonControl=null,this.formattingPaneStoreUpdate=null,this.MyFolderConvertToAppFolder=null,this.datamartsNamedConnections=null,this.azureMapsFilledMap=null,this.copyPasteMenuMetadata=null,this.copyPasteMenuImage=null,this.modernClipboard=null,this.interpretRequestGroupIdEnabled=null,this.subscriptionsWithFilters=null,this.useModernExplorationAppBar=null,this.categoricalSecondaryCF=null,this.oAuthUseCallbackUri=null,this.a11yComplianceItaly=null,this.smallMultiplesUnsharedAxes=null,this.trackActivityLifecycle=null,this.visualSharingEntryPoint=null,this.visualSharingEntryPointOptions=null,this.azureMapsShowLabels=null,this.azureMapsCategoryLabels=null,this.qnaToolingPhrasingEditor=null,this.flexibleDimensionsMenus=null,this.updateFormattingPaneObjects=null,this.moveSlicerTypeSelection=null,this.tealTheme=null,this.useCvSandboxDynamicHtml=null,this.sjdOptimizationRetryPolicy=null,this.useAppArtifactId=null,this.azureMapsProgressiveLoading=null,this.baseThemeUpdate=null,this.validateReportTheme=null,this.vcPadding=null,this.navigatorTogglePage=null,this.azureMapsUseMapControlV3=null,this.tridentCapacitySettings=null,this.tridentCapacityWorkspaceSettings=null,this.showCapacityUnits=null,this.tablixImageWidth=null,this.azureMapsConversion=null,this.showSCCGateway=null,this.certifiedVisualTelemetry=null,this.ASShareableCloudConnectionIntegration=null,this.SharableCloudDatasources=null,this.officeAddInApp=null,this.a11yMatrix=null,this.shareDatamart=null,this.openWithOnDatamartType=null,this.a11yTable=null,this.newResizeSensor=null,this.queryContext=null,this.fieldParameters=null,this.fieldParametersAuthoring=null,this.capacityMetricsGen2App=null,this.coalesceCD=null,this.exp_coalesceCD=null,this.disableScheduledRefreshForCapacityMetricsGen2=null,this.autoInstallPowerBIAppInTeamsClient=null,this.autoInstallPowerBIAppInTeamsActivesClient=null,this.RdlEditableSession=null,this.storytelling=null,this.storytellingIntroduction=null,this.storytellingSingleVisual=null,this.storytellingShareSingleVisual=null,this.storytellingB2BHandleErrorDisable=null,this.storytellingGetDataDisable=null,this.storytellingCarouselOffileDialogDisable=null,this.teamsPersonalAppSideNav=null,this.bingMapTenantSetting=null,this.workbookModern=null,this.teamsPersonalAppTopBar=null,this.angularOnlyPermissionCenter=null,this.leadsCollection=null,this.eimInformationProtectionSupportForTridentUI=null,this.eimInformationProtectionFlyoutTrident=null,this.eimInformationProtectionFlyoutPbi=null,this.tridentArtifactsEndorsement=null,this.tridentGit=null,this.tridentGitCheckoutBranch=null,this.tridentGitStatusAPI=null,this.embedHierarchyFilterUsingIdentities=null,this.newManageGatewaysUI=null,this.showPlaygroundMenuItem=null,this.passReportIdToOnloadBookmark=null,this.standaloneUseDashboardNew=null,this.standaloneUseTileNew=null,this.showWorkspaceUpgradeEmailTenantSetting=null,this.showWorkspaceUpgradeEmptyTenantSetting=null,this.automaticAggregationsUIGAFeatures=null,this.removeScaleDetector=null,this.noEmptyUpdateEmbed=null,this.noEmptyUpdate=null,this.browse=null,this.browseMenu=null,this.newZoomControl=null,this.blockWorkspaceV1CreationEnabled=null,this.BlockWorkspaceV1Creation=null,this.enableGen2DataflowsForSharedWorkspaces=null,this.enableGen2DataflowsDraft=null,this.enablePublishGen2DataflowWithParams=null,this.enableQueryOutputDestinations=null,this.useTeamsSdkForMashupServiceAuthToken=null,this.mobileNewDashboardAuthoring=null,this.mobileNewDashboardConsumption=null,this.singleGoalVisual=null,this.rdlQuickTableSave=null,this.rdlNewSaveAs=null,this.embedHierarchySlicerState=null,this.rlsEditor=null,this.isDownloadFilesInOfficeEnabled=null,this.isDownloadFilesInOutlookEnabled=null,this.spatialAnchorsAdminUI=null,this.quickExploreMultiTable=null,this.utcDates=null,this.isViewFullScreenInOfficeEnabled=null,this.isViewFullScreenInOutlookEnabled=null,this.isMetaOSStandardClientReportingEvent=null,this.aasMigration=null,this.tooltipsToOverlay=null,this.oneDriveSave=null,this.oneDriveShare=null,this.oneDriveSharePointAllowSharingTenantSetting=null,this.oneDriveViewerShare=null,this.oneDriveViewerWaveOne=null,this.oneDriveViewerWaveTwo=null,this.storytellingSlideshowModeDisable=null,this.displayKustoAdminSettings=null,this.adminGroupApiDatamart=null,this.reportEmbedShowKeyboardHint=null,this.aasReportRebind=null,this.rdlDisableOutboundConnectivity=null,this.defaultAggrDisplayName=null,this.storytellingTemplateFileAccessCheckDisable=null,this.datamartRefreshHistory=null,this.allowCustomVisualsOnReportEmbedExport=null,this.allowCustomVisualsOnDashboardModernExport=null,this.allowCustomVisualsForCopyPasteVisual=null,this.modernGetData=null,this.ASShareableCloudConnectionBindingSecurityMode=null,this.quickCreateNewImport=null,this.bypassTridentTsValidation=null,this.projectTridentOverall=null,this.tridentPortalByDefault=null,this.displayProjectTridentUIEnabled=null,this.privatePreviewWorkloads=null,this.privatePreviewWorkloadsTenantSwitchEnabled=null,this.showTridentArtifactsOnPBIHomeList=null,this.tridentDisableAutoResolveProducts=null,this.tridentIgnorePreviewArtifacts=null,this.tridentFavorite=null,this.tridentFreeLicenseAllowances=null,this.tridentMultitasking=null,this.tridentMultitaskingInPBI=null,this.tridentMultitaskingUnpinUnintegratedArtifacts=null,this.tridentMultitaskingHomeOne=null,this.tridentMultitaskingMLExperiment=null,this.tridentMultitaskingMLModel=null,this.tridentMultitaskingPipeline=null,this.tridentPreviewBanner=null,this.tridentPreviewSuffix=null,this.tridentProductApiPlayground=null,this.tridentProductDatabase=null,this.tridentProductDataEngineering=null,this.tridentProductDataIntegration=null,this.tridentProductDataScience=null,this.tridentProductDataWarehouse=null,this.tridentProductKusto=null,this.tridentProductMicrosoftSupplyChainCenter=null,this.tridentProductReflex=null,this.tridentRouterOutletDisabled=null,this.tridentRecommendationStyle=null,this.pinWorkspace=null,this.ASWorkspaceConfigurableServerProperty=null,this.tridentDataflowGen2Experimental=null,this.enableGen2DataflowsInPowerBI=null,this.enableGen2DataflowsInTrident=null,this.usePPDFConnector=null,this.useTridentThemeInPowerBIGen1Dataflows=null,this.useTridentThemeInPowerBIGen2Dataflows=null,this.oneLakeUXS3Shortcut=null,this.oneLakeUXShortcutApiV2=null,this.oneLakeUXAdlsStoredCredentials=null,this.oneLakeUXShortcutNotifications=null,this.oneLakeUXS3StoredCredentials=null,this.oneLakeUXBrowseInShortcut=null,this.oneLakeUXShowKustoInBrowse=null,this.oneLakeUXShowDWInBrowse=null,this.enableSearchInSettings=null,this.dataflowsAppBasedRefreshHistoryDialog=null,this.storytellingSmartNarrative=null,this.storytellingNewBookmarkCompareDisable=null,this.storytellingLoseFocusCheckDisable=null,this.storytellingBorder=null,this.storytellingBorderCustomize=null,this.storytellingWhatsNewBanner=null,this.storytellingWhatsNewCarouselFeaturesPage=null,this.appArtifactLevelSecurity=null,this.aalpUpgrade=null,this.manageEmbedCodesModern=null,this.embedBlockRoutingAPIs=null,this.DownloadReportOptionsDialogEnabled=null,this.embedExitToHostShortcut=null,this.UnpublishOrgAppViaSprocFE=null,this.visualCalculations=null,this.visualCalculationsAuthoring=null,this.disableFeaturedDashboard=null,this.reflexObjectCreation=null,this.reflexEmailPolicyCreation=null,this.reflexMetric=null,this.reflexNewMetricApi=null,this.reflexNewSimulator=null,this.reflexPBI=null,this.reflexTeamsAction=null,this.reflexPowerAutomateAction=null,this.reflexV2=null,this.reflexSimulatorCreation=null,this.reflexSimulatorSkipStopTime=null,this.reflexLiveEngine=null,this.reflexMultiGeoApi=null,this.reflexShortFetch=null,this.reflexAdvancedObjectCreation=null,this.lakehouseInDpExtension=null,this.unifiedBatch1ConnectorInDataPipeline=null,this.unifiedBatch1Point5ConnectorInDataPipeline=null,this.unifiedConnectionInDataPipeline=null,this.pipelineScheduler=null,this.flipStackOrder=null,this.useNewToolbar=null,this.useReportFiltering=null,this.takeoverDatamart=null,this.createGen2CapacityByDefault=null,this.notebookOptimizeResourceValidate=null,this.notebookHighConcurrencyMode=null,this.sparkRuntimeVersion1_1=null,this.refreshCenterDatasetRefreshCancellationUI=null,this.useReactParameterPane=null,this.useTablixImageFields=null,this.datamartsVisualQuerySingleRibbon=null,this.useStandaloneImages=null,this.azureMapsSasToken=null,this.tridentInTeams=null,this.newMobileTooltip=null,this.irisUserDays=null,this.consolidatedMessageBar=null,this.blockExpiredTokenRequestForEmbed=null,this.activityBasedTimeout=null,this.abtReLoginPage=null,this.tableGrandTotals=null,this.appsPageReflow=null,this.mobileVcObjectsProxyViewMode=null,this.eimSensitivityDropdownCreateReactComponent=null,this.eimSensitivityDropdownReactHomeOne=null,this.mobileClientQueryCache=null,this.mobileModernTileHost=null,this.mobileAutoReportLayout=null,this.disableLegacyBootstrapForDashboard=null,this.useNpsNewUrlOrigin=null,this.storytellingDownloadManifest=null,this.selfServeTenantSettings=null,this.useAzureMapsBackend=null,this.cfStrings=null,this.assistedCreationPane=null,this.insightsCancellation=null,this.homeMigrateGettingStartedSample=null,this.useAllValidValues=null,this.scorecardCompactView=null,this.tridentArtifactsSettingsPane=null,this.interactiveMobileCanvas=null,this.tablePreviewDataTypes=null,this.mobileVcObjectsProxyFormFactorChange=null,this.pbiTooltipWebView2=null,this.modelExplorer=null,this.fluentDataPane=null,this.capacitySettingsExtensions=null,this.capacitySettingsExtensionsPrototype=null,this.tridentHelpPane=null,this.tridentHelpPaneDebug=null,this.storytellingTelemetryRouteResolutionDisabled=null,this.storytellingUserStateDisabled=null,this.showDataDrivenRdlSubscriptions=null,this.useCommunityNewDomain=null;this.useCvSandboxCspIframe=null,this.almPipelinesGranularCompare=null,this.rdlVisualReact=null,this.useReactTextBox=null,this.sjdRSupport=null,this.datamartTypesInMRU=null,this.layerOrderPanePbiTree=null,this.storytellingRecommendationUI=null,this.datamartTypesInFavorites=null,this.storytellingStyledSmartNarrativeSignatureDisabled=null,this.datamartTypesFilepathProperties=null,this.quickExploreFieldListMigration=null,this.rdlVirtualizeTables=null,this.touchScreenOptimizedTooltips=null,this.usageMetricsRetroactiveDisable=null,this.trackUserInfo=null,this.reportLoadIndicator=null,this.cdsaWorkspaceGraphDataflowEntities=null,this.cdsaSendEmailOnRefreshFailureUI=null,this.networkStatusNotification=null,this.skipTestConnection=null,this.smartAlertTenantAdminSettings=null,this.cdsaEntitiesRelationships=null,this.removeDataflowPreviewTag=null,this.queryCancellation=null,this.capacityWorkloadMemoryControls=null,this.addPreviewTagToAttachExternalDataflow=null,this.emailSubscriptionTenantAdminSettings=null,this.newDSCompInDataset=null,this.telemetryV2=null,this.skipTestConnectionOnPrem=null,this.northStarBreadcrumb=null,this.managedIdentityAuthorizationTenantAdminSettings=null,this.singleSignOnTestConnection=null,this.disableVisualInDesktopRS=null,this.eimInformationProtectionLicenseEnforcementUI=null,this.copyVisualImage=null,this.visualDropShadow=null,this.showDisableOutboundFlows=null,this.exportPbixForGeneratedModelsUI=null,this.modelingServiceGenerateModel=null,this.personalizeVisualUnifiedFieldList=null,this.artifactEndorsementFeatureUI=null,this.streamingDataflow=null,this.quickCreate=null,this.datamart=null,this.datamartQueryEditor=null,this.savedQueries=null,this.warehouseCrossDbQueries=null,this.sqlQueryTemplates=null,this.datamartObjectContainerRefresh=null,this.datamartIA=null,this.datamartIncrementalRefresh=null,this.easySharingTenantUI=null,this.easySharingProtectionLabelsTenantUI=null,this.verboseTelemetry=null,this.quickCreateSharepointList=null,this.largeFilesUI=null,this.lineageShowCompositeModelsRelationship=null,this.iaShowCompositeModelsRelationship=null,this.endorsementSidePanesUI=null,this.fluentAppsContainer=null,this.modernRLSContainer=null,this.enableHybridTables=null,this.newDatahubDiscoverPage=null,this.newMonitoringHubPage=null,this.datahubLastAccessColumn=null,this.newDatasetDetailsPage=null,this.datamartsTransientModel=null,this.lakehouseModeling=null,this.readonlyDatamart=null,this.autoGenerateBIModelDiagram=null,this.teamsBackButtonHandler=null,this.teamsLastVisitedURLApp=null,this.teamsThrottledSave=null,this.teamsAppCaching=null,this.teamsLastVisitedURLTab=null,this.tridentArtifactsInDatahubL1=null,this.tridentArtifactsInRecommended=null,this.tridentArtifactsInRecommendedV2=null,this.datahub_HEAD_FE_recommendedFromStore=null,this.recommendedTab_HEAD_DataHub_CompactView_FE=null,this.datahubArtifactTypesUseApiV2=null,this.dmtsInL1_HEAD_Datahub_FE=null,this.sharedQueries=null,this.homeOneArtifactsInDatahubL1=null,this.tridentArtifactL2=null,this.artifactDetails_HEAD_FE_newRelatedArtifact=null,this.shouldShowOwnerPhotoDatahubTable_HEAD_DataHub_CompactView_FE=null,this.allowSortColumns_HEAD_DataHub_CompactView_FE=null,this.useCompactViewInSelector=null,this.compactViewInDatahubL1Enabled=null,this.workspaceNavigationEnabled_HEAD_DataHub_CompactView_FE=null,this.dmtsConnections_HEAD_CompactView_FE=null,this.viewItemDetailsAction_HEAD_workspace_FE=null,this.upstreamRelatedArtifacts_HEAD_L2_FE=null,this.refreshHistoryActionDataset_HEAD_L2_FE=null,this.canHideAppNav=null,this.lakehouseArtifactsOnDesktop=null,this.dynamicParameters=null,this.allowTenantAdminDisableWorkspaceV1Creation=null,this.eimInformationProtectionExportPbixUI=null,this.skipRequiredDatsourceCredentials=null,this.compositeModelsOverAS=null,this.modelViewASLiveConnectEnabled=null,this.allowAsyncModelAuthoring=null,this.useTsMsagl=null,this.validateSortByColumnByTypescript=null,this.main_HEAD_PurviewHub_BE_FE=null,this.datahubV2OnDesktop=null,this.newDatahubCompactViewCreateReportEnabled=null,this.eimInformationProtectionForDesktop=null,this.eimInformationProtectionDesktopRemoveLabel=null,this.eimInformationProtectionEnforceDesktopLicense=null,this.useModernRealTimeTile=null,this.useModernRealTimeTileBlade=null,this.legacyPromiseFactory=null,this.legacyPbiPromise=null,this.usePbiPromiseMicrotask=null,this.exp_usePbiPromiseMicrotask=null,this.rdlNativeVisual=null,this.rdlEditInPBIRB=null,this.rdlSSOForASAzure=null,this.gatewayVNetsRdl=null,this.useReactToolbar=null,this.formattedTableReentrancy=null,this.usageMetricsVnext=null,this.EimInformationProtectionDefaultLabel=null,this.createDatasetFromHub=null,this.createDatasetFromLogAnalytics=null,this.datasetDescriptionSettingsUI=null,this.viewDatasetFromReportUI=null,this.showRelevantUsersForSharing=null,this.appSharingDialogEnabled=null,this.bookmarksForLinks=null,this.quickCreateImportData=null,this.authorsStateAsDefaultPresentationInPersonalBookmarks=null,this.itemHoverCard_HEAD_FE=null,this.DisableContentPacks=null,this.disableUIVirtualization=null,this.CdsaMultipleContributors=null,this.AdminInsightsMultipleReports=null,this.AdminInsightsBlocker=null,this.adminInsightsPermissionControl=null,this.ASConfigureParallelSourceQueriesInCapacity=null,this.dataExplore=null,this.webPerformancePane=null,this.dontSerializeDoLoadPowerViewReport=null,this.staticExportReportEnabled=null,this.allUpSaveReport=null,this.highVolume=null,this.customVisualsStore=null,this.gatewayBindingEnhancement=null,this.capacitiesVCores=null,this.customVisualsGallery=null,this.capacitiesAzureTab=null,this.capacitiesMigrateSpecificWorkspaces=null,this.assignAdminsAzureCapacitiesEnabled=null,this.reportInstantEmail=null,this.dashboardInstantEmail=null,this.slicerSyncing=null,this.dsrV2_Staging=null,this.workspacesV2=null,this.workspacesV2UsageMetrics=null,this.workspacesV2UnifiedGroups=null,this.customVisualsTenantSwitch=null,this.pinReadable=null,this.artifactSearchUI=null,this.appAccessRequestUI=null,this.spoIntegration=null,this.bookmarkInitRefactor=null,this.disallowWorkbookRefresh=null,this.onDemandSmartAlerts=null,this.exportUnderlyingSetting=null,this.workspaceListView=null,this.pinInsightsFromApp=null,this.useModernExploreCanvas=null,this.quickAccessSearch=null,this.newInfoBarRedlines=null,this.modernDatasetDialog=null,this.showMainWindowAfterRender=null,this.disableNewFeaturesDialog=null,this.copyRdlReportToWorkspaceV2=null,this.allowEmailSecurityGroupsOnOutage=null,this.histogram=null,this.cdsaModelSchemaUpdate=null,this.enableRdlReportCopyFromWorkspaceV1=null,this.narrativeTextbox=null,this.rdlReportAnaheim=null,this.workspaceMultiselect=null,this.expandQueryCaching=null,this.hideReportVerticalPane=null,this.capacityCachingControl=null,this.whatfix=null,this.dqReactiveCaching=null,this.cdsaGranularSQLUI=null,this.configureAppContacts=null,this.rdlHideCredentialsDialog=null,this.increasedExportSectionLimit=null,this.proPlusServicePlan=null,this.proPlusExcludePPUCapacityCreateWorkspace=null,this.lineChartPowerAutomate=null,this.cesFormsProTest=null,this.lineChartAlert=null,this.feedbackFeature=null,this.ribbonSearchBar=null,this.exportHostErrorList=null,this.linkToPowerAutomateExportTemplate=null,this.allowGatewaysWithoutMashupCreds=null,this.certifiedTelemetry=null,this.certifiedTelemetryDesktop=null,this.certifiedTelemetryUserEvents=null,this.certifiedTelemetryAssertions=null,this.certifiedTelemetryQueryEvent=null,this.certifiedTelemetryResolveParametersEvent=null,this.backstageUI=null,this.openReportWebBootstrap=null,this.resolveParametersEvent=null,this.activityViewer=null,this.gatewaysTableUseConnDetails=null,this.notificationPollTimeoutFast=null,this.notificationPollTimeoutSlow=null,this.enableRefreshNowChecks=null,this.sdfArray=null,this.sdfBlob=null,this.sdfCustomNodeName=null,this.sdfTools=null,this.sdfScheduleRefresh=null,this.sdfDataContinuity=null,this.sdfPublicPreview=null,this.sdfUndo=null,this.sdfRetentionPolicyUpdate=null,this.pushDataflowCreate=null,this.invertAxis=null,this.noWaitTrialRenewal=null,this.recommendedContentUI=null,this.hideActionAsDefault=null,this.powerBIGoalsStatusRules=null,this.automaticAggregations=null,this.useReactRenderer=null,this.goalsShowImportFromFileUI=null,this.homeListM3_Test1=null,this.homeListM3_Test2=null,this.infiniteScorllHomeListM3=null,this.homeLearnReport_Test1=null,this.recommendedViewDefault=null,this.homeListVirtualScroll=null,this.suppressDefaultTooltip=null,this.newSearchPage=null,this.selectAppInTeamsTab=null,this.exportScorecard=null,this.loadGroupMetadataOptimization=null,this.rdlInfiniteScrolling=null,this.goalsAggregations=null,this.goalsSparklineChangeAggregations=null,this.goalsColumnSettings=null,this.goalsPermissionSettings=null,this.powerAutomateEntryPointFromGoalsUI=null,this.powerBIGoalsDragAndDrop=null,this.goalsXAxisDragAndDrop=null,this.goalsDelayDragAndDrop=null,this.powerBIGoalsMultipleGoalOwners=null,this.powerBIGoalsMultipleTargets=null,this.scorecardsInMyWorkspace=null,this.datamartDatawarehouseInMyWorkspace=null,this.disableDatawarehousePPU=null,this.reliableProcessingHistory=null,this.datasetsActionsWithAutoAssignTrial=null,this.datasetsHubFreeUser=null,this.capacityGen2RestoreToggle=null,this.goalsHubFRE=null,this.goalsAllowedOnShared=null,this.goalsDraftScorecards=null,this.reorderRec_Test1=null,this.reorderRec_Test2=null,this.recDefaultNoRecent=null,this.recommendedScaleCard=null,this.checkPbivizFileContentOnImport=null,this.goalsCustomizeStatus=null,this.copyVisualNoTimeout=null,this.rdlThrottlingIndicator=null,this.disableTrial=null,this.ExportToExcelConnectedSummarized=null,this.exportToExcelConnectedRdl=null,this.goalsCategoricalValues=null,this.teamsLearnPageCards=null,this.teamsLearnTabCoachmark=null,this.onObject=null,this.onObjectFormatPaneUid=null,this.onObjectMobileAuthoring=null,this.teamsUseSDKSharing=null,this.teamsUseRegularLinkInShareInTeams=null,this.goalsScorecardAccessBanner=null,this.goalsMoveScorecard=null,this.undoGetAvailableGatewayCloudDS=null,this.goalsBulkDelete=null,this.multipleGoalTilesVisual=null,this.updateScorecardDataset=null,this.goalsReportSource=null,this.goalsSharingLink=null,this.goalsCopyScorecard=null,this.storeLogs=null,this.reportThemeSchema=null,this.goalsRenameCoachmark=null,this.goalsYouOwn=null,this.goalsFavoriteGoals=null,this.goalsNewEditButton=null,this.goalsNewHeader=null,this.diagnosticsBar=null,this.stickyFeatureSwitches=null,this.teamsLegacyTabMigration=null,this.fieldParameterDynamicSlicer=null,this.conditionalFormattingDataLabels=null,this.goalsSkipScorecardCreationPane=null,this.useAngularJSAuthDialog=null,this.useAngularJSScheduledRefresh=null,this.useAngularJSSettingsGateways=null,this.useAngularJSDataSourceCredentialsComponent=null,this.datamartsNewReportTab=null,this.goalsMultipleValuesEditor=null,this.modeling_enableFormulaBarDAXEditor=null,this.enableNewPropertySheet=null,this.relationshipValidation=null,this.dialogReflow=null,this.relationshipEditPane=null,this.angularRls=null,this.goalsHierarchiesOwnerMapping=null,this.goalsHierarchiesHeatmap=null,this.goalsHierarchiesHideInfoTooltips=null,this.tridentNotification=null,this.disableMwcThrottlingNotification=null,this.goalsRollups=null,this.scorecardTimezone=null,this.goalsLinkedGoals=null,this.aznbServerSideIntelliSense=null,this.lhWarehouseMode=null,this.lhDataSet=null,this.lhShortcuts=null,this.lhCsvToDelta=null,this.lhTableSchema=null,this.lhMergeViews=null,this.lhTablePreviewModes=null,this.lhDatasetCreateAction=null,this.lhOneLakeFriendlyNames=null,this.relevantMeasures=null,this.warehouseTDSEndpointButton=null,this.quickMeasureInitialSuggestions=null,this.subscribeButtonIcon_Test1=null,this.subscribeButtonText_Test3=null,this.scorecardHierarchiesPremium=null,this.advancedSubscriptionOptions_Test1=null,this.advancedSubscriptionOptions_Test2=null,this.dynamicFormatString=null,this.storytellingRecommendation=null,this.collapseGoalsByDefault=null,this.increaseAccessRequestV2_Test1=null,this.increaseAccessRequestV2_Test2=null,this.shouldDisableStreamingDataflowCreation=null,this.disableMatchingDatasourceObjectId=null,this.publishMissingPackageIdBugFix=null,this.favoritesListOrder=null,this.scorecardEmailSubscription=null,this.alignPBIHomeWithTrident=null,this.metricsHub=null,this.tridentInformationProtectionDSIUI_HEAD_DataProtection_FE=null,this.scorecardSplitColumns=null,this.scorecardListViewSettings=null,this.addVisualIdToQueryDataAsHttpBodyId=null,this.trackTasks=null,this.trackChangeDetection=null,this.trackBrowserRender=null,this.trackVisualZone=null,this.testExperimentationSwitch=null,this.homeLayoutSelection=null,this.loadRecommendationsForNewUsers=null,this.deferVCLoading=null,this.deferVCLoadingChangeSection=null,this.deferVCLoadingChangeSectionEmbed=null,this.deferVCLoadingEmbedOptions=null,this.deferVCLoadingMobile=null,this.deferCustomVCLoading=null,this.sessionExperimentation=null,this.lruCacheEvictionPolicy=null,this.onDemandApprovedResources=null,this.sectionApprovedResources=null,this.requestAccessNotif=null,this.requestAccessNotifV2=null,this.delayRenderComplete=null,this.deferExplorationStateCapture=null,this.operationalReportStringTest=null,this.exp_deferCustomVCLoading=null,this.exp_deferVCLoading=null,this.exp_deferVCLoadingChangeSection=null,this.exp_deferVCLoadingChangeSectionEmbed=null,this.exp_deferVCLoading_timeoutLimit=null,this.exp_deferVCLoading_preloadFinishThreshold=null,this.exp_deferVCLoading_loadFinishThreshold=null,this.exp_deferVCLoading_primeNonQueryVisualResources=null,this.exp_deferVCLoadingMobile=null,this.exp_noEmptyUpdate=null,this.exp_lruCacheEvictionPolicy=null,this.exp_saasReportIsAngularToThisPoint=null,this.exp_onDemandApprovedResources=null,this.exp_sectionApprovedResources=null,this.exp_deferExplorationStateCapture=null,this.exp_prefetchCustomVisualLicenses=null,this.MultivariantExpTest_VariantA=null,this.MultivariantExpTest_VariantB=null,this.control_MultivariantExpTest=null,this.IsolationGroupExpTest=null,this.control_IsolationGroupExpTest=null,this.serviceAppNewAppNavEditor=null,this.htmlLegend=null,this.allowAssigningTenantWorkspacesFromAzureCapacityAdmin=null,this.capacityMetricDrilldown=null,this.copyReportsToWorkspacesV2=null,this.allowFreeUsersToSubscribeInPremiumAppsUI=null,this.realTimeRefresh=null,this.realTimeRefreshDisabled=null,this.changeDetection=null,this.changeDetectionSimulation=null,this.externalConnectorSSO=null,this.tenantOutOfBoxVisualsEnabled=null,this.disablePublishToWebCreation=null,this.eimInformationProtectionColumnUISharedWithMe=null,this.eimInformationProtectionSccLink=null,this.ssasGetData=null,this.webModelingViewEnabled=null,this.persistDiagramLayoutEnabled=null,this.webModel_enableViews=null,this.WebModelingAdminSettings=null,this.newLookForAll=null,this.allowOldLookUI=null,this.yellowIntegrationOfPowerBI=null,this.newLookOnForNewUsers=null,this.analyzeInExcelOdcFallbackUI=null,this.analyzeInExcelToExcelOnline=null,this.irisCoreEnabled=null,this.esriEmbedEnabled=null,this.esriP2WEnabled=null,this.approvedServiceApps=null,this.redirectToStaticPageInTeams=null,this.quickMeasuresModern=null,this.eimInformationProtectionStoreOptimization=null,this.domains=null,this.domainDelegatedSettings=null,this.domainDelegatedCertifyDatasetsEnabled=null,this.domainsAdminNewBadge_HEAD_mesh_FE=null,this.lineageViewCertifiedEvents=null,this.navigateToDatasetDetails=null,this.accessRequestDatasetsUI=null,this.eimInformationProtectionRdlReportLabelingUI=null,this.consumePublicCvsWithoutRps=null,this.stopPublicRpsPopulation=null,this.datasetDetailsSidePaneDefaultOpenUI=null,this.discoverDatasetsUI=null,this.readonlyDatasetsUI=null,this.dlpPolicyTip=null,this.eimDlpPolicyTipsWithoutAngularJS=null,this.viewUIUpgrade_HEAD_Lineage_FE=null,this.relationsAddArtifacts_HEAD_Lineage_FE=null,this.lineageLayoutImprovements_HEAD_Lineage_FE=null,this.lineageCycleSupport_HEAD_Lineage_FE=null,this.tridentUpgrade_HEAD_ImpactAnalysis_FE=null,this.datahubCard=null,this.datasetDescriptionGetDatasetAPI=null,this.cdsaCCEmailContactsOnRefreshFailure=null,this.createRdlFromReportMenu=null,this.PinReportToTeamsTab=null,this.pinReportNavigateUsingDeepLink=null,this.showNewVisualsMarketplace=null,this.cesFeedbackTenantSetting=null,this.useNewDashboard=null,this.showNewVisualsMarketplacePBID=null,this.showAADSSOForGateway=null,this.showDremioSSO=null,this.chooseWorkspaceInReportSaveAs=null,this.datasetHubImpactAnalysis=null,this.ExportToExcelMatrixVisualData=null,this.showNonSdpInMP=null,this.accessInPlaceSharingDatasetSetting=null,this.dataflowEndorsementSettingsMigration=null,this.forceAdminPortalSurvey=null,this.textboxAtMention=null,this.multiRowCardSelection=null,this.datasetsInRecentPage=null,this.seeThruDatasetEditing=null,this.seeThruNameDatasetPickWorkspace=null,this.newManageDatasetForDatamartUI=null,this.metricsBoardView=null,this.workspaceAdminSubscriptions=null,this.showPinnedTile=null,this.datahubUnifyRecentAndAll=null,this.teamsShowAddComment=null,this.showAppBarInTeamsTabView=null,this.teamsNewTabExperience=null,this.modernEmbedDialogs=null,this.modernEmbedServices=null,this.modernP2WDialogs=null,this.goalsBulkEditing=null,this.privilegeWebAccess=null,this.privilegeLocalStorage=null,this.privilegeUX=null,this.leadsTesting=null,this.exp_newReportMetadataEndpoint=null,this.goalsHierarchies=null,this.goalsVisualSparklines=null,this.splitHelpTooltip=null,this.cvSkipExtraResize=null,this.workspaceAdminSubscriptionsSurvey=null,this.showInTeamsPivotInOfficeAndOutlook=null,this.supportQuickCreatePasteOrEnterDataInOfficeAndOutlook=null,this.powerPlatformSolutionsIntegration=null,this.allowPowerPlatformEnvironmentCrossRegion=null,this.searchAllDatahubTable=null,this.goalsTakeOverConnection=null,this.showPinReportIconInMetaOS=null,this.showExternalSharingTenant=null,this.showEnableDatasetInPlaceSharingTenant=null,this.EnforceSubscriptionExternalUsersTenantSwitchInBE=null,this.allowCVLocalStorageTenantSwitch=null,this.allowCVWebAccessTenantSwitch=null,this.privilegeExportContent=null,this.showGuestContentTab=null,this.requireCVPrivilegesTenantSwitch=null,this.CAEAuth=null,this.CustomVisualLicenses=null,this.ShowChatWithSales=null,this.showChatText=null,this.uploadFileUsingODSPFilePicker=null,this.useRootUrlFilePicker=null,this.easierHierarchicalAxis=null,this.goalsHubTileContextMenu=null,this.useNativePromiseForPbiPromise=null,this.exp_useNativePromiseForPbiPromise=null,this.useNativePromiseForPowerBIPromise=null,this.exp_useNativePromiseForPowerBIPromise=null,this.showEmailSubscriptionsToExternalUsersTenantSwitch=null,this.RdlInPro=null,this.rdlDrillthrough=null,this.MarketplaceLeads=null,this.smartNarrativeVisualContainterButton=null,this.deprecateGettingStarted=null,this.lakehouseShowTables=null,this.saveQueryAsView=null,this.datamartAutoRefresh=null,this.p2wInService=null,this.externalMigration=null,this.emUseCDN=null,this.emCVBundle=null,this.forceChatWidgetEnabled=null,this.tridentStageTwo=null,this.tridentStageTwoWithLabelNav=null,this.disableTridentStageTwoInTrident=null,this.newNavOverflow=null,this.prefetchCustomVisualLicenses=null,this.authDCParam=null,this.newTriggerForSatisfactionSurvey=null,this.optimizeTabRibbon=null,this.tridentArtifactAccess=null,this.pbiArtifactAccessInTridentStyle=null,this.enableSharePointListNameV2=null,this.customVisualsGradualExposure1=null,this.customVisualsGradualExposure2=null,this.customVisualsGradualExposure3=null,this.tridentRibbon=null,this.enableCompactViewMultiSelection=null,this.enableCVClientSideAuth=null,this.preloadDES=null,this.delegatedTenantSettings=null,this.tenantSettingVisualCue=null,this.allowCVAuthenticationTenantSwitch=null,this.visualContainerFontUpdateTrigger=null,this.openInADS=null,this.applyAllSlicersButton=null,this.tridentTrial=null,this.createArtifactWithTridentTrial=null,this.createWorkspaceWithTridentTrial=null,this.enableTridentUserSettings=null,this.tridentMessageBarShowPbiBarSwitch=null,this.convertConnectedWorkbookFFXL=null,this.executeSql=null,this.datamartPayloadParser=null,this.disableAdminCenterSupportPageLink=null,this.teamsMeetingExperiences=null,this.showNotificationsTabInGeneralUserSettings=null,this.dwPipeline=null,this.datamartModeling=null,this.aiNarrativesVisual=null,this.datamartIncrementalLoad=null,this.directLakeAutoSyncUI=null,this.tridentLegacyPanel=null,this.saveAsTable=null,this.datahubEmbedGenerateDsr_HEAD_DataHub_CompactView_Embed_FE=null,this.tridentStageFourBatchOne=null,this.tridentStageFourBatchTwo=null,this.disableLeavePageEnd=null,this.relatedArtifactSharing=null,this.newCard=null,this.esriVisualLeads=null,this.notebookNewPythonCompleter=null,this.tridentAlm_HomeOne=null,this.tridentAlm_SynapseNotebook=null,this.preventRepeatReportNavigationLong=null,this.preventRepeatReportNavigationShort=null,this.useExtensionsManifestsModule=null,this.useLegacyProductSwitcher=null,this.tridentHome=null,this.tridentPreloadEventStream=null,this.disableFabricAdminPortalTitle=null,this.measureDrivenDataLabels=null,this.scaleTooltipWithCanvasZoom=null,this.emailSubscriptionPaneV2=null,this.storytellingRecommendationAlgorithm=null,this.supportAnyWorkspaceFilter=null,this.dwDataflowGen2=null,this.disableTridentFeedbackButton=null,this.disableCommunityContentInHelpPane=null}})(powerbi=powerbi||{});;
"use strict";var powerbi,__awaiter=this&&this.__awaiter||function(e,a,s,c){return new(s=s||Promise)(function(r,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((c=c.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(n,o){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=o.call(n,c)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!(function(e){(e.common||(e.common={})).createLazyInjector=function(e,t,r,n){var o=new i(e,t,r,n,{});return function(e){return o.get(e)}},t.prototype.get=function(m){return __awaiter(this,void 0,e.Promise,(function(){var t,r,n,o,i,a,s,c,u,l,p,h,f,d,y=this;return __generator(this,(function(e){switch(e.label){case 0:if(void 0!==(t=this.instances[m]))return[2,t.promise];if(t=this.instances[m]=this.promiseFactory.defer(),r=this.factories[m],u=r.ng,d=_.size(u),p=r.modular,l=_.size(p),n=new Array(d+l),o=0,d)for(i=this.$inj,a=0,s=u;a<s.length;a++)c=s[a],n[o++]=i.get(c,m);if(!l)return[3,4];d=_.map(p,(function(e){return y.get(e)})),u=0,l=d,e.label=1;case 1:return u<l.length?(p=l[u],h=n,f=o++,[4,p]):[3,4];case 2:h[f]=e.sent(),e.label=3;case 3:return u++,[3,1];case 4:return[4,this.loader.require(r.source)];case 5:return d=e.sent(),t.resolve(r.fn.apply(r,__spreadArray([d],n||[],!1))),[2,t.promise]}}))}))};var i=t;function t(e,t,r,n,o){this.loader=e,this.promiseFactory=t,this.$inj=r,this.factories=n,this.instances=o}})(powerbi=powerbi||{}),(function(e){(e=(e=e.common||(e.common={})).LazyScopedInterop||(e.LazyScopedInterop={})).LegacyToModern="$$modern$$",e.ModernToLegacy="$$legacy$$",e.makeInteropServiceName=function(e,t){return t+e},e.isInteropServiceName=function(e,t){return 0===e.indexOf(t)},e.getInteropServiceName=function(e,t){return e.slice(t.length)}})(powerbi=powerbi||{}),(function(i){var e=i.common||(i.common={});function t(){var n=this;this.$get=["$ocLazyLoad","moduleLoader","promiseFactory",function(e,t,r){return n.hostEnv,new o(e,t,n.hostEnv,r)}]}e=e.services||(e.services={}),t.prototype.setHostEnv=function(e){this.hostEnv=e},e.PbiLazyLoadProvider=t,r.prototype.load=function(o){return __awaiter(this,void 0,i.Promise,(function(){var t,r,n;return __generator(this,(function(e){switch(e.label){case 0:return t=o.name,r=o.namespace,[4,this.moduleLoader.require(o.dependency)];case 1:return n=e.sent(),[4,this.isLoaded(t)];case 2:return e.sent()?[2,!1]:((n=_.isEmpty(r)||i.ModuleLoader.isModuleES6(o.dependency)?n:this.getNamespaceObject(r))&&n.registerBuildingBlocksForHost&&n.registerBuildingBlocksForHost(this.hostEnv),[4,this.$ocLazyLoad.inject(t)]);case 3:return e.sent(),[2,!0]}}))}))},r.prototype.isLoaded=function(e){var t=this.$ocLazyLoad.getModules();return this.promiseFactory.resolve(_.includes(t,e))},r.prototype.getNamespaceObject=function(e){for(var e=e.split("."),t=window,r=0,n=e;r<n.length;r++)t=t[n[r]];return t};var o=r;function r(e,t,r,n){this.$ocLazyLoad=e,this.moduleLoader=t,this.hostEnv=r,this.promiseFactory=n}})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(e){var l,r;e=e.common||(e.common={}),(l=e.HostModalDialogServices||(e.HostModalDialogServices={})).AvailableScopedServices=["itemPicker","dataSources","eventBridge","explorationNavigation","explorationCapabilities","groupAuthoring","groupingDesignStateService","lazyScoped","modelAuthoring","modelChangeHandler","schemaItemActivation","selection","shell","visualAuthoring","visualPlugin"],l.AvailableAngularServices=["aggrOps","commandStore","conceptualSchemaProxy","highContrastCssGenerationService","displayNameService","dragDataService","dropdown","errorService","explorationSerializer","featureSwitchService","fileSaver","highlight","lazy","localizationService","checkUnsavedService","modalDialogService","promiseFactory","screenReaderService","svgProvider","telemetryService","tooltipService","visualPlugin","hostTooltip"],r="HostModalDialogScopeIdentifier",l.createHostModalDialogScope=function(e){return(e=e.$new(!0))[r]=!0,e},l.validateHostModalDialogServices=function(e,o,i){if(window.DEBUG)for(o=o||[],i=i||[];e;){var t,a;if(e[r])return t=_.filter(o,(function(e){return!(_.startsWith(e,"$")||_.includes(l.AvailableAngularServices,e))})),a=_.filter(i,(function(e){return!_.includes(l.AvailableScopedServices,e)})),_.isEmpty(t),t.join(","),_.isEmpty(a),void a.join(",");e=e.$parent}}})(powerbi=powerbi||{}),(function(g){var n=g.common||(g.common={}),o=jsCommon.ModalDialog,s=(n.createModalDialogService=function(e,o,i,t,a,l,r,n){return new s(e,o,i,t,a,l,r,n)},d.prototype.showWebModalDialog=function(e){return this.showDialogWithPromise(this.rootScope.$new(!0),e)},d.prototype.showHostModalDialog=function(e){var o=n.HostModalDialogServices.createHostModalDialogScope(this.rootScope);if(!this.isModernDialog(e))return e.bindings&&(e.bindings=JSON.parse(JSON.stringify(e.bindings))),this.showDialogWithPromise(o,e,!0)},d.prototype.isModernDialog=function(e){return void 0!==e.componentName},d.prototype.close=function(e){this.componentDialogTaskStack.length,this.componentDialogTaskStack.length;var o=this.componentDialogTaskStack.pop();return o&&o.resolve(e),this.promiseFactory.resolve()},d.getModalDialog=function(e){return d.modalDialog=d.modalDialog?d.modalDialog:new o(null,e)},d.errorServiceModalDialogControl=function(e){return d.getModalDialog(e)},d.prototype.showLegacyWebModalDialog=function(o){var i=this,e=(!o.template&&o.templateUrl,o.template||this.templateCacheService.get(o.templateUrl)),t=o.dialogActions||[],a=this.promiseFactory.defer(),l=angular.extend(o.scope,{closeDialog:_.noop,onDialogDisplayed:a.promise}),r=this.compileService(e)(l);return this.timeoutService((function(){i.modalDialog.showCustomDialog(o.dialogName,r,t,(function(e){return i.onDialogDisplayed(e,o,l,a)}),o.isDismissable,o.focusOnFirstButton,o.dialogCssClass,o.containerCssClass,(function(){return i.onDialogClosed(l,o.onCloseDialog)}),o.notificationType,o.notificationText,o.noActiveButtons,o.htmlMessageText,o.flipContentAndNotificationOrder,void 0,o.closeOnEsc)})),this.promiseFactory.resolve(l)},d.prototype.onDialogDisplayed=function(e,o,i,t){function a(){return r.draggable({containment:"parent",handle:d.modalDialogDragHandleSelector})}var l=this,i=(i.closeDialog=function(){return l.modalDialog.hideDialog()},t.resolve(null),e.find("button[autofocus]")),r=(_.some(i)&&i.focus(),e.closest(d.modalDialogSelector));r.draggable?a():this.moduleLoader.require(n.modules.JQueryUIModule).then(a),window.DEBUG&&(r.find("dialog-frame").length,o.containerCssClass)},d.prototype.onDialogClosed=function(e,o){e.$destroy(),o&&o()},d.prototype.showDialogWithPromise=function(o,i,t){var a=this,l=this.promiseFactory.defer();if(0!==this.componentDialogTaskStack.length)this.telemetryService.logEvent(g.telemetry.ShowModalDialogSkippedNestedDialogs,{dialogName:i.dialogName}),l.reject("nested dialogs is not yet implemented.");else{var e=function(){var e;0!==a.componentDialogTaskStack.length?(a.telemetryService.logEvent(g.telemetry.ShowModalDialogSkippedNestedDialogs,{dialogName:i.dialogName}),l.reject("nested dialogs is not yet implemented.")):(_.assign(o,i.bindings),e=a.templateCacheService.get(i.definitionTemplateCachePath),e={scope:o,dialogName:i.dialogTitle,template:e=t?"<legacy-scoped-root><exploration-scoped-services-bridge><host-dialog-container>"+e+"</host-dialog-container></exploration-scoped-services-bridge></legacy-scoped-root>":e,onCloseDialog:function(){_.includes(a.componentDialogTaskStack,l)&&a.close()},dialogCssClass:i.dialogCssClass,containerCssClass:d.componentDialogHostCssClass,isDismissable:null==i.isDismissable||i.isDismissable},a.showLegacyWebModalDialog(e).then((function(e){var o;a.componentDialogTaskStack.push(l),l.promise.catch((function(e){a.telemetryService.logEvent(g.telemetry.ShowModalDialogRejected,{dialogName:i.dialogName,rejectReason:JSON.stringify(e)}),_.includes(a.componentDialogTaskStack,l)&&a.close(void 0)})).finally((function(){e.closeDialog()})),t||(o=i).onDialogDisplayed&&e.onDialogDisplayed.then((function(){return o.onDialogDisplayed.resolve(null)}))})))},r=[];if(i.lazyModuleDependencies){for(var n=0,s=i.lazyModuleDependencies;n<s.length;n++){var c=s[n];r.push(this.pbiLazyLoad.load(c))}this.promiseFactory.all(r).then(e)}else e()}return g.createRejectablePromise(l)},d.modalDialogSelector=".infonav-modalDialog",d.modalDialogTitleSelector=".infonav-dialogTitle",d.componentDialogHostCssClass="componentDialog",d.modalDialogDragHandleSelector=d.modalDialogTitleSelector+", "+(d.dialogFrameDragHandleSelector="dialog-frame .frameDragHandle"),d);function d(e,o,i,t,a,l,r,n){this.compileService=e,this.pbiLazyLoad=o,this.promiseFactory=i,this.templateCacheService=t,this.timeoutService=a,this.rootScope=l,this.telemetryService=r,this.moduleLoader=n,this.modalDialog=d.getModalDialog(),this.componentDialogTaskStack=[]}n.ModalDialogService=s})(powerbi=powerbi||{}),(function(o){var i=o.telemetry||(o.telemetry={}),e=jsCommon.Utility,t=o.telemetryEventFactory,a=o.telemetry.EventFactories;e?e.generateGuid:Function.prototype,i.ShowModalDialogRejectedEventName="PBI.ShowModalDialogRejected",i.ShowModalDialogRejected=a[i.ShowModalDialogRejectedEventName]=function(e){return t({name:i.ShowModalDialogRejectedEventName,info:e,category:o.TelemetryCategory.CriticalError,loggers:i.ShowModalDialogRejectedLoggers})},i.ShowModalDialogSkippedNestedDialogsEventName="PBI.ShowModalDialogSkippedNestedDialogs",i.ShowModalDialogSkippedNestedDialogs=a[i.ShowModalDialogSkippedNestedDialogsEventName]=function(e){return t({name:i.ShowModalDialogSkippedNestedDialogsEventName,info:e,category:o.TelemetryCategory.CriticalError,loggers:i.ShowModalDialogSkippedNestedDialogsLoggers})},i.TriggerRefreshEventName="PBI.TriggerRefresh",i.TriggerRefresh=a[i.TriggerRefreshEventName]=function(e){return t({name:i.TriggerRefreshEventName,baseEvent:i.BaseEvent(e),info:e,loggers:i.TriggerRefreshLoggers})}})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(n){(n.common||(n.common={})).createChannelSubscriptionManager=function(n){return new e(n)},t.prototype.subscribe=function(n,e){n=this.subscribeFunction(n,e);return n&&$.isFunction(n)&&this.unsubscribeList.push(n),this},t.prototype.subscribeAsync=function(n,t){return this.subscribe(n,(function(n,e){n=t(n,e);e.promises&&n&&e.promises.push(n)}))},t.prototype.unsubscribeAll=function(){var n=-1,e=this.unsubscribeList.length;if(e){for(n=e;e;)this.unsubscribeList[--e]();this.unsubscribeList.splice(0,n)}return n};var e=t;function t(n){this.subscribeFunction=n,this.unsubscribeList=[]}})(powerbi=powerbi||{}),(function(r){var n=r.common||(r.common={}),e=(n.createEventBridge=function(){return new e},t.prototype.getChannel=function(n){return this.getOrCreateChannel(n,!0)},t.prototype.getOrCreateChannel=function(n,e){var t=this.channelMap[n];if(!t){if(!e)return;this.channelMap[n]=t={}}return $(t)},t.prototype.createChannelSubscriptionManager=function(){var t=this;return n.createChannelSubscriptionManager((function(n,e){return t.subscribeToChannel(n,e)}))},t.prototype.subscribeToChannel=function(n,e){function t(){$(r).off(n.name,null,e)}var r=this.getChannel(n.type);return t(),$(r).on(n.name,{},e),t},t.prototype.publishToChannel=function(n,e){var t=this.getOrCreateChannel(n.type,!1);t&&t.trigger(n.name,e)},t.prototype.publishToChannelAsync=function(n,e){var t=[];return e.promises=t,this.publishToChannel(n,e),e.promises=void 0,r.Promise.allSettled(t)},t);function t(){this.channelMap={}}})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(t){var e,a;(e=(e=t.common||(t.common={})).constants||(e.constants={})).activityId="ActivityId",e.requestId="RequestId",e.mwcRootActivityId="x-ms-root-activity-id",e.http="http",e.uploadFileSizeHeaderName="X-PowerBI-UploadFileSize",e.previousTenantIdHeaderName="X-PowerBI-User-PreviousTenantId",e.refreshAccessToken="refreshAccessToken",e.localFileSelectedEventName="localFileSelected",e.chooseLocalFileEventName="chooseLocalFile",e.localFileRemoveEventName="localFileRemove",e.liveClientIdKey="LiveClientId",e.liveLogoutUrl="https://login.live.com/oauth20_logout.srf?client_id={0}&redirect_uri={1}/providers/excel/msaRedirect?logout=1",e.loadExcelWorkbookEventName="loadExcelWorkbook",e.textInputOnBlurEventName="textInputOnBlur",e.dashboardTileRepeatFinishedEvent="dashboardTileRepeatFinished",e.azureCapacityPivot="azure",e.officeCapacityPivot="office",e.trialCapacityPivot="trial",e.dcCapacityPivot="dc",e.defaultPortraitPrintWidth=673,e.defaultPortraitPrintHeight=860,e.defaultLandscapePrintWidth=940,e.defaultLandscapePrintHeight=578,(a=e.tileActions||(e.tileActions={})).openReportActionName="/openReport",a.openWorkbookActionName="/openWorkbook",a.openQnAActionName="/openQnA",a.openInFocusActionName="/openInFocus",a.openInsightsActionName="/openInsights",(a.custom||(a.custom={})).openUrlActionName="/openUrl",e.OverlayCloseEventName="overlay.close",e.tagName="tagName",e.myWorkspaceFolderId="me",e.RDataSourceName="R",e.onPremiseVSName="sobe_onpremisevirtualserver",e.previewHomeKey="previewHome",e.previewSettingChangedEventName="previewSettingChanged",e.HideIntroduceAppBarKey="hideIntroduceAppBar",(a=e.navigation||(e.navigation={})).stateChangeStart="$stateChangeStart",a.stateChangeSuccess="$stateChangeSuccess",a.locationChangeStart="$locationChangeStart",a.getDataDirectQueryUrlParams="server&database&user&dsid",a.spoImportUrlParams="personalUrl&name&listId&documentId&resourceId",a.getDataMashupUrlParams="paramsCode",a.getDataForceConnect="getDataForceConnect",a.bookmarkQueryParamName="bookmarkGuid",a.bookmarkUsageQueryParamName="bookmarkUsage",a.pivotParamName="pivot",a.saasMarketplaceParamName="saasMarketplace",a.selectedQueryIdParamName="selectedQueryId",a.gatewayObjectIdParamName="gatewayObjectId",a.dataSourceObjectIdParamName="dataSourceObjectId",(a=a.states||(a.states={})).appDashboardSubscription="landing.groups.group.apps.app.dashboards.dashboard.subscriptions.subscription",a.appDashboardSubscriptions="landing.groups.group.apps.app.dashboards.dashboard.subscriptions",a.appReports="landing.groups.group.apps.app.reports",a.appReport="landing.groups.group.apps.app.reports.report",a.appReportPage="landing.groups.group.apps.app.reports.report.page",a.appReportSubscription="landing.groups.group.apps.app.reports.report.page.subscription",a.appRdlReports="landing.groups.group.apps.app.rdlReports",a.appRdlReport="landing.groups.group.apps.app.rdlReports.rdlReport",a.appRdlReportSubscription="landing.groups.group.apps.app.rdlReports.rdlReport.subscription",a.appWorkbooks="landing.groups.group.apps.app.workbooks",a.appWorkbook="landing.groups.group.apps.app.workbooks.workbook",a.appInstanceReports="landing.groups.group.apps.app.instances.instance.reports",a.appInstanceReport="landing.groups.group.apps.app.instances.instance.reports.report",a.appInstanceReportPage="landing.groups.group.apps.app.instances.instance.reports.report.page",a.dashboardSubscription="landing.groups.group.dashboards.dashboard.subscriptions.subscription",a.dashboardSubscriptions="landing.groups.group.dashboards.dashboard.subscriptions",a.datasets="landing.groups.group.datasets",a.dataset="landing.groups.group.datasets.dataset",a.modeling="landing.groups.group.modeling",a.model="landing.groups.group.modeling.model",a.permissionCenter="landing.groups.group.permissionCenter",a.dashboardPermission="landing.groups.group.permissionCenter.dashboard",a.datasetPermission="landing.groups.group.permissionCenter.dataset",a.reportPermission="landing.groups.group.permissionCenter.report",a.workbookPermission="landing.groups.group.permissionCenter.workbook",a.reports="landing.groups.group.reports",a.report="landing.groups.group.reports.report",a.reportPage="landing.groups.group.reports.report.page",a.reportShare="landing.groups.group.reports.report.page.share",a.reportSubscription="landing.groups.group.reports.report.page.subscription",a.reportSubscriptions="landing.groups.group.reports.report.page.subscriptions",a.relatedContent="landing.groups.group.reports.report.page.relatedContent",a.sharedReports="landing.groups.group.sharedWithMe.reports",a.sharedReport="landing.groups.group.sharedWithMe.reports.report",a.sharedReportPage="landing.groups.group.sharedWithMe.reports.report.page",a.workbooks="landing.groups.group.workbooks",a.workbook="landing.groups.group.workbooks.workbook",e.contractRowProtocolThreshold=50,e.datasetShowDatasourceUpdatedNotification="datasetShowDatasourceUpdatedNotification",e.datasetDatasourceUpdated="datasetDatasourceUpdated",e.datasetDatasourceUpdatedEvent={name:"datasetDatasourceUpdated",type:4},e.scopeDestroyEventName="$destroy",e.preparingPackageRefreshNotificationDuration=3e4,e.packageRefreshNotificationDuration=3e5,e.showManagePermissionEventName="showManagePermission",e.defaultPopupWindowWidth=980,e.defaultPopupWindowHeight=640,e.datasetShowAuthDialog="datasetShowAuthDialog",e.datasetShowAuthDialogEvent={name:"datasetShowAuthDialog",type:4},e.datasetShowParameterDialogAfterInvalidParameter="datasetShowParameterDialogAfterInvalidParameter",e.datasetShowParameterDialogAfterInvalidParameterEvent={name:"datasetShowParameterDialogAfterInvalidParameter",type:4},e.ContentProviderInvalidModelParameterErrorCode="ContentProvider_InvalidModelParameter",e.pinReportPageToDashboard="pinReportPageToDashboard",e.allWeekDays=127,e.maxRefreshTimeNumber=8,e.maxRefreshTimeNumberForDatasetsInCapacity=48,e.numToastLinksToShow=2,e.enterPrintModeEvent="enterPrintModeEvent",e.exitPrintModeEvent="exitPrintModeEvent",e.database="Database",e.server="Server",e.errorCode="ErrorCode",e.time="Time",e.version="Version",e.tileErrorEventName="tileError",(a=e.serverErrors||(e.serverErrors={})).packageOperationInProgress="PackageOperationInProgress",a.dataRefreshTooSoon="DataRefreshTooSoon",a.onPremiseServiceException="OnPremiseServiceException",e.cloudRLSAccessDeniedErrorCode="CloudRLSAccessDeniedErrorCode",a=location,e.hostOrigin=a.origin||location.protocol+"//"+location.hostname,e.contentProviderStoreTileListRefreshEventName="contentProviderStoreTileListRefresh",e.contentProviderStoreConnectEventName="contentProviderStoreConnect",e.contentProviderStoreConfigurationUIVisibilityChangedEventName="contentProviderStoreConfigurationUIVisibilityChanged",e.contentProviderStoreMashupContentProviderLoadedMessage="contentProviderStoreMashupContentProviderLoadedMessage",e.contentProviderStoreCancelModalDialogMessage="contentProviderStoreCancelModalDialogMessage",e.contentProviderStoreCloseModalDialogMessage="contentProviderStoreCloseModalDialogMessage",e.contentProviderStoreGoBackModalDialogMessage="contentProviderStoreGoBackModalDialogMessage",e.contentProviderStoreGoToAppDocModalDialogMessage="contentProviderStoreGoToAppDocModalDialogMessage",e.contentProviderStoreShowLoadNotificationMessage="contentProviderStoreShowLoadNotificationMessage",e.contentProviderStoreHideLoadNotificationMessage="contentProviderStoreHideLoadNotificationMessage",e.contentProviderStoreRenderAsModalDialogMode="renderAsModalDialog",e.contentProviderStoreRenderAsFullScreenMode="renderAsFullScreen",e.contentProviderStoreTileMaxSortPriority=999,e.contentProviderStoreCustomConfigurationService="customConfigurationService",e.contentProviderStoreAuthorizationCodePostbackEventName="authorizationCodePostback",e.contentProviderStoreCustomConfigurationPostbackEventName="customConfigurationPostback",e.excelContentProviderId=6,e.pbiDesktopContentProviderId=7,e.pbiModelingServiceContentProviderId=26,e.fileUploadLimitInByte=262144e3,e.oneGBFileUploadLimitInByte=1073741824,e.retailSamplesContentProviderId=22,e.personalOneDriveContentProviderId=1001,e.oneDriveProContentProviderId=1002,e.groupOneDriveContentProviderId=1004,e.folderPreferredSharePointProviderId=1006,e.generatedSamplesContentProvidersMap={22:"Retail Sales Analysis"},e.emailsListFindUsersLimit=10,e.AdminPortalGroupGUID="PowerBIAdminGroup",e.MaxSupportedZIndexValue=2147483647,(a=e.featureSwitches||(e.featureSwitches={})).microsoftOrgAppEnabled="microsoftOrgAppEnabled",a.withInDXTFeatureSwitchEnabled="withinDXT",a.contentProviderSharePointDocumentLibrariesEnabled="sharePointDocumentLibrariesEnabled",a.vsoVnextAppEnabled="vsoVnextAppEnabled",a.sparkAppEnabled="sparkAppEnabled",a.psaPracticeManagerAppEnabled="psaPracticeManagerAppEnabled",a.anonymousEmbeddingEnabled="anonymousEmbeddingEnabled",a.psaResourceManagerAppEnabled="psaResourceManagerAppEnabled",a.psaAccountManagerAppEnabled="psaAccountManagerAppEnabled",a.azureUsageAndBillingAppEnabled="azureUsageAndBillingAppEnabled",a.bingAdsAppEnabled="bingAdsAppEnabled",a.workspacesV2GAFeatures="workspacesV2GAFeatures",e.clusterLocations={Cluster_Location_EastUS2:["wabi-us-east2","wabi-paas-1-backup-eus2","wabi-us-east2-a-backup","wabi-us-east2-b-primary","wabi-us-east2-c-primary","wabi-us-east2-b-backup"],Cluster_Location_EastUS:["wabi-us-east","wabi-us-east-a-primary","wabi-us-east-b-backup","wabi-us-east-c-backup","wabi-us-east-backup","wabi-us-east-b-primary","wabi-us-east-d-backup","wabi-us-east-f-backup"],Cluster_Location_NorthCentralUS:["wabi-us-north-central","wabi-us-north-central-b-backup","wabi-us-north-central-c-primary","wabi-us-north-central-d-primary","wabi-us-north-central-e-primary","wabi-us-north-central-f-primary","wabi-us-north-central-g-primary","wabi-us-north-central-h-primary","wabi-us-north-central-backup","wabi-us-north-central-j-primary"],Cluster_Location_SouthCentralUS:["wabi-south-central-us","wabi-south-central-us-b-primary","wabi-us-south-central-backup","wabi-paas-1-scus","wabi-us-south-central-c-backup","wabi-us-south-central-d-backup","wabi-us-south-central-e-backup","wabi-us-south-central-f-backup","wabi-us-south-central-g-backup","wabi-us-south-central-h-backup","wabi-us-south-central-i-backup","wabi-us-south-central-j-backup","wabi-us-south-central-a-backup"],Cluster_Location_WestUS3:["wabi-west-us3-a-primary"],Cluster_Location_WestUS:["wabi-west-us","wabi-tip-west-us","df-msit-wus","wabi-us-west-a-backup","wabi-west-us-b-primary","wabi-west-us-c-primary","wabi-west-us-d-primary","wabi-us-west-b-backup"],Cluster_Location_EastAsia:["wabi-east-asia-a-primary","wabi-east-asia","wabi-east-asia-b-backup","wabi-east-asia-b-primary","wabi-east-asia-c-backup"],Cluster_Location_WestUS2:["wabi-us-west2"],Cluster_Location_NorthEurope:["wabi-north-europe","wabi-europe-north2","wabi-europe-north-b","wabi-north-europe-b-backup","wabi-north-europe-c-primary","wabi-north-europe-d-backup","wabi-north-europe-d-primary","wabi-north-europe-e-primary","wabi-north-europe-f-primary","wabi-north-europe-g-primary","wabi-north-europe-h-primary","wabi-north-europe-i-primary","wabi-north-europe-j-primary","wabi-north-europe-k-primary","wabi-north-europe-l-primary","wabi-north-europe-e-backup","wabi-north-europe-m-primary","wabi-north-europe-n-primary","wabi-north-europe-o-primary","wabi-north-europe-p-primary","wabi-north-europe-q-primary"],Cluster_Location_WestEurope:["wabi-west-europe","wabi-europe-west2","wabi-west-europe-b-primary","wabi-west-europe-c-backup","wabi-west-europe-d-primary","wabi-west-europe-d-backup","wabi-west-europe-e-backup","wabi-west-europe-f-backup","wabi-west-europe-g-backup","wabi-west-europe-h-backup","wabi-west-europe-i-backup","wabi-west-europe-j-backup","wabi-west-europe-k-backup","wabi-west-europe-l-backup","wabi-west-europe-e-primary","wabi-west-europe-m-backup","wabi-west-europe-n-backup","wabi-west-europe-o-backup","wabi-west-europe-p-backup","wabi-west-europe-q-backup"],Cluster_Location_SoutheastAsia:["wabi-south-east-asia","wabi-southeast-asia-a-backup","wabi-south-east-asia-b-primary","wabi-singapore-a-primary","wabi-singapore-a-backup","wabi-southeast-asia-b-backup"],Cluster_Location_AustraliaEast:["wabi-australia-east","wabi-australia-east-a-primary","wabi-australia-east-b-backup","wabi-australia-east-b-primary"],Cluster_Location_AustraliaSouthEast:["wabi-australia-southeast","wabi-australia-southeast-a-backup","wabi-australia-southeast-b-primary","wabi-australia-southeast-b-backup","wabi-australia-southeast-c-primary"],Cluster_Location_BrazilSouth:["wabi-brazil-south","wabi-brazil-south-b-primary","wabi-brazil-south-c-primary","wabi-brazil-south-c-backup"],Cluster_Location_BrazilSoutheast:["wabi-brazil-southeast-backup","wabi-brazil-southeast-b-backup"],Cluster_Location_CentralUSEUAP:["wabi-staging-us-east"],Cluster_Location_Staging:["wabi-staging-a7","wabi-staging"],Cluster_Location_Integration_Edog:["biazure-int-edog"],Cluster_Location_Integration_Int3:["bi-azure-int3"],Cluster_Location_CanadaCentral:["wabi-canada-central","wabi-canada-central-b-primary"],Cluster_Location_CanadaEast:["wabi-canada-east-backup","wabi-canada-east-b-backup"],Cluster_Location_JapanEast:["wabi-japan-east"],Cluster_Location_UKSouth:["wabi-uk-south","wabi-uk-south-b-primary","wabi-uk-south-c-primary"],Cluster_Location_UKWest:["wabi-uk-west-backup","wabi-uk-west-b-backup","wabi-uk-west-c-backup"],Cluster_Location_GermanyCentral:["wabi-germany-central"],Cluster_Location_GermanyNortheast:["wabi-germany-northeast"],Cluster_Location_ChinaEast:["wabi-mc-sha"],Cluster_Location_ChinaNorth:["wabi-mc-bjb"],Cluster_Location_WestIndia:["wabi-india-west","wabi-india-west-a-backup"],Cluster_Location_WestCentralUS:["df-msit-scus"],Cluster_Location_USGCCTexas:["wabi-us-gov-iowa"],Cluster_Location_USGCCVirginia:["wabi-us-gov-virginia"],Cluster_Location_USGCCHighTexas:["wabi-us-gov-tb-texas"],Cluster_Location_USDoDCentral:["wabi-us-dod-iowa"],Cluster_Location_CentralUS:["wabi-us-central-a-primary","wabi-us-central-b-backup","wabi-us-central-c-backup","wabi-us-central-backup","wabi-us-central-b-primary"],Cluster_Location_CentralIndia:["wabi-india-central-a-primary"],Cluster_Location_SouthIndia:["wabi-india-south-backup","wabi-india-south-a-backup"],Cluster_Location_KoreaCentral:["wabi-korea-central-a-primary"],Cluster_Location_KoreaSouth:["wabi-korea-south-a-backup"],Cluster_Location_FranceCentral:["wabi-france-central-a-primary"],Cluster_Location_FranceSouth:["wabi-france-south-a-backup"],Cluster_Location_ChinaEast2:["wabi-mc-east2-a-primary"],Cluster_Location_ChinaNorth2:["wabi-mc-north2-a-backup"],Cluster_Location_ChinaEast3:["wabi-mc-east3-a-backup"],Cluster_Location_ChinaNorth3:["wabi-mc-north3-a-primary"],Cluster_Location_EastUS2EUAP:["wabi-dxt-bcdr-us-east2"],Cluster_Location_SouthAfricaNorth:["wabi-south-africa-north-a-primary"],Cluster_Location_SouthAfricaWest:["wabi-south-africa-west-a-backup"],Cluster_Location_UAENorth:["wabi-uae-north-a-primary"],Cluster_Location_UAECentral:["wabi-uae-central-a-backup"],Cluster_Location_GermanyWestCentral:["wabi-germany-west-central-primary"],Cluster_Location_GermanyNorth:["wabi-germany-north-backup"],Cluster_Location_SwitzerlandNorth:["wabi-switzerland-north-primary"],Cluster_Location_SwitzerlandWest:["wabi-switzerland-west-backup"],Cluster_Location_NorwayEast:["wabi-norway-east-primary"],Cluster_Location_NorwayWest:["wabi-norway-west-backup"],Cluster_Location_SwedenCentral:["wabi-sweden-central-primary"],Cluster_Location_SwedenSouth:["wabi-sweden-south-backup"],Cluster_Location_Qatarcentral:["wabi-qatar-central-a-primary","wabi-qatar-central-a-backup"]},e.clusterBackendUri=[{backendUri:void 0,hostNameMatch:["invalidHostName"],index:0},{backendUri:"https://wabi-us-east2-redirect.analysis.windows.net",hostNameMatch:["wabi-us-east2"],index:1},{backendUri:"https://wabi-us-east-redirect.analysis.windows.net",hostNameMatch:["wabi-us-east","wabi-staging-us-east"],index:2},{backendUri:"https://wabi-us-north-central-redirect.analysis.windows.net",hostNameMatch:["wabi-us-north-central"],index:3},{backendUri:"https://wabi-south-central-us-redirect.analysis.windows.net",hostNameMatch:["wabi-south-central-us","wabi-us-south-central-backup"],index:4},{backendUri:"https://df-msit-scus-redirect.analysis.windows.net",hostNameMatch:["df-msit-scus"],index:5},{backendUri:"https://wabi-west-us-redirect.analysis.windows.net",hostNameMatch:["wabi-west-us","wabi-tip-west-us"],index:6},{backendUri:"https://df-msit-wus-redirect.analysis.windows.net",hostNameMatch:["df-msit-wus"],index:7},{backendUri:"https://wabi-north-europe-redirect.analysis.windows.net",hostNameMatch:["wabi-north-europe","wabi-europe-north2","wabi-europe-north-b"],index:8},{backendUri:"https://wabi-west-europe-redirect.analysis.windows.net",hostNameMatch:["wabi-west-europe","wabi-europe-west2"],index:9},{backendUri:"https://wabi-south-east-asia-redirect.analysis.windows.net",hostNameMatch:["wabi-south-east-asia","wabi-east-asia"],index:10},{backendUri:"https://wabi-staging-a7-redirect.analysis.windows.net",hostNameMatch:["wabi-staging-a7"],index:11},{backendUri:"https://biazure-int-edog-redirect.analysis-df.windows.net",hostNameMatch:["biazure-int-edog","bi-azure-int3"],index:12}],e.dsrDataReaderType="dsr",(a=e.ServiceNames||(e.ServiceNames={})).cacheService="CacheService",a.StandaloneHostProgressNotificationService="StandaloneHostProgressNotificationService",(a=e.CacheServiceOperationNames||(e.CacheServiceOperationNames={})).loadItem="Load",a.saveItem="Save",(a=e.ExploreGestures||(e.ExploreGestures={})).swipeStartEvent="swipestart",a.swipeMoveEvent="swipemove",a.swipeEndEvent="swipeend",(a=e.VisualType||(e.VisualType={})).card="card",a.kpi="kpi",e.dashboardSelector=".dashboard",e.tileContainerSelector=".tileContainer",e.needStrategySwapEventName="needStrategySwap",e.PhoneVersionMessage={confirmButtonMessage:"ModalDialogButtonText_Continue",titleMessage:"Create_Mobile_Authoring",contentMessage:"Create_Mobile_Authoring_Content",hrefLink:"https://powerbi.microsoft.com/en-us/documentation/powerbi-service-create-dashboard-phone-view/",hrefLabel:"LearnMore"},e.ResetPhoneViewMessages={confirmButtonMessage:"Reset",titleMessage:"Dashboard_Authoring_Reset_Phone_View",contentMessage:"Dashboard_Authoring_Reset_Mobile_Layout_Content"},e.ResetTilesMessages={confirmButtonMessage:"Reset",titleMessage:"Dashboard_Authoring_Reset_Tiles",contentMessage:"Dashboard_Authoring_Reset_Tiles_Content"},e.UnpinAllTilesMessages={confirmButtonMessage:"Dashboard_Authoring_Unpin_All_Tiles_Confirm",titleMessage:"Dashboard_Authoring_Unpin_All_Tiles",contentMessage:"Dashboard_Authoring_Unpin_All_Tiles_Content"},e.isUsageMetricsPackage=function(e){var a=e.contentProviderId;return 103===a||102===a||e.packageType===t.common.contracts.PackageType.UsageMetricsV2},e.isScorecardPackage=function(e){return(null==e?void 0:e.packageType)===t.common.contracts.PackageType.Scorecard},e.isScorecardSourceReport=function(e){return(null==e?void 0:e.originalPackageType)===t.common.contracts.PackageType.Scorecard},e.isLegacyUsageMetricsContentProvider=function(e){return 103===e||102===e},e.isDatamartPackage=function(e){return(null==e?void 0:e.packageType)===t.common.contracts.PackageType.Datamart},e.isSeeThruModelPackage=function(e){return(null==e?void 0:e.packageType)===t.common.contracts.PackageType.SeeThruModel},e.FreeTrialPeriod=60,(a=e.invitation||(e.invitation={})).invitationCodeQueryParam="invitationCode",a.invitationCodeQueryParamV2="i",a.invitationClaimed="invitationClaimed",e.EmptyGuid="00000000-0000-0000-0000-000000000000",e.MaxInt32=2147483647,e.SampleReportsContentProviderIds=[22,43,44,45,46,47,48,49]})(powerbi=powerbi||{}),(function(e){var a;(e=(e=e.common||(e.common={})).contracts||(e.contracts={})).freeUserServicePlans=["PowerBIServicePlan0"],e.premiumUserServicePlans=["PowerBIServicePlan1","PowerBIServicePlan2","PowerBIServicePlan3"],e.proPlusUserServicePlans=["PowerBIServicePlan3"],e.office365ServicePlans=["PowerBIServicePlan1"],e.proUserServicePlans=["PowerBIServicePlan1","PowerBIServicePlan2"],(a=e.PackageType||(e.PackageType={}))[a.Undefined=0]="Undefined",a[a.AppTemplate=1]="AppTemplate",a[a.AppInstance=2]="AppInstance",a[a.AppCopy=3]="AppCopy",a[a.UsageMetricsV2=4]="UsageMetricsV2",a[a.ProtectionMetrics=5]="ProtectionMetrics",a[a.AdminUsageMetrics=6]="AdminUsageMetrics",a[a.AdminPerformanceMetrics=7]="AdminPerformanceMetrics",a[a.Sample=8]="Sample",a[a.Scorecard=9]="Scorecard",a[a.TeamsAnalytics=10]="TeamsAnalytics",a[a.Datamart=11]="Datamart",a[a.AuditLogSearch=12]="AuditLogSearch",a[a.AuditLogSearchDataflow=13]="AuditLogSearchDataflow",a[a.AdminInsightsUsageMetrics=14]="AdminInsightsUsageMetrics",a[a.AdminInsights=15]="AdminInsights",a[a.SeeThruModel=16]="SeeThruModel",(a=e.ContentProviderCategoryString||(e.ContentProviderCategoryString={})).None="",a.BuiltIn="BuiltIn",a.Organizational="Organizational",a.Services="Services",a.OrganizationalTemplate="OrganizationalTemplate",a.OrganizationalApp="OrganizationalApp",a.ServiceApp="ServiceApp",a.OrganizationalTemplateApp="OrganizationalTemplateApp",a.PowerBIServiceApp="PowerBIServiceApp",(a=e.ContentProviderClientCategory||(e.ContentProviderClientCategory={}))[a.Service=1]="Service",a[a.Organizational=2]="Organizational",a[a.File=3]="File",a[a.Sample=4]="Sample",a[a.Learn=5]="Learn",a[a.BigDataAndMore=6]="BigDataAndMore",a[a.Dataflows=7]="Dataflows",a[a.OrgContentPacks=8]="OrgContentPacks",a[a.Apps=9]="Apps",(a=e.ArtifactType||(e.ArtifactType={}))[a.Unknown=0]="Unknown",a[a.Dashboard=1]="Dashboard",a[a.Report=2]="Report",a[a.Model=3]="Model",a[a.Workbook=4]="Workbook",a[a.App=5]="App",a[a.RdlReport=6]="RdlReport",a[a.Dataflow=7]="Dataflow",a[a.Tile=8]="Tile",a[a.StreamingDataflow=9]="StreamingDataflow",a[a.Folder=10]="Folder",a[a.Datamart=11]="Datamart",a[a.Artifact=12]="Artifact",a[a.Connection=13]="Connection",(a=e.FolderType||(e.FolderType={}))[a.MyFolder=0]="MyFolder",a[a.AppFolder=1]="AppFolder",a[a.AdminFolder=2]="AdminFolder",a[a.TransientFolder=1e4]="TransientFolder",(a=e.DataCacheModeType||(e.DataCacheModeType={}))[a.Import=0]="Import",a[a.DirectQuery=1]="DirectQuery",a[a.Mixed=2]="Mixed",(a=e.ContentTileType||(e.ContentTileType={}))[a.Favorite=1]="Favorite",a[a.Report=2]="Report",a[a.Dashboard=4]="Dashboard",a[a.Workbook=8]="Workbook",a[a.OrgApp=16]="OrgApp",a[a.MRU=128]="MRU",a[a.Workspace=256]="Workspace",a[a.Dataset=512]="Dataset",a[a.AppPlaceHolder=1024]="AppPlaceHolder",a[a.RdlReport=2048]="RdlReport",a[a.CdsaModel=4096]="CdsaModel",a[a.StreamingCdsaModel=8192]="StreamingCdsaModel",a[a.Scorecard=16384]="Scorecard",a[a.StreamingDataset=32768]="StreamingDataset",a[a.Datamart=65536]="Datamart",(a=e.DatasetEditConstraintType||(e.DatasetEditConstraintType={}))[a.AlmPipelineDeployment=0]="AlmPipelineDeployment",a[a.AutomaticAggregationsEnabled=1]="AutomaticAggregationsEnabled",a[a.IncrementalRefreshEnabled=2]="IncrementalRefreshEnabled",a[a.LiveConnectModel=3]="LiveConnectModel",a[a.ModifiedByXmlaEndpoint=4]="ModifiedByXmlaEndpoint",a[a.NonV3Model=5]="NonV3Model",a[a.SharedCapacityModel=6]="SharedCapacityModel",(a=e.DatasetHost||(e.DatasetHost={}))[a.Shared=0]="Shared",a[a.Dedicated=1]="Dedicated",a[a.ASAzure=2]="ASAzure",a[a.ASOnPrem=3]="ASOnPrem",(a=e.FavoriteType||(e.FavoriteType={}))[a.Dashboard=1]="Dashboard",a[a.Report=2]="Report",a[a.App=3]="App",a[a.RdlReport=4]="RdlReport",a[a.ResourcePackage=5]="ResourcePackage",a[a.Artifact=6]="Artifact",a[a.Datamart=7]="Datamart"})(powerbi=powerbi||{}),(function(e){var a;e=(e=(e=e.common||(e.common={})).contracts||(e.contracts={})).gateway||(e.gateway={}),(a=e.PrincipalType||(e.PrincipalType={}))[a.user=0]="user",a[a.group=1]="group",a[a.app=2]="app",(a=e.GatewayType||(e.GatewayType={}))[a.Resource=0]="Resource",a[a.Personal=1]="Personal",a[a.VirtualNetwork=2]="VirtualNetwork",a[a.TenantCloud=3]="TenantCloud",(a=e.UnifiedGatewayPrincipalType||(e.UnifiedGatewayPrincipalType={})).User="User",a.Group="Group",a.App="App",a.PbiPaasWorkspace="PbiPaasWorkspace",a.PbiPaasCollection="PbiPaasCollection",a.Service="Service",(a=e.UnifiedGatewayRole||(e.UnifiedGatewayRole={})).Admin="Admin",a.ConnectionCreatorWithReshare="ConnectionCreatorWithReshare",a.ConnectionCreator="ConnectionCreator",a.ExistingConnectionsUser="ExistingConnectionsUser",(a=e.GatewayStatus||(e.GatewayStatus={}))[a.Live=0]="Live",a[a.NotInstalled=1]="NotInstalled",a[a.NotReachable=2]="NotReachable",a[a.Installed=3]="Installed",(a=e.CredentialType||(e.CredentialType={}))[a.NotSpecified=0]="NotSpecified",a[a.Windows=1]="Windows",a[a.Anonymous=2]="Anonymous",a[a.Basic=3]="Basic",a[a.Key=4]="Key",a[a.OAuth2=5]="OAuth2",a[a.EffectiveUserName=6]="EffectiveUserName",a[a.SingleSignOn=7]="SingleSignOn",a[a.WindowsWithoutImpersonation=8]="WindowsWithoutImpersonation",a[a.SAS=9]="SAS",(a=e.PrivacyLevel||(e.PrivacyLevel={}))[a.None=0]="None",a[a.Private=1]="Private",a[a.Organizational=2]="Organizational",a[a.Public=3]="Public",(a=e.SingleSignOnType||(e.SingleSignOnType={}))[a.None=0]="None",a[a.Kerberos=1]="Kerberos",a[a.AzureActiveDirectory=2]="AzureActiveDirectory",a[a.SAML=3]="SAML",a[a.KerberosDQAndRefresh=4]="KerberosDQAndRefresh",(a=e.DataSourceType||(e.DataSourceType={}))[a.SqlServer=0]="SqlServer",a[a.AnalysisServices=1]="AnalysisServices",a[a.SAP=2]="SAP",a[a.File=3]="File",a[a.Folder=4]="Folder",a[a.Oracle=5]="Oracle",a[a.Teradata=6]="Teradata",a[a.SharePointList=7]="SharePointList",a[a.Web=8]="Web",a[a.OData=9]="OData",a[a.DB2=10]="DB2",a[a.MySql=11]="MySql",a[a.PostgreSql=12]="PostgreSql",a[a.Sybase=13]="Sybase",a[a.Extension=14]="Extension",a[a.SAPBW=15]="SAPBW",a[a.AzureTable=16]="AzureTable",a[a.AzureBlob=17]="AzureBlob",a[a.Informix=18]="Informix",a[a.ODBC=19]="ODBC",a[a.SharePoint=21]="SharePoint",a[a.GoogleAnalytics=25]="GoogleAnalytics",a[a.Exchange=27]="Exchange",a[a.Facebook=28]="Facebook",a[a.HDInsight=29]="HDInsight",a[a.AzureMarketplace=30]="AzureMarketplace",a[a.ActiveDirectory=31]="ActiveDirectory",a[a.OleDb=35]="OleDb",a[a.AdoDotNet=36]="AdoDotNet",a[a.Salesforce=39]="Salesforce",a[a.SAPBWMessageServer=41]="SAPBWMessageServer",a[a.Essbase=43]="Essbase",a[a.AzureDataLakeStorage=44]="AzureDataLakeStorage",a[a.CDPA=47]="CDPA",(a=e.ConnectionStringPropertyName||(e.ConnectionStringPropertyName={}))[a.EffectiveUserName=0]="EffectiveUserName",a[a.CustomData=1]="CustomData",(a=e.DataSourceAnnotationUPNMappingAlgorithm||(e.DataSourceAnnotationUPNMappingAlgorithm={}))[a.FullStringReplacement=0]="FullStringReplacement",a[a.SubstringReplacement=1]="SubstringReplacement"})(powerbi=powerbi||{}),(function(e){var a,t,i,r;a=e.common||(e.common={}),t=a.contracts||(a.contracts={}),e=e.common.constants,i=t.ContentProviderClientCategory,r=window,t.contentProviderManifest=[{id:1003,providerName:"files-tutorial",displayText:"Learn about importing files",displayTextLocalizationKey:"GetData_FilesTutorial_Title",iconCSSClass:"content-provider-files-tutorial",category:0,clientCategory:i.File,configurationUIstyle:4,providerConfig:'{"FWLink":"https://go.microsoft.com/fwlink/?LinkID=613513"}',sortPriority:a.constants.contentProviderStoreTileMaxSortPriority},{id:1e3,providerName:"local-file",displayText:"Local File",displayTextLocalizationKey:"GetData_LocalFile_Title",iconCSSClass:"content-provider-local-file",category:0,clientCategory:i.File,configurationUIstyle:3,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:0},{id:1001,providerName:"onedrive-personal",displayText:"OneDrive - Personal",displayTextLocalizationKey:"GetData_OneDrivePersonal_Title",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:i.File,configurationPageUrl:"/providers/cloudfile/onedrive",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:2,authentication:{oAuth:{endpointRetrievalAPI:"/powerbi/providers/excel/authorizationEndpoint"}}},{id:1002,providerName:"onedrive-for-business",displayText:"OneDrive - Business",displayTextLocalizationKey:"GetData_OneDriveBusiness_Title",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:i.File,configurationPageUrl:"/providers/cloudfile/onedrivepro",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:1,disabledInArchivedContent:!0},{id:1004,providerName:"onedrive-for-business",displayText:"OneDrive - ",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:i.File,configurationPageUrl:"/providers/cloudfile/onedrivepro",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:1,disabledInArchivedContent:!0},{id:1005,providerName:"sharepoint-teamsites",displayText:"Sharepoint - Team Sites",displayTextLocalizationKey:"GetData_SharePoint_Title",iconCSSClass:"glyphicon sharePointIcon pbi-glyph-sharepoint",category:0,clientCategory:i.File,providerConfig:r.inTeams?'{"FWLink":"'.concat(r.baseUrl,'/groups/me/getdata/files"}'):void 0,configurationPageUrl:r.inTeams?void 0:"/providers/cloudfile/sharepoint",configurationUIstyle:r.inTeams?4:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:3,featureSwitch:a.constants.featureSwitches.contentProviderSharePointDocumentLibrariesEnabled},{id:1006,providerName:"sharepoint-folder",displayText:"SharePoint -",iconCSSClass:"content-provider-onedrive",category:0,clientCategory:i.File,configurationPageUrl:"/providers/cloudfile/sharepoint",configurationUIstyle:1,disableDetailPane:!0,searchKeywords:"Excel, PBIX, Power BI Desktop",sortPriority:1,featureSwitch:a.constants.featureSwitches.workspacesV2GAFeatures},{id:25,providerKey:"9f29a2e5-02d7-4420-b133-d0a663befe00",providerName:"sql-server-analysis-services",displayText:"SQL Server Analysis Services",description:"GetData_SqlServerAnalysisServices",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=528956",iconCSSClass:"content-provider-sql-server-analysis-services",category:0,clientCategory:i.BigDataAndMore,configurationPageUrl:"/providers/AnalysisServer/",configurationUIstyle:1,sortPriority:2,requiresPremiumLicense:!0},{id:72,providerKey:"6F35FD83-60DA-4F78-BE43-9B6BFD881D8A",providerName:"microsoft-dynamics-nav",displayText:"Microsoft Dynamics NAV",description:"GetData_MicrosoftDynamicsNAV",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=623542",iconCSSClass:"content-provider-microsoft-dynamics-nav",smallIconCSSClass:"content-provider-microsoft-dynamics-nav-small",category:1,clientCategory:i.Service,configurationPageUrl:"/providers/mashUp/MicrosoftDynamicsNAV?contentProviderId=72",configurationUIstyle:0},{id:22,providerKey:"bb35a484-389d-4cc6-ab18-57d6eef86a23",providerName:"retail-analysis-sample",displayText:"Retail Analysis Sample",displayTextLocalizationKey:"GetData_Retail_Analysis_Sample_Title",description:"GetData_Retail_Analysis_Sample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=522048",iconCSSClass:"content-provider-retail-analysis-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"RetailSalesSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:0,providerName:"create-content-pack",displayText:"Create Content Pack",displayTextLocalizationKey:"Publish_CreateContentPack",iconCSSClass:"create-content-pack",category:2,clientCategory:i.Organizational,configurationUIstyle:5,providerConfig:'{"eventName": "openCreateContentPack"}',sortPriority:0,disableDetailPane:!0},{id:50,providerKey:"99baada2-cf09-41f2-afd9-6835059b94d3",providerName:"azure-sql-database-with-live-connect",displayText:"Azure SQL Database",description:"GetData_AzureSqlDatabaseWithLiveConnect",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=544900",iconCSSClass:"content-provider-sql-db-auditing",smallIconCSSClass:"content-provider-sql-db-auditing-small",category:0,clientCategory:i.BigDataAndMore,configurationPageUrl:"/providers/sqlazure",configurationUIstyle:0,autoRedirectUrlParams:e.navigation.getDataDirectQueryUrlParams,sortPriority:0,requiresPremiumLicense:!0,usePBIDesktop:!0},{id:51,providerKey:"9574d7ff-7b97-4917-9535-e67fd09393d2",providerName:"azure-sql-datawarehouse-live-connect",displayText:"Azure SQL Data Warehouse",description:"GetData_AzureSqlDatawarehouseLiveConnect",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=544902",iconCSSClass:"content-provider-azure-sql-datawarehouse-live-connect",smallIconCSSClass:"content-provider-azure-sql-dw-small",category:0,clientCategory:i.BigDataAndMore,configurationPageUrl:"/providers/pdw",configurationUIstyle:0,autoRedirectUrlParams:e.navigation.getDataDirectQueryUrlParams,sortPriority:1,requiresPremiumLicense:!0,usePBIDesktop:!0},{id:70,providerKey:"47024A6F-E6D5-4B93-937A-B6BA1226A223",providerName:"spark-sql-live-connect",displayText:"Spark on Azure HDInsight",description:"GetData_AzureHDInsightSparkLiveConnect",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkID=616055",iconCSSClass:"content-provider-spark-sql-live-connect",smallIconCSSClass:"content-provider-spark-small",category:0,clientCategory:i.BigDataAndMore,configurationPageUrl:"/providers/spark",configurationUIstyle:0,autoRedirectUrlParams:e.navigation.getDataDirectQueryUrlParams,sortPriority:3,requiresPremiumLicense:!0,featureSwitch:a.constants.featureSwitches.sparkAppEnabled,usePBIDesktop:!0},{id:43,providerKey:"8b5f82f6-9a6e-4135-92c6-f6072f111f4c",providerName:"human-resources-sample",displayText:"Human Resources Sample",displayTextLocalizationKey:"GetData_HumanResourcesSample_Title",description:"GetData_HumanResourcesSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528586",iconCSSClass:"content-provider-human-resources-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"HumanResourcesSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:44,providerKey:"7158743e-08ad-4884-9a20-4c66ef741812",providerName:"customer-profitability-sample",displayText:"Customer Profitability Sample",displayTextLocalizationKey:"GetData_CustomerProfitabilitySample_Title",description:"GetData_CustomerProfitabilitySample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528587",iconCSSClass:"content-provider-customer-profitability-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"CustomerProfitabilitySample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:45,providerKey:"bc6e5524-d894-46ef-8d0b-e99f42df8f31",providerName:"opportunity-analysis-sample",displayText:"Opportunity Analysis Sample",displayTextLocalizationKey:"GetData_OpportunityAnalysisSample_Title",description:"GetData_OpportunityAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528588",iconCSSClass:"content-provider-opportunity-analysis-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"OpportunityTrackingSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:46,providerKey:"8b4eff17-adfe-485c-b6b7-d7df36f04c24",providerName:"it-spend-analysis-sample",displayText:"IT Spend Analysis Sample",displayTextLocalizationKey:"GetData_ITSpendAnalysisSample_Title",description:"GetData_ITSpendAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528589",iconCSSClass:"content-provider-it-spend-analysis-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"ITSpendAnalysisSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:47,providerKey:"00100b6a-5aba-4de1-bf62-a3a91cdff527",providerName:"procurement-analysis-sample",displayText:"Procurement Analysis Sample",displayTextLocalizationKey:"GetData_ProcurementAnalysisSample_Title",description:"GetData_ProcurementAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528590",iconCSSClass:"content-provider-procurement-analysis-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"ProcurementAnalysisSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:48,providerKey:"e96a9f16-42da-4020-aae7-07315691b016",providerName:"sales-and-marketing-sample",displayText:"Sales and Marketing Sample",displayTextLocalizationKey:"GetData_SalesAndMarketingSample_Title",description:"GetData_SalesAndMarketingSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528591",iconCSSClass:"content-provider-sales-and-marketing-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"SalesMarketingSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2},{id:49,providerKey:"0ee5f075-5b0a-42a9-9e64-e9c5cb5e23c4",providerName:"supplier-quality-analysis-sample",displayText:"Supplier Quality Analysis Sample",displayTextLocalizationKey:"GetData_SupplierQualityAnalysisSample_Title",description:"GetData_SupplierQualityAnalysisSample",learnMoreUrl:"https://go.microsoft.com/fwlink/?LinkId=528585",iconCSSClass:"content-provider-supplier-quality-analysis-sample",category:0,clientCategory:i.Sample,providerConfig:'{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"SupplierQualityAnalysisSample\\"}","SID":"{GUID}"}}',configurationUIstyle:2}]})(powerbi=powerbi||{}),(function(e){var a;e=(e=e.userNotifications||(e.userNotifications={})).contracts||(e.contracts={}),(a=e.NotificationCategory||(e.NotificationCategory={}))[a.NewFeatureProductMessage=0]="NewFeatureProductMessage",a[a.DashboardSharing=2]="DashboardSharing",a[a.DashboardAddedToGroup=3]="DashboardAddedToGroup",a[a.Trial=5]="Trial",a[a.DataDrivenAlert=6]="DataDrivenAlert",a[a.AccessRequest=14]="AccessRequest",a[a.TemplateAppsUpdateAvailable=29]="TemplateAppsUpdateAvailable",a[a.CapacityOverloaded=34]="CapacityOverloaded",a[a.CapacityAutoScaled=35]="CapacityAutoScaled",a[a.CapacityAutoScaleMaximumReached=36]="CapacityAutoScaleMaximumReached",a[a.TeamsAppInstallation=42]="TeamsAppInstallation",a[a.ScdProvisioningFailed=62]="ScdProvisioningFailed",a[a.DynamicMessage=999]="DynamicMessage",(a=e.NotificationResource||(e.NotificationResource={}))[a.DashboardContentPackNewVersion=0]="DashboardContentPackNewVersion",a[a.UsersNotifications_SharedDashboard=1]="UsersNotifications_SharedDashboard",a[a.ExtendTrial_TrialExpired=2]="ExtendTrial_TrialExpired",a[a.UsersNotifications_TrialRunsOutInLessThanADay=3]="UsersNotifications_TrialRunsOutInLessThanADay",a[a.UsersNotifications_TrialRunningOut=4]="UsersNotifications_TrialRunningOut",a[a.UsersNotifications_TitleTrialExpired=5]="UsersNotifications_TitleTrialExpired",a[a.UsersNotifications_UserName=6]="UsersNotifications_UserName",a[a.UsersNotifications_GoToApp=7]="UsersNotifications_GoToApp",a[a.UsersNotifications_GoToDashboard=8]="UsersNotifications_GoToDashboard",a[a.UsersNotifications_TrialRunsOutInOneDay=9]="UsersNotifications_TrialRunsOutInOneDay",a[a.UsersNotifications_TitleTrialRunsOutInOneDay=10]="UsersNotifications_TitleTrialRunsOutInOneDay",a[a.UsersNotifications_TitleTrialRunsOutInLessThanADay=11]="UsersNotifications_TitleTrialRunsOutInLessThanADay",a[a.UsersNotifications_TitleTrialRunningOut=12]="UsersNotifications_TitleTrialRunningOut",a[a.UsersNotifications_RequestExtensionLinkText=13]="UsersNotifications_RequestExtensionLinkText",a[a.UsersNotifications_DataDrivenAlert=14]="UsersNotifications_DataDrivenAlert",a[a.UsersNotifications_GroupName=15]="UsersNotifications_GroupName",a[a.UsersNotifications_NewDashboard=16]="UsersNotifications_NewDashboard",a[a.UsersNotifications_TileName=17]="UsersNotifications_TileName",a[a.UsersNotifications_DataDrivenDown=18]="UsersNotifications_DataDrivenDown",a[a.UsersNotifications_DataDrivenUp=19]="UsersNotifications_DataDrivenUp",a[a.UsersNotifications_GoToTile=20]="UsersNotifications_GoToTile",a[a.UsersNotifications_DatasetSettingChangeTitle=21]="UsersNotifications_DatasetSettingChangeTitle",a[a.UsersNotifications_DatasetInGroupWorkspaceSettingChangeMessage=22]="UsersNotifications_DatasetInGroupWorkspaceSettingChangeMessage",a[a.UsersNotifications_DatasetInMyWorkspaceSettingChangeMessage=23]="UsersNotifications_DatasetInMyWorkspaceSettingChangeMessage",a[a.Generic_LearnMore=24]="Generic_LearnMore",a[a.UsersNotifications_Upgrade=25]="UsersNotifications_Upgrade",a[a.UsersNotifications_GoToConversation=27]="UsersNotifications_GoToConversation",a[a.UsersNotifications_AtMentionedInComment=28]="UsersNotifications_AtMentionedInComment",a[a.FolderNotifications_ServiceAppsUpdateAvailable=29]="FolderNotifications_ServiceAppsUpdateAvailable",a[a.FolderNotifications_GetServiceAppUpdate=30]="FolderNotifications_GetServiceAppUpdate",a[a.UsersNotifications_FeaturedContentEnabledTitle=31]="UsersNotifications_FeaturedContentEnabledTitle",a[a.UsersNotifications_FeaturedContentEnabledMessage=32]="UsersNotifications_FeaturedContentEnabledMessage",a[a.UsersNotifications_GoToAdminPortal=33]="UsersNotifications_GoToAdminPortal",a[a.UsersNotifications_GoToAdminPortalCapacity=34]="UsersNotifications_GoToAdminPortalCapacity",a[a.UsersNotifications_M365TenantSettingTitle=35]="UsersNotifications_M365TenantSettingTitle",a[a.UsersNotifications_M365TenantSettingMessage=36]="UsersNotifications_M365TenantSettingMessage",a[a.UsersNotifications_GoToReportAccess=37]="UsersNotifications_GoToReportAccess",a[a.UsersNotifications_RequestedAccess=38]="UsersNotifications_RequestedAccess",a[a.UsersNotifications_AlertTitle=1e3]="UsersNotifications_AlertTitle",a[a.UsersNotifications_AlertExceeded=1001]="UsersNotifications_AlertExceeded",a[a.UsersNotifications_AlertWentBelow=1002]="UsersNotifications_AlertWentBelow",a[a.UsersNotifications_AlertAction=1003]="UsersNotifications_AlertAction",a[a.UsersNotifications_AlertExceededNoTileName=1004]="UsersNotifications_AlertExceededNoTileName",a[a.UsersNotifications_AlertWentBelowNoTileName=1005]="UsersNotifications_AlertWentBelowNoTileName",a[a.UsersNotifications_LineChartAnomalyAlert_DatetimeMultiple=1200]="UsersNotifications_LineChartAnomalyAlert_DatetimeMultiple",a[a.UsersNotifications_LineChartAnomalyAlert_DatetimeSingle=1201]="UsersNotifications_LineChartAnomalyAlert_DatetimeSingle",a[a.UsersNotifications_LineChartAnomalyAlert_OtherMultiple=1202]="UsersNotifications_LineChartAnomalyAlert_OtherMultiple",a[a.UsersNotifications_LineChartAnomalyAlert_OtherSingle=1203]="UsersNotifications_LineChartAnomalyAlert_OtherSingle",a[a.UsersNotifications_LineChartThreshold_DatetimeMultiple_AlertExceeded=1204]="UsersNotifications_LineChartThreshold_DatetimeMultiple_AlertExceeded",a[a.UsersNotifications_LineChartThreshold_DatetimeMultiple_AlertWentBelow=1205]="UsersNotifications_LineChartThreshold_DatetimeMultiple_AlertWentBelow",a[a.UsersNotifications_LineChartThreshold_DatetimeSingle_AlertExceeded=1206]="UsersNotifications_LineChartThreshold_DatetimeSingle_AlertExceeded",a[a.UsersNotifications_LineChartThreshold_DatetimeSingle_AlertWentBelow=1207]="UsersNotifications_LineChartThreshold_DatetimeSingle_AlertWentBelow",a[a.UsersNotifications_LineChartThreshold_OtherMultiple_AlertExceeded=1208]="UsersNotifications_LineChartThreshold_OtherMultiple_AlertExceeded",a[a.UsersNotifications_LineChartThreshold_OtherMultiple_AlertWentBelow=1209]="UsersNotifications_LineChartThreshold_OtherMultiple_AlertWentBelow",a[a.UsersNotifications_LineChartThreshold_OtherSingle_AlertExceeded=1210]="UsersNotifications_LineChartThreshold_OtherSingle_AlertExceeded",a[a.UsersNotifications_LineChartThreshold_OtherSingle_AlertWentBelow=1211]="UsersNotifications_LineChartThreshold_OtherSingle_AlertWentBelow",a[a.UsersNotifications_CapacityAutoscaled_Title=2e3]="UsersNotifications_CapacityAutoscaled_Title",a[a.UsersNotifications_CapacityAutoscaled=2001]="UsersNotifications_CapacityAutoscaled",a[a.UsersNotifications_CapacityThrottled_Title=2002]="UsersNotifications_CapacityThrottled_Title",a[a.UsersNotifications_CapacityThrottled=2003]="UsersNotifications_CapacityThrottled",a[a.UsersNotifications_TeamsAppInstallationSuccess=2101]="UsersNotifications_TeamsAppInstallationSuccess",a[a.UsersNotifications_TeamsAppInstallationOpen=2102]="UsersNotifications_TeamsAppInstallationOpen",a[a.UsersNotifications_SCDProvisioningFailure_Title=2201]="UsersNotifications_SCDProvisioningFailure_Title",a[a.UsersNotifications_SCDProvisioningFailure_Message=2202]="UsersNotifications_SCDProvisioningFailure_Message",a[a.UsersNotifications_SCDProvisioningFailure_ContactUs=2203]="UsersNotifications_SCDProvisioningFailure_ContactUs"})(powerbi=powerbi||{});;
"use strict";var DropDownMenuItemType,powerbi,__awaiter=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(o,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?o(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}r((l=l.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(i,n){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(o){return function(e){var t=[o,e];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{r=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__extends=this&&this.__extends||(function(){var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}))(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}})(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var i,n=0,r=t.length;n<r;n++)!i&&n in t||((i=i||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Horizontal=(!(function(e){var t;(t=e.common||(e.common={})).createRequireConfig=function(){return{waitSeconds:9007199254740991,paths:{"angular-ui-datetimepicker":t.getFilePath("angular-ui-datetimepicker",2,!0),"d3-array":t.getFilePath("d3-array",2,!0),"d3-geo":t.getFilePath("d3-geo",2,!0),"es6-promise":t.getFilePath("es6-promise",2,!0),filesaver:t.getFilePath("filesaver",2,!0),"jquery-qrcode":t.getFilePath("jquery-qrcode",2,!0),"jquery-ui":t.getFilePath("jquery-ui",2,!0),msrcrypto:t.getFilePath("msrcrypto",2,!0),ngTagsInput:t.getFilePath("ngTagsInput",2,!0),pubnub:t.getFilePath("pubnub",2,!0),quill:t.getFilePath("quill",2,!0),resizeSensor:t.getFilePath("resizeSensor",2,!0),"powerbi-models":t.getFilePath("powerbi-models",2,!0),topojson:t.getFilePath("topojson",2,!0),cropperjs:t.getFilePath("cropper",2,!0),"globalize.cultures":t.getFilePath("jquery.globalize/globalize.cultures",0,!1),tileLibrary:t.getFilePath("tileLibrary",0,!0),accessibleTableVisual:t.getFilePath("accessibleTableVisual",0,!0),adminPortal:t.getFilePath("adminPortal",0,!0),basicShapeVisual:t.getFilePath("basicShapeVisual",0,!0),shapeVisual:t.getFilePath("shapeVisual",0,!0),navigatorVisuals:t.getFilePath("navigatorVisuals",0,!0),cartesianVisuals:t.getFilePath("cartesianVisuals",0,!0),capacityAdmin:t.getFilePath("capacityAdmin",0,!0),cdsaModelAuthoring:t.getFilePath("cdsaModelAuthoring",0,!0),cdsaModelActions:t.getFilePath("cdsaModelActions",0,!0),customVisualsGallery:t.getFilePath("customVisualsGallery",0,!0),dashboard:t.getFilePath("dashboard",0,!0),decompositionTreeVisual:t.getFilePath("decompositionTreeVisual",0,!0),dialogs:t.getFilePath("dialogs",0,!0),donutChartVisuals:t.getFilePath("donutChartVisuals",0,!0),embedCodes:t.getFilePath("embedCodes",0,!0),exploreUIDialogs:t.getFilePath("exploreUIDialogs",0,!0),exploreUIShell:t.getFilePath("exploreUIShell",0,!0),funnelChartVisual:t.getFilePath("funnelChartVisual",0,!0),getData:t.getFilePath("getData",0,!0),imageVisual:t.getFilePath("imageVisual",0,!0),kpiVisual:t.getFilePath("kpiVisual",0,!0),mapVisuals:t.getFilePath("mapVisuals",0,!0),azureMapVisuals:t.getFilePath("azureMapVisuals",0,!0),mobileAuthoring:t.getFilePath("mobileAuthoring",0,!0),multiRowCardVisual:t.getFilePath("multiRowCardVisual",0,!0),odataExplore:t.getFilePath("odataExplore",0,!0),permissions:t.getFilePath("permissions",0,!0),pivotTableVisuals:t.getFilePath("pivotTableVisuals",0,!0),scriptVisual:t.getFilePath("scriptVisual",0,!0),pythonVisual:t.getFilePath("pythonVisual",0,!0),scorecardVisual:t.getFilePath("scorecardVisual",0,!0),settings:t.getFilePath("settings",0,!0),shapeMapVisual:t.getFilePath("shapeMapVisual",0,!0),sharing:t.getFilePath("sharing",0,!0),singleValueVisuals:t.getFilePath("singleValueVisuals",0,!0),cardVisual:t.getFilePath("cardVisual",0,!0),slicerVisual:t.getFilePath("slicerVisual",0,!0),sunburstVisual:t.getFilePath("sunburstVisual",0,!0),textboxVisual:t.getFilePath("textboxVisual",0,!0),treemapVisual:t.getFilePath("treemapVisual",0,!0),rdlVisual:t.getFilePath("rdlVisual",0,!0),aiNarrativesVisual:t.getFilePath("aiNarrativesVisual",0,!0),uiComponents:t.getFilePath("uiComponents",0,!0),"powerbiportal.addons.bundle":t.getFilePath("powerbiportal.addons.bundle",0,!0),"powerbiportal.web.bundle":t.getFilePath("powerbiportal.web.bundle",0,!0)},bundles:{tileLibrary:["TileLibrary/index"],accessibleTableVisual:["AccessibleTableVisual/accessibleTable/accessibleTable"],basicShapeVisual:["BasicShapeVisual/actionButton","BasicShapeVisual/actionButtonUtils","BasicShapeVisual/basicShape","BasicShapeVisual/basicShapeUtils"],shapeVisual:["ShapeVisual/shape"],navigatorVisuals:["NavigatorVisuals/navigator"],cartesianVisuals:["CartesianVisuals/cartesianModule"],cdsaModelActions:["CdsaModelActions/services/cdsaModelActionsService"],customVisualsGallery:["CustomVisualsGallery/module","CustomVisualsGallery/services/organizationalGalleryModelFactory"],decompositionTreeVisual:["DecompositionTreeVisual/decompositionTree","DecompositionTreeVisual/decompositionTreeRenderer","DecompositionTreeVisual/decompositionTreeViewModelService"],dialogs:["PowerBIDialogs/components/createReportDialog/createReportDialogBuilder","PowerBIDialogs/components/rebindReportDialog/rebindReportDialogBuilder","PowerBIDialogs/components/errorDialog/errorDialogBuilder","PowerBIDialogs/components/refreshHistoryDialog/refreshHistoryDialogBuilder","PowerBIDialogs/components/selectivePublishWarningDialog/selectivePublishWarningDialogBuilder"],embedCodes:["EmbedCodes/services/embedCodesService","EmbedCodes/services/embedService","EmbedCodes/proxies/embedProxy"],exploreUIShell:["ExploreUIShell/module","ExploreUIShell/services/bookmarkService","ExploreUIShell/services/bookmarkOnLoadService","ExploreUIShell/services/explorationAuthoring","ExploreUIShell/services/exportVisualDataService","ExploreUIShell/services/visualHostTooltipActionsProvider"],odataExplore:["ODataFilterParser/services/odataFilterParserService"],permissions:["PermissionsUI/components/permissionCannotShareDialog/permissionCannotShareDialogBuilder"],rdlVisual:["RdlVisual/rdlVisual"],scorecardVisual:["ScorecardVisual/scorecard"],scriptVisual:["ScriptVisual/scriptVisual"],shapeMapVisual:["ShapeMapVisual/shapeMap/shapeMap","ShapeMapVisual/shapeMap/shapeMapBehaviors"],singleValueVisuals:["SingleValueVisuals/animatedNumberModule","SingleValueVisuals/cardModule","SingleValueVisuals/gaugeModule"],sunburstVisual:["SunburstVisual/sunburst/sunburst","SunburstVisual/sunburst/sunburstBehaviors"],textboxVisual:["TextboxVisual/textboxModule"],treemapVisual:["TreemapVisual/treemap","TreemapVisual/treemapAnimator","TreemapVisual/treemapBehaviors","TreemapVisual/util"],tutorialResources:["tutorialResources/explorationResources"],azureMapVisuals:["AzureMapVisuals/azureMap","AzureMapVisuals/azureMapBehaviors"],aiNarrativesVisual:["AINarrativesVisual/aiNarratives"],cardVisual:["CardVisual/cardVisual"]},cssPaths:{"jquery-ui":t.getFilePath("jquery-ui.min",3,!1),ngTagsInput:t.getFilePath("ngTagsInput",3,!0),"quill.core":t.getFilePath("quill.core",3,!1),cropperjs:t.getFilePath("cropper",3,!1),accessibleTableVisual:t.getFilePath("accessibleTableVisual",1,!0),adminPortal:t.getFilePath("adminPortal",1,!0),azureMapVisuals:t.getFilePath("azureMapVisuals",1,!0),capacityAdmin:t.getFilePath("capacityAdmin",1,!0),cdsaModelAuthoring:t.getFilePath("cdsaModelAuthoring",1,!0),customVisualsGallery:t.getFilePath("customVisualsGallery",1,!0),dialogs:t.getFilePath("dialogs",1,!0),embedCodes:t.getFilePath("embedCodes",1,!0),exploreUIDialogs:t.getFilePath("exploreUIDialogs",1,!0),exploreUIShell:t.getFilePath("exploreUIShell",1,!0),getData:t.getFilePath("getData",1,!0),mobileAuthoring:t.getFilePath("mobileAuthoring",1,!0),permissions:t.getFilePath("permissions",1,!0),pivotTableVisuals:t.getFilePath("pivotTableVisuals",1,!0),settings:t.getFilePath("settings",1,!0),sharing:t.getFilePath("sharing",1,!0),scorecardVisual:t.getFilePath("scorecardVisual",1,!0),rdlVisual:t.getFilePath("rdlVisual",1,!0)}}}})(powerbi=powerbi||{}),!(function(t){var o=t.telemetry||(t.telemetry={}),e=jsCommon.Utility,i=t.telemetryEventFactory,n=t.telemetryBaseEventFactory,r=t.telemetry.EventFactories;e?e.generateGuid:Function.prototype,o.DashboardBITokenRefreshPromptEventName="PBI.Dashboard.BITokenRefreshPrompt",o.DashboardBITokenRefreshPrompt=r[o.DashboardBITokenRefreshPromptEventName]=function(e){return i({name:o.DashboardBITokenRefreshPromptEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardBITokenRefreshPromptLoggers})},o.DashboardFailedToRefreshTokenEventName="PBI.Dashboard.FailedToRefreshToken",o.DashboardFailedToRefreshToken=r[o.DashboardFailedToRefreshTokenEventName]=function(e){return i({name:o.DashboardFailedToRefreshTokenEventName,info:e,category:t.TelemetryCategory.CriticalError,loggers:o.DashboardFailedToRefreshTokenLoggers})},o.DashboardOpenLinkEventName="PBI.Dashboard.OpenLink",o.DashboardOpenLink=r[o.DashboardOpenLinkEventName]=function(e){return i({name:o.DashboardOpenLinkEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.DashboardOpenLinkLoggers})},o.BaseMashupContentProviderChildEventEventName="BaseMashupContentProviderChildEvent",o.BaseMashupContentProviderChildEvent=r[o.BaseMashupContentProviderChildEventEventName]=function(e){return n({info:e,baseEvent:o.Verbose(e)})},o.BaseMashupContentProviderCustomerActionEventEventName="BaseMashupContentProviderCustomerActionEvent",o.BaseMashupContentProviderCustomerActionEvent=r[o.BaseMashupContentProviderCustomerActionEventEventName]=function(e){return n({info:e,baseEvent:o.CustomerAction(e)})},o.MashUpContentProviderConnectButtonClickedEventName="PBI.MashUpContentProvider.ConnectButtonClicked",o.MashUpContentProviderConnectButtonClicked=r[o.MashUpContentProviderConnectButtonClickedEventName]=function(e){return i({name:o.MashUpContentProviderConnectButtonClickedEventName,baseEvent:o.BaseMashupContentProviderCustomerActionEvent(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.MashUpContentProviderConnectButtonClickedLoggers})},o.MashUpContentProviderOrgAppPassThroughEventName="PBI.MashUpContentProvider.OrgAppPassThrough",o.MashUpContentProviderOrgAppPassThrough=r[o.MashUpContentProviderOrgAppPassThroughEventName]=function(e){return i({name:o.MashUpContentProviderOrgAppPassThroughEventName,baseEvent:o.BaseMashupContentProviderChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.MashUpContentProviderOrgAppPassThroughLoggers})},o.MashUpContentProviderPreparePackageSucceedEventName="PBI.MashUpContentProvider.PreparePackageSucceed",o.MashUpContentProviderPreparePackageSucceed=r[o.MashUpContentProviderPreparePackageSucceedEventName]=function(e){return i({name:o.MashUpContentProviderPreparePackageSucceedEventName,baseEvent:o.BaseMashupContentProviderChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.MashUpContentProviderPreparePackageSucceedLoggers})},o.MashUpContentProviderGetPackageModelsEventName="PBI.MashUpContentProvider.GetPackageModels",o.MashUpContentProviderGetPackageModels=r[o.MashUpContentProviderGetPackageModelsEventName]=function(e){return i({name:o.MashUpContentProviderGetPackageModelsEventName,baseEvent:o.BaseMashupContentProviderChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.MashUpContentProviderGetPackageModelsLoggers})},o.MashUpContentProviderSaveModelParametersEventName="PBI.MashUpContentProvider.SaveModelParameters",o.MashUpContentProviderSaveModelParameters=r[o.MashUpContentProviderSaveModelParametersEventName]=function(e){return i({name:o.MashUpContentProviderSaveModelParametersEventName,baseEvent:o.BaseMashupContentProviderChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.MashUpContentProviderSaveModelParametersLoggers})},o.MashUpContentProviderGetAggregatedDatasourcesForImportEventName="PBI.MashUpContentProvider.GetAggregatedDatasourcesForImport",o.MashUpContentProviderGetAggregatedDatasourcesForImport=r[o.MashUpContentProviderGetAggregatedDatasourcesForImportEventName]=function(e){return i({name:o.MashUpContentProviderGetAggregatedDatasourcesForImportEventName,baseEvent:o.BaseMashupContentProviderChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.MashUpContentProviderGetAggregatedDatasourcesForImportLoggers})},o.MashUpContentProviderUpdateDatasourceEventName="PBI.MashUpContentProvider.UpdateDatasource",o.MashUpContentProviderUpdateDatasource=r[o.MashUpContentProviderUpdateDatasourceEventName]=function(e){return i({name:o.MashUpContentProviderUpdateDatasourceEventName,baseEvent:o.BaseMashupContentProviderChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.MashUpContentProviderUpdateDatasourceLoggers})},o.MashUpContentProviderValidateParametersEventName="PBI.MashUpContentProvider.ValidateParameters",o.MashUpContentProviderValidateParameters=r[o.MashUpContentProviderValidateParametersEventName]=function(e){return i({name:o.MashUpContentProviderValidateParametersEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.MashUpContentProviderValidateParametersLoggers})},o.ContentProviderUrlParametersPassedEventName="PBI.ContentProvider.UrlParametersPassed",o.ContentProviderUrlParametersPassed=r[o.ContentProviderUrlParametersPassedEventName]=function(e){return i({name:o.ContentProviderUrlParametersPassedEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.ContentProviderUrlParametersPassedLoggers})},o.ContentProviderUrlParametersDecodingFailedEventName="PBI.ContentProvider.UrlParametersDecodingFailed",o.ContentProviderUrlParametersDecodingFailed=r[o.ContentProviderUrlParametersDecodingFailedEventName]=function(e){return i({name:o.ContentProviderUrlParametersDecodingFailedEventName,info:e,category:t.TelemetryCategory.CriticalError,loggers:o.ContentProviderUrlParametersDecodingFailedLoggers})},o.ContentProviderHttpGetContentProvidersEventName="PBI.ContentProvider.Http.GetContentProviders",o.ContentProviderHttpGetContentProviders=r[o.ContentProviderHttpGetContentProvidersEventName]=function(e){return i({name:o.ContentProviderHttpGetContentProvidersEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.ContentProviderHttpGetContentProvidersLoggers})},o.BaseDataSetChildEventEventName="BaseDataSetChildEvent",o.BaseDataSetChildEvent=r[o.BaseDataSetChildEventEventName]=function(e){return n({info:e,baseEvent:o.Verbose(e)})},o.DashboardSettingsDatasetsSaveRefreshSettingsEventName="PBI.Dashboard.SettingsDatasetsSaveRefreshSettings",o.DashboardSettingsDatasetsSaveRefreshSettings=r[o.DashboardSettingsDatasetsSaveRefreshSettingsEventName]=function(e){return i({name:o.DashboardSettingsDatasetsSaveRefreshSettingsEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardSettingsDatasetsSaveRefreshSettingsLoggers})},o.DashboardParametersDialogSaveParametersEventName="PBI.Dashboard.ParametersDialogSaveParameters",o.DashboardParametersDialogSaveParameters=r[o.DashboardParametersDialogSaveParametersEventName]=function(e){return i({name:o.DashboardParametersDialogSaveParametersEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardParametersDialogSaveParametersLoggers})},o.DashboardRefreshNowFailedToRetrieveModelEventName="PBI.Dashboard.RefreshNowFailedToRetrieveModel",o.DashboardRefreshNowFailedToRetrieveModel=r[o.DashboardRefreshNowFailedToRetrieveModelEventName]=function(e){return i({name:o.DashboardRefreshNowFailedToRetrieveModelEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardRefreshNowFailedToRetrieveModelLoggers})},o.DashboardAuthenticationDialogSaveCredentialsEventName="PBI.Dashboard.AuthenticationDialogSaveCredentials",o.DashboardAuthenticationDialogSaveCredentials=r[o.DashboardAuthenticationDialogSaveCredentialsEventName]=function(e){return i({name:o.DashboardAuthenticationDialogSaveCredentialsEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardAuthenticationDialogSaveCredentialsLoggers})},o.DashboardRetrieveGatewayEventName="PBI.Dashboard.RetrieveGateway",o.DashboardRetrieveGateway=r[o.DashboardRetrieveGatewayEventName]=function(e){return i({name:o.DashboardRetrieveGatewayEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardRetrieveGatewayLoggers})},o.DashboardPrepareRefreshNowEventName="PBI.Dashboard.PrepareRefreshNow",o.DashboardPrepareRefreshNow=r[o.DashboardPrepareRefreshNowEventName]=function(e){return i({name:o.DashboardPrepareRefreshNowEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardPrepareRefreshNowLoggers})},o.DashboardGetAggregatedDatasourcesForOneModelEventName="PBI.Dashboard.GetAggregatedDatasourcesForOneModel",o.DashboardGetAggregatedDatasourcesForOneModel=r[o.DashboardGetAggregatedDatasourcesForOneModelEventName]=function(e){return i({name:o.DashboardGetAggregatedDatasourcesForOneModelEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardGetAggregatedDatasourcesForOneModelLoggers})},o.DashboardDatasetRefreshEventName="PBI.Dashboard.DatasetRefresh",o.DashboardDatasetRefresh=r[o.DashboardDatasetRefreshEventName]=function(e){return i({name:o.DashboardDatasetRefreshEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardDatasetRefreshLoggers})},o.DashboardDatasetRefreshCancellationEventName="PBI.Dashboard.DatasetRefreshCancellation",o.DashboardDatasetRefreshCancellation=r[o.DashboardDatasetRefreshCancellationEventName]=function(e){return i({name:o.DashboardDatasetRefreshCancellationEventName,baseEvent:o.BaseDataSetChildEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardDatasetRefreshCancellationLoggers})},o.DashboardInitializeSettingsDatasetModelEventName="PBI.Dashboard.InitializeSettingsDatasetModel",o.DashboardInitializeSettingsDatasetModel=r[o.DashboardInitializeSettingsDatasetModelEventName]=function(e){return i({name:o.DashboardInitializeSettingsDatasetModelEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardInitializeSettingsDatasetModelLoggers})},o.DashboardGetRefreshHistoryEventName="PBI.Dashboard.GetRefreshHistory",o.DashboardGetRefreshHistory=r[o.DashboardGetRefreshHistoryEventName]=function(e){return i({name:o.DashboardGetRefreshHistoryEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardGetRefreshHistoryLoggers})},o.DashboardGetGroupIconEventName="PBI.Dashboard.GetGroupIcon",o.DashboardGetGroupIcon=r[o.DashboardGetGroupIconEventName]=function(e){return i({name:o.DashboardGetGroupIconEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardGetGroupIconLoggers})},o.DashboardRefreshAndGetUserMetadataEventName="PBI.Dashboard.RefreshAndGetUserMetadata",o.DashboardRefreshAndGetUserMetadata=r[o.DashboardRefreshAndGetUserMetadataEventName]=function(e){return i({name:o.DashboardRefreshAndGetUserMetadataEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardRefreshAndGetUserMetadataLoggers})},o.UserInfoGetSelfServiceEligibilityEventName="PBI.UserInfo.GetSelfServiceEligibility",o.UserInfoGetSelfServiceEligibility=r[o.UserInfoGetSelfServiceEligibilityEventName]=function(e){return i({name:o.UserInfoGetSelfServiceEligibilityEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.UserInfoGetSelfServiceEligibilityLoggers})},o.UserInfoGetIsModernCommerceAdminEventName="PBI.UserInfo.GetIsModernCommerceAdmin",o.UserInfoGetIsModernCommerceAdmin=r[o.UserInfoGetIsModernCommerceAdminEventName]=function(e){return i({name:o.UserInfoGetIsModernCommerceAdminEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.UserInfoGetIsModernCommerceAdminLoggers})},o.LicenseEnforcementShowFeatureDisabledDialogEventName="PBI.LicenseEnforcement.ShowFeatureDisabledDialog",o.LicenseEnforcementShowFeatureDisabledDialog=r[o.LicenseEnforcementShowFeatureDisabledDialogEventName]=function(e){return i({name:o.LicenseEnforcementShowFeatureDisabledDialogEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.LicenseEnforcementShowFeatureDisabledDialogLoggers})},o.LicenseEnforcementShowStartFreeTrialDialogEventName="PBI.LicenseEnforcement.ShowStartFreeTrialDialog",o.LicenseEnforcementShowStartFreeTrialDialog=r[o.LicenseEnforcementShowStartFreeTrialDialogEventName]=function(e){return i({name:o.LicenseEnforcementShowStartFreeTrialDialogEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.LicenseEnforcementShowStartFreeTrialDialogLoggers})},o.LicenseEnforcementShowUpgradeToProDialogEventName="PBI.LicenseEnforcement.ShowUpgradeToProDialog",o.LicenseEnforcementShowUpgradeToProDialog=r[o.LicenseEnforcementShowUpgradeToProDialogEventName]=function(e){return i({name:o.LicenseEnforcementShowUpgradeToProDialogEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.LicenseEnforcementShowUpgradeToProDialogLoggers})},o.LicenseEnforcementAccept2017proTrialEventName="PBI.LicenseEnforcement.Accept2017proTrial",o.LicenseEnforcementAccept2017proTrial=r[o.LicenseEnforcementAccept2017proTrialEventName]=function(e){return i({name:o.LicenseEnforcementAccept2017proTrialEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.LicenseEnforcementAccept2017proTrialLoggers})},o.LicenseEnforcementAutoTrialAssignmentEventName="PBI.LicenseEnforcement.AutoTrialAssignment",o.LicenseEnforcementAutoTrialAssignment=r[o.LicenseEnforcementAutoTrialAssignmentEventName]=function(e){return i({name:o.LicenseEnforcementAutoTrialAssignmentEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.LicenseEnforcementAutoTrialAssignmentLoggers})},o.LicenseEnforcementLeadsCollectionEventName="PBI.LicenseEnforcement.LeadsCollection",o.LicenseEnforcementLeadsCollection=r[o.LicenseEnforcementLeadsCollectionEventName]=function(e){return i({name:o.LicenseEnforcementLeadsCollectionEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.LicenseEnforcementLeadsCollectionLoggers})},o.TeamsLicenseEnforcementUpgradeNowClickEventName="PBI.TeamsLicenseEnforcement.UpgradeNowClick",o.TeamsLicenseEnforcementUpgradeNowClick=r[o.TeamsLicenseEnforcementUpgradeNowClickEventName]=function(e){return i({name:o.TeamsLicenseEnforcementUpgradeNowClickEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.TeamsLicenseEnforcementUpgradeNowClickLoggers})},o.TeamsLicenseEnforcementUpgradeNowAbandonEventName="PBI.TeamsLicenseEnforcement.UpgradeNowAbandon",o.TeamsLicenseEnforcementUpgradeNowAbandon=r[o.TeamsLicenseEnforcementUpgradeNowAbandonEventName]=function(e){return i({name:o.TeamsLicenseEnforcementUpgradeNowAbandonEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.TeamsLicenseEnforcementUpgradeNowAbandonLoggers})},o.DashboardAndReportsPrintEventName="PBI.DashboardAndReports.Print",o.DashboardAndReportsPrint=r[o.DashboardAndReportsPrintEventName]=function(e){return i({name:o.DashboardAndReportsPrintEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.DashboardAndReportsPrintLoggers,logExpAssignment:!0})},o.DashboardAndReportsAnalyzeInExcelEventName="PBI.DashboardAndReports.AnalyzeInExcel",o.DashboardAndReportsAnalyzeInExcel=r[o.DashboardAndReportsAnalyzeInExcelEventName]=function(e){return i({name:o.DashboardAndReportsAnalyzeInExcelEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.DashboardAndReportsAnalyzeInExcelLoggers,logExpAssignment:!0})},o.DsrDataLimitsWarningEventName="PBI.DsrDataLimitsWarning",o.DsrDataLimitsWarning=r[o.DsrDataLimitsWarningEventName]=function(e){return i({name:o.DsrDataLimitsWarningEventName,info:e,category:t.TelemetryCategory.CriticalError,loggers:o.DsrDataLimitsWarningLoggers})},o.DeprecatedNotificationToastUsageEventName="PBI.DeprecatedNotificationToastUsage",o.DeprecatedNotificationToastUsage=r[o.DeprecatedNotificationToastUsageEventName]=function(e){return i({name:o.DeprecatedNotificationToastUsageEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DeprecatedNotificationToastUsageLoggers})},o.DomainHelperGetVerifiedDomainsEventName="PBI.DomainHelper.GetVerifiedDomains",o.DomainHelperGetVerifiedDomains=r[o.DomainHelperGetVerifiedDomainsEventName]=function(e){return i({name:o.DomainHelperGetVerifiedDomainsEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.DomainHelperGetVerifiedDomainsLoggers})},o.NewerExplorationVersionEventName="PBI.NewerExplorationVersion",o.NewerExplorationVersion=r[o.NewerExplorationVersionEventName]=function(e){return i({name:o.NewerExplorationVersionEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.NewerExplorationVersionLoggers})},o.DeveloperVisualEnabledChangedEventName="PBI.DeveloperVisualEnabledChanged",o.DeveloperVisualEnabledChanged=r[o.DeveloperVisualEnabledChangedEventName]=function(e){return i({name:o.DeveloperVisualEnabledChangedEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.DeveloperVisualEnabledChangedLoggers})},o.ModuleLoadEventName="PBI.ModuleLoad",o.ModuleLoad=r[o.ModuleLoadEventName]=function(e){return i({name:o.ModuleLoadEventName,info:e,optionalParameters:["scriptProcessEnd","scriptProcessStart","evalEnd","evalStart","useCDN","connectEnd","connectStart","decodedBodySize","domainLookupEnd","domainLookupStart","encodedBodySize","fetchStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","startTime","transferSize","workerStart","timeToFirstByte"],loggers:o.ModuleLoadLoggers})},o.ModuleLoadErrorEventName="PBI.ModuleLoadError",o.ModuleLoadError=r[o.ModuleLoadErrorEventName]=function(e){return i({name:o.ModuleLoadErrorEventName,baseEvent:o.ErrorWithStackTrace(e),info:e,category:t.TelemetryCategory.CriticalError,loggers:o.ModuleLoadErrorLoggers})},o.ScriptVisualFilterActionEventName="ScriptVisualFilterAction",o.ScriptVisualFilterAction=r[o.ScriptVisualFilterActionEventName]=function(e){return i({name:o.ScriptVisualFilterActionEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.ScriptVisualFilterActionLoggers})},o.EXCrossFilterScriptVisualEventName="PBI.EX.CrossFilterScriptVisual",o.EXCrossFilterScriptVisual=r[o.EXCrossFilterScriptVisualEventName]=function(e){return i({name:o.EXCrossFilterScriptVisualEventName,info:e,category:t.TelemetryCategory.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:o.EXCrossFilterScriptVisualLoggers})},o.EXFilterScriptVisualEventName="PBI.EX.FilterScriptVisual",o.EXFilterScriptVisual=r[o.EXFilterScriptVisualEventName]=function(e){return i({name:o.EXFilterScriptVisualEventName,info:e,category:t.TelemetryCategory.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:o.EXFilterScriptVisualLoggers})},o.ClusterResolvedEventName="PBI.ClusterResolved",o.ClusterResolved=r[o.ClusterResolvedEventName]=function(e){return i({name:o.ClusterResolvedEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.ClusterResolvedLoggers})},o.DashboardAndReportsAuditEventEventName="PBI.DashboardAndReports.AuditEvent",o.DashboardAndReportsAuditEvent=r[o.DashboardAndReportsAuditEventEventName]=function(e){return i({name:o.DashboardAndReportsAuditEventEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.DashboardAndReportsAuditEventLoggers})},o.DownloadReportEventName="PBI.DownloadReport",o.DownloadReport=r[o.DownloadReportEventName]=function(e){return i({name:o.DownloadReportEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.DownloadReportLoggers,logExpAssignment:!0})},o.SettingsUpdateGatewayEventName="PBI.Settings.UpdateGateway",o.SettingsUpdateGateway=r[o.SettingsUpdateGatewayEventName]=function(e){return i({name:o.SettingsUpdateGatewayEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsUpdateGatewayLoggers})},o.SettingsDeleteGatewayEventName="PBI.Settings.DeleteGateway",o.SettingsDeleteGateway=r[o.SettingsDeleteGatewayEventName]=function(e){return i({name:o.SettingsDeleteGatewayEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsDeleteGatewayLoggers})},o.SettingsCreateDataSourceEventName="PBI.Settings.CreateDataSource",o.SettingsCreateDataSource=r[o.SettingsCreateDataSourceEventName]=function(e){return i({name:o.SettingsCreateDataSourceEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsCreateDataSourceLoggers})},o.SettingsDeleteDataSourceEventName="PBI.Settings.DeleteDataSource",o.SettingsDeleteDataSource=r[o.SettingsDeleteDataSourceEventName]=function(e){return i({name:o.SettingsDeleteDataSourceEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsDeleteDataSourceLoggers})},o.SettingsBindModelToGatewayEventName="PBI.Settings.BindModelToGateway",o.SettingsBindModelToGateway=r[o.SettingsBindModelToGatewayEventName]=function(e){return i({name:o.SettingsBindModelToGatewayEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsBindModelToGatewayLoggers})},o.SettingsAddDataSourcePrincipalsEventName="PBI.Settings.AddDataSourcePrincipals",o.SettingsAddDataSourcePrincipals=r[o.SettingsAddDataSourcePrincipalsEventName]=function(e){return i({name:o.SettingsAddDataSourcePrincipalsEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsAddDataSourcePrincipalsLoggers})},o.SettingsRemoveDataSourcePrincipalsEventName="PBI.Settings.RemoveDataSourcePrincipals",o.SettingsRemoveDataSourcePrincipals=r[o.SettingsRemoveDataSourcePrincipalsEventName]=function(e){return i({name:o.SettingsRemoveDataSourcePrincipalsEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsRemoveDataSourcePrincipalsLoggers})},o.SettingsAddGatewayPrincipalsEventName="PBI.Settings.AddGatewayPrincipals",o.SettingsAddGatewayPrincipals=r[o.SettingsAddGatewayPrincipalsEventName]=function(e){return i({name:o.SettingsAddGatewayPrincipalsEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsAddGatewayPrincipalsLoggers})},o.SettingsRemoveGatewayPrincipalsEventName="PBI.Settings.RemoveGatewayPrincipals",o.SettingsRemoveGatewayPrincipals=r[o.SettingsRemoveGatewayPrincipalsEventName]=function(e){return i({name:o.SettingsRemoveGatewayPrincipalsEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsRemoveGatewayPrincipalsLoggers})},o.SettingsUpdateCredentialsEventName="PBI.Settings.UpdateCredentials",o.SettingsUpdateCredentials=r[o.SettingsUpdateCredentialsEventName]=function(e){return i({name:o.SettingsUpdateCredentialsEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsUpdateCredentialsLoggers})},o.SettingsOpenGatewayDatasourceUPNMappingPaneEventName="PBI.Settings.OpenGatewayDatasourceUPNMappingPane",o.SettingsOpenGatewayDatasourceUPNMappingPane=r[o.SettingsOpenGatewayDatasourceUPNMappingPaneEventName]=function(e){return i({name:o.SettingsOpenGatewayDatasourceUPNMappingPaneEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsOpenGatewayDatasourceUPNMappingPaneLoggers})},o.SettingsUpdateGatewayDatasourceUPNMappingEventName="PBI.Settings.UpdateGatewayDatasourceUPNMapping",o.SettingsUpdateGatewayDatasourceUPNMapping=r[o.SettingsUpdateGatewayDatasourceUPNMappingEventName]=function(e){return i({name:o.SettingsUpdateGatewayDatasourceUPNMappingEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsUpdateGatewayDatasourceUPNMappingLoggers})},o.SettingsTestGatewayDatasourceUPNMappingEventName="PBI.Settings.TestGatewayDatasourceUPNMapping",o.SettingsTestGatewayDatasourceUPNMapping=r[o.SettingsTestGatewayDatasourceUPNMappingEventName]=function(e){return i({name:o.SettingsTestGatewayDatasourceUPNMappingEventName,baseEvent:o.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:o.SettingsTestGatewayDatasourceUPNMappingLoggers})},o.AppJavaScriptParseEventName="PBI.App.JavaScriptParse",o.AppJavaScriptParse=r[o.AppJavaScriptParseEventName]=function(e){return i({name:o.AppJavaScriptParseEventName,baseEvent:o.TimedEvent(e),info:e,loggers:o.AppJavaScriptParseLoggers})},o.AppPreemptiveQueryDataEventName="PBI.App.PreemptiveQueryData",o.AppPreemptiveQueryData=r[o.AppPreemptiveQueryDataEventName]=function(e){return i({name:o.AppPreemptiveQueryDataEventName,baseEvent:o.BaseEvent(e),info:e,loggers:o.AppPreemptiveQueryDataLoggers})},o.GeocodingSummaryEventName="PBI.GeocodingSummary",o.GeocodingSummary=r[o.GeocodingSummaryEventName]=function(e){return i({name:o.GeocodingSummaryEventName,baseEvent:o.BaseEvent(e),info:e,loggers:o.GeocodingSummaryLoggers,logRatio:.1})},o.SyncServiceUpdateEventName="PBI.SyncServiceUpdate",o.SyncServiceUpdate=r[o.SyncServiceUpdateEventName]=function(e){return i({name:o.SyncServiceUpdateEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.SyncServiceUpdateLoggers})},o.LicenseEnforcementAccessCustomizedPropertiesEventName="PBI.LicenseEnforcement.AccessCustomizedProperties",o.LicenseEnforcementAccessCustomizedProperties=r[o.LicenseEnforcementAccessCustomizedPropertiesEventName]=function(e){return i({name:o.LicenseEnforcementAccessCustomizedPropertiesEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.LicenseEnforcementAccessCustomizedPropertiesLoggers})},o.LicenseEnforcementSelfServiceEligibilityNotLoadedEventName="PBI.LicenseEnforcement.SelfServiceEligibilityNotLoaded",o.LicenseEnforcementSelfServiceEligibilityNotLoaded=r[o.LicenseEnforcementSelfServiceEligibilityNotLoadedEventName]=function(e){return i({name:o.LicenseEnforcementSelfServiceEligibilityNotLoadedEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.LicenseEnforcementSelfServiceEligibilityNotLoadedLoggers})},o.SettingsOAuthPopupEventName="PBI.Settings.OAuthPopup",o.SettingsOAuthPopup=r[o.SettingsOAuthPopupEventName]=function(e){return i({name:o.SettingsOAuthPopupEventName,baseEvent:o.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:o.SettingsOAuthPopupLoggers})}})(powerbi=powerbi||{}),!(function(e){function t(e){this.options=e}(e=(e=(e=e.common||(e.common={})).helpers||(e.helpers={})).TelemetryHelper||(e.TelemetryHelper={})).getTelemetryCanvasLayout=function(e){switch(e){case 0:return"Master";case 1:return"PhonePortrait"}return null},t.prototype.start=function(e){this.reject(),this.event=e()},t.prototype.resolve=function(){this.event&&(this.options&&this.options.onResolve&&this.options.onResolve(this.event),this.event.resolve(),this.event=void 0)},t.prototype.reject=function(e){this.event&&(this.options&&this.options.onReject&&this.options.onReject(this.event,e),this.event.reject(e),this.event=void 0)},e.TelemetryEventManager=t})(powerbi=powerbi||{}),!(function(e){((e=(e=e.common||(e.common={})).helpers||(e.helpers={})).UserInfoHelper||(e.UserInfoHelper={})).getFullName=function(e,t,o){return e=_.trim(e),t=_.trim(t),_.isEmpty(e)?o||"":_.isEmpty(t)?e:"".concat(e," ").concat(t)}})(powerbi=powerbi||{}),!(function(o){var a,e;function i(){}a=o.common||(o.common={}),e=a.helpers||(a.helpers={}),i.logPopupTelemetryEvent=function(e){var t=window.powerbi.createTelemetryService(window.powerbi.createTelemetryOptions(),window.powerbi.createTelemetryHostService(),window.powerbi.createUserActivityContextService());t.logEvent(o.telemetry.SettingsOAuthPopup,{hasAccessToParentWindow:e}),t.flush()},i.popupOAuthWindow=function(e){var t=window,o=!0;try{o=!!window.parent.screen}catch(e){i.logPopupTelemetryEvent(o=!1)}return o&&window.parent!==window&&(t=window.parent),i.popUpWindow(e,t)},i.authResponse=function(e,t){var o=$("iframe[name=contentProviderDialogFrame]")[0];(e=o?o.contentWindow:e).postMessage(JSON.stringify({OAuthResponse:t}),"*")},i.popUpWindow=function(e,t){var o=Math.max(Math.min(t.screen.width,a.constants.defaultPopupWindowWidth),t.screen.width/2),i=Math.max(Math.min(t.screen.height,a.constants.defaultPopupWindowHeight),t.screen.height/2),n=(t.outerWidth-o)/2,r=(n+=window.screenX,(t.outerHeight-i)/2);return r+=t.screenY,t.name="mainWindow",t=t.open(e,"_blank","top="+r+", left="+n+", screenX="+n+", screenY="+r+", width="+o+", height="+i+", resizable=yes"),jsCommon.BrowserUtility.isInternetExplorerBrowser()&&null!=t&&(t.location.href=e),t},e.OAuthPopupWindowHelper=i})(powerbi=powerbi||{}),!(function(e){var o;e=(e=(e=e.common||(e.common={})).helpers||(e.helpers={})).powerBICompanionHelper||(e.powerBICompanionHelper={}),o=window,e.getDownloadLink=function(){var e=jsCommon.Utility.is64BitOperatingSystem(),t=o.clusterUri+"/powerbi/resource/powerbicompanionapp/";return t+=e?"x64":"x86"},e.getDownloadCenterLink=function(e,t){return jsCommon.Utility.is64BitOperatingSystem()?e:t}})(powerbi=powerbi||{}),!(function(t){var e,o,i;function n(r,a,s){var e=this;return{loadNgModule:["pbiLazyLoad",function(n){return __awaiter(e,void 0,t.Promise,(function(){var t,o,i;return __generator(this,(function(e){switch(e.label){case 0:t=!0,o=0,e.label=1;case 1:return o<r.length?[4,n.isLoaded(r[o])]:[3,6];case 2:return e.sent()?[3,5]:(i=t)?[4,n.load({name:r[o],namespace:a[o],dependency:{javascript:s[o],css:[s[o]]}})]:[3,4];case 3:i=e.sent(),e.label=4;case 4:t=i,e.label=5;case 5:return o++,[3,1];case 6:return[2,t]}}))}))}]}}e=t.common||(t.common={}),(o=e.helpers||(e.helpers={})).LoadAdminPortal=n(["powerbi.adminPortal"],["powerbi.adminPortal"],["adminPortal"]),o.LoadCapacityAdmin=n(["powerbi.capacityAdmin"],["powerbi.capacityAdmin"],["capacityAdmin"]),o.LoadEmbedCodesAdmin=n(["powerbi.embedCodes"],["powerbi.embedCodes"],["embedCodes"]),o.LoadGetData=n(["powerbi.getData"],["powerbi.getData"],["getData"]),o.LoadPermissions=n(["powerbi.permissions"],["powerbi.permissions"],["permissions"]),o.LoadSettings=n(["powerbi.settings"],["powerbi.settings"],["settings"]),o.LoadJQueryUI=(i=e.modules.JQueryUIModule,{loadModule:["moduleLoader",function(e){return e.require(i)}]})})(powerbi=powerbi||{}),!(function(e){var t,o,i,n,r;function u(e,t,o){return"#"+a(e)+a(t)+a(o)}function a(e){e=e.toString(16);return 1===e.length?"0"+e:e}function s(e,t){e=g(e);return null===e?"":t||0===t?"rgba("+e.r+","+e.g+","+e.b+","+t+")":"rgb("+e.r+","+e.g+","+e.b+")"}function l(e){return/^hsl\(\d{1,3}(,\s?\d{1,3}%){2}\)|^hsla\((\d{1,3}%?,\s?){3}(1|1.0|0|0?\.\d+)\)$/gi.test(e)}function c(e){return/^rgb\(\d{1,3}(,\s?\d{1,3}){2}\)|^rgba\((\d{1,3},\s?){3}(1|1.0|0|0?\.\d+)\)$/gi.test(e)}function d(e){return null!=e&&!!e.match(t)}function p(e){return"#FFFFFF"===e||"#FFF"===e}function m(e){return"#000000"===e||"#000"===e}function h(e,t){return e=(e=t?e.substring(1):e).replace(o,(function(e,t,o,i){return t+t+o+o+i+i})),t?"#"+e:e}function g(e){e=h(e,!1);e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function f(e){var t,e=/^rgba?\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})(,\s?(1|1.0|0)|,\s?(0?\.\d+))?\)$/i.exec(e);if(!e)return null;e[5]&&(t=parseFloat(e[5])),e[6]&&(t=parseFloat(e[6]));var o=255<(o=parseInt(e[1],10))?255:o,i=255<(i=parseInt(e[2],10))?255:i,e=parseInt(e[3],10);return{r:o,g:i,b:255<e?255:e,a:t}}function v(e){var t,e=/^hsla?\((\d{1,3}),\s?(\d{1,3})%,\s?(\d{1,3})%(,\s?(1|1.0|0)|,\s?(0?\.\d+))?\)$/i.exec(e);if(!e)return null;e[5]&&(t=parseFloat(e[5])),e[6]&&(t=parseFloat(e[6]));var o=parseInt(e[1],10);o%=360;var i=100<(i=parseInt(e[2],10))?100:i,e=parseInt(e[3],10);return{h:o,s:i,l:100<e?100:e,a:t}}function y(e){function t(e){return(e/=255)<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4)}return.2126*t(e.r)+.7152*t(e.g)+.0722*t(e.b)}function b(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}e=(e=(e=e.common||(e.common={})).utils||(e.utils={})).ColorUtility||(e.ColorUtility={}),t="^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=[.6,.4,.2,.1,0],n=[-.1,-.2,-.3,-.5,-.6],r=[.6,.4,.2,-.25,-.5],e.hsvToRgb=function(e,t,o){var i,n,r,a=Math.floor(6*e),s=o*(1-t),l=o*(1-(e=6*e-a)*t),c=o*(1-(1-e)*t);switch(a%6){case 0:i=o,n=c,r=s;break;case 1:i=l,n=o,r=s;break;case 2:i=s,n=o,r=c;break;case 3:i=s,n=l,r=o;break;case 4:i=c,n=s,r=o;break;case 5:i=o,n=s,r=l}return[Math.round(255*i),Math.round(255*n),Math.round(255*r)]},e.rgbToHex=u,e.hexToRGBString=s,e.isHslOrHslaString=l,e.isRgbOrRgbaString=c,e.applyTransparency=function(e,t){var o,i;return d(e)?s(e,t):l(e)?(i=(o=v(e)).a||0===o.a?o.a:t,"hsla("+o.h+","+o.s+"%,"+o.l+"%,"+i+")"):c(e)?(i=(o=f(e)).a||0===o.a?o.a:t,"rgba("+o.r+","+o.g+","+o.b+","+i+")"):""},e.isHexColor=d,e.getHexWithoutPound=function(e){return d(e)?e.substr(1).toUpperCase():e},e.getShadePctSequence=function(e){return p(e)?n:m(e)?i:r},e.isWhiteHexColor=p,e.isBlackHexColor=m,e.ensureValidHex=function(e){return d(e)||d(e="#"+e)?e:null},e.convertTransparencyToOpacity=function(e){return 1-e/100},e.computeColorBrightness=function(e){return(.299*(e=g(e)).r+.587*e.g+.114*e.b)/255},e.isShortHexPattern=function(e){return e&&!!e.match("^#([A-Fa-f0-9]{3})$")},e.convertShortHexPatternToFull=h,e.convertHexToRGBComponents=g,e.parseRgbaComponents=f,e.rgbaStringsEqual=function(e,t){return e=f(e),t=f(t),e.a=void 0!==e.a?e.a:1,t.a=void 0!==t.a?t.a:1,_.isEqual(e,t)},e.parseHslaComponents=v,e.rgbToHsv=function(e,t,o){e/=255,t/=255,o/=255;var i,n=Math.max(e,t,o),r=Math.min(e,t,o),a=n,s=n-r,l=0===n?0:s/n;if(n===r)i=0;else{switch(n){case e:i=(t-o)/s+(t<o?6:0);break;case t:i=(o-e)/s+2;break;case o:i=(e-t)/s+4}i/=6}return[i,l,a]},e.tryGetColorForTargetMinContrastRatio=function(e,t,o){if(o<1||21<o)throw new Error("Invalid target contrast ratio value. It must be >= 1 and <= 21");var i=g(e),n=g(t),t=y(i),r=y(n),a=b(t,r);if(o<=a)return{hexColor:e,satisfiedRatio:!0};var e=b(1,r),s=b(0,r),l=s<=e;if(e<o&&s<o)return r<=t&&l?{hexColor:"#FFFFFF",satisfiedRatio:!1}:t<=r&&!l?{hexColor:"#000000",satisfiedRatio:!1}:{hexColor:l?"#FFFFFF":"#000000",satisfiedRatio:!1};for(var c=t<=r?o<=s:!(o<=e),d=!1;d=c?0===(i={r:Math.max(0,i.r-10),g:Math.max(0,i.g-10),b:Math.max(0,i.b-10)}).r&&0===i.g&&0===i.b:255===(i={r:Math.min(255,i.r+10),g:Math.min(255,i.g+10),b:Math.min(255,i.b+10)}).r&&255===i.g&&255===i.b,(a=(function(e,t){e=y(e),t=y(t);return b(e,t)})(i,n))<o&&!d;);return{hexColor:u(i.r,i.g,i.b),satisfiedRatio:o<=a}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).DropdownUtils||(e.DropdownUtils={})).showLegacyDropdownItems=function(e,t,o,i,n,r,a){e.showMenu({overlayName:t,menuItems:o,onItemSelected:n,overlayClass:i,onClose:a},"dropdownItemsLegacy.html",r)}})(powerbi=powerbi||{}),!(function(e){var t=e.common||(e.common={}),n=window,o=(i.create=function(e,t,o,i,n){return n.require({javascript:"msrcrypto"}).then((function(){return new(172===t.length?a:c)(e,t,o,i)}))},i.generateEntropy=function(){for(var e=[],t=0;t<48;t++)e.push(Math.floor(256*Math.random()));return e},i.prototype.arrayToBase64String=function(e){for(var t="",o=e.length,i=0;i<o;i++)t+=String.fromCharCode(e[i]);return window.btoa(t)},i.prototype.toSupportedArray=function(e){var t="undefined"!=typeof Uint8Array,o=Object.prototype.toString.call(e);switch(o=o.substring(8,o.length-1)){case"Array":return t?new Uint8Array(e):e;case"ArrayBuffer":return new Uint8Array(e);case"Uint8Array":return e;case"Uint16Array":case"Uint32Array":return new Uint8Array(e);case"String":for(var i=e.length,n=new(t?Uint8Array:Array)(i),r=0;r<i;r++)n[r]=e.charCodeAt(r);return n;default:throw new Error("toSupportedArray : unsupported data type "+o)}},i.prototype.toUTF8Array=function(e){for(var t=[],o=0;o<e.length;o++){var i=e.charCodeAt(o);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||57344<=i?t.push(224|i>>12,128|i>>6&63,128|63&i):(o++,i=65536+((1023&i)<<10|1023&e.charCodeAt(o)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}var n=new Uint8Array(t.length);return n.set(t,0),n},i);function i(e,t,o){this.callback=o,this.plainTextBytes=this.toUTF8Array(e),this.publicKey=t}t.EncryptionContext=o,__extends(s,r=o),s.prototype.rsaEncrypt=function(){return __awaiter(this,void 0,e.Promise,(function(){var t,o=this;return __generator(this,(function(e){return t=this.toSupportedRSAPublicKey(this.publicKey),t=this.toSupportedArray(t),msrCrypto.subtle.forceSync=!0,msrCrypto.initPrng&&msrCrypto.initPrng(this.entropy),msrCrypto.subtle.importKey("jwk",t,{name:"RSA-OAEP",hash:{name:"sha-1"}}).oncomplete=function(e){return o.rsaPublicKeyImportComplete(e)},[2]}))}))},s.prototype.rsaPublicKeyImportComplete=function(e){this.publicKeyHandle=e.target.result,this.rsaEncryption()},s.prototype.rsaEncryption=function(){var t=this;msrCrypto.subtle.encrypt({name:"RSA-OAEP",hash:{name:"sha-1"}},this.publicKeyHandle,this.plainTextBytes.subarray(85*this.currentSegment,85*(this.currentSegment+1))).oncomplete=function(e){return t.rsaEncryptionSegmentComplete(e)}},s.prototype.rsaEncryptionSegmentComplete=function(e){this.encryptedBytes.set(new Uint8Array(e.target.result),128*this.currentSegment),this.currentSegment++,this.currentSegment<this.segments?this.rsaEncryption():this.callback(this.arrayToBase64String(this.encryptedBytes))},s.prototype.toSupportedRSAPublicKey=function(e){return'{                 "kty" : "RSA",                 "extractable" : true,                 "n" : "'+e+'",                 "e" : "AQAB"             }'};var r,a=s;function s(e,t,o,i){e=r.call(this,e,t,i)||this;return e.entropy=o,e.segments=Math.ceil(e.plainTextBytes.length/85),e.currentSegment=0,e.encryptedBytes=new Uint8Array(128*e.segments),e}t.EncryptionContext1024KeyBit=a,__extends(d,l=o),d.prototype.rsaEncrypt=function(){return __awaiter(this,void 0,e.Promise,(function(){var t,o,i,n,r,a,s,l=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.executeCryptoOperation((function(){return l.crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}))];case 1:return t=e.sent(),o=this.crypto.getRandomValues(new Uint8Array(64)),[4,this.executeCryptoOperation((function(){return l.crypto.subtle.importKey("raw",o,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"])}))];case 2:return i=e.sent(),n=this.crypto.getRandomValues(new Uint8Array(16)),[4,this.executeCryptoOperation((function(){return l.crypto.subtle.encrypt({name:"AES-CBC",iv:n},t,l.plainTextBytes)}))];case 3:return a=e.sent(),[4,this.getSignedPayload(new Uint8Array(a),n,i)];case 4:return r=e.sent(),[4,this.getEncryptedKeys(t,o)];case 5:return a=e.sent(),s=a.concat(r),this.callback(s),[2]}}))}))},d.prototype.getEncryptedKeys=function(i,n){return __awaiter(this,void 0,e.Promise,(function(){var t,o;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.exportKey(i)];case 1:return t=e.sent(),o=this.getGeneratedKeyLengths(t,n),o=this.concatTypedArrays(o,this.concatTypedArrays(t,n)),[2,this.performAsyncKeyEncryption(o)]}}))}))},d.prototype.exportKey=function(i){return __awaiter(this,void 0,e.Promise,(function(){var t,o=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.executeCryptoOperation((function(){return o.crypto.subtle.exportKey("raw",i)}))];case 1:return t=e.sent(),[2,new Uint8Array(t)]}}))}))},d.prototype.getSignedPayload=function(n,r,a){return __awaiter(this,void 0,e.Promise,(function(){var t,o,i=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.concatTypedArrays(this.getEncryptionAlgorithmTypes(),r),t=this.concatTypedArrays(t,n),[4,this.executeCryptoOperation((function(){return i.crypto.subtle.sign({name:"HMAC",hash:{name:"SHA-256"}},a,t)}))];case 1:return o=e.sent(),o=this.concatTypedArrays(this.getEncryptionAlgorithmTypes(),new Uint8Array(o)),o=this.concatTypedArrays(o,r),o=this.concatTypedArrays(o,n),[2,this.arrayToBase64String(o)]}}))}))},d.prototype.getEncryptionAlgorithmTypes=function(){var e=new Uint8Array(2);return e[0]=0,e[1]=0,e},d.prototype.performAsyncKeyEncryption=function(r){return __awaiter(this,void 0,e.Promise,(function(){var t,o,i,n=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.publicKey.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),[4,this.executeCryptoOperation((function(){return n.crypto.subtle.importKey("jwk",n.getJwkFormat(t),{name:"RSA-OAEP",hash:{name:"sha-256"}},!1,["encrypt"])}))];case 1:return o=e.sent(),[4,this.executeCryptoOperation((function(){return n.crypto.subtle.encrypt({name:"RSA-OAEP",hash:{name:"sha-256"}},o,r)}))];case 2:return i=e.sent(),[2,this.arrayToBase64String(new Uint8Array(i))]}}))}))},d.prototype.concatTypedArrays=function(e,t){var o=new Uint8Array(e.byteLength+t.byteLength);return o.set(new Uint8Array(e),0),o.set(new Uint8Array(t),e.byteLength),o},d.prototype.getGeneratedKeyLengths=function(e,t){var o=new Uint8Array(2);return o[0]=this.mapGeneratedKeyLength(e),o[1]=this.mapGeneratedKeyLength(t),o},d.prototype.mapGeneratedKeyLength=function(e){switch(e.length){case 32:return 0;case 64:return 1;default:throw new Error("mapGeneratedKeyLength : unsupported key length "+e.length)}},d.prototype.executeCryptoOperation=function(e){return e()},d.prototype.getJwkFormat=function(e){return{kty:"RSA",e:"AQAB",n:e,alg:"RSA-OAEP-256",ext:!0}};var l,c=d;function d(e,t,o,i){e=l.call(this,e,t,i)||this;return e.crypto=n.crypto||n.msCrypto,e}t.EncryptionContextHigherKeyBit=c})(powerbi=powerbi||{}),!(function(e){var t;function r(){}e=(e=e.common||(e.common={})).utils||(e.utils={}),t=/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/,r.generateId=function(e,t){var o=r.generateUUID();return"".concat(e||"").concat(o).concat(t||"")},r.generateShortId=function(e){return(Math.random().toString(36)+"00000000000000000").slice(2,e+2)},r.generateUniqueId=function(e,t,o){for(var i,n=0;void 0===i||e[i];){if(1e3<++n){"iterationCount is greater than ".concat(1e3," while generating a unique id");break}i=r.generateId(t,o)}return i},r.isGuid=function(e){return!_.isEmpty(e)&&36===e.length&&(e=e.match(t),!_.isEmpty(e))&&1===e.length},r.generateUUID=function(){var o=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(o+=performance.now()),"xxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=o+16*Math.random()&15|0;return o>>=4,t.toString(16)}))},e.IdUtility=r})(powerbi=powerbi||{}),!(function(e){function t(){this.items=[],this.listeners=[]}e=e.common||(e.common={}),t.prototype.addItem=function(e){if(null!=e&&!_.includes(this.items,e)){this.items.push(e);for(var t=0,o=this.listeners;t<o.length;t++){var i=o[t];i.onAdded&&i.onAdded(e)}}},t.prototype.deleteItems=function(e){if(!e)return[];if(_.isEmpty(this.items))return[];e=_.remove(this.items,e);if(!_.isEmpty(e)){var t=this.listeners;if(!_.isEmpty(t))for(var o=0,i=e;o<i.length;o++)for(var n=i[o],r=0,a=t;r<a.length;r++){var s=a[r];s.onDeleted&&s.onDeleted(n)}}return e},t.prototype.setItems=function(e){this.items=e;for(var t=0,o=this.listeners;t<o.length;t++){var i=o[t];i.onReset&&i.onReset()}},t.prototype.subscribe=function(e){this.listeners.push(e)},t.prototype.unsubscribe=function(e){_.remove(this.listeners,e)},e.NotifyCollection=t})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).utils||(e.utils={})).getDsrReaderSwitches=function(e){return{dsrV2:e.dsrV2||e.dsrV2_Staging,queryCancellation:e.queryCancellation,telemetryV2:e.telemetryV2,scopedAggregates:e.scopedAggregates,synchronizedGroupsEnabled:e.cartesianMultiples,scopedMeasuresEnabled:e.comboMultiples,addVisualIdToQueryDataAsHttpBodyId:e.addVisualIdToQueryDataAsHttpBodyId,queryContext:e.queryContext,lruCacheEvictionPolicy:e.lruCacheEvictionPolicy,categoricalSecondaryCF:e.categoricalSecondaryCF}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).OverlayUtils||(e.OverlayUtils={})).getAnchorDimensions=function(e){var t=e.offset();return{left:t.left,top:t.top,width:e.outerWidth(!0),height:e.outerHeight(!0)}}})(powerbi=powerbi||{}),!(function(e){function t(e){this.maxKeysCount=e,this.keys=[],this.valuesMap={}}e=e.common||(e.common={}),t.prototype.add=function(e,t){var o=this.keys,i=this.valuesMap,n=this.hasKey(e);i[e]=t,n||(o.push(e),o.length>this.maxKeysCount&&(delete i[o[0]],o.shift()))},t.prototype.get=function(e){return this.valuesMap[e]},t.prototype.hasKey=function(e){return void 0!==this.valuesMap[e]},e.RollingHashSet=t})(powerbi=powerbi||{}),!(function(e){function t(e){var t,o,i;e&&(t=e.value(),e.firstChange?o=!(e.firstChange=!1):e.equal(t,e.oldValue)||(o=!1),void 0!==o)&&(i=e.oldValue,e.oldValue=e.copy(t),e.onChange(t,i,o))}function o(){this.watches={}}e=e.common||(e.common={}),o.prototype.has=function(e){return null!=this.watches[e]},o.prototype.add=function(e,t,o,i){var n;this.watches[e],"Added watch twice: ".concat(e),i=i&&2===i.mode?(n=function(e,t){return _.isEqual(e,t)},function(e){return _.cloneDeep(e)}):i&&1===i.mode?(n=function(e,t){var o=e,i=t;if(!o||!i)return o===i;e=o.length;if(e!==i.length)return!1;for(var n=e;0<n--;)if(o[n]!==i[n])return!1;return!0},function(e){return _.clone(e)}):(n=function(e,t){return e===t},function(e){return e}),this.watches[e]={id:e,value:t,onChange:o,firstChange:!0,equal:n,copy:i}},o.prototype.remove=function(e){delete this.watches[e]},o.prototype.doCheck=function(){_.forEach(this.watches,t)},e.Watcher=o})(powerbi=powerbi||{}),!(function(e){(e=(e=(e=e.common||(e.common={})).models||(e.models={})).TooltipTheme||(e.TooltipTheme={}))[e.Light=0]="Light",e[e.Dark=1]="Dark"})(powerbi=powerbi||{}),!(function(e){e.ExploreExplorationCreation="Explore_ExplorationCreation",e.ExportExcelEmptyColumnName="ExportExcel_EmptyColumnName",e.ModelFailednoErrorInfo="modelFailednoErrorInfo",e.ModelSizeExceedsSharedCapacityLimit="ModelSizeExceedsSharedCapacityLimit",e.ModelWithIncrementalRefreshIsNotDownloadable="ModelWithIncrementalRefreshIsNotDownloadable",e.ModelWithPremiumFileFormatIsNotDownloadable="ServerError_PremiumFilesErrors_OperationIsNotSupportedForPremiumFilesModel",e.ModelModifiedByXmlaEndpointIsNotDownloadable="ExportData_DisabledForModelModifiedByXmlaEndpoint",e.ModelWithInferredPartitionIsNotDownloadable="ExportData_DisabledForModelWithInferredPartition",e.UnsupportedModelWithRefreshPolicyInSharedCapacity="UnsupportedModelWithRefreshPolicyInSharedCapacity",e.DatasetsWithCompositeModelsNotSupported="DatasetsWithCompositeModelsNotSupported",e.PowerBIEntityNotFound="PowerBIEntityNotFound",e.PowerBINotAuthorizedException="PowerBINotAuthorizedException",e.PowerBINotLicensedException="PowerBINotLicensedException",e.RS_ErrorOpeningConnection="rsErrorOpeningConnection",e.ServicePlanDoesNotSupportGroups="ServicePlanDoesNotSupportGroups",e.TokenExpired="TokenExpired",e.UserNotLicensed="UserNotLicensed",e.NetworkConnectionIssue="NetworkConnectionIssue",e.NavigateAway="NavigateAway",e.ChangeDetectionMeasureExecutionDisabledException="ChangeDetectionMeasureExecutionDisabledException",e.UnsupportedChangeDetectionMeasureException="UnsupportedChangeDetectionMeasureException",e.FailedToAutoAssignLicense="FailedToAutoAssignLicense",e.PersistModelRequestInvalid="PersistModelRequestInvalid",e.PowerBIOperationNotSupported="PowerBIOperationNotSupported"})(powerbi=powerbi||{}),!(function(l){var c,e,a,t,r,o,d,i,n,s;function u(e){for(var t=e.refreshConnections,o=void 0!==t?t.length:0,i=0;i<o;i++)if(t[i].onpremGatewayRequired)return!0;return!1}function p(e){var t=new RegExp("(asazure://|pbiazure://|powerbi://|link://)","i");return(void 0===e.onPremModelConnectionString||t.test(e.onPremModelConnectionString))&&e.dataCacheMode!==o.DirectQuery}function m(e){try{var t=i.getDateFromWcfJsonString(e,!0);return t}catch(e){return e.message,null}}function h(e,t){switch(e){case r.NotSpecified:return t.get("AuthenticationMethod_NotSpecified");case r.Windows:return t.get("SettingsDataSource_SettingsAuthenticationMethod_Windows");case r.Anonymous:return t.get("SettingsDataSource_SettingsAuthenticationMethod_Anonymous");case r.Basic:return t.get("SettingsDataSource_SettingsAuthenticationMethod_Basic");case r.Key:return t.get("SettingsDataSource_SettingsAuthenticationMethod_Key");case r.OAuth2:return t.get("AuthenticationMethod_OAuth2");case r.EffectiveUserName:return t.get("AuthenticationMethod_EffectiveUserName");case r.SingleSignOn:return t.get("AuthenticationMethod_SingleSignOn");case r.WindowsWithoutImpersonation:return t.get("AuthenticationMethod_WindowsWithoutImpersonation");case r.SAS:return t.get("AuthenticationMethod_SAS");default:return r[e]}}function g(e,t){return _.map(e,(function(e){return h(e,t)}))}function f(e,t,o){var i=t.credentialDetails,e={modelId:e,datasourceId:t.dataSourceId,dataSourceObjectId:t.dataSourceObjectId,gatewayId:t.gatewayId,gatewayObjectId:t.gatewayObjectId,name:t.dataSourceName,oAuth2URL:t.oAuth2Endpoint,oAuth2Nonce:t.oAuth2Nonce,datasourceType:t.dataSourceType,credentialTypes:t.supportedAuthenticationTypes,credentialTypesNames:g(t.supportedAuthenticationTypes,o),connectionStringGeneralProperties:v(t.connectionDetails),onpremGatewayRequired:t.onPremGatewayRequired,singleSignOnType:t.singleSignOnType,skipTestConnection:!!i&&i.skipTestConnection,selectedCredentialType:i?i.credentialType:void 0,selectedPrivacyLevel:i?i.privacyLevel:void 0,gatewayType:t.gatewayType};return e.datasourceType===d.Extension&&(i=JSON.parse(t.dataSourceReference),e.dataSourceKind=i.kind),e.fullName=a.getDatasourceFullName(e,o),e.displayName=a.getDatasourceDisplayName(e,o),e}function v(e){var t=new Array;if(e){var o,i=JSON.parse(e);for(o in i){var n={name:o,value:i[o]};t.push(n)}}return t}function y(e){return e?null!=e.server?(e.database,[{name:"Server",value:e.server},{name:"Database",value:e.database}]):null!=e.path?[{name:"path",value:e.path}]:null!=e.modelId?[{name:"modelId",value:e.modelId},{name:"workspaceId",value:e.workspaceId}]:(e.extensionDataSourceKind,e.extensionDataSourcePath,[{name:"extensionDataSourceKind",value:e.extensionDataSourceKind},{name:"extensionDataSourcePath",value:e.extensionDataSourcePath}]):[]}function b(e,t){return{importAndRefreshBehavior:e.importAndRefreshBehavior,refreshEnabled:e.refreshEnabled,refreshFrequency:(function(e){switch(parseInt(e.refreshFrequency,10)){case 15:return 15;case 30:return 30;case 60:return 60;case 120:return 120;case 180:return 180}return e.isDaily?1440:10080})(e),refreshDays:C(e.weekDays),refreshTimeWindowIndex:(function(e,t){e=e?(e=e.split(":"),e=parseInt(e[0],10),0<=e&&e<24?Math.floor(e/6):(l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeInvalidHour"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeInvalidHour"),0)):0;return e})(e.executionTime,t),refreshTimesHourly:a.getTimeProWindowIndexFromExecutionTime(e.executionTimeHourly,t),refreshTimeZoneId:e.localTimeZoneId,sendFailureEmail:!0,isRefreshable:e.isRefreshable,refreshNotificationEnabled:e.refreshNotificationEnabled,refreshEmails:{emailsList:void 0,emailValidationError:"",emailValidationWarning:""}}}function S(e,t){switch(e.datasourceType){case d.AnalysisServices:case d.Oracle:case d.SqlServer:case d.MySql:case d.PostgreSql:case d.Sybase:case d.Teradata:case d.DB2:var o=void 0,i=void 0,n=e.connectionStringGeneralProperties;if(!n)return d[e.datasourceType];for(var r=n.length,a=0;a<r;a++){var s=n[a];"database"===s.name?o=s.value:"server"===s.name&&(i=s.value)}return o||i?(o||"")+(o&&i?"-":"")+(i||""):d[e.datasourceType];case d.Folder:case d.File:var l=_.find(e.connectionStringGeneralProperties,{name:"path"});return jsCommon.Utility.extractFileNameFromPath(l.value);case d.Extension:return _.find(e.connectionStringGeneralProperties,{name:"extensionDataSourceKind"}).value;case d.AdoDotNet:var l=_.find(e.connectionStringGeneralProperties,{name:"workspaceId"}),c=_.find(e.connectionStringGeneralProperties,{name:"modelId"});return t.format("SettingsDataset_AdoDotNetText",[l.value,c.value]);case d.ActiveDirectory:case d.AzureTable:case d.AzureBlob:case d.Web:case d.OData:case d.SharePoint:case d.SharePointList:case d.GoogleAnalytics:case d.Exchange:case d.Facebook:case d.HDInsight:case d.AzureMarketplace:case d.Salesforce:case d.SAPBW:case d.SAP:case d.OleDb:case d.ODBC:case d.Essbase:return d[e.datasourceType];default:return e.name}}function w(e,t){switch(+e.datasourceType){case d.Folder:case d.File:return _.find(e.connectionStringGeneralProperties,{name:"path"}).value;default:return S(e,t)}}function C(e){for(var t=new Array,o=0;o<7;o++)t[o]=1==(1&e),e>>=1;return t}function T(e){for(var t=0,o=6;0<=o;o--)t<<=1,t=!0===e[o]?1|t:t;return t}function D(e){for(var t=[],o=e.length,i=0;i<o;i++){var n=e[i],r=(n.refreshHourIndex+1)%12+12*n.refreshAmPmIndex,n=30*n.refreshMinuteIndex;t.push(r.toString()+":"+(0===n?"00":n.toString())+":00")}return JSON.stringify(t)}c=l.common||(l.common={}),e=c.helpers||(c.helpers={}),n={year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},s={year:"2-digit",month:"numeric",day:"numeric"},a=e.ModelConverterHelper||(e.ModelConverterHelper={}),t=c.contracts.ContentProviderClientCategory,r=c.contracts.gateway.CredentialType,o=c.contracts.DataCacheModeType,d=c.contracts.gateway.DataSourceType,i=jsCommon.Utility,a.onpremGatewayRequired=u,a.onpremGatewayAllowed=function(e){return u(e)||p(e)},a.canScheduleRefresh=p,a.convertRefreshTimeToJsDateTime=m,a.convertRefreshTimeToLocaleString=function(e,t,o){void 0===o&&(o=!0);try{var i=m(e);return!o||!i||2998<i.getFullYear()||i.getFullYear()<2?t.get("ManageDatasets_NextRefresh_NA"):i.toLocaleString()}catch(e){return e.message,t.get("ManageDatasets_NextRefresh_NA")}},a.getLocaleDateStringFromRefreshTime=function(e,t){try{var o=a.convertRefreshTimeToJsDateTime(e);return!o||2998<o.getFullYear()||o.getFullYear()<2?t&&t.invalidDateTimePlaceholder||"":o.toLocaleDateString(void 0,t&&t.format||s)}catch(e){return e.message,t&&t.invalidDateTimePlaceholder||""}},a.getLocaleStringFromRefreshTime=function(e,t){try{var o=a.convertRefreshTimeToJsDateTime(e);return!o||2998<o.getFullYear()||o.getFullYear()<2?t&&t.invalidDateTimePlaceholder||"":o.toLocaleString(void 0,t&&t.format||n)}catch(e){return e.message,t&&t.invalidDateTimePlaceholder||""}},a.convertDMTSDiscoverDatasourcesResponseToDatasources=function(e,t,o){for(var i=new Array,n=0,r=t;n<r.length;n++){var a=r[n],s=f(e,a,o);s.datasourceId=a.dataSourceId,s.dataSourceObjectId=a.dataSourceObjectId,s.gatewayId=a.gatewayId,s.gatewayObjectId=a.gatewayObjectId,s.testConnectionState=a.credentialDetails?c.models.TestConnectionState.NotStart:c.models.TestConnectionState.NotSpecified,s.alreadyExecutedTestConnection=!1,i.push(s)}return i},a.convertCredentialTypeToString=h,a.convertCredentialTypesToStrings=g,a.convertDMTSDatasourceToDatasetDatasource=f,a.convertConnectionDetailsToConnectionStringGeneralProperties=v,a.getConnectionStringGeneralProperties=y,a.convertCloudDirectQueryDatasourceToDatasetDatasource=function(e,t,o){var i=jsCommon.JsonExtensions.tryParseJSON(t.connectionDetails),n=[];return _.includes(t.supportedAuthenticationTypes,r.Basic)&&n.push(r.Basic),_.includes(t.supportedAuthenticationTypes,r.OAuth2)&&n.push(c.contracts.gateway.CredentialType.OAuth2),t.supportedAuthenticationTypes=n,(n={modelId:e,datasourceId:t.dataSourceId,dataSourceObjectId:t.dataSourceObjectId,name:c.contracts.gateway.DataSourceType[t.dataSourceType],oAuth2URL:t.oAuth2Endpoint,oAuth2Nonce:t.oAuth2Nonce,datasourceType:t.dataSourceType,credentialTypes:t.supportedAuthenticationTypes,credentialTypesNames:g(t.supportedAuthenticationTypes,o),connectionStringGeneralProperties:y(i),onpremGatewayRequired:!1,gatewayId:t.gatewayId,gatewayObjectId:t.gatewayObjectId,isCloudDirectQuery:!0,testConnectionErrorMessage:t.credentialDetails?null:o.get("SettingsDataset_Error_CredentialsNotFound"),testConnectionState:t.credentialDetails?c.models.TestConnectionState.Passed:c.models.TestConnectionState.Failed,alreadyExecutedTestConnection:!0,singleSignOnType:t.singleSignOnType}).fullName=a.getDatasourceFullName(n,o),n.displayName=a.getDatasourceDisplayName(n,o),n},a.getRefreshSettings=b,a.convertModelToDataset=function(e,t){var o=e.refreshSchedule,i=b(o,t);return 10080===i.refreshFrequency&&o.refreshFrequency&&o.refreshFrequency===1440..toString()&&9===e.contentProviderId&&(i.refreshFrequency=1440,i.refreshEnabled=!0,e.nextRefreshTime)&&((!i.refreshTimesHourly||i.refreshTimesHourly.length<1)&&(i.refreshTimesHourly=(function(e){var e=a.convertRefreshTimeToJsDateTime(e),t=e.getMinutes(),e=e.getHours();30<t?(t=0,24<++e&&(e-=24)):t=30;return[{refreshHourIndex:(e+11)%12,refreshMinuteIndex:Math.floor(t/30),refreshAmPmIndex:Math.floor(e/12),isIncomplete:!1,isDuplicate:!1}]})(e.nextRefreshTime)),i.refreshTimeWindowIndex&&0!==i.refreshTimeWindowIndex||(i.refreshTimeWindowIndex=(function(e){var e=a.convertRefreshTimeToJsDateTime(e),t=e.getHours();30<e.getMinutes()&&24<++t&&(t-=24);return t})(e.nextRefreshTime))),new c.models.SettingsDatasetModel(e,e.id,e.displayName,e.description,4===e.lastRefreshStatus||2===e.lastRefreshStatus,_.isEmpty(e.refreshHistories)?"":e.refreshHistories[0].friendlyErrorMessage,a.convertRefreshTimeToJsDateTime(e.nextRefreshTime).toString(),i,e.parameters,t)},a.convertSettingModelToRefreshScheduleContract=function(e,t){var o=1440===e.refreshFrequency,i=10080===e.refreshFrequency,n=null,r=(o?n=c.constants.allWeekDays:i&&(n=T(e.refreshDays)),null);return o||i||(r=e.refreshFrequency.toString()),{importAndRefreshBehavior:e.importAndRefreshBehavior,refreshEnabled:e.refreshEnabled,isDaily:1440===e.refreshFrequency,refreshFrequency:r,weekDays:n,executionTime:t?(o=6*e.refreshTimeWindowIndex,(i=new Date).setHours(o),i.setMinutes(0),i.setSeconds(0),i=(o=i.toTimeString()).indexOf(" "),o.substr(0,i)):null,executionTimeHourly:t?null:D(e.refreshTimesHourly),localTimeZoneId:e.refreshTimeZoneId,refreshNotificationEnabled:e.refreshNotificationEnabled,refreshContacts:e.refreshEmails.emailsList?e.refreshEmails.emailsList.inputUserList:[]}},a.convertModelsToDatasets=function(e,t){for(var o=new Array,i=0,n=e;i<n.length;i++){var r=n[i],r=a.convertModelToDataset(r,t);o.push(r)}return o},a.getDatasourceDisplayName=S,a.getDatasourceFullName=w,a.getDatasourceNames=function(e,t){if(!_.isEmpty(e))for(var o=0,i=e;o<i.length;o++){var n=i[o];n.displayName=S(n,t),n.fullName=w(n,t)}},a.getContentProviderClientCategory=function(e){if(e){if(null!=e.clientCategory)return e.clientCategory;switch(e.category){case 1:case 3:case 6:return t.Service;case 2:case 5:case 4:case 7:return t.Organizational}}},a.convertModelWeekdaysToDatasetWeekdays=C,a.convertDatasetWeekdaysToModelWeekdays=T,a.getExecutionTimesHourlyFromTimeWindowIndex=D,a.getTimeProWindowIndexFromExecutionTime=function(e,t){var o=[];if(e){try{var i=JSON.parse(e)}catch(e){return void l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidJsonFormat"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidJsonFormat")}for(var n=i.length,r=0;r<n;r++){var a=i[r].split(":"),s=parseInt(a[0],10),a=parseInt(a[1],10);s<0||24<=s?l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidHour"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidHour"):a<0||60<=a?l.common.getErrorService().error(t.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidMinute"),"SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidMinute"):(a={refreshHourIndex:(s+11)%12,refreshMinuteIndex:Math.floor(a/30),refreshAmPmIndex:Math.floor(s/12),isIncomplete:!1,isDuplicate:!1},o.push(a))}}return o},a.getIsQnaSupported=function(e){return _.isEmpty(e.displayName)?e.qnaSupported:!0===e.qnaSupported&&(1===e.pushDataVersion||2===e.pushDataVersion||e.dataCacheMode===o.Import&&!1!==e.powerBIQnaEnabled||!!e.onPremModelConnectionString&&e.powerBIQnaEnabled||(e.dataCacheMode===o.DirectQuery||e.dataCacheMode===o.Mixed)&&e.powerBIQnaEnabled)},a.isDQOrLiveConnectToOnPremModel=function(e){return!(!e||e.dataCacheMode!==o.DirectQuery&&e.dataCacheMode!==o.Mixed&&_.isEmpty(e.onPremModelConnectionString))},a.hasDeletedDataSources=function(o){for(var e=0,t=o.monikers;e<t.length;e++){var i=t[e],i=_.filter(i.monikerDataSources,(function(e){return null==e.dataSourceId}));if(i&&0!==i.length){if(_.every(i,(function(e){return!e.matchingDataSourceObjectIds||0===e.matchingDataSourceObjectIds.length})))return!0;for(var n=[],r=0,a=i;r<a.length;r++){var s=a[r],s=_.map(s.matchingDataSourceObjectIds,(function(t){var e;return null==(e=_.find(o.datasources,(function(e){return e.dataSourceObjectId===t})))?void 0:e.onPremGatewayRequired}));n.push.apply(n,s)}if(_.some(n,(function(e){return!1===e}))||0===n.length)return!0}}return!1},a.getEffectiveDatasourcesFromDiscoverDatasourceResponse=function(e,t){for(var o=[],i=0,n=e.monikers;i<n.length;i++){var r=n[i],r=_.map(r.monikerDataSources,(function(e){return e.dataSourceObjectId}));_.every(r,(function(e){return e}))&&o.push.apply(o,r||[])}return _.filter(e.datasources,(function(e){return(e.gatewayObjectId===t||!1===e.onPremGatewayRequired)&&_.includes(o,e.dataSourceObjectId)}))}})(powerbi=powerbi||{}),!(function(e){var t,i,n,r;function o(e,t,o){void 0===o&&(o=!1),this.redirectPath=e,this.appSettings=t,this.useMsPbi=o}t=(t=e.common||(e.common={})).helpers||(t.helpers={}),i=e.common.constants.myWorkspaceFolderId,n=jsCommon.StringExtensions,r=window,o.webRedirectUrlHelper=function(e){return this._webRedirectUrlHelper||(this._webRedirectUrlHelper=new o("Redirect",e)),this._webRedirectUrlHelper},o.mobileRedirectUrlHelper=function(e){return this._mobileRedirectUrlHelper||(this._mobileRedirectUrlHelper=new o("MobileRedirect.html",e)),this._mobileRedirectUrlHelper},o.prototype.getAppRedirectUrl=function(e,t,o,i){return this.getRedirectUrl({action:"OpenApp",groupObjectId:e,context:i,appId:t,ctid:o})},o.prototype.getDashboardRedirectUrl=function(e,t,o,i,n,r,a,s){return"MSTeams"!==a&&"ChatInTeams"!==a&&_.isEmpty(e)&&_.isEmpty(t),this.getRedirectUrl({action:"OpenDashboard",context:n,groupObjectId:e,appId:t,dashboardObjectId:o,ctid:i,tileId:r,pbi_source:a,openDashboardSource:s})},o.prototype.getReportRedirectUrl=function(e,t,o,i,n,r,a,s,l){"MSTeams"!==s&&"ChatInTeams"!==s&&_.isEmpty(e)&&_.isEmpty(t);a={action:1===a?"OpenRdlReport":"OpenReport",context:r,groupObjectId:e,appId:t,reportObjectId:o,ctid:n,pbi_source:s,bookmarkGuid:l};return _.isEmpty(i)||(a.reportPage=i),this.getRedirectUrl(a)},o.prototype.getDatasetRedirectUrl=function(e,t,o,i){return"MSTeams"!==i&&"ChatInTeams"!==i&&_.isEmpty(e),this.getRedirectUrl({action:"OpenDataset",context:o,groupObjectId:e,datasetObjectId:t,pbi_source:i})},o.prototype.getScorecardRedirectUrl=function(e,t,o,i,n){return this.getRedirectUrl({action:"OpenScorecard",groupObjectId:e,scorecardObjectId:t,ctid:o,context:i,pbi_source:n})},o.prototype.getWorkbookRedirectUrl=function(e,t,o,i,n){return _.isEmpty(e)&&_.isEmpty(t),this.getRedirectUrl({action:"OpenWorkbook",context:n,groupObjectId:e,appId:t,workbookUniqueId:o,ctid:i})},o.prototype.getTileRedirectUrl=function(e,t,o,i,n){return _.isEmpty(e)&&_.isEmpty(t),this.getRedirectUrl({action:"OpenTile",context:n,groupObjectId:e,appId:t,dashboardObjectId:o,tileObjectId:i})},o.prototype.getServiceAppInstallRedirectUrl=function(e,t,o,i){e={action:"InstallApp",appId:e,packageKey:t.replace("=",""),ownerId:o};_.isEmpty(i)||(e.buildVersion=i);t=(window.location.protocol+"//"+window.location.host).replace(r.baseUrl,r.feUrl);return this.getRedirectUrl(e,t)},o.prototype.getLineageViewRedirectUrl=function(e,t){return _.isEmpty(e),this.getRedirectUrl({action:"OpenLineageView",groupObjectId:e,reportObjectId:t})},o.prototype.getRedirectUrl=function(e,t){if(this.useMsPbi)return o=e.action,e=this.removeEmptyParams(e,this.useMsPbi),n.format("{0}/{1}?{2}","mspbi://app",o,$.param(e));e=this.removeEmptyParams(e);var o=t||this.appSettings.baseUrl;return n.format("{0}/{1}?{2}",o,this.redirectPath,$.param(e))},o.prototype.removeEmptyParams=function(e,t){void 0===t&&(t=!1);var o=[];return!_.isEmpty(e.groupObjectId)&&e.groupObjectId!==i||o.push("groupObjectId"),_.isEmpty(e.appId)&&o.push("appId"),_.isEmpty(e.context)&&o.push("context"),_.isEmpty(e.reportObjectId)&&o.push("reportObjectId"),_.isEmpty(e.ctid)&&o.push("ctid"),_.isEmpty(e.openDashboardSource)&&o.push("openDashboardSource"),_.isEmpty(e.tileId)&&o.push("tileId"),_.isEmpty(e.dashboardObjectId)&&o.push("dashboardObjectId"),_.isEmpty(e.bookmarkGuid)&&o.push("bookmarkGuid"),_.isEmpty(e.pbi_source)&&o.push("pbi_source"),(_.isEmpty(e.action)||t)&&o.push("action"),e=0<o.length?_.omit(e,o):e},t.RedirectUrlHelper=o})(powerbi=powerbi||{}),!(function(e){var i;function t(e,t){var o=this;this.services=t,this.scope=e,this.scope.gridLayoutService=this.services.gridLayout,this.scope.$watch("gridLayoutService.strategy",(function(){o.scope.gridLayoutContainer.onGridLayoutChanged(i.models.gridLayoutConstants.changeType.refresh)}))}i=e.common||(e.common={}),e=i.controllers||(i.controllers={}),t.createOptions=function(){return{additionalServices:["gridLayout"]}},e.GridLayoutController=t})(powerbi=powerbi||{}),!(function(e){function t(e){var t=this;this.scope=e,this.scope.close=function(){return t.onClose()},this.scope.confirm=function(){return t.onConfirm()},this.scope.cancel=function(){return t.onCancel()}}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),t.prototype.onClose=function(){this.scope.onCloseAction&&this.scope.onCloseAction()},t.prototype.onConfirm=function(){this.scope.onConfirmAction&&this.scope.onConfirmAction(),this.scope.viewModel.autoCloseDialogOnConfirmButtonSelected&&this.onClose()},t.prototype.onCancel=function(){this.scope.onCancelAction&&this.scope.onCancelAction()},e.ModalDialogController=t})(powerbi=powerbi||{}),!(function(e){var i,o,n;function t(e,t,o){this.anchor=e.closest(i.AnchorSelector),this.container=e.closest(i.ContainerSelector),this.container.length,this.updateOptions(o),this.visible=!1,t&&this.setToolbar(t)}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),(i=e.ToolbarOverlay||(e.ToolbarOverlay={})).Anchor="toolbar-anchor",i.AnchorSelector="[".concat(i.Anchor,"]"),i.Container="toolbar-container",i.ContainerSelector="[".concat(i.Container,"]"),i.ActiveClass="overlayActive",i.ActiveSelector=".".concat(i.ActiveClass),i.ToolbarClass="toolbarOverlay",i.ToolbarSelector=".".concat(i.ToolbarClass),o={layout:"overlayedToolbar",preferHorizontalLayout:!1,theme:"darkTheme"},i.create=function(e,t,o){return new n(e,t,o)},t.prototype.setToolbar=function(e){var t,o=this.toolbar;o!==e&&(o&&o.remove(),e)&&((this.toolbar=e).addClass(i.ToolbarClass),t=(o=this.options).layout,o=o.theme,this.updateTheme(void 0,o),this.updateLayout(void 0,t),this.setVisibility(this.visible),this.container.append(e))},t.prototype.destroy=function(){var e=this.toolbar;e&&e.remove(),this.toolbar=void 0,this.visible=!1},t.prototype.updateOptions=function(e){var t=this.options;e=this.options=_.defaults({},e,this.options,o),this.updateTheme(t&&t.theme,e.theme),this.updateLayout(t&&t.layout,e.layout)},t.prototype.updateTheme=function(e,t){this.toolbar&&e!==t&&(null!=e&&this.toolbar.removeClass(e),this.toolbar.addClass(t))},t.prototype.updateLayout=function(e,t){this.toolbar&&e!==t&&("overlayedToolbar"===t&&this.anchor,'Overlayed must have an element matching the "'.concat(i.AnchorSelector,'" selector'),null!=e&&(this.toolbar.removeClass(e),"overlayedToolbar"===e)&&this.clearToolbarPosition(),this.toolbar.addClass(t))},t.prototype.show=function(){this.toolbar&&(this.repositionToolbar(),this.toolbar.addClass(i.ActiveClass),this.visible=!0)},t.prototype.hide=function(){this.toolbar&&(this.toolbar.removeClass(i.ActiveClass),this.visible=!1)},t.prototype.setVisibility=function(e){e?this.show():this.hide()},t.prototype.isVisible=function(){return this.visible},t.prototype.clearToolbarPosition=function(){this.toolbar&&this.toolbar.removeClass("top right bottom left")},t.prototype.repositionToolbar=function(){if("overlayedToolbar"===this.options.layout){var e=this.toolbar;if(e){this.anchor.length;var t,o=e.outerWidth(!0),i=e.outerHeight(!0),n=this.anchor.get(0).getBoundingClientRect(),r=n.left,a=n.right,s=n.bottom,l=this.container.get(0).getBoundingClientRect(),c=l.top,d=l.left,u=l.right,p=n.top,m=0,h=!0,g=!0,f=o+17,v=r-d,y=l.width-a,f=(this.options.preferHorizontalLayout&&(f<v||f<y)?t=y<=v?(m=r-f,2):(m=a+17,3):(y=n.top-i-27,v=n.top+n.height+27,(m=r)+o>d+l.width&&(m=r+n.width-o,h=!1),m<0&&(m=0),t=0,(p=y)<c&&(p=v,g=!(t=1))),l.bottom),r=p+i+27;if(f<r&&(p-=r-f),this.options.dropdownOptions){var n=this.options.dropdownOptions,b=n.dropdown,y=n.extraWidthOnRight,v=n.extraWidthOnLeft,S=b.getBoundingClientRect(),w=p-S.height>c,C=p+i+S.height>f,T=d<m-v,D=u<m+o+y;switch(t){case 0:var E=a>S.left;this.updateDropdownVerticalAlignment(b,w,C,E),this.updateDropdownHorizontalAlignment(b,T,D);break;case 1:this.updateDropdownVerticalAlignment(b,w,C),this.updateDropdownHorizontalAlignment(b,T,D);break;case 2:E=s>S.top;this.updateDropdownHorizontalAlignment(b,T,D,E),this.updateDropdownVerticalAlignment(b,w,C);break;case 3:this.updateDropdownHorizontalAlignment(b,T,D),this.updateDropdownVerticalAlignment(b,w,C)}}e.css({top:p,left:m});l="".concat(h?"left":"right"," ").concat(g?"top":"bottom");e.removeClass("top right bottom left"),e.addClass(l)}}},t.prototype.resetDropdownHorizontalAlignment=function(e){$(e).css("right","")},t.prototype.resetDropdownVerticalAlignment=function(e){$(e).css("top","100%").css("bottom","")},t.prototype.moveDropdownToTheLeft=function(e){$(e).css("right",0)},t.prototype.moveDropdownUp=function(e){$(e).css("top","initial").css("bottom","100%")},t.prototype.updateDropdownVerticalAlignment=function(e,t,o,i){void 0===i&&(i=!1),t&&(o||i)?this.moveDropdownUp(e):this.resetDropdownVerticalAlignment(e)},t.prototype.updateDropdownHorizontalAlignment=function(e,t,o,i){void 0===i&&(i=!1),t&&(o||i)?this.moveDropdownToTheLeft(e):this.resetDropdownHorizontalAlignment(e)},n=t})(powerbi=powerbi||{}),!(function(e){var t,c,o,i,d,u,p,l,m,h,n;function a(e,t,o){this.ngZone=t,this.resizeHandleDirections=i.All,this.dimensions={},this.prevDimensions={},this.restricted={},this.preserveAspectRatio=!1,this.transformDelta={},window.interact&&(interact.pointerMoveTolerance(5),this.element=e,this.rawElement=this.element.get(0),this.updateOptions(o),this.snapToGridIfNeeded(),this.resizeHandleDirections=(this.options&&this.options.resizeHandleDirections?this.options:this).resizeHandleDirections,this.element&&0<this.element.length&&(this.element.addClass(c.TransformElementClass),this.attachDragHandler(),this.attachResizeHandles(),this.updateHandlers(),this.attachKeyHandlers()),a.pointerTrap||(a.pointerTrap=$('<div id="transformPointerTrap" style="position: absolute; width: 1px; height: 1px; top: 0; left: 0"></div>').appendTo("body").get(0)))}t=e.common||(e.common={}),c=t.controllers||(t.controllers={}),u=jsCommon.BrowserUtils,p=e.visuals.utility.StyleUtils,(t=o=c.TransformRestriction||(c.TransformRestriction={}))[t.Parent=1]="Parent",t[t.None=2]="None",t[t.Custom=3]="Custom",(t=i=c.TransformHandleDirections||(c.TransformHandleDirections={}))[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=4]="Left",t[t.Right=8]="Right",t[t.UpLeft=16]="UpLeft",t[t.UpRight=32]="UpRight",t[t.DownLeft=64]="DownLeft",t[t.DownRight=128]="DownRight",t[t.All=255]="All",(t=d=c.TransformNudgeDirection||(c.TransformNudgeDirection={}))[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right",c.SmallNudgeDistance=1,c.BigNudgeDistance=10,c.TransformElementClass="transformElement",l="dragging",n={preventDefault:"auto",minWidth:15,minHeight:15,maxWidth:1e4,maxHeight:1e4,autoScrollParent:null,inertia:!(h="resizeHandleGroup-"),disableDrawing:!(m="resizing")},a.prototype.attachKeyHandlers=function(){var l=this;this.element.keydown((function(e){var t,o=e.shiftKey,i=e.shiftKey&&e.ctrlKey;if("true"!==$(l.element).attr("drag-resize-disabled")&&(!u.isCtrlOrMeta(e)||i)){var n=l.getDimensionsFromElement(l.element,!0),r=o?c.BigNudgeDistance:c.SmallNudgeDistance;if(i){var a=function(e){return e/2===Math.round(e/2)};switch(e.keyCode){case 40:--n.height,t=d.Down,a(n.height)&&(n.y+=1);break;case 38:n.height+=1,t=d.Up,a(n.height)||--n.y;break;case 37:--n.width,t=d.Left,a(n.width)&&(n.x+=1);break;case 39:n.width+=1,t=d.Right,a(n.width)||--n.x;break;default:return}}else switch(e.which){case 40:t=d.Down,n.y+=r;break;case 38:t=d.Up,n.y-=r;break;case 37:t=d.Left,n.x-=r;break;case 39:t=d.Right,n.x+=r;break;default:return}var s,i=l.getRestrictionParent();i&&0!==i.length&&(s=p.getPadding(i),i=l.getDimensionsFromElement(i),n=l.restrictTo(n,i,s)),l.transformRelativeDimensionFromElement(l.element,n),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),l.notifyNudge(n,{bigNudge:o,direction:t})}}))},a.prototype.restrictTo=function(e,t,o){var i=-o.left||0,n=-o.top||0;return{x:Math.max(i,Math.min(e.x,t.width-e.width)),y:Math.max(n,Math.min(e.y,t.height-e.height)),width:Math.min(e.width,t.width+o.left+o.right),height:Math.min(e.height,t.height+o.top+o.bottom)}},a.prototype.destroy=function(){this.dragInteractable&&this.dragInteractable.unset(),this.resizeInteractable&&this.resizeInteractable.unset(),this.autoScrollParent&&this.autoScrollParent.off("scroll",this.autoScrollParentScrollHandlerFn)},a.prototype.getResizeHandleDirectionArray=function(){var e=[],t=this.options.resizeHandleDirections;return t&i.Up&&e.push("up"),t&i.Down&&e.push("down"),t&i.Left&&e.push("left"),t&i.Right&&e.push("right"),t&i.UpLeft&&e.push("up-left"),t&i.UpRight&&e.push("up-right"),t&i.DownLeft&&e.push("down-left"),t&i.DownRight&&e.push("down-right"),e},a.prototype.getRestrictionString=function(){var e;switch(this.options.restriction){case o.Parent:e="parent";break;case o.Custom:e=this.options.getCustomRestrictionSelector();break;default:o.None;e=""}return e},a.prototype.getRestrictionParent=function(){var e=this.getRestrictionString();switch(e){case"":return;case"parent":return this.element.parent();default:return this.element.parent().closest(e)}},a.prototype.getAutoScrollOptions=function(){var e=this.options.autoScrollParent;return null==e?void 0:{enabled:!0,container:e[0]}},a.prototype.updateOptions=function(e){var t=this.options||{};this.options=__assign(__assign(__assign({},n),t),e),this.options.restrictDraw&&this.options.restriction!==o.None?this.restrictionElement=this.getRestrictionParent():this.restrictionElement=void 0,this.updateHandlers()},a.prototype.updateHandlers=function(){var e,t;(this.dragInteractable||this.resizeInteractable)&&(e=this.getAutoScrollOptions(),this.dragInteractable&&(t=0===this.getRestrictionString().length?void 0:{restriction:this.getRestrictionString(),endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}},this.dragInteractable.draggable({restrict:t,autoScroll:e})),this.resizeInteractable)&&(t={restriction:""===this.getRestrictionString()?void 0:this.getRestrictionParent().get(0),elementRect:{top:0,left:0,bottom:1,right:1}},this.resizeInteractable.draggable({restrict:t,autoScroll:e}))},a.prototype.attachDragHandler=function(){var e,n,r,a=this,t=this.element.get(0),s=this.options.autoScrollParent,o=this.options.preventDefault;this.dragInteractable=this.ngZone.runOutsideAngular((function(){return interact(t).preventDefault(o).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({inertia:!1,onstart:function(e){return a.ngZone.run((function(){return a.onDragStart(e)}))},onmove:function(e){return a.ngZone.run((function(){return a.onDragMove(e)}))},onend:function(e){return a.ngZone.run((function(){return a.onDragEnd()}))}})})),this.element.on("pointerdown.transform",(function(){a.dragInteractable&&a.options.getDragRestriction&&(a.dragInteractable.options.drag.restrict.elementRect=a.options.getDragRestriction())})),s&&(e=jsCommon.DeferUtility.deferUntilNextFrame,r=n=0,this.autoScrollParent=s,this.autoScrollParentScrollHandlerFn=e((function(){var e=s.scrollTop(),t=s.scrollLeft(),o=t-r,i=e-n;0==o&&0==i||(o={dx:o,dy:i},a.element.hasClass(l)?a.onDragMove(o):a.element.hasClass(m)&&a.onResizeMove(o)),n=e,r=t})),s.on("scroll.transformElement",this.autoScrollParentScrollHandlerFn))},a.prototype.onDragStart=function(e){this.dragStopped=!1,u.isCtrlOrMeta(e)||e.shiftKey?this.dragStopped=!0:(this.options&&this.options.supportsPointerCapture&&a.pointerTrap.setPointerCapture&&0<e.interaction.pointerIds.length&&null!=e.interaction.pointerIds[0]&&a.pointerTrap.setPointerCapture(e.interaction.pointerIds[0]),this.dimensions=this.getDimensionsFromElement(this.element),this.prevDimensions=__assign({},this.dimensions),this.element.addClass(l),this.notifyDragStart(this.dimensions))},a.prototype.onDragMove=function(e){this.dragStopped||(this.dimensions.x+=e.dx,this.dimensions.y+=e.dy,this.draw(this.dimensions),this.notifyDragMove(this.dimensions))},a.prototype.onDragEnd=function(){this.dragStopped||(this.element.removeClass(l),this.snapToGridIfNeeded(),this.notifyDragEnd(this.dimensions))},a.prototype.attachResizeHandles=function(){for(var o,i=this,e=this.getResizeHandleDirectionArray(),t=this.options,n=t.customHandleClass,r=t.transformId,a=0,s=e.length;a<s;a++){var l=$("<div></div>").addClass("resizeHandle").attr("data-direction",e[a]).appendTo(this.element);n&&l.addClass(n),r&&l.addClass(h+this.options.transformId)}var c=".resizeHandle"+(this.options.transformId?".".concat(h).concat(this.options.transformId):"");this.resizeInteractable=this.ngZone.runOutsideAngular((function(){return interact(c,{context:i.rawElement}).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({onstart:function(e){return i.ngZone.run((function(){return i.onResizeStart(e)}))},onmove:function(e){return i.ngZone.run((function(){o=e,i.onResizeMove(e)}))},onend:function(){return i.ngZone.run((function(){o=null,i.onResizeEnd()}))}})})),this.element.bind("keydown","keyup",(function(e){var t="keydown"===e.type;i.element.hasClass(m)&&16===e.keyCode&&o&&t!==o.shiftKey&&(o.shiftKey=t,i.onResizeMove(o))}))},a.prototype.onResizeStart=function(e){this.isResizing=!0,void 0!==this.element&&(this.preserveAspectRatio="true"===this.element.attr("preserve-aspect-ratio"));var t=e.target,t=(this.element.addClass(m),this.dimensions=this.getDimensionsFromElement(this.element),this.prevDimensions=__assign({},this.dimensions),this.resizeStartRect={left:this.dimensions.x,top:this.dimensions.y,right:this.dimensions.x+this.dimensions.width,bottom:this.dimensions.y+this.dimensions.height,width:this.dimensions.width,height:this.dimensions.height},t.getAttribute("data-direction"));this.resizeDirection={up:/up/.test(t),down:/down/.test(t),left:/left/.test(t),right:/right/.test(t)},this.setTransformDelta(e),this.aspectRatio=this.calculateAspectRatio(this.dimensions,this.options.aspectRatioOffset),_.extend(this.restricted,this.dimensions),this.notifyResizeStart(this.dimensions)},a.prototype.setTransformDelta=function(e){this.transformDelta.width=e.clientX-(this.resizeDirection.left?this.resizeStartRect.left:this.resizeStartRect.right),this.transformDelta.height=e.clientY-(this.resizeDirection.up?this.resizeStartRect.top:this.resizeStartRect.bottom)},a.prototype.calculateAspectRatio=function(e,t){var o=e.height,e=e.width;return t&&(o+=t.height,e+=t.width),o/e},a.prototype.onResizeMove=function(e){var t,o=this.options.aspectRatioOffset||{width:0,height:0},i=e.clientY-this.transformDelta.height,n=e.clientX-this.transformDelta.width,r=0;for(t in this.resizeDirection)r+=this.resizeDirection[t];this.resizeDirection.left&&(this.dimensions.x=n,this.dimensions.width=this.resizeStartRect.right-n),this.resizeDirection.up&&(this.dimensions.y=e.clientY,this.dimensions.height=this.resizeStartRect.bottom-i),this.resizeDirection.right&&(this.dimensions.width=n-this.resizeStartRect.left),this.resizeDirection.down&&(this.dimensions.height=i-this.resizeStartRect.top),(this.preserveAspectRatio||e.shiftKey)&&2===r?(n=void 0,n=(i=this.getRestrictionParent())&&i.length?(e=this.rawElement.getBoundingClientRect().top-i.get(0).getBoundingClientRect().top,this.resizeDirection.up?this.dimensions.height+e:i.get(0).clientHeight-e):void 0,a.fixDimensionsBasedOnAspectRatio(this.options,this.aspectRatio,n,o,this.dimensions),this.restricted.width=this.dimensions.width,this.restricted.height=this.dimensions.height):(this.restricted.width=Math.min(Math.max(this.dimensions.width,this.options.minWidth),this.options.maxWidth),this.restricted.height=Math.min(Math.max(this.dimensions.height,this.options.minHeight),this.options.maxHeight)),this.resizeDirection.left&&(this.restricted.x=this.resizeStartRect.right-this.restricted.width),this.resizeDirection.up&&(this.restricted.y=this.resizeStartRect.bottom-this.restricted.height),this.restricted.angle=p.getRotateAngleFromElement(this.element),this.draw(this.restricted),this.notifyResizeMove(this.restricted)},a.fixDimensionsBasedOnAspectRatio=function(e,t,o,i,n){void 0===o&&(o=Number.MAX_VALUE);var r=Math.min(n.width,e.maxWidth)+i.width,a=r*t;(o=Math.min(e.maxHeight,o)+i.height)<a&&(r=(a=o)/t),(r=a<e.minHeight+i.height?(a=e.minWidth+i.height)/t:r)<e.minWidth+i.width&&(a=(r=e.minWidth+i.width)*t),n.height=a-i.height,n.width=r-i.width},a.prototype.onResizeEnd=function(){this.isResizing=!1,this.element.removeClass(m),_.extend(this.dimensions,this.restricted),this.snapToGridIfNeeded(),this.notifyResizeEnd(this.dimensions)},a.prototype.getDimensionsFromElement=function(e,t){var o=this,i=(void 0===t&&(t=!1),this.getPositionFromElement(e)),t=(t&&(t=e.parents("."+c.TransformElementClass)).length&&t.each((function(e,t){t=o.getPositionFromElement($(t));i.x+=t.x,i.y+=t.y})),this.getSizeFromElement(e)),e=p.getRotateAngleFromElement(e);return{x:i.x,y:i.y,width:t.width,height:t.height,angle:e}},a.prototype.transformRelativeDimensionFromElement=function(e,o){var i=this,e=e.parents("."+c.TransformElementClass);e.length&&e.each((function(e,t){t=i.getPositionFromElement($(t));o.x-=t.x,o.y-=t.y}))},a.prototype.getSizeFromElement=function(e){return{width:e.width(),height:e.height()}},a.prototype.getPositionFromElement=function(e){return p.getTranslateTransformFromElement(e)},a.prototype.draw=function(e){var t,o,i,n,r,a;this.options.disableDrawing||(t=this.prevDimensions,e=e||this.dimensions,this.options.getIntermediateDimensions&&(o=this.options.getIntermediateDimensions(e)),e=_.extend({},o||e),o=this.element.get(0).style,i=e.angle,_.isEmpty(this.restrictionElement)||(n=this.getDimensionsFromElement(this.restrictionElement),e.x=Math.max(n.x,e.x),e.y=Math.max(n.y,e.y),r=Math.max(0,e.x+e.width-(n.x+n.width)),a=Math.max(0,e.y+e.height-(n.y+n.height)),this.isResizing?(e.height=e.height-a,e.width=e.width-r):(e.x=e.x-r,e.y=e.y-a,e.x,n.x,e.y,n.y)),e.x===t.x&&e.y===t.y&&e.angle===t.angle||(o.webkitTransform=o.transform="translate("+e.x+"px, "+e.y+"px)"+(i?" rotate("+i+"deg)":""),t.x=e.x,t.y=e.y,t.angle=t.angle),t.width!==e.width&&(o.width=e.width+"px",t.width=e.width),t.height!==e.height&&(o.height=e.height+"px",t.height=e.height))},a.prototype.snapToGridIfNeeded=function(){!0===this.options.snapToGrid&&this.options.gridSize&&(this.dimensions||(this.dimensions=this.getDimensionsFromElement(this.element)),this.snapToGrid(this.dimensions))},a.prototype.snapToGrid=function(e){var t=this.options.gridSize;e.x=Math.round(e.x/t.width)*t.width,e.y=Math.round(e.y/t.height)*t.height,e.width=Math.round(e.width/t.width)*t.width,e.height=Math.round(e.height/t.height)*t.height,this.draw(e)},a.prototype.notifyResizeStart=function(e){this.options&&this.options.onResizeStart&&this.options.onResizeStart(e)},a.prototype.notifyResizeMove=function(e){this.options&&this.options.onResizeMove&&this.options.onResizeMove(e)},a.prototype.notifyResizeEnd=function(e){this.options&&this.options.onResizeEnd&&this.options.onResizeEnd(e)},a.prototype.notifyDragStart=function(e){this.options&&this.options.onDragStart&&this.options.onDragStart(e)},a.prototype.notifyDragMove=function(e){this.options&&this.options.onDragMove&&this.options.onDragMove(e)},a.prototype.notifyDragEnd=function(e){this.options&&this.options.onDragEnd&&this.options.onDragEnd(e)},a.prototype.notifyNudge=function(e,t){this.options&&this.options.onNudge&&this.options.onNudge(e,t)},c.TransformElement=a})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).ApplyStyle=function(){this.restrict="A",this.link=function(e,t,o){var i=e.$eval(o.applyStyle);i&&(t.on("$destroy",(function(){return i.removeElement(t)})),i.addElement(t),i.apply(t))}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).AutoSelect=function(e){var o=this;this.$timeout=e,this.restrict="A",this.link=function(e,t){o.$timeout((function(){(t.is("input[type=text], textarea")?t:t.find("input[type=text], textarea").first()).select()}))}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).BindTextAndTooltip=function(){this.restrict="A",this.replace=!1,this.link=function(e,t,o){var i=e.$watch(o.bindTextAndTooltip,(function(e){t.text(e||"").attr("title",e||"")}));e.$on("$destroy",(function(){i()}))}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).ClearOnEscape=function(){this.restrict="A",this.require="ngModel",this.link=function(t,e,o,i){e.on("keydown",(function(e){27===e.keyCode&&(e.preventDefault(),t.$apply((function(){i.$setViewValue(""),i.$render()})))}))}}})(powerbi=powerbi||{}),!(function(n){var r;((r=n.common||(n.common={})).directives||(r.directives={})).ClickTelemetry=function(e){var i=this;this.restrict="A",this.link=function(e,o,t){o.on(jsCommon.DOMConstants.mouseClickEventName,(function(e){var t;o.prop(r.constants.tagName).toLowerCase()===jsCommon.DOMConstants.Anchor&&(t=o.attr(jsCommon.DOMConstants.hrefAttribute),jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(t)||i.telemetryService.logEvent(n.telemetry.DashboardOpenLink,{url:t}))}))},this.telemetryService=e}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).CustomClick=function(e){var r=this;this.restrict="A",this.link=function(i,e,n){e.on("click",(function(){var e=r.$parse(n.singleClick),t=i.$eval(n.singleClickDisabled),o=n.singleClickTimeout?i.$eval(n.singleClickTimeout):300;t||(void 0!==r.clickTimeout?(clearTimeout(r.clickTimeout),r.clickTimeout=void 0):r.clickTimeout=jsCommon.Zone.setTimeout((function(){e(i),r.clickTimeout=void 0}),o))}))},this.$parse=e}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).DialogConfirmContent=function(){this.restrict="E",this.templateUrl="views/dialogConfirmContent.html",this.replace=!0,this.scope={viewModel:"="}}})(powerbi=powerbi||{}),!(function(e){((e=(e=e.common||(e.common={})).directives||(e.directives={})).DirectiveUtils||(e.DirectiveUtils={})).initWhenReady=function(e,t,o,i,n){var r;t[o]===i?n():(r=t.$observe(o,(function(e){e===i&&(n(),r())})),e.$on("$destroy",(function(){return r()})))}})(powerbi=powerbi||{}),!(function(e){var s,l,c,d;e=(e=e.common||(e.common={})).directives||(e.directives={}),s=jsCommon.CssConstants,l=jsCommon.DragDropUtils,c=jsCommon.DragDropDataKeys,d="draggable-root-dragging",e.Drag=function(e,t){var a=this;this.restrict="A",this.link=function(o,i,n){var r,e,t;_.isEmpty(n.drag)||(e={start:function(e,t){a.dragDataService.setDragElement(i),n.dragContext?a.dragDataService.setDragContext(o.$eval(n.dragContext)):a.dragDataService.setDragContext(null),t.helper.css(s.widthProperty,i.width()),i.addClass(d)},drag:function(e,t){r&&(a.$interval.cancel(r),r=void 0);var o=i.data[c.DragScrollHandler];o&&(r=a.$interval(o,50,0,!1))},stop:function(e,t){r&&(a.$interval.cancel(r),r=void 0),i.removeClass(d)},helper:function(){return l.prepareDragHelper(i)},scroll:!1,refreshPositions:!0,appendTo:l.getElementToAppendDragHelper(i),distance:4},(t=o.$eval(n.dragConfig))&&_.isNumber(t.distance)&&(e.distance=t.distance),i.draggable(e),n.dragDisabled&&o.$watch((function(){return!!o.$eval(n.dragDisabled)}),(function(e){i.draggable({disabled:e})})),o.$on("$destroy",(function(){return i.draggable({disabled:!0}).draggable("destroy")})))},this.$interval=e,this.dragDataService=t}})(powerbi=powerbi||{}),!(function(e){var o,u;function p(e,t){e.stop(!0,!0).animate({scrollLeft:e.scrollLeft()+t},100)}function m(e,t){e.stop(!0,!0).animate({scrollTop:e.scrollTop()+t},100)}e=(e=e.common||(e.common={})).directives||(e.directives={}),o=jsCommon.DragDropDataKeys,u=10,e.DragScroll=function(e){var d=this;this.restrict="A",this.link=function(e,c,t){c.droppable({over:function(e,l){l.draggable.data[o.DragScrollHandler]=function(){var e,t,o,i,n=d.dragDataService.getDragElement(),r=c,a=l.helper.offset().left,s=l.helper.offset().top;n&&0<n.length&&r&&0<r.length&&(e=r.offset(),t=n.width(),n=n.height(),o=r.width(),i=r.height(),(function(e){return e[0].scrollHeight>e.height()})(r)&&(s-n/2<e.top?m(r,-1*u):s+n/2>e.top+i&&m(r,u)),(function(e){return e[0].scrollWidth>e.width()})(r))&&(a-t/2<e.left?p(r,-1*u):a+t/2>e.left+o&&p(r,u))}},out:function(e,t){return t.draggable.removeData(o.DragScrollHandler)},drop:function(e,t){return t.draggable.removeData(o.DragScrollHandler)}})},this.dragDataService=e}})(powerbi=powerbi||{}),!(function(e){var c,d,u,s;function t(e,t,o){var d=this;this.ngParseService=e,this.ngTimeOutService=t,this.timeoutService=o,this.restrict="A",this.link=function(i,e,n){function r(){return n.dropContainerId?$("#"+n.dropContainerId):e}var a=n.dropWatchConfig&&i.$eval(n.dropWatchConfig),s=n.dropAction?d.ngParseService(n.dropAction):void 0,l=n.dropHandler?d.ngParseService(n.dropHandler):void 0,c=!1;d.timeoutService.setTimeout().promise.then((function(){var t,o;c||(t=i.$eval(n.drop),d.initializeDropElement(i,r,s,l,t),a&&(o=!0,i.$watch((function(){return i.$eval(n.drop)}),(function(e){o?o=!1:e!==t&&(t=e,d.initializeDropElement(i,r,s,l,t))}))))})),i.$on("$destroy",(function(){c=!0;var e=r();e.droppable&&e.droppable({disabled:!0}).droppable("destroy")}))},this.postponeCleanup=!1,this.highlightedItems=[]}e=(e=e.common||(e.common={})).directives||(e.directives={}),c=jsCommon.DragDropUtils,d=jsCommon.DragDropDataKeys,u=c.DragoverClass,s=jsCommon.HighlightClasses,t.prototype.initializeDropElement=function(i,e,n,r,t){var a,o,s=this,l=e();_.isEmpty(l),l.droppable&&(l.droppable({disabled:!0}).droppable("destroy"),t)&&(a=function(e){return s.mouseMove(e,l,i,n)},o=t.accept.split(/\s/),l.droppable({accept:function(e){return c.isValidDropLocation(e,o)},hoverClass:u,greedy:!1!==t.greedy,tolerance:"pointer",activate:function(e,t){t.draggable.data[d.DropEventHandled]=!1,t.draggable.data[d.DropTarget]=void 0},drop:function(t,o){var e;s.deferredPromise&&(s.timeoutPromise&&(s.ngTimeOutService.cancel(s.timeoutPromise),s.timeoutPromise=void 0),s.deferredPromise=void 0),s.clearHighlighting(),r&&(e=c.getDropPosition(t,l),n?n(i,{dropPosition:e}).then((function(e){0!==e&&r(i,{event:t,ui:o,dropAction:e})})).finally((function(){o.helper.off("mousemove",a)})):r(i,{event:t,ui:o,dropAction:void 0}))},over:function(e,t){s.clearHighlighting(),n&&(s.postponeCleanup=!0,a(e),s.timeoutPromise=s.ngTimeOutService((function(){return s.postponeCleanup=!1}),0,!1),t.helper.on("mousemove",a))},out:function(e,t){n&&(s.deferredPromise&&(s.timeoutPromise&&(s.ngTimeOutService.cancel(s.timeoutPromise),s.timeoutPromise=void 0),s.postponeCleanup=!1,s.deferredPromise=void 0),t.helper.off("mousemove",a),s.postponeCleanup||s.clearHighlighting())}}))},t.prototype.mouseMove=function(e,o,t,i){var n=this,e=c.getDropPosition(e,o),r=o.prev(),a=o.next();i&&(this.timeoutPromise&&this.ngTimeOutService.cancel(this.timeoutPromise),this.deferredPromise=i(t,{dropPosition:e}),this.deferredPromise.then((function(e){if(n.deferredPromise){var t=n.highlightedItems;switch(e){case 0:o.hasClass(s.None.class)||(n.clearHighlighting(),o.addClass(s.None.class),t.push(o));break;case 2:o.hasClass(s.Prepend.class)||(n.clearHighlighting(),o.addClass(s.Prepend.class),r.addClass(s.Append.class),t.push(o),t.push(r));break;case 3:o.hasClass(s.Append.class)||(n.clearHighlighting(),o.addClass(s.Append.class),a.addClass(s.Prepend.class),t.push(o),t.push(a));break;case 1:o.hasClass(s.Replace.class)||(n.clearHighlighting(),o.addClass(s.Replace.class),t.push(o));break;default:n.clearHighlighting()}}})).finally((function(){n.deferredPromise=void 0})))},t.prototype.clearHighlighting=function(){for(var e=0,t=this.highlightedItems;e<t.length;e++)t[e].removeClass(s.Append.class).removeClass(s.None.class).removeClass(s.Prepend.class).removeClass(s.Replace.class);_.remove(this.highlightedItems)},e.Drop=t})(powerbi=powerbi||{}),!(function(e){e[e.Item=0]="Item",e[e.Title=1]="Title",e[e.Separator=2]="Separator",e[e.Flyout=3]="Flyout",e[e.CustomComponent=4]="CustomComponent"})(DropDownMenuItemType=DropDownMenuItemType||{}),"horizontal"),StringExtensions=(!(function(e){var t,r,o;function n(e,t){var o=this;this.index=0,this.scope=e,this.element=t.$element,this.services=t,e.$on("$destroy",(function(){return o.dispose()})),this.scope.select=function(e){return o.select(e)},this.scope.dispose=function(){return o.hideAndDestroyMenu(o.services.dropdownMenuService)},e.$on("dropdownExpand",(function(e,t){e.defaultPrevented||(e.preventDefault(),o.toggleMenu(null,t))})),e.$watchGroup(["dropdownOnLeftClick","dropdownOnRightClick"],(function(){o.attachEvents()})),this.attachEvents()}((t=e.common||(e.common={})).directives||(t.directives={})).DropdownMenu=function(){this.restrict="A",this.replace=!1,this.scope={dropdownItems:"=",dropdownClass:"@",dropdownDarkTheme:"=",dropdownFollowMousePosition:"=?",dropdownOnItemSelected:"&",dropdownPrepareItemsBeforeShow:"&?",dropdownOrientation:"=?",dropdownOnLeftClick:"=?",dropdownOnRightClick:"=?",dropdownBlockClick:"=?",dropdownSeparatorClass:"@"},this.link=function(e,t,o){e.dropdownClass=o.dropdownMenuClass,e.dropdownSeparatorClass=o.dropdownSeparatorClass,angular.isUndefined(o.dropdownBlockClick)&&(e.dropdownBlockClick=!1)},this.controller=t.createController(o)},r="dropDownMenu",n.createOptions=function(){return{additionalServices:["$element","dropdownMenuService"]}},n.prototype.attachEvents=function(){var t=this,e=((this.element||this.services.$element).off(".".concat(r)),[]);void 0!==this.scope.dropdownOnLeftClick&&!this.scope.dropdownOnLeftClick||e.push(jsCommon.DOMConstants.mouseClickEventName),this.scope.dropdownOnRightClick&&e.push(jsCommon.DOMConstants.contextmenuEventName);for(var o=0,i=e;o<i.length;o++){var n="".concat(i[o],".").concat(r);this.scope.dropdownFollowMousePosition?(this.element=null,this.services.$element.on(n,(function(e){e.preventDefault(),e.stopPropagation();e={x:e.clientX,y:e.clientY};t.toggleMenu(null,e)}))):this.element.on(n,(function(e){return t.toggleMenu(e)}))}},n.prototype.dispose=function(){this.menuElement&&this.menuElement.remove()},n.prototype.destroyMenuElement=function(){this.innerScope&&this.innerScope.$destroy(),this.menuElement=void 0},n.prototype.hideAndDestroyMenu=function(e){this.services.dropdownMenuService.hideMenu()},n.prototype.toggleMenu=function(e,t){var o=this;e&&(e.preventDefault(),e.stopPropagation()),this.menuElement&&this.services.dropdownMenuService.isOpen||this.tryCompileMenuElement(),this.services.timeout((function(){o.menuElement&&(o.element||t)&&o.services.dropdownMenuService.toggleActive(o.menuElement,o.element,t,e,o.scope.dropdownOrientation===Horizontal)}))},n.prototype.showMenu=function(e,t){var o=this,i=(e&&(e.preventDefault(),e.stopPropagation()),!0);this.menuElement||(i=this.tryCompileMenuElement()),this.services.timeout((function(){i&&(o.element||t)&&o.services.dropdownMenuService.showMenu(o.menuElement,o.element,t,e,o.scope.dropdownOrientation===Horizontal)}))},n.prototype.hideMenu=function(e,t){var o=this;e&&(e.preventDefault(),e.stopPropagation()),(this.element||t)&&this.services.timeout((function(){o.services.dropdownMenuService.hideMenu()}))},n.prototype.select=function(e){this.services.dropdownMenuService.hideMenu(),this.scope.dropdownOnItemSelected({selected:e})},n.prototype.tryCompileMenuElement=function(){var e,t,o=this;return this.touchendWasHandled=!1,angular.isDefined(this.scope.dropdownPrepareItemsBeforeShow)&&(e=this.scope.dropdownPrepareItemsBeforeShow(),angular.isDefined(e))&&(this.scope.dropdownItems=e),!(!this.scope.dropdownItems||0===this.scope.dropdownItems.length||(t=angular.element(n.template).data("$dropdownMenuController",this),this.innerScope=this.scope.$new(),this.scope.$apply((function(){return o.menuElement=o.scope.menuElement=o.services.compile(t)(o.innerScope)})),this.menuElement.on("remove",(function(){return o.destroyMenuElement()})),this.menuElement.on("touchend",(function(t){var e;o.touchendWasHandled||jsCommon.BrowserUtils.isIOSWebView()||(e=_.find(o.scope.dropdownItems,(function(e){return e.text===t.target.textContent})))&&(t.preventDefault(),o.touchendWasHandled=!0,o.select(e))})),this.menuElement.on("".concat(jsCommon.DOMConstants.keyDownEventName,".").concat(r),(function(e){var t=o.menuElement.children();t&&0<t.length&&(40===e.keyCode?o.index=i(t,o.index,1):38===e.keyCode&&(o.index=i(t,o.index,-1)))})),0));function i(e,t,o){var i=e.length,t=((t+o)%i+i)%i,o=$(e[t]).children();return o&&0<o.length&&null!=(i=o[0])&&i.focus(),t}},n.template="\n    <ul class='angular-dropdown {{dropdownClass}}' ng-class='{dark: dropdownDarkTheme === true, themeableElement: true}' role='menu' focus-trap focus-on-escape=\"dispose()\">\n        <li data-automation-type=\"dropdown-item\" ng-repeat='item in dropdownItems' class='dropdown-item' ng-click='select(item); $event.stopPropagation();' role='presentation'>\n            <a ng-if='::item.type === 0 && item.href' role=\"menuitem\" class='dropdown-action {{::item.containerClass}}' ng-href='{{::item.href}}' target='{{::item.hrefTarget ? item.hrefTarget : \"_blank\" }}'>\n                <i class='dropdown-icon {{::item.iconClass }}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}' >\n                    <i ng-if='::item.hasGlyph' class='glyphicon {{::item.itemClass}} glyph'></i>\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </a>\n            <button ng-if='::item.type === 0 && !item.href' role=\"menuitem\" class='dropdown-action {{::item.containerClass}}'>\n                <i class='dropdown-icon {{::item.iconClass }}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}'>\n                    <i ng-if='::item.hasGlyph' class='glyphicon {{::item.itemClass}} glyph'></i>\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </button>\n            <span ng-if='::item.type === 1' class='{{::item.containerClass}}'>\n                <i class='dropdown-icon {{::item.iconClass}}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}' >\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-attr-title='{{::item.descriptionTitle}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </span>\n            <span ng-if='::item.type === 2' class='dropdown-separator {{dropdownSeparatorClass}}'></span>\n        </li>\n    </ul>\n    <div ng-show='::dropdownBlockClick' class='dropdown-block-click'></div>\n",o=n})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).DropdownMenuItems=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/dropdownMenuItems.html",this.scope={dropdownItems:"=",dropdownClass:"@",dropdownDarkTheme:"=",dropdownOnItemSelected:"&",dropdownOrientation:"=?",dropdownSeparatorClass:"@"}}})(powerbi=powerbi||{}),!(function(e){var a;((a=e.common||(e.common={})).directives||(a.directives={})).DropdownOverlay=function(e,t){var r=this;this.$parse=t,this.restrict="E",this.replace=!0,this.transclude=!0,this.template='<div class="dropdownOverlay" ng-transclude></div>',this.link=function(e,t,o){var i,n=o.dropdownOverlayClass,n=(n&&(t.removeClass("dropdownOverlay"),t.addClass(n)),r.overlayService.register(t),o.onClose);n&&(i=r.$parse(n),t.on(a.constants.OverlayCloseEventName,(function(){t.off(a.constants.OverlayCloseEventName),e.$applyAsync((function(){i(e)}))}))),e.$on("$destroy",(function(){return r.overlayService.unregister(t)}))},this.overlayService=e}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).DropdownOverlayInvoke=function(e){var c=this;this.clickAction="click",this.restrict="A",this.link=function(o,i,e){var n=e.preferLeft,r=e.horizontal,a=e.needBlur,s=e.disableAnimation,l=e.dropdownOverlayInvoke;i.on(c.clickAction,(function(e){var t=c.overlayService.getOverlayElement(l);t.length,o.$applyAsync((function(){c.overlayService.toggleDropdown(e,{anchorElement:i,element:t,preferLeft:"true"===n,horizontal:"true"===r,blurNeeded:"true"===a,disableAnimation:s})}))}))},this.overlayService=e}})(powerbi=powerbi||{}),!(function(e){var s;((s=e.common||(e.common={})).directives||(s.directives={})).GridLayout=function(){this.controller=s.createController(s.controllers.GridLayoutController),this.compile=function(){return{pre:function(e,t,o){var i=angular.element('<div class="gridPlaceHolder"><div class="placeholderInner"></div></div>'),n=new s.models.GridLayoutContainer(e.gridLayoutService,t,e),r=n.gridPlaceHolder,a=new s.helpers.GridLayoutItemRenderer(r,i.get(0));r.render=function(){a.render()},t.addClass("gridLayoutContainer"),t.prepend(i),(e.gridLayoutContainer=n).notifyGridItemsChangedHandler=e.gridLayoutChangeHandler}}}}})(powerbi=powerbi||{}),!(function(e){var u,t,p,m,o;function i(e){var d=this;this.ngZone=e,this.restrict="A",this.link=function(o,i,e){var t,n=i.closest(m.dashboardSelector),r=o.$eval(e.gridLayoutContainer),a=o.$eval(e.viewModel),s=r.gridLayoutService,l=new u.models.GridLayoutItem(a,s,r),c=new u.helpers.GridLayoutItemRenderer(l,i.get(0));d.isInAuthoringMode=o.$eval(e.inEditMobileLayoutMode),d.strategy=s.strategy,i.addClass("gridLayoutItem"),l.render=function(){c.render()},r.addGridLayoutItem(l),s.strategy.willOverrideDisplayPosition||r.gravityEnabled||(l.calculateLayout(),l.applyLayout(u.models.gridLayoutConstants.changeType.refresh)),window.setTimeout((function(){t=new u.controllers.TransformElement(i,d.ngZone,{onDragStart:function(e){l.onDragStart()},onDragMove:function(e){d.trackParentSize(i,!1),l.onDragMove(e)},onDragEnd:function(e){d.setParentHeight(r),l.onDragEnd()},onResizeStart:function(e){l.onResizeStart();var t=o.gridLayoutCallbacks&&o.gridLayoutCallbacks.onResize;t&&t()},onResizeMove:function(e){d.trackParentSize(i,!0),l.onResizeMove(e)},onResizeEnd:function(e){d.setParentHeight(r),l.onResizeEnd()},restriction:d.getRestrictionType(),resizeHandleDirections:u.controllers.TransformHandleDirections.DownRight,minWidth:r.gridLayoutService.strategy.gridMinWidthOnResize,minHeight:r.gridLayoutService.strategy.gridMinHeightOnResize,maxWidth:r.gridLayoutService.strategy.gridMaxWidthOnResize,maxHeight:r.gridLayoutService.strategy.gridMaxHeightOnResize,inertia:!1,autoScrollParent:n,disableDrawing:!0,customHandleClass:"customHandle",supportsPointerCapture:!0}),d.setParentHeight(r)})),i.keydown((function(e){var t=e.shiftKey&&e.ctrlKey;"true"===i.attr("drag-resize-disabled")||p.isCtrlOrMeta(e)&&!t||(t?d.keyboardResize(l,r,i,o,e.keyCode):d.keyboardMove(l,r,i,e.keyCode))})),o.$on("$destroy",(function(){l.remove(),t&&(t.destroy(),t=null),d.setParentHeight(r,l)}))}}u=e.common||(e.common={}),t=u.directives||(u.directives={}),p=jsCommon.BrowserUtils,m=e.common.constants,o=u.controllers.TransformRestriction,i.prototype.trackParentSize=function(e,t){var o;this.preventHeightTracking()||(this.strategy,o=e.parent(),e=e.position().top+e.outerHeight()+this.strategy.gridItemSpacing,t&&e>=o.height()&&o.height(e+this.strategy.gridHeight))},i.prototype.setParentHeight=function(e,t){if(!this.preventHeightTracking()){this.strategy;for(var o=e.element,i=0,n=0,r=e.gridLayoutItems;n<r.length;n++){var a=r[n],a=a.top+a.height;i<a&&(i=a)}t&&(i-=t.height),i=this.calculateGridHeight(i),o.height(i)}},i.prototype.calculateGridHeight=function(e){var t=this.strategy.gridHeight;return Math.ceil(e/t)*t+this.strategy.gridItemSpacing/2},i.prototype.getRestrictionType=function(){return this.preventHeightTracking()?o.None:o.Parent},i.prototype.preventHeightTracking=function(){return!this.isInAuthoringMode},i.prototype.keyboardMove=function(e,t,o,i){var n=e.getLayoutPosition();switch(i){case 40:n.y+=1;break;case 38:--n.y;break;case 37:--n.x;break;case 39:n.x+=1;break;default:return}n.y<0||n.x<0||(e.onDragStart(),this.trackParentSize(o,!1),this.setParentHeight(t),e.onDragEnd(),this.keepTileInView(o))},i.prototype.keyboardResize=function(e,t,o,i,n){var r={width:e.width,height:e.height};switch(n){case 40:r.height+=u.GridLayoutConstants.defaultGridHeight;break;case 38:r.height-=u.GridLayoutConstants.defaultGridHeight;break;case 37:r.width-=u.GridLayoutConstants.defaultGridWidth;break;case 39:r.width+=u.GridLayoutConstants.defaultGridWidth;break;default:return}r.width<u.GridLayoutConstants.defaultGridWidth||r.height<u.GridLayoutConstants.defaultGridHeight||(e.onResizeStart(),(n=i.gridLayoutCallbacks&&i.gridLayoutCallbacks.onResize)&&n(),this.trackParentSize(o,!0),e.onResizeMove(r),this.setParentHeight(t),e.onResizeEnd(),this.keepTileInView(o))},i.prototype.keepTileInView=function(e){e.get(0).scrollIntoView({behavior:"smooth",block:"end",inline:"end"})},t.GridLayoutItem=i})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).HighlightString=function(e){var r=this;this.highlightService=e,this.restrict="A",this.scope={highlightString:"=",searchString:"="},this.link=function(e,i,n){e.$watchGroup(["highlightString","searchString","highlightTag"],(function(e){var t=e[0],e=e[1],o=n.highlightTag;t&&e?i.html(r.highlightService.highlight(t,e,o)):i.text(t)}))}}})(powerbi=powerbi||{}),!(function(e){var i;((i=e.common||(e.common={})).directives||(i.directives={})).InlineMessage=function(){this.restrict="E",this.transclude=!0,this.replace=!0,this.templateUrl="views/inlineMessageView.html",this.scope={useErrorIcon:"=?",useErrorBackground:"=?",traceDetails:"=?",displayIcon:"=?"},this.link=function(e,t,o){e.displayIcon||(void 0===e.useErrorIcon&&void 0!==o.useErrorIcon?e.displayIcon=i.models.InlineMessageIcon.Error:e.displayIcon=i.models.InlineMessageIcon.Info),void 0===e.useErrorBackground&&void 0!==o.useErrorBackground&&(e.useErrorBackground=!0)}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).InlineNameValuePairs=function(){this.restrict="E",this.transclude=!0,this.replace=!0,this.templateUrl="views/inlineNameValuePairsView.html",this.scope={mode:"=",showTitle:"=",detailExpand:"=",nameValuePairs:"="}}})(powerbi=powerbi||{}),!(function(e){function t(){var l=this;this.restrict="A",this.link=function(e,t,o){var i,n,r=o.inViewportOffset||"100%",a=o.inViewportContext,s=t.closest(a);a&&0===s.length?e.$evalAsync(o.inViewport):(n=function(e){e.target===t.get(0)&&i.context.refresh()},a={element:t.get(0),handler:function(){e.$evalAsync(o.inViewport),i.destroy(),t.off("transitionend",n)},offset:r},0<s.length&&(a.context=s.get(0)),i=new Waypoint(a),t.on("transitionend",n),l.attachResizeHandler())}}e=(e=e.common||(e.common={})).directives||(e.directives={}),t.getRefreshAllHandler=function(){return _.debounce(Waypoint.refreshAll,250)},t.prototype.attachResizeHandler=function(){t.staticResizeHandlerAttached||($(window).resize(t.getRefreshAllHandler()),t.staticResizeHandlerAttached=!0)},e.InViewport=t})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).LoadNotification=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/loadNotificationView.html",this.scope={message:"=",hide:"="},this.link=function(e,t){e.$watch("hide",(function(){e.hide?t.hide():t.show()}))}}})(powerbi=powerbi||{}),!(function(e){var a;function t(e){var r=this;this.restrict="A",this.link=function(o,i,n){var e=n.localize;r.replaceText(i,n,o,e),n.dynamicLocalizeUpdate&&o.$watch((function(){return n.localize}),(function(e,t){e!==t&&r.replaceText(i,n,o,e)}))},this.localizationService=e}e=(e=e.common||(e.common={})).directives||(e.directives={}),a=jsCommon.StringExtensions,t.prototype.replaceText=function(i,e,t,o){if(""!==o){var n=this.localizationService.getOptional(o);if(void 0===n){o=t.$eval(o);if(a.isNullOrUndefinedOrWhiteSpaceString(o))return;n=this.localizationService.get(o)}var r,o="localizeFragments"in e,e="localizeFragmentsAsync"in e;o||e?(n=n||"",r=function(){for(;0<n.length;){var e,t=n.search(new RegExp("\\{[0-9]+\\}","gm")),o=n.indexOf("}",t);-1===t?(i.append(n),n=""):0===t?(e=parseInt(n.substring(t+1,o),10),n=n.substring(o+1),(o=i.children("[fragment-index="+e+"]")).length,i.append(o)):(i.append(n.substring(0,t)),n=n.substring(t))}},e?t.$evalAsync((function(){r()})):r()):i.text(n||"")}},e.Localize=t})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).LocalizeAttr=function(e){var o=this;this.restrict="A",this.link=function(e,t,i){var n;n=o.localizationService,e.$watch(i.localizeAttr,(function(e){for(var t in e){var o=n.get(e[t]);i.$set(t,o||"")}}))},this.localizationService=e}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).LocalizeTooltip=function(e){var r=this;this.restrict="A",this.link=function(e,o,i){var t=i.localizeTooltip||i.localize||"";function n(e,t,o){""!==t&&(o=o.get(t),e.attr("title",o||""),void 0!==i.useTooltipAsAriaLabel)&&e.attr("aria-label",o||"")}void 0!==i.dynamicTooltipUpdate&&e.$watch((function(){return i.localizeTooltip}),(function(e,t){e!==t&&n(o,e,r.localizationService)})),n(o,t,r.localizationService)},this.localizationService=e}})(powerbi=powerbi||{}),!(function(e){var t;((t=e.common||(e.common={})).directives||(t.directives={})).ModalDialog=function(){this.restrict="E",this.templateUrl="views/modalDialog.html",this.transclude=!0,this.replace=!0,this.scope={viewModel:"=",onCloseAction:"&",onConfirmAction:"&",onCancelAction:"&"},this.link=function(e,t,o){o=(o=o.confirmButtonText)||"OK";e.confirmButtonText=o,t.appendTo($("body"))},this.controller=t.createController(t.controllers.ModalDialogController)}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).ModalOverlay=function(){this.restrict="E",this.templateUrl="views/modalOverlay.html",this.transclude=!0,this.replace=!0}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).NgBindAttr=function(){this.restrict="A",this.replace=!1,this.link=function(e,t,o){e.$watch(o.ngBindAttr,(function(e){for(var t in e)o.$set(t,e[t])}))}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).NgOnSelect=function(e){var n=this;this.restrict="A",this.replace=!1,this.link=function(o,e,i){e.on(jsCommon.DOMConstants.selectEventName,(function(e){var t=n.$parse(i.ngOnSelect);t&&o.$applyAsync((function(){t(o,{$event:e})}))}))},this.$parse=e}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).NgRepeatFinishEvent=function(e){var n=this;this.restrict="A",this.link=function(e,t,o){o.ngIf;var i=o.ngRepeatFinishEvent;!0===e.$last&&n.$timeout((function(){e.$emit(i)}))},this.$timeout=e}})(powerbi=powerbi||{}),!(function(e){(e.common||(e.common={})).initializeNgRightClick=function(){e.define("PowerBICommon/directives/ngRightClick",(function(e){var t;return o.prototype.setLongTapHandler=function(e){var i,n,r,a,s,l=!1,c=!1,d=e.get(0);d.addEventListener("touchstart",(function(e){clearTimeout(i),1===e.touches.length&&(l=!1,a=e.target,r=d.getBoundingClientRect(),c=!1,s=e.touches[0],n={x:s.clientX,y:s.clientY},i=setTimeout((function(){l||(c=!0)}),350))}),{passive:!0}),d.addEventListener("touchmove",(function(e){1===e.touches.length?n={x:e.touches[0].clientX,y:e.touches[0].clientY}:clearTimeout(i)}),{passive:!0}),d.addEventListener("touchend",(function(e){var t,o;l=!0,c&&(o=Math.abs(n.x-s.clientX)+Math.abs(n.y-s.clientY),t=d.getBoundingClientRect(),t=Math.abs(r.left-t.left)+Math.abs(r.top-t.top),o<10)&&t<10&&((o=document.createEvent("MouseEvents")).initMouseEvent("contextmenu",!0,e.cancelable,e.view,0,s.screenX,s.screenY,s.clientX,s.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),a.dispatchEvent(o)),clearTimeout(i)})),["touchcancel","touchleave"].forEach((function(e){d.addEventListener(e,(function(e){l=!0,clearTimeout(i)}))}))},(t=o).ng=["$parse"],t;function o(e){var r=this;this.$parse=e,this.restrict="A",this.replace=!1,this.link=function(i,e,n){e.on(jsCommon.DOMConstants.contextmenuEventName,(function(t){var o=r.$parse(n.ngRightClick);o&&i.$apply((function(){var e;0===t.pageX&&0===t.pageY&&t.currentTarget&&(e=t.currentTarget.getBoundingClientRect(),t.pageX=e.left+e.width/2,t.pageY=e.top+e.height/2),t.preventDefault(),t.stopPropagation&&t.stopPropagation(),o(i,{$event:t})}))})),jsCommon.BrowserUtils.isIOSWebView()&&r.setLongTapHandler(e)}}}))}})(powerbi=powerbi||{}),!(function(e){var l;function t(){return l++}function o(e,t){var i=this;this.restrict="A",this.link=function(e,t,o){e.$evalAsync((function(){i.initialize(e,t,o)}))},this.$parse=e,this.moduleLoader=t}e=(e=e.common||(e.common={})).directives||(e.directives={}),l=0,e.NextResizeSensorId=t,o.isResizeSensorScrollEvent=function(e){return e&&$(e.target).parent().hasClass("ResizeSensor")},o.prototype.initialize=function(i,o,e){var n,r,a,s=this.$parse(e.onResize);s&&(a=function(e){var t=e.width,o=e.height;t===n&&o===r||(n=t,r=o,i.onResizeViewport=e,s(i,e))},this.moduleLoader.require({javascript:"resizeSensor"}).then((function(e){var t=l++;e.create(o[0],t,a),i.$on("$destroy",(function(){e.destroy(t)}))})))},e.OnResize=o})(powerbi=powerbi||{}),!(function(e){var t,d;function u(e,t,o){var n=this;this.$compile=e,this.pbiLazyLoadService=t,this.moduleLoader=o,this.restrict="A",this.compile=function(e,t){var i=e[0].innerHTML;return e.html(""),{post:function(e,t,o){return n.postLink(e,t,o,i)}}}}t=(t=e.common||(e.common={})).directives||(t.directives={}),d=jsCommon.Trace,u.prototype.postLink=function(a,s,l,c){return __awaiter(this,void 0,e.Promise,(function(){var t,o,i,n,r;return __generator(this,(function(e){switch(e.label){case 0:t=a.$eval(l.pbiLazyLoadContents),o=this.$compile(u.SpinnerHtml)(a),s.append(o),i=!1,n=a.$on("$destroy",(function(){return i=!0})),e.label=1;case 1:return(e.trys.push([1,6,7,8]),this.isModuleDependency(t))?[4,this.moduleLoader.require(t)]:[3,3];case 2:return e.sent(),[3,5];case 3:return[4,this.pbiLazyLoadService.load(t)];case 4:e.sent(),e.label=5;case 5:return i||(o.remove(),s.append(c),this.$compile(s.contents())(a)),[3,8];case 6:return r=e.sent(),r=r&&r.message||r,d.error(r),[3,8];case 7:return n(),[7];case 8:return[2]}}))}))},u.prototype.isModuleDependency=function(e){return null!=e.javascript},u.SpinnerHtml="<spinner [size]=\"'large'\" [position]=\"'centered'\"></spinner>",t.PbiLazyLoadContents=u})(powerbi=powerbi||{}),!(function(e){(e=e.common||(e.common={})).PbiTableUpdateFilterEventName="PbiTableUpdateFilter",e.pbiTableStyles=["pbiTable"]})(powerbi=powerbi||{}),!(function(e){var r;function t(e,t,o,i){var n=this;this.$rootScope=e,this.$compile=t,this.$filterService=o,this.localizationService=i,this.restrict="A",this.scope={pbiTableConfig:"=",allSelected:"=?",allSelectedClicked:"&?"},this.compile=function(e,t){var o=e.find("td[header]"),i=e.find("td[localized-header]");return(0<o.length||0<i.length)&&(o=e.find("td:not([checkbox])"),n.headers=[],o.each((function(e,t){var t=$(t),o=new r.models.PbiTableHeader;o.header=t.attr("header"),o.localizedHeader=t.attr("localized-header"),o.sortBy=t.attr("sort-by"),n.headers.push(o)}))),{post:function(t,e,o){var i;e.addClass(r.pbiTableStyles.join(" ")),t.pbiTableConfig&&t.pbiTableConfig.hideHeader||_.isEmpty(n.headers)||(n.evaluateHeaders(t),t.headers=n.headers,i=n.compilePbiTableHeader(t),e.prepend(i)),t.pbiTableConfig&&(t.pbiTableConfig.filteredData=t.pbiTableConfig.data,t.orderBy=function(e){return n.orderBy(t,e)}),n.$rootScope.$on(r.PbiTableUpdateFilterEventName,(function(){return n.filter(t)}))}}},this.$rootScope=e,this.$compile=t,this.$filterService=o,this.localizationService=i}r=e.common||(e.common={}),e=r.directives||(r.directives={}),t.prototype.compilePbiTableHeader=function(e){return this.$compile('<thead>\n            <tr>\n                <th ng-if="allSelectedClicked">\n                    <pbi-checkbox ng-model="allSelected.value" label="SelectAll" ng-change="allSelectedClicked()"></pbi-checkbox>\n                </th>\n                <th ng-repeat="header in headers track by $index"\n                    ng-class="{sortable: header.sortBy,\n                               orderByThis: header.sortBy && predicate == header.sortBy,\n                               desc: header.sortBy && predicate == header.sortBy && reverse}"\n                    ng-click="orderBy(header)">\n                    <span ng-bind="::header.displayName"></span>\n                    <i class="sort glyphicon glyph-mini" \n                       ng-class="{\'pbi-glyph-chevronupmedium\': !reverse, \'pbi-glyph-chevrondownmedium\': reverse}"><i></i>\n                </th>\n            </tr>\n        </thead>')(e)},t.prototype.evaluateHeaders=function(e){for(var t=0,o=this.headers;t<o.length;t++){var i=o[t];i.header?i.displayName=e.$eval(i.header):i.localizedHeader&&(i.displayName=this.localizationService.get(i.localizedHeader))}},t.prototype.orderBy=function(e,t){var o;t.sortBy&&e.pbiTableConfig&&(o=e.pbiTableConfig.filteredData,e.predicate=t.sortBy,e.reverse=!e.reverse,e.pbiTableConfig.filteredData=this.$filterService("orderBy")(o,t.sortBy,e.reverse))},t.prototype.filter=function(e){e.pbiTableConfig&&(e.pbiTableConfig.filteredData=this.$filterService("filter")(e.pbiTableConfig.data,e.pbiTableConfig.shouldDisplayData))},e.PbiTable=t})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).models||(e.models={})).PbiTableHeader=function(){}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).Resizable=function(){this.restrict="A",this.link=function(i,n,e){function t(e){var t,o;"true"!==e?(n.css("width",d+"px"),c.hide()):(e=$(document).find("#"+h),t=0===n.width(),t=void 0===i.currentWidth||t?u:i.currentWidth,0<(r=e.width())&&g&&1===(e=$(e).find("."+g)).length&&(s=e.width(),r-s<t)&&0<(o=r-t-v)&&e.css("width",o+"px"),i.currentWidth=t,n.css("width",t+"px"),c.show())}function o(e){e.preventDefault();var e=$(document).find("#"+h);r=e.width(),a=n.offset().left+("left"!==f?n.width():0),g?1===(e=$(e).find("."+g)).length&&(s=e.width()):s=void 0,l=!0,$(document).on("mouseup",y),$(document).on("mousemove",b)}var r,a,s,l,c=angular.element('<div class="pane-splitter"></div>'),d=(n.append(c),parseInt(e.resizableCollapsedWidth,10)),u=parseInt(e.resizableDefaultWidth,10),p=parseInt(e.resizableMinWidth,10),m=parseInt(e.resizableMaxWidth,10),h=e.resizableContainerid,g=e.resizableSibling,f=e.resizableSide,v=parseInt(c.css("width"),10),y=function(e){l&&(e.preventDefault(),l=!1,$(document).off("mousemove",b),$(document).off("mousedown",y))},b=function(e){var t;l&&(t=r,s&&(t=t-s-v),m&&(t=Math.min(m,t)),e=("left"!==f?1:-1)*e.clientX,t<(e=a-e)&&(e=t),i.currentWidth=e=e<p?p:e,n.css("width",e+"px"))};t(e.resizableExpanded),e.$observe("resizableExpanded",t),c.on("mousedown",o),i.$on("$destroy",(function(){c.off("mousedown",o)}))}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).SearchBox=function(e){var n=this;this.localizationService=e,this.restrict="E",this.replace=!0,this.templateUrl="views/searchBox.html",this.scope={filter:"=",onChange:"&?",onBlur:"&?",shouldFocus:"<?",showclearbutton:"<?",arialabel:"@?",arialabelledby:"@?",ariadescribedby:"@?",ariarequired:"<?",arialive:"@?",bordercolor:"<?"},this.link=function(e,t,o){e.$watch("filter",(function(){e.onChange&&e.onChange()})),e.$watch("bordercolor",(function(){i.attr("style","border-color: "+e.bordercolor)})),e.placeholderText=n.localizationService.get(o.placeholder||"SearchBox_Text"),e.arialabel||(e.arialabel=n.localizationService.get("SearchBox_Text")),e.clearFilterInput=function(){return e.filter=""};var i=t.find("input");e.ariadescribedby&&i.attr("aria-describedby",e.ariadescribedby),e.arialabel&&i.attr("aria-label",e.arialabel),e.arialabelledby&&i.attr("aria-labelledby",e.arialabelledby),e.ariarequired&&i.attr("aria-required",e.ariarequired),e.arialive&&i.attr("aria-live",e.arialive)}}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).Select=function(){this.restrict="E",this.require="?ngModel",this.scope=!1,this.link=function(e,t,o,i){i&&t.bind("keyup",(function(e){38!==e.keyCode&&40!==e.keyCode||t.triggerHandler("change")}))}}})(powerbi=powerbi||{}),!(function(e){function u(e){var d=this;this.$timeout=e,this.restrict="E",this.require="ngModel",this.scope={options:"<",selectClass:"@",labelId:"<?",isDisabled:"<?",newPaneColors:"<"},this.templateUrl="views/selectMenu.html",this.link=function(o,e,t,i){u.ensureWidgetRegistered();var n=[],r=e.find("select"),a=!1,s=!1,l=o.newPaneColors?"newPaneColors":"",l=r.customSelectMenu({change:function(e,t){o.selectValue=t.item.value,i.$setViewValue(t.item.value),c()},position:{my:"left top",at:"left bottom",collision:"flip"},open:function(){a=!0},close:function(){s?(s=!1,r.customSelectMenu("open")):a=!1},labelById:o.labelId}).customSelectMenu("menuWidget").addClass("selectmenu themeableElement ".concat(l)),c=(e[0].addEventListener("keydown",(function(e){a||(13===e.keyCode?(r.customSelectMenu("open"),s=!0):38!==e.keyCode&&40!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode||r.customSelectMenu("open"))}),!0),e[0].addEventListener("keydown",(function(e){!a&&38!==e.keyCode&&40!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode&&27!==e.keyCode||e.stopPropagation()}),!1),o.selectClass&&l.addClass(o.selectClass),i.$render=function(){o.selectValue=i.$viewValue,c()},o.$watch("options",(function(e,t){c()}),!0),o.$watch("isDisabled",(function(e,t){e&&r&&r.customSelectMenu?r.customSelectMenu("disable"):r.customSelectMenu("enable"),c()}),!0),function(){n.push(d.$timeout((function(){r&&r.customSelectMenu&&r.val(o.selectValue).customSelectMenu("refresh")}),0))});o.$on("$destroy",(function(){angular.forEach(n,(function(e){d.$timeout.cancel(e)}))}))}}e=(e=e.common||(e.common={})).directives||(e.directives={}),u.ensureWidgetRegistered=function(){var e=$;e&&e.custom&&e.custom.customSelectMenu||$.widget("custom.customSelectMenu",$.ui.selectmenu,{_renderItem:function(e,t){return $("<li>",{title:t.label}).append($("<div>",{text:t.label})).appendTo(e)}})},e.SelectMenu=u})(powerbi=powerbi||{}),!(function(e){var i,t,o,n;function r(){this.restrict="A",this.controller=i.createController(n)}function a(e,t){this.services=t,this.scope=e,this.element=this.services.$element,this.showTooltip=$.proxy(this.showTooltipInternal,this),this.hideTooltip=$.proxy(this.hideTooltipInternal,this),this.services.$element.on(o.mouseMoveEventName,this.showTooltip),this.services.$element.on(o.mouseLeaveEventName,this.hideTooltip),this.services.$element.on(o.focusInEventName,this.showTooltip),this.services.$element.on(o.focusOutEventName,this.hideTooltip)}i=e.common||(e.common={}),e=i.directives||(i.directives={}),o=jsCommon.DOMConstants,(t=e.TooltipAnchorElementType||(e.TooltipAnchorElementType={}))[t.Sibling=0]="Sibling",t[t.Ancestor=1]="Ancestor",t[t.Descendant=2]="Descendant",e.Tooltip=r,a.createOptions=function(){return{additionalServices:["$element","tooltipService","localizationService","$attrs"]}},a.prototype.showTooltipInternal=function(e){var t,o=this.element.attr("tooltip-config");t=_.isEmpty(o)?(t=this.element.attr("aria-label"),{tooltipArrowVerticalPosition:i.ArrowVerticalPosition.bottom,tooltipTitle:t,tooltipShowOnFocus:!0}):this.scope.$eval(o),this.isVisible=!0,this.services.tooltipService.showTooltip(t,e,this.element)},a.prototype.hideTooltipInternal=function(e){this.isVisible=!1,this.services.tooltipService.hideTooltip(e)},a.prototype.onDestroy=function(){this.isVisible&&this.services.tooltipService.hideTooltip(),this.services.$element.off(o.mouseMoveEventName,this.showTooltip),this.services.$element.off(o.mouseLeaveEventName,this.hideTooltip),this.services.$element.off(o.focusInEventName,this.showTooltip),this.services.$element.off(o.focusOutEventName,this.hideTooltip)},n=a})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).VResizable=function(){this.restrict="A",this.link=function(i,n,e){var r,o,a=!1,t=angular.element('<div class="pane-vertical-splitter"></div>'),s=(n.append(t),parseInt(e.vResizableCollapsedHeight,10)),l=parseInt(e.vResizableDefaultHeight,10),c=!(null==e.vResizableDefaultHeight.match(/\d+%/g)),d=parseInt(e.vResizableMinHeight||0,10),u=parseInt(e.vResizableMaxHeight,10),p=e.vResizableContainerId,m=parseInt(e.vResizableOtherSiblingsHeight||0,10),h=e.vResizableOnResizeCallback?i[e.vResizableOnResizeCallback]:void 0,g="false"!==e.vResizableFromTop&&!1!==e.vResizableFromTop,f=(g?t.css("top",0):t.css("bottom",0),function(){return $(document).find("#"+p).height()}),v=function(e){r=f();var t=i.currentHeight,e=(a&&void 0!==t?e&&(t=Math.floor(r*o)):t=c?Math.floor(r/100*l):l,u?Math.min(r-m,u):r-m),t=Math.max(d,Math.min(e,t));i.currentHeight=t,n.css("height",t+"px")},y=(v(e.vResizableExpanded),e.$observe("vResizableExpanded",(function(e){"true"!==e?(n.css("height",s+"px"),t.hide()):(v(!1),t.show())})),e.$observe("vResizableContainerResize",(function(){v(!0)})),interact(t[0]).styleCursor(!1).draggable({inertia:!1,onstart:function(e){r=f()},onmove:function(e){return e=e,t=r-m,u&&(t=Math.min(u,t)),o=n.height()+(g?-e.dy:e.dy),(o=t<o?t:o)<d&&(o=d),a=!0,void i.$applyAsync((function(e){e.currentHeight=o,n.css("height",o+"px")}));var t,o},onend:function(e){o=i.currentHeight/f(),h&&h(i.currentHeight)}}));i.$on("$destroy",(function(){y.unset()}))}}})(powerbi=powerbi||{}),!(function(e){function i(e,t){this.changingCSSClass="changing",this.prevWidth=0,this.prevHeight=0,this.prevLeft=0,this.prevTop=0,this.previsChanging=!1,this.prevIsVisible=!0,this.appliedClass="",this.titleClass="",this.gridLayoutItem=e,this.element=t}e=(e=e.common||(e.common={})).helpers||(e.helpers={}),i.prototype.render=function(){var e=this.gridLayoutItem,t=this.element,o=this.element.style,i=(e.left===this.prevLeft&&e.top===this.prevTop||(o.webkitTransform=o.transform="translate("+e.left+"px, "+e.top+"px)",this.prevTop=e.top,this.prevLeft=e.left),!1);e.width!==this.prevWidth&&(o.width=e.width+"px",this.prevWidth=e.width,i=!0),e.height!==this.prevHeight&&(o.height=e.height+"px",this.prevHeight=e.height,i=!0),i&&(this.calculateMenuSize(e.width,e.height),this.calculateTitleSize(e.width)),e.isChanging!==this.previsChanging&&(e.isChanging?t.classList.add(this.changingCSSClass):t.classList.remove(this.changingCSSClass),this.previsChanging=e.isChanging),e.isVisible!==this.prevIsVisible&&(e.isVisible?o.display="block":o.display="none",this.prevIsVisible=e.isVisible),e.isChanging||this.addDataAttributes(t,e)},i.prototype.addDataAttributes=function(e,t){try{var o,i=t.gridItem;i&&(o=t.getLayoutPosition(),e.setAttribute("data-id",i.id.toString()),e.setAttribute("data-row",o.y.toString()),e.setAttribute("data-col",o.x.toString()),e.setAttribute("data-sizex",o.width.toString()),e.setAttribute("data-sizey",o.height.toString()))}catch(e){}},i.prototype.updateTileClasses=function(e,t){return t===e?t:(_.isEmpty(t)||this.element.classList.remove(t),_.isEmpty(e)||this.element.classList.add(e),e)},i.prototype.calculateMenuSize=function(e,t){var o=this.appliedClass;t<=i.smallestTileHeight?o=i.smallestTileHeightStr:e<=i.smallerTileWidth||t<=i.smallestTileHeight?o=i.smallerTileWidthStr:i.largerTileWidth<=e?o=i.largerTileWidthStr:i.smallerTileWidth<e&&e<i.largerTileWidth&&(o=""),this.appliedClass=this.updateTileClasses(o,this.appliedClass)},i.prototype.calculateTitleSize=function(e){this.titleClass=this.updateTileClasses(e<=i.smallTitleWidth?i.smallTitleWidthStr:i.largeTitleWidthStr,this.titleClass)},i.smallerTileWidthStr="smallerTileWidth",i.largerTileWidthStr="largerTileWidth",i.smallestTileHeightStr="smallestTileHeight",i.smallestTileHeight=180,i.smallerTileWidth=260,i.largerTileWidth=780,i.smallTitleWidthStr="smallTitleWidth",i.largeTitleWidthStr="largeTitleWidth",i.smallTitleWidth=160,e.GridLayoutItemRenderer=i})(powerbi=powerbi||{}),!(function(i){var n,e;n=i.common||(i.common={}),((e=n.helpers||(n.helpers={})).ImportHelper||(e.ImportHelper={})).continueWithImportFlow=function(e,t,o){var o=JSON.stringify(o);null!=e.parent&&(e.parent.postMessage(o,i.common.constants.hostOrigin),t)&&(o={message:n.constants.contentProviderStoreCloseModalDialogMessage},e.parent.postMessage(JSON.stringify(o),i.common.constants.hostOrigin))}})(powerbi=powerbi||{}),!(function(e){((e=(e=e.common||(e.common={})).helpers||(e.helpers={})).powerBIExcelHelper||(e.powerBIExcelHelper={})).getDownloadLink=function(){return"https://go.microsoft.com/fwlink/?LinkID=521962"}})(powerbi=powerbi||{}),!(function(n){var e;function o(e,t,o,i){try{return n.ServiceErrorHelper.getErrorDetails(i,e,t,o)}catch(e){}}(e=(e=n.helpers||(n.helpers={})).PowerBIServiceExceptionErrorHelper||(e.PowerBIServiceExceptionErrorHelper={})).generateErrorMessage=function(e,t){if(e&&e["pbi.error"]){e=e["pbi.error"];if(e)return o(e.code,e.parameters,e.details,t)}},e.generateErrorMessageFromServiceError=function(e,t){if(e&&e.errorCode)return o(e.errorCode,e.parameters,e.errorDetails,t)},e.GetErrorDetailsFromServiceError=function(e,t,o){var i=new n.ServiceErrorToClientError(e);if(i.requestId=t,e)return i.getDetails(o)},e.GetErrorDetailsFromClientError=function(e,t){if(e)return e.getDetails(t)}})(powerbi=powerbi||{}),!(function(e){(e=e.models||(e.models={})).contentProviderHelpLink={13:"https://go.microsoft.com/fwlink/?LinkId=546971",19:"https://go.microsoft.com/fwlink/?LinkID=528958",10:"https://go.microsoft.com/fwlink/?LinkID=528796",30:"https://go.microsoft.com/fwlink/?LinkId=613552",23:"https://go.microsoft.com/fwlink/?LinkID=528959",16:"https://go.microsoft.com/fwlink/?LinkID=528957",17:"https://go.microsoft.com/fwlink/?LinkID=528797",20:"https://go.microsoft.com/fwlink/?LinkId=613120",9:"https://go.microsoft.com/fwlink/?LinkID=528963",26:"https://go.microsoft.com/fwlink/?LinkID=528960",42:"https://go.microsoft.com/fwlink/?LinkId=536680",41:"https://go.microsoft.com/fwlink/?LinkId=613402",52:"https://go.microsoft.com/fwlink/?LinkId=615189",14:"https://go.microsoft.com/fwlink/?LinkId=544911",38:"https://go.microsoft.com/fwlink/?LinkID=615577",18:"https://go.microsoft.com/fwlink/?LinkId=533295",24:"https://go.microsoft.com/fwlink/?LinkID=528961"},e.contentProviderFallbackLink="https://go.microsoft.com/fwlink/?LinkId=532757",e.directQueryDisabledHelpLink="https://go.microsoft.com/fwlink/?linkid=2179788",e.excelWorkbookUploadFailedHelpLink="https://go.microsoft.com/fwlink/?LinkId=525916",e.excelWorkbookUploadFailedDefaultHelpLink="https://go.microsoft.com/fwlink/?LinkId=823121",e.excelWorkbookUploadFailedDataGatewayExceptionHelpLink="https://go.microsoft.com/fwlink/?LinkId=786855",e.excelWorkbookUploadFailedExceedsMaxSizeExceptionHelpLink="https://go.microsoft.com/fwlink/?LinkId=823122",e.learnMoreAboutEnterpriseGatewaysHelpLink="https://go.microsoft.com/fwlink/?LinkId=627094",e.EsriLearnMoreUrl="https://go.microsoft.com/fwlink/?LinkID=825665"})(powerbi=powerbi||{}),!(function(e){(e.common||(e.common={})).angularInjectorController="$$$angularInjectorController"})(powerbi=powerbi||{}),!(function(e){function t(){this.css={},this.elems=[]}e=(e=e.common||(e.common={})).models||(e.models={}),t.prototype.addAttributes=function(e){for(var t in e)this.css[t]=e[t]},t.prototype.element=function(e){this.elems=[e]},t.prototype.addElement=function(e){this.elems.push(e)},t.prototype.removeElement=function(e){_.pull(this.elems,e)},t.prototype.position=function(e){var t=this.css;t.WebkitTransform=t.transform="translate("+e.x+"px, "+e.y+"px)"},t.prototype.viewport=function(e){var t=this.css;t.height=e.height,t.width=e.width},t.prototype.zIndex=function(e){this.css.zIndex=e},t.prototype.rotate=function(e){var t;e&&((t=this.css).WebkitTransform=t.transform+=" rotate("+e+"deg)")},t.prototype.apply=function(e){if(e)e.css(this.css);else for(var t=0,o=this.elems;t<o.length;t++)o[t].css(this.css)},t.prototype.getCss=function(){return this.css},e.ApplyStyle=t})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).models||(e.models={})).AuthDialogModel=function(){this.showAuthDialog=!1,this.showModalDialog=!1,this.showSpinner=!1,this.selectedAuthenticationIndex=0,this.showError=!1,this.showDetailsMessage=!1,this.updatePackage=!1,this.allowSingleSignOn=!1,this.showSingleSignOn=!1,this.isSingleSignOnEnabled=!1,this.skipTestConnectionOption=!1,this.showTemplateAppsUI=!1,this.sendCancelMessage=!1,this.showBackButton=!1,this.disableAuthSelection=!1,this.disablePrivacySelection=!1}})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).models||(e.models={})).CollapsiblePaneModel=function(){this.expandedWidth=0}})(powerbi=powerbi||{}),!(function(e){var t;e=(e=e.common||(e.common={})).models||(e.models={}),(t=e.ContextMenuItemMetadataType||(e.ContextMenuItemMetadataType={}))[t.Text=0]="Text",t[t.Image=1]="Image",t[t.Link=2]="Link",t[t.Action=3]="Action",t[t.Status=4]="Status",(t=e.ContextMenuItemMetadataStatus||(e.ContextMenuItemMetadataStatus={}))[t.Error=0]="Error",t[t.Success=1]="Success",t[t.Unknown=2]="Unknown"})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).models||(e.models={})).DataClassification=function(){this.id=0,this.default=!1,this.showTag=!0}})(powerbi=powerbi||{}),!(function(e){var o;function t(e,t){void 0===t&&(t=512),this.displayWidth=e=void 0===e?320:e,this.displayHeight=t,this.resizeBuffer=10,this.isLayoutLocked=!1,this.willOverrideDisplayPosition=!1,this.isDynamic=!0,this.gridWidth=o.GridLayoutConstants.dynamicGridWidth+2*o.GridLayoutConstants.dynamicGridItemSpacing,this.gridHeight=o.GridLayoutConstants.dynamicGridHeight+2*o.GridLayoutConstants.dynamicGridItemSpacing,this.gridItemSpacing=2*o.GridLayoutConstants.dynamicGridItemSpacing,this.gridMinWidthOnResize=this.gridWidth-this.resizeBuffer,this.gridMinHeightOnResize=this.gridHeight-this.resizeBuffer,this.gridMaxWidthOnResize=this.gridWidth*o.GridLayoutConstants.dynamicMaxGridWidthUnits,this.gridMaxHeightOnResize=this.gridHeight*o.GridLayoutConstants.dynamicMaxGridHeigthUnits}o=e.common||(e.common={}),e=o.models||(o.models={}),t.prototype.calculateDisplayPositions=function(e){for(var t=0,o=e;t<o.length;t++)o[t].clearOverrides();this.scale=this.displayWidth/320;var i={transform:"scale("+this.scale+")",width:this.displayWidth/this.scale+"px",height:this.displayHeight/this.scale+"px",left:0};_.isEmpty(e)||((e=_.head(e).gridLayoutContainer.element.parent()).removeAttr("style"),e.css(i))},t.prototype.calculateDisplaySize=function(e){},e.DynamicLayoutStrategy=t})(powerbi=powerbi||{}),!(function(e){function t(){this.layoutPosition={height:0,width:0}}e=(e=e.common||(e.common={})).models||(e.models={}),t.prototype.calculateLayout=function(e){},t.prototype.applyLayout=function(e){},t.prototype.applyLayoutSize=function(e,t,o){},t.prototype.applyChanges=function(){},t.prototype.buildLayoutDescriptor=function(){return null},t.prototype.tryPopulateLayoutPositionValues=function(){return!1},e.PlaceHolderGridItem=t})(powerbi=powerbi||{}),!(function(e){var t,o,i;(e=(e=(e=e.common||(e.common={})).models||(e.models={})).gridLayoutConstants||(e.gridLayoutConstants={})).gridDefaultCols=5,e.notifyGridItemsChangedDelay=1e3,e.maxCoordinateRow=100,e.easeInColDelay=80,e.easeInRowDeplay=300,o=t=7,e.getGridMaxColSpan=function(){return t},e.setGridMaxColSpan=function(e){t=e},e.getGridMaxRowSpan=function(){return o},i=!(e.setGridMaxRowSpan=function(e){o=e}),e.getMaintainAspectRatio=function(){return i},e.setMaintainAspectRatio=function(e){i=e},(e=e.changeType||(e.changeType={}))[e.drag=0]="drag",e[e.resizing=1]="resizing",e[e.resized=2]="resized",e[e.refresh=3]="refresh"})(powerbi=powerbi||{}),!(function(e){var g,r;function t(e,t,o){var i=this,n=(this.defferedOnGridLayoutChanged=r.deferUntilNextFrame((function(e){return i.onGridLayoutChanged(e)})),this.delayedNotifyGridItemsChanged=_.debounce((function(){return i.notifyGridItemsChanged()}),g.gridLayoutConstants.notifyGridItemsChangedDelay),this.layoutChangedPromise=null,this.isLayoutUpdateLocked=!1,this.gridLayoutItems=[],new g.PlaceHolderGridItem);this.gridPlaceHolder=new g.GridLayoutItem(n,e,null),this.gridPlaceHolder.isVisible=!1,this.gridLayoutService=e,this.gridLayoutScope=o,this._gravityEnabled=this.isGravityEnabled(),this.element=t}e=e.common||(e.common={}),g=e.models||(e.models={}),r=jsCommon.DeferUtility,t.prototype.isGravityEnabled=function(){return this.gridLayoutScope&&this.gridLayoutScope.viewModel&&this.gridLayoutScope.viewModel.gravityEnabled||0!==this.gridLayoutService.displayLayout},Object.defineProperty(t.prototype,"gravityEnabled",{get:function(){return this._gravityEnabled},enumerable:!1,configurable:!0}),t.prototype.addGridLayoutItem=function(e){var t=this;e.layoutChangeHandler=this.defferedOnGridLayoutChanged,e.removeHandler=function(e){return t.onGridLayoutItemRemove(e)},this.gridLayoutItems.push(e),this.defferedOnGridLayoutChanged(g.gridLayoutConstants.changeType.refresh)},t.prototype.onGridLayoutItemRemove=function(e){e=this.gridLayoutItems.indexOf(e);0<=e&&this.gridLayoutItems.splice(e,1),this.defferedOnGridLayoutChanged(g.gridLayoutConstants.changeType.refresh)},t.prototype.onGridLayoutChanged=function(e){this._gravityEnabled=this.isGravityEnabled();var t=this.calculateLayout(e);this.applyLayout(e),e!==g.gridLayoutConstants.changeType.drag&&e!==g.gridLayoutConstants.changeType.resizing&&e!==g.gridLayoutConstants.changeType.resized||this.setLayoutUpdateLock(!0),t||(this.finalizeGridLayout(),this.delayedNotifyGridItemsChanged())},t.prototype.finalizeGridLayout=function(){for(var e=0,t=this.gridLayoutItems;e<t.length;e++){var o=t[e];o.rowBeforeMove=o.getLayoutPosition().y}},t.prototype.notifyGridItemsChanged=function(){var e=this,t=this.getChangedGridItemsDescriptors();0<t.length&&!this.layoutChangedPromise&&(this.layoutChangedPromise=this.notifyGridItemsChangedHandler(t),this.layoutChangedPromise?(this.changedLayoutDescriptors=t,this.setLayoutUpdateLock(!0),this.layoutChangedPromise.then((function(){return e.layoutChangeDone(!0)}),(function(){return e.layoutChangeDone(!1)}))):this.layoutChangeDone(!1))},t.prototype.layoutChangeDone=function(e){this.layoutChangedPromise=null,this.setLayoutUpdateLock(!1),e&&(this.resetChangedGridItemsDescriptors(this.changedLayoutDescriptors),this.notifyGridItemsChanged())},t.prototype.calculateLayout=function(e){if(0!==this.gridLayoutItems.length){var t,o=this.gridLayoutItems,i=0<_.filter(o,(function(e){return e.isChanging})).length,n=[],r=g.gridLayoutConstants.gridDefaultCols,a=(this.containerHeight=this.containerWidth=0,this.popNewGridLayoutItems(o));o.sort((function(e,t){return e.getLayoutPosition().x-t.getLayoutPosition().x})),0<o.length&&(t=o[o.length-1].getLayoutPosition(),r=Math.max(Math.ceil(t.x+t.width-1),g.gridLayoutConstants.gridDefaultCols));for(var s=0;s<=r;++s)n.push(1);o.sort((function(e,t){var o=(i&&!e.isChanging?e.rowBeforeMove:e.getLayoutPosition().y)-(i&&!t.isChanging?t.rowBeforeMove:t.getLayoutPosition().y);if(0==o){if(e.isChanging)return-1;if(t.isChanging)return 1}return o}));for(var l=0,c=o;l<c.length;l++)(p=c[l]).isChanging?(this.clipGridItemShape(this.gridPlaceHolder,p),this.calculatePosition(this.gridPlaceHolder,n,!0,e,i),this.gridPlaceHolder.calculateLayout()):(this.clipGridItemShape(p,p),this.calculatePosition(p,n,!1,e,i));for(var d=0,u=a;d<u.length;d++){var p=u[d];this.clipGridItemShape(p,p),this.calculateDefaultPosition(p,n),this.gridLayoutItems.push(p)}this.gridLayoutService.strategy.calculateDisplayPositions(o);for(var m=0,h=o;m<h.length;m++)(p=h[m]).calculateLayout(),this.updateContainerSize(p);return this.gridPlaceHolder.isVisible=i}},t.prototype.applyLayout=function(e){for(var t=0,o=this.gridLayoutItems;t<o.length;t++)o[t].applyLayout(e,this.gridLayoutService.skipVisualManualUpdate);this.gridPlaceHolder.applyLayout(e)},t.prototype.updateContainerSize=function(e){var t=e.top+e.height,e=e.left+e.width;t>this.containerHeight&&(this.containerHeight=t),e>this.containerWidth&&(this.containerWidth=e)},t.prototype.calculatePosition=function(e,t,o,i,n){for(var r=e.getLayoutPosition(),a=g.gridLayoutConstants.maxCoordinateRow,s=1,l=r.x,c=r.x+r.width;l<c;++l){var d=t[l];s<d&&(s=d)}var u=r.y;n&&!o&&(u=e.rowBeforeMove),this._gravityEnabled?(r.y=s,s+=r.height):(r.y=u<s||a<u?s:Math.round(u),s=r.y+r.height),(o&&i===g.gridLayoutConstants.changeType.resizing||i===g.gridLayoutConstants.changeType.resized)&&s<(n=Math.round(u)+r.height)&&(s=n);for(l=r.x,c=r.x+r.width;l<c;++l)t[l]=s},t.prototype.calculateDefaultPosition=function(e,t){for(var o=e.getLayoutPosition(),i=1,n=Number.MAX_VALUE,r=1,a=Math.max(g.gridLayoutConstants.gridDefaultCols,o.width)-o.width+1;r<=a;++r){for(var s=0,l=r,c=r+o.width;l<c;++l)t[l]>s&&(s=t[l]);s<n&&(n=s,i=r)}o.x=i,o.y=n,n+=o.height;for(r=o.x,a=o.x+o.width;r<a;++r)t[r]=n},t.prototype.clipGridItemShape=function(e,t){var t=t.getLayoutPosition(),e=e.getLayoutPosition(),o=g.gridLayoutConstants.getGridMaxColSpan(),i=g.gridLayoutConstants.getGridMaxRowSpan();e.y=t.y,e.x=Math.round(t.x),e.width=Math.ceil(t.width),e.height=Math.ceil(t.height),(!e.x||e.x<1)&&(e.x=1),(!e.width||e.width<1)&&(e.width=1),(!e.height||e.height<1)&&(e.height=1),e.width>o&&(e.width=o),e.height>i&&(e.height=i)},t.prototype.popNewGridLayoutItems=function(e){for(var t=[],o=e.length-1;0<=o;--o){var i,n=e[o];n.isChanging||(i=n.getLayoutPosition()).y||i.x||(e.splice(o,1),t.unshift(n))}return t},t.prototype.getChangedGridItemsDescriptors=function(){for(var e=[],t=0,o=this.gridLayoutItems;t<o.length;t++){var i=o[t].getLayoutDescriptor();i&&e.push(i)}return e},t.prototype.resetChangedGridItemsDescriptors=function(e){for(var t={},o=0,i=this.gridLayoutItems;o<i.length;o++)t[(n=i[o]).gridItem.id]=n;for(var n,r=0,a=e;r<a.length;r++)(n=t[a[r].id])&&n.resetLayoutDescriptor()},t.prototype.setLayoutUpdateLock=function(e){if(this.isLayoutUpdateLocked!==e){this.isLayoutUpdateLocked=e;for(var t=0,o=this.gridLayoutItems;t<o.length;t++)o[t].isLayoutUpdateLocked=e}},g.GridLayoutContainer=t})(powerbi=powerbi||{}),!(function(e){var o;function t(e,t,o){this.activeLayout=t.displayLayout,this.isChanging=!1,this.isVisible=!0,this.isLayoutUpdateLocked=!1,this.gridLayoutService=t,this.gridLayoutContainer=o,((this.gridItem=e).gridLayoutContext=this).gridItem.tryPopulateLayoutPositionValues(),this.resetLayoutDescriptor()}e=e.common||(e.common={}),o=e.models||(e.models={}),Object.defineProperty(t.prototype,"displayCol",{get:function(){return this.overrideCol||this.getLayoutPosition().x},set:function(e){this.overrideCol=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displayRow",{get:function(){return this.overrideRow||this.getLayoutPosition().y},set:function(e){this.overrideRow=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"displaySize",{get:function(){return this.overrideSize||{colSpan:this.getLayoutPosition().width,rowSpan:this.getLayoutPosition().height}},set:function(e){this.overrideSize=e},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.removeHandler(this),this.gridItem.gridLayoutContext=null},t.prototype.calculateLayout=function(){this.gridLayoutService.strategy.calculateDisplaySize(this),this.left=(this.displayCol-1)*this.gridLayoutService.strategy.gridWidth,this.top=(this.displayRow-1)*this.gridLayoutService.strategy.gridHeight,this.width=this.displaySize.colSpan*this.gridLayoutService.strategy.gridWidth,this.height=this.displaySize.rowSpan*this.gridLayoutService.strategy.gridHeight;var e=this.gridLayoutService.strategy.gridItemSpacing,e={width:this.width-e,height:this.height-e};this.gridItem.calculateLayout(e)},t.prototype.applyLayout=function(e,t){this.gridItem.applyLayoutSize(this.displaySize,e,t),this.render()},t.prototype.clearOverrides=function(){this.overrideCol=void 0,this.overrideRow=void 0,this.overrideSize=void 0},t.prototype.onDragStart=function(){this.isChanging=!0},t.prototype.onDragMove=function(e){var t=this.getLayoutPosition();t.x=1+e.x/this.gridLayoutService.strategy.gridWidth,t.y=1+e.y/this.gridLayoutService.strategy.gridHeight,this.layoutChangeHandler(o.gridLayoutConstants.changeType.drag)},t.prototype.onDragEnd=function(){this.isChanging=!1,this.layoutChangeHandler(o.gridLayoutConstants.changeType.drag)},t.prototype.onResizeStart=function(){this.isChanging=!0},t.prototype.onResizeMove=function(e){var t=this.getLayoutPosition();t.width=e.width/this.gridLayoutService.strategy.gridWidth,t.height=e.height/this.gridLayoutService.strategy.gridHeight,this.layoutChangeHandler(o.gridLayoutConstants.changeType.resizing)},t.prototype.onResizeEnd=function(){this.isChanging=!1,this.layoutChangeHandler(o.gridLayoutConstants.changeType.resized)},t.prototype.getLayoutDescriptor=function(){var e=this.gridItem;try{if(!this.isChanging&&0<e.id&&this.isLayoutPositionChanged())return e.buildLayoutDescriptor()}catch(e){}return null},t.prototype.isLayoutPositionChanged=function(){var e=this.getLayoutPosition();return e.y!==this.prevY||e.x!==this.prevX||e.width!==this.prevWidth||e.height!==this.prevHeight},t.prototype.resetLayoutDescriptor=function(){var e=this.gridItem;e&&(this.resetPrevValues(),e.applyChanges())},t.prototype.resetPrevValues=function(){var e=this.getLayoutPosition();this.prevX=e.x,this.prevY=e.y,this.prevWidth=e.width,this.prevHeight=e.height,this.rowBeforeMove=this.prevY},t.prototype.getLayoutPosition=function(){return this.gridItem.layoutPosition},t.prototype.getActiveLayout=function(){return this.activeLayout},t.prototype.setActiveLayout=function(e){this.activeLayout=e,this.gridItem.tryPopulateLayoutPositionValues()&&this.onLayoutInvalidated()},t.prototype.onLayoutInvalidated=function(){this.isLayoutUpdateLocked||(this.resetPrevValues(),this.layoutChangeHandler(o.gridLayoutConstants.changeType.refresh))},t.prototype.getGridHeight=function(){return this.gridLayoutContainer.element.height()},t.prototype.getGridWidth=function(){return this.gridLayoutContainer.element.width()},t.prototype.forceApplyCurrentChanges=function(){this.layoutChangeHandler(o.gridLayoutConstants.changeType.refresh)},o.GridLayoutItem=t})(powerbi=powerbi||{}),!(function(e){var t,o;function i(){this.resizeBuffer=10,this.isLayoutLocked=!1,this.willOverrideDisplayPosition=!1,this.gridWidth=t.GridLayoutConstants.defaultGridWidth,this.gridHeight=t.GridLayoutConstants.defaultGridHeight,this.gridItemSpacing=t.GridLayoutConstants.defaultGridItemSpacing,this.gridMinWidthOnResize=this.gridWidth-this.resizeBuffer,this.gridMinHeightOnResize=this.gridHeight-this.resizeBuffer,this.gridMaxWidthOnResize=this.gridWidth*o.gridLayoutConstants.getGridMaxColSpan(),this.gridMaxHeightOnResize=this.gridHeight*o.gridLayoutConstants.getGridMaxColSpan(),this.isDynamic=!1}t=e.common||(e.common={}),o=t.models||(t.models={}),i.prototype.calculateDisplayPositions=function(e){for(var t=0,o=e;t<o.length;t++)o[t].clearOverrides()},i.prototype.calculateDisplaySize=function(e){},o.DefaultGridLayoutStrategy=i})(powerbi=powerbi||{}),!(function(e){(e=(e=(e=e.common||(e.common={})).models||(e.models={})).InlineMessageIcon||(e.InlineMessageIcon={}))[e.Info=0]="Info",e[e.Error=1]="Error",e[e.Warning=2]="Warning"})(powerbi=powerbi||{}),!(function(e){var o,s;function t(){}function i(){}function n(e,t,o,i,n,r,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),this.localizationService=i,this.isConfirmButtonDisabled=e,this.confirmButtonText=t,this.autoCloseDialogOnConfirmButtonSelected=o,this.cancelButtonText=this.localizationService.get("ModalDialog_Cancel"),this.contentFilledDialog=n,this.hideActionsButtons=r,this.hideCancelButton=a,this.confirmButtonImportance=s.Normal,this.cancelButtonImportance=s.Normal}e=(e=e.common||(e.common={})).models||(e.models={}),t.Confirm="confirm",t.Prompt="prompt",t.Custom="custom",o=t,e.DialogType=o,i.Normal="normal",i.Elevated="elevated",s=i,e.ButtonImportance=s,e.ConfirmDialogContentModel=function(e,t){void 0===t&&(t=""),this.title=e=void 0===e?"":e,this.message=t,this.dialogType=o.Confirm},e.ModalDialogModel=n})(powerbi=powerbi||{}),!(function(e){((e=e.common||(e.common={})).models||(e.models={})).Resource=function(e){this.isSelected=!1,this.isEnabled=!0,this.isUsedByContentPack=!1,this.countOfLinkedAncestorsSelected=0,this.resourceType=e}})(powerbi=powerbi||{}),!(function(e){var t,o,i,n;function r(e){var t=o.call(this)||this;return t.contract=e,t.isRefreshInProgress=!1,t.uniqueId=r.getUniqueId(e.id,e.packageId),t.categories=0,t}e=e.common||(e.common={}),t=e.models||(e.models={}),i=e.contracts.ContentTileType,n=e.helpers.ModelConverterHelper,o=t.Resource,__extends(r,o),r.prototype.getPermissions=function(){var e;return this.getPermissionsCallback&&null!=(e=this.getPermissionsCallback())?e:this.contract&&this.contract.permissions},Object.defineProperty(r.prototype,"hasError",{get:function(){return this.contract&&(2===this.packagePublishStatus||4===this.packagePublishStatus||2===this.contract.lastRefreshStatus||4===this.contract.lastRefreshStatus)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastRefreshTimeInLocaleString",{get:function(){var e=this.getLastRefreshTime();if(e)return e.toLocaleString()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastRefreshEpochTime",{get:function(){var e=this.getLastRefreshTime();if(e)return e.getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentTileType",{get:function(){return i.Dataset},enumerable:!1,configurable:!0}),r.prototype.isRefreshDisabledDueToInactivity=function(){var e=this.contract&&this.contract.refreshSchedule;return e&&1===e.refreshDisabledReason},r.getUniqueId=function(e,t){return"".concat(i.Dataset,"_").concat(e,"_").concat(t)},r.prototype.getLastRefreshTime=function(){var e=this.contract,e=e.onPremModelConnectionString?e.lastTimeAModelChangeWasDetectedInTheCluster:e.lastRefreshTime;return n.convertRefreshTimeToJsDateTime(e)},t.Model=r})(powerbi=powerbi||{}),!(function(e){var t,o,i;function n(e){var t=o.call(this)||this;return t.permissions=e.permissions,t.modelType=e.modelType,t.uniqueId="".concat(i.CdsaModel,"_").concat(e.id),t.objectId=e.objectId,t.ownerUser=e.ownerUser,t.state=e.state,t}e=e.common||(e.common={}),t=e.models||(e.models={}),i=e.contracts.ContentTileType,o=t.Resource,__extends(n,o),n.prototype.getPermissions=function(){return this.permissions},Object.defineProperty(n.prototype,"contentTileType",{get:function(){return i.CdsaModel},enumerable:!1,configurable:!0}),t.CdsaContentTile=n})(powerbi=powerbi||{}),!(function(e){var n;function r(e,t,o){var i=n.call(this,t)||this;return i.uniqueId=r.getUniqueId(t,e,o),i}e=(e=e.common||(e.common={})).models||(e.models={}),n=e.Resource,__extends(r,n),r.getUniqueId=function(e,t,o){return e+"_"+t+"_"+o},e.ReportResource=r})(powerbi=powerbi||{}),!(function(e){var t,o,i,n,r;function a(e){var t=o.call(this,void 0===e?0:e.id,0,void 0===e?0:e.packageId)||this;return t.contract=e,t.isRefreshInProgress=!1,t.reportType=t.contract&&1===t.contract.reportType?1:0,t.contentTileType=1===t.reportType?n.ContentTileType.RdlReport:n.ContentTileType.Report,t}t=(t=e.common||(e.common={})).models||(t.models={}),n=e.common.contracts,r=jsCommon.EnumExtensions,o=t.ReportResource,__extends(a,o),a.prototype.getPermissions=function(){var e;return this.getPermissionsCallback&&null!=(e=this.getPermissionsCallback())?e:this.contract&&this.contract.permissions},Object.defineProperty(a.prototype,"canWrite",{get:function(){return r.hasFlag(this.getPermissions(),i.Write)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"canCopy",{get:function(){return r.hasFlag(this.getPermissions(),i.CopyOnWrite)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"canExplore",{get:function(){return r.hasFlag(this.getPermissions(),i.Explore)},enumerable:!1,configurable:!0}),e=a,t.Report=e,(e=i=t.ReportPermissions||(t.ReportPermissions={}))[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.ReShare=4]="ReShare",e[e.Explore=8]="Explore",e[e.CopyOnWrite=17]="CopyOnWrite",e[e.ReadWrite=3]="ReadWrite",e[e.ReadReshare=5]="ReadReshare",e[e.Personalized=11]="Personalized",e[e.All=7]="All"})(powerbi=powerbi||{}),!(function(e){var t,o,i,n,d,r;function a(e,t){this.localizationService=t,this.refreshSettings=e,this.refreshSectionExpand=!1}function s(e,t,o,i,n,r,a,s,l,c){this.localizationService=c,this.contract=e,this.modelId=t,this.name=o,this.description=i,this.lastRefreshFailed=n,this.lastRefreshFailedMessage=r,this.nextRefresh=a,this.refreshSettingsModel=new d(s,c),this.parameters=l,this.takenOver=!1,this.isDirty=!1,this.areDatasourcesDirty=!1,this.isQnaDirty=!1,this.paSupported=null==e?void 0:e.paSupported,this.paEnabled=null==e?void 0:e.paEnabled,this.paSettings=null==e?void 0:e.paSettings,this.hasAggregationTable=null==e?void 0:e.hasAggregationTable,this.directLakeAutoSync=null==e?void 0:e.directLakeAutoSync,this.directLakeMode=null==e?void 0:e.directLakeMode,this.datasourceUnbindReason=null==e?void 0:e.datasourceUnbindReason}function l(){}t=e.common||(e.common={}),o=t.models||(t.models={}),i=t.contracts.DataCacheModeType,n=t.contracts.gateway.DataSourceType,(e=o.TestConnectionState||(o.TestConnectionState={}))[e.NotSpecified=0]="NotSpecified",e[e.NotStart=1]="NotStart",e[e.Progressing=2]="Progressing",e[e.Failed=3]="Failed",e[e.Passed=4]="Passed",Object.defineProperty(a.prototype,"showWeekDays",{get:function(){return 10080===this.refreshSettings.refreshFrequency},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"showRefreshTimeInfo",{get:function(){var e=this.refreshSettings.refreshFrequency;return 1440===e||10080===e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refreshFrequencyString",{get:function(){return this.refreshSettings.refreshFrequency.toString()},set:function(e){this.refreshSettings.refreshFrequency=parseInt(e,10)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"weekdayKeys",{get:function(){return r.weekdayKeys()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refreshTimeWindows",{get:function(){return r.refreshTimeWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refreshTimeHourWindows",{get:function(){return r.refreshTimeHourWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refreshTimeMinuteWindows",{get:function(){return r.refreshTimeMinuteWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refreshTimeAmPmWindows",{get:function(){return r.refreshTimeAmPmWindows(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refreshTimeZones",{get:function(){return r.refreshTimeZones(this.localizationService)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refreshTimeZonesViewModel",{get:function(){return r.refreshTimeZonesViewModel(this.localizationService)},enumerable:!1,configurable:!0}),d=a,o.RefreshSettingsModel=d,Object.defineProperty(s.prototype,"takeoverStatusText",{get:function(){return this.lastTakeoverUPN?this.getTakeoverStatusTextForUser(this.lastTakeoverUPN):this.lastTakeoverEmailAddress?this.getTakeoverStatusTextForUser(this.lastTakeoverEmailAddress):this.lastTakeoverText?this.localizationService.format("SettingsDataset_TakeOverStatusText_Before",[this.lastTakeoverText]):this.localizationService.get("SettingsDataset_TakeOverStatusTextNullUser_Before")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"takeoverButtonText",{get:function(){return this.takenOver?this.localizationService.get("SettingsDataset_TakeOverButton_CancelTakeOver"):this.localizationService.get("SettingsDataset_TakeOverButton_TakeOver")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasDatasourceWithWrongCredentials",{get:function(){return this.datasources&&_.some(this.datasources,(function(e){return!e.isCloudDirectQuery&&e.testConnectionState!==o.TestConnectionState.Passed}))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"showSkipTestConnectionWarning",{get:function(){return _.some(this.datasources,(function(e){return!0===e.skipTestConnection}))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasDirectQueryDatasourceWithMissingCredentials",{get:function(){return this.datasources&&_.some(this.datasources,(function(e){return e.isCloudDirectQuery&&e.testConnectionState===o.TestConnectionState.Failed}))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasRDataSource",{get:function(){return this.datasources&&_.some(this.datasources,(function(e){return e.datasourceType===n.Extension&&(e.name===t.constants.RDataSourceName||e.fullName===t.constants.RDataSourceName)}))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isPlainDirectQueryOrOnPremModel",{get:function(){return s.isPlainDirectQueryOrOnPremModel(this.contract)},enumerable:!1,configurable:!0}),s.isPlainDirectQueryOrOnPremModel=function(e){return e.dataCacheMode===i.DirectQuery||!_.isEmpty(e.onPremModelConnectionString)},s.prototype.getTakeoverStatusTextForUser=function(e){return this.takenOver?this.localizationService.format("SettingsDataset_TakeOverStatusText_After",['<a href=mailto:"'+e+'">'+e+"</a>"]):this.localizationService.format("SettingsDataset_TakeOverStatusText_Before",['<a href=mailto:"'+e+'">'+e+"</a>"])},o.SettingsDatasetModel=s,l.weekdayKeys=function(){return["SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Sunday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Monday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Tuesday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Wednesday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Thursday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Friday","SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Saturday"]},l.refreshTimeWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_TimeWindow_1"),e.get("SettingsDataset_ScheduleRefresh_TimeWindow_2"),e.get("SettingsDataset_ScheduleRefresh_TimeWindow_3"),e.get("SettingsDataset_ScheduleRefresh_TimeWindow_4")]},l.refreshTimeHourWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_1"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_2"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_3"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_4"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_5"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_6"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_7"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_8"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_9"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_10"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_11"),e.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_12")]},l.refreshTimeMinuteWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_TimeMinuteWindos_00"),e.get("SettingsDataset_ScheduleRefresh_TimeMinuteWindos_30")]},l.refreshTimeAmPmWindows=function(e){return[e.get("SettingsDataset_ScheduleRefresh_AmPmWindows_Am"),e.get("SettingsDataset_ScheduleRefresh_AmPmWindows_Pm")]},l.refreshTimeZones=function(e){return{"Dateline Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Dateline_Standard_Time"),"UTC-11":e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_11"),"Hawaiian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Hawaiian_Standard_Time"),"Alaskan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Alaskan_Standard_Time"),"Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time"),"Pacific Standard Time (Mexico)":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time_Mexico"),"Mountain Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time"),"Mountain Standard Time (Mexico)":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time_Mexico"),"US Mountain Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_US_Mountain_Standard_Time"),"Canada Central Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Canada_Central_Standard_Time"),"Central America Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_America_Standard_Time"),"Central Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time"),"Central Standard Time (Mexico)":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time_Mexico"),"Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Eastern_Standard_Time"),"SA Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Pacific_Standard_Time"),"US Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_US_Eastern_Standard_Time"),"Venezuela Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Venezuela_Standard_Time"),"Atlantic Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Atlantic_Standard_Time"),"Central Brazilian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Brazilian_Standard_Time"),"Pacific SA Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_SA_Standard_Time"),"SA Western Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Western_Standard_Time"),"Paraguay Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Paraguay_Standard_Time"),"Newfoundland Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Newfoundland_Standard_Time"),"E. South America Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_South_America_Standard_Time"),"Greenland Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Greenland_Standard_Time"),"Montevideo Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Montevideo_Standard_Time"),"SA Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Eastern_Standard_Time"),"Argentina Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Argentina_Standard_Time"),"Mid-Atlantic Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mid_Atlantic_Standard_Time"),"UTC-02":e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_2"),"Azores Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Azores_Standard_Time"),"Cape Verde Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Cabo_Verde_Standard_Time"),"GMT Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_GMT_Standard_Time"),"Greenwich Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Greenwich_Standard_Time"),"Morocco Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Morocco_Standard_Time"),UTC:e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC"),"Central Europe Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Europe_Standard_Time"),"Central European Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_European_Standard_Time"),"Romance Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Romance_Standard_Time"),"W. Central Africa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_W_Central_Africa_Standard_Time"),"W. Europe Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_W_Europe_Standard_Time"),"Namibia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Namibia_Standard_Time"),"E. Europe Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_Europe_Standard_Time"),"Egypt Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Egypt_Standard_Time"),"FLE Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_FLE_Standard_Time"),"GTB Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_GTB_Standard_Time"),"Israel Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Israel_Standard_Time"),"Jordan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Jordan_Standard_Time"),"Middle East Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Middle_East_Standard_Time"),"South Africa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_South_Africa_Standard_Time"),"Syria Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Syria_Standard_Time"),"Turkey Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Turkey_Standard_Time"),"Arab Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Arab_Standard_Time"),"Arabic Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Arabic_Standard_Time"),"E. Africa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_Africa_Standard_Time"),"Kaliningrad Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Kaliningrad_Standard_Time"),"Iran Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Iran_Standard_Time"),"Russian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Russian_Standard_Time"),"Arabian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Arabian_Standard_Time"),"Azerbaijan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Azerbaijan_Standard_Time"),"Caucasus Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Caucasus_Standard_Time"),"Georgian Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Georgian_Standard_Time"),"Mauritius Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Mauritius_Standard_Time"),"Afghanistan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Afghanistan_Standard_Time"),"West Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_West_Asia_Standard_Time"),"Pakistan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Pakistan_Standard_Time"),"India Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_India_Standard_Time"),"Sri Lanka Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Sri_Lanka_Standard_Time"),"Nepal Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Nepal_Standard_Time"),"Ekaterinburg Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Ekaterinburg_Standard_Time"),"Central Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Asia_Standard_Time"),"Bangladesh Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Bangladesh_Standard_Time"),"Myanmar Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Myanmar_Standard_Time"),"N. Central Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_N_Central_Asia_Standard_Time"),"SE Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_SE_Asia_Standard_Time"),"North Asia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_North_Asia_Standard_Time"),"China Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_China_Standard_Time"),"Singapore Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Singapore_Standard_Tim"),"Taipei Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Taipei_Standard_Time"),"W. Australia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_W_Australia_Standard_Time"),"Ulaanbaatar Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Ulaanbaatar_Standard_Time"),"North Asia East Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_North_Asia_East_Standard_Time"),"Korea Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Korea_Standard_Time"),"Tokyo Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Tokyo_Standard_Time"),"AUS Central Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_AUS_Central_Standard_Time"),"Cen. Australia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Cen_Australia_Standard_Time"),"Yakutsk Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Yakutsk_Standard_Time"),"AUS Eastern Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_AUS_Eastern_Standard_Time"),"E. Australia Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_E_Australia_Standard_Time"),"Tasmania Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Tasmania_Standard_Time"),"West Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_West_Pacific_Standard_Time"),"Vladivostok Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Vladivostok_Standard_Time"),"Central Pacific Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Pacific_Standard_Time"),"Magadan Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Magadan_Standard_Time"),"Fiji Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Fiji_Standard_Time"),"New Zealand Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_New_Zealand_Standard_Time"),"UTC+12":e.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Plus_12"),"Tonga Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Tonga_Standard_Time"),"Samoa Standard Time":e.get("SettingsDataset_ScheduleRefresh_Timezone_Samoa_Standard_Time")}},l.refreshTimeZonesViewModel=function(e){var o=[];return _.forOwn(this.refreshTimeZones(e),(function(e,t){o.push({key:t,value:e})})),o},r=l,o.RefreshStaticConstants=r})(powerbi=powerbi||{}),!(function(e){((e=(e=e.common||(e.common={})).models||(e.models={})).SettingsViewModelFactory||(e.SettingsViewModelFactory={})).createSupportedLanguagesModel=function(){return[{name:"العَرَبِية",code:"ar",lcid:"1025"},{name:"Basque",code:"eu",lcid:"1069"},{name:"Български",code:"bg",lcid:"1026"},{name:"català",code:"ca",lcid:"1027"},{name:"中文(简体)",code:"zh-Hans",lcid:"2052"},{name:"中文(繁體)",code:"zh-Hant",lcid:"1028"},{name:"hrvatski",code:"hr",lcid:"1050"},{name:"čeština",code:"cs",lcid:"1029"},{name:"dansk",code:"da",lcid:"1030"},{name:"Nederlands",code:"nl",lcid:"1043"},{name:"English",code:"en-US",lcid:"1033"},{name:"eesti",code:"et",lcid:"1061"},{name:"suomi",code:"fi",lcid:"1035"},{name:"français",code:"fr",lcid:"1036"},{name:"galego",code:"gl",lcid:"1110"},{name:"Deutsch",code:"de",lcid:"1031"},{name:"Ελληνικά",code:"el",lcid:"1032"},{name:"עברית",code:"he",lcid:"1037"},{name:"हिंदी",code:"hi",lcid:"1081"},{name:"magyar",code:"hu",lcid:"1038"},{name:"Bahasa Indonesia",code:"id",lcid:"1057"},{name:"italiano",code:"it",lcid:"1040"},{name:"日本語",code:"ja",lcid:"1041"},{name:"Қазақ",code:"kk",lcid:"1087"},{name:"한국어",code:"ko",lcid:"1042"},{name:"latviešu",code:"lv",lcid:"1062"},{name:"lietuvių",code:"lt",lcid:"1063"},{name:"Bahasa Melayu",code:"ms",lcid:"1086"},{name:"norsk (bokmål)",code:"no",lcid:"1044"},{name:"Polski",code:"pl",lcid:"1045"},{name:"Português (Brasil)",code:"pt-BR",lcid:"1046"},{name:"Português (Portugal)",code:"pt-PT",lcid:"2070"},{name:"română",code:"ro",lcid:"1048"},{name:"Русский",code:"ru",lcid:"1049"},{name:"српски",code:"sr-Cyrl",lcid:"3098"},{name:"srpski",code:"sr-Latn",lcid:"2074"},{name:"slovenčina",code:"sk",lcid:"1051"},{name:"slovenski",code:"sl",lcid:"1060"},{name:"español",code:"es",lcid:"1034"},{name:"svenska",code:"sv",lcid:"1053"},{name:"ไทย",code:"th",lcid:"1054"},{name:"Türkçe",code:"tr",lcid:"1055"},{name:"українська",code:"uk",lcid:"1058"},{name:"Tiếng Việt",code:"vi",lcid:"1066"}]}})(powerbi=powerbi||{}),!(function(t){var e;(e=t.common||(t.common={})).PowerBIErrorHeader="x-powerbi-error-info",e.PowerBIErrorDetailsHeader="x-powerbi-error-details",(e.HttpRequestConfig||(e.HttpRequestConfig={})).create=function(e,t,o,i){return e={method:e,url:t},void 0!==i&&(e.data=i),angular.extend(e,o)},e.getHttpService=function(){return t.ensurePowerbiCommon().httpService},e.setHttpService=function(e){t.ensurePowerbiCommon().httpService=e}})(powerbi=powerbi||{}),jsCommon.StringExtensions),Trace=jsCommon.Trace,iFrameUtility=(!(function(e){function t(e,t){this.promiseFactory=e,this.httpService=t,this.isEnabled=!0,this.requestDeferred=this.promiseFactory.defer(),this.requestDeferred.resolve(null),this.longPollInitialized=!1,this.lastLongPollCancelled=!1,this.lastLongPollTimedOut=!1,this.retryCount=0}e=e.common||(e.common={}),t.prototype.startMonitoring=function(e){var t=this;void 0===e&&(e=0),this.longPollInitialized||(this.longPollInitialized=!0,this.isEnabled=!0,this.requestDelay&&clearTimeout(this.requestDelay),this.requestDelay=setTimeout((function(){t.sendLongPollRequest()}),e))},t.prototype.setLongPollInitialized=function(e){this.longPollInitialized=e},t.prototype.cancelCurrentRequest=function(){this.lastLongPollCancelled=!0,this.requestDeferred.resolve(null),this.longPollInitialized=!1,this.requestDelay&&clearTimeout(this.requestDelay)},t.prototype.pause=function(){this.paused=!0,this.cancelCurrentRequest()},t.prototype.resume=function(){this.paused=!1,this.startMonitoring()},t.prototype.trySendRequest=function(e){var t=this.requestOptions,o=t.headers.Authorization,i=!1;if(i=o?1<(o=o.split(" ")).length&&!StringExtensions.isNullOrUndefinedOrWhiteSpaceString(o[1]):i)return this.httpService.post(this.getEndpointUrl(),{request:e},t);Trace.warning("Auth token not available, avoiding powerbi/refresh/subscribe request")},Object.defineProperty(t.prototype,"requestHeader",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longPollDurationInMs",{get:function(){return 6e4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestOptions",{get:function(){var e=this,t=this.requestDeferred,o=(this.lastLongPollTimedOut=!1,this.lastLongPollCancelled=!1,setTimeout((function(){e.lastLongPollTimedOut=!0,t.resolve(null)}),this.longPollDurationInMs),this.httpService.powerbiRequestOptions(null,null,this.requestHeader,!0));return o.retryCount=0,o.timeout=t.promise,o.silentlyFailOnExpiry=!0,o},enumerable:!1,configurable:!0}),t.prototype.sendLongPollRequest=function(){var e,t=this;this.paused||this.isEnabled&&(this.requestDeferred=this.promiseFactory.defer(),(e=this.getRequest())?(e=this.trySendRequest(e))&&e.then((function(e){t.retryCount=0,t.requestDeferred.resolve(null),t.processResponse(e.data),t.sendLongPollRequest()}),(function(e){t.requestDeferred.resolve(null),t.lastLongPollTimedOut?(t.retryCount=0,t.sendLongPollRequest()):t.lastLongPollCancelled?t.retryCount=0:t.retryCount<3?(t.retryCount++,t.sendLongPollRequest()):(t.processError(e&&e.error),t.suspend())})):this.reset())},t.prototype.suspend=function(){var t=this,o=this.promiseFactory.defer(),i=(o.promise.then((function(){t.cancelCurrentRequest(),t.startMonitoring()})),function(e){e&&(t.httpService.unregisterResponseCallback(i),o.resolve(null))});this.httpService.registerResponseCallback(i),setTimeout((function(){o.resolve(null)}),12e4)},t.prototype.reset=function(){this.longPollInitialized=!1,this.lastLongPollTimedOut=!1,this.lastLongPollCancelled=!1},e.LongPollServiceBase=t})(powerbi=powerbi||{}),!(function(i){var e;function t(e,t){this.urlPathPrefix=e,this.httpService=t}function o(){}e=(e=i.common||(i.common={})).proxies||(e.proxies={}),t.prototype.getMashUpProviderPackageModels=function(e,t){t=this.httpService.powerbiRequestOptions(t,"GetMashUpProviderPackageModels");return this.httpService.get(this.urlPathPrefix+e.toString()+"/models",t)},t.prototype.updateMashUpProviderPackageModelParameters=function(e,t,o){o=this.httpService.powerbiRequestOptions(o,"UpdateMashUpProviderPackageModelParameters");return this.httpService.post(this.urlPathPrefix+e.toString()+"/parameters",t,o)},e.MashUpProviderProxyImpl=t,o.prototype.getMashUpProviderPackageModels=function(e,t){return i.common.mashupProviderService.getMashUpProviderPackageModels(e,t)},o.prototype.updateMashUpProviderPackageModelParameters=function(e,t,o){return i.common.mashupProviderService.updateMashUpProviderPackageModelParameters(e,t,o)},e.MashUpProviderProxyUsingService=o})(powerbi=powerbi||{}),!(function(e){var i;i=e.common||(e.common={}),(e=i.mashupProviderService||(i.mashupProviderService={})).getMashUpProviderPackageModels=function(e,t){return t=i.getHttpService().powerbiRequestOptions(t,"GetMashUpProviderPackageModels"),i.getHttpService().get("powerbi/providers/mashup/provider/"+e.toString()+"/models",t)},e.updateMashUpProviderPackageModelParameters=function(e,t,o){return o=i.getHttpService().powerbiRequestOptions(o,"UpdateMashUpProviderPackageModelParameters"),i.getHttpService().post("powerbi/providers/mashup/provider/"+e.toString()+"/parameters",t,o)}})(powerbi=powerbi||{}),!(function(e){(e=(e=e.common||(e.common={})).events||(e.events={})).viewInsightInFocusEventName="viewInsightInFocus",e.visualContainerResizeStart={type:2,name:"visualContainerResizeStart"},e.visualContainerResizeEnd={type:2,name:"visualContainerResizeEnd"},e.visualContainerInteraction={type:2,name:"visualContainerInteraction"},e.canvasItemContainerShowHover={type:2,name:"canvasItemContainerShowHover"},e.canvasItemContainerHideHover={type:2,name:"canvasItemContainerHideHover"},e.liveReportTileReady={type:2,name:"liveReportTileReady"},e.printSectionReady={type:2,name:"printSectionReady"},e.reportPrintSectionStarted={type:3,name:"reportPrintSectionStarted"},e.reportPrintSectionFinished={type:3,name:"reportPrintSectionFinished"},e.loadPowerViewReport={type:4,name:"loadPowerViewReport"},e.explorationUnloaded={type:4,name:"explorationUnloaded"},e.informationProtectionLoaded={type:4,name:"informationProtectionLoaded"},e.printModeChanged={type:4,name:"printModeChanged"},e.reportRefreshStateChanged={name:"reportRefreshStateChanged",type:4},e.activeExplorationChanged={name:"activeExplorationChanged",type:4},e.tileVisualLoadedChanged={name:"tileVisualLoadedChanged",type:4},e.scrollToSelectedTile={type:4,name:"scrollToSelectedTile"},e.refreshTileError={type:4,name:"Tile_RLS_NoAccess"},e.dashboardTileScaleChanged={name:"dashboardTileScaleChanged",type:2}})(powerbi=powerbi||{}),!(function(e){var t,o;t=e.common||(e.common={}),o=jsCommon.FreezeUtility,e={UnknownError:{messageId:"ErrorMessage_FailedToStorePackage",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedDefaultHelpLink},ExcelWorkbookHasNoDataException:{messageId:"ErrorMessage_FailedToStorePackageExcel",titleId:"ErrorTitle_FailedToStorePackageExcel",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedHelpLink},StreamIsNotAZipFileException:{messageId:"ErrorMessage_FailedToOpenExcelFile",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedDefaultHelpLink},ExcelProviderNoConnectorAssociatedWithModelException:{messageId:"ErrorMessage_NoConnectorAssociatedWithModel",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedDataGatewayExceptionHelpLink},RequestedViewWorkbookExceedsMaximiumSizeException:{messageId:"UploadExcel_UploadLimit_ViewExcelMode",titleId:"UploadExcel_UploadLimit_ViewExcelMode_Title",helperTextId:"ExcelErrorDialogHelperText",helpLink:e.models.excelWorkbookUploadFailedExceedsMaxSizeExceptionHelpLink,messageIdOverride:{featureSwitch:"oneGBUploadFileSizeEnabled",messageId:"UploadExcel_UploadLimit_ViewExcelMode_OneGB"}}},t.KnownContentProviderErrors={},Object.defineProperty(t.KnownContentProviderErrors,t.constants.excelContentProviderId.toString(10),{configurable:!0,enumerable:!0,writable:!1,value:e}),Object.defineProperty(t.KnownContentProviderErrors,t.constants.pbiDesktopContentProviderId.toString(10),{configurable:!0,enumerable:!0,writable:!1,value:{IncrementalRefreshOnlySupportedInPremium:{messageId:"ErrorMessage_IncrementalRefreshOnlySupportedInPremium",titleId:"PremiumRequired_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=869752"},DatasetsWithAggregationsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithAggregations",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithCompositeModelsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithManyToManyRelationshipsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithMixedSourcePartitionsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"},DatasetsWithDualModePartitionsNotSupported:{messageId:"PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels",titleId:"PreviewFeaturesUnsupported_TitleText",helpLink:"//go.microsoft.com/fwlink/?linkid=871428"}}}),o.deepFreeze(t.KnownContentProviderErrors),t.contentProviderDefaultErrorType="FailedToStorePackage"})(powerbi=powerbi||{}),!(function(e){var t=e.common||(e.common={}),n=jsCommon.QueryStringUtil,o=(t.createActiveFolderIdService=function(e){return new o(e)},Object.defineProperty(i.prototype,"activeFolderObjectId",{get:function(){return this._activeFolderObjectId},set:function(e){this._activeFolderObjectId=e,this.initialFolderIdReadyDeferred.resolve(null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"folderSharePoint",{get:function(){return this._folderSharePoint},set:function(e){this._folderSharePoint=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"folderPermission",{get:function(){return this._folderPermission},set:function(e){this._folderPermission=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isReadOnly",{get:function(){return this._isReadOnly},set:function(e){this._isReadOnly=e,this.initialFolderPermissionReadyDeferred.resolve(null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"headerActiveFolderObjectId",{get:function(){return this.isInFolder?this.activeFolderObjectId:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isActiveFolderWSv2",{get:function(){return!!this.activeFolderNumericId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeFolderNumericId",{get:function(){return this.activeFolderObjectId&&this.folderObjectIdToNumericIdMapping[this.activeFolderObjectId]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isInFolder",{get:function(){return this.activeFolderObjectId&&this.activeFolderObjectId!==t.constants.myWorkspaceFolderId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"myWorkspaceFolderId",{get:function(){return t.constants.myWorkspaceFolderId},enumerable:!1,configurable:!0}),i.prototype.isWorkspaceUnknownOrAFolder=function(e){return!(!e||!this.folderObjectIdToNumericIdMapping[e])},i.prototype.appendFolderToQueryStringIfExists=function(e){var t,o=e,i=this.folderObjectIdToNumericIdMapping[this._activeFolderObjectId];return i&&((t={}).folderId=i.toString(),o=n.addOrUpdateQueryStringToUrl(e,t)),o},i.prototype.isInIframe=function(){return jsCommon.iFrameUtility.isHostedInIFrame()&&!jsCommon.iFrameUtility.isHostedInCrossDomainIFrame()},i);function i(e){this.initialFolderIdReadyDeferred=e.defer(),this.initialFolderIdReadyPromise=this.initialFolderIdReadyDeferred.promise,this.initialFolderPermissionReadyDeferred=e.defer(),this.initialFolderPermissionReadyPromise=this.initialFolderPermissionReadyDeferred.promise,this.isInIframe()?(e=window.top.powerbi.common.activeFolderIdService,this.activeFolderObjectId=e.activeFolderObjectId,this.folderObjectIdToNumericIdMapping=e.folderObjectIdToNumericIdMapping):this.folderObjectIdToNumericIdMapping={}}t.ActiveFolderIdService=o,t.createHostActiveFolderIdService=function(e){return new a(e)},r=t.ActiveFolderIdService,__extends(s,r);var r,a=s;function s(e){e=r.call(this,e)||this;return e.activeFolderObjectId=void 0,e.isReadOnly=!1,e}t.HostActiveFolderIdService=a})(powerbi=powerbi||{}),!(function(e){function t(e,t){this.promiseFactory=e,this.httpService=t}e=e.common||(e.common={}),t.prototype.getClusterUrl=function(){var t=this,o=this.promiseFactory.defer();return this.clusterUrl?o.resolve(this.clusterUrl):this.httpService.get("metadata/cluster",this.httpService.powerbiRequestOptions(null,null,{dismissGroupObjectId:!0})).then((function(e){t.clusterUrl=e.data,o.resolve(t.clusterUrl)}),(function(e){o.reject({error:e.error,requestId:e.requestId})})),o.promise},e.CommonClusterResolverService=t})(powerbi=powerbi||{}),!(function(e){(e.common||(e.common={})).createDragDataService=function(){return new t},o.prototype.setDragElement=function(e){this.dragElement=e},o.prototype.setDragContext=function(e){this.dragContext=e},o.prototype.setDragOffset=function(e){this.dragOffset=e},o.prototype.getDragElement=function(){return this.dragElement},o.prototype.getDragContext=function(){return this.dragContext},o.prototype.getDragOffset=function(){return this.dragOffset};var t=o;function o(){}})(powerbi=powerbi||{}),!(function(n){(n.common||(n.common={})).createDropdownMenuService=function(e,t,o){return new i(e,t,o)},o.prototype.showMenu=function(e,t,o,i,n){this.prepareMenuItem(e,t,o,i,n),this.showMenuCore(),i&&i.stopPropagation()},o.prototype.toggleActive=function(e,t,o,i,n){this.prepareMenuItem(e,t,o,i,n),this.isActive(e)?this.hideMenu():this.showMenuCore(),i&&i.stopPropagation()},o.prototype.hideMenu=function(){this.currentDropdownElement&&this.isActive(this.currentDropdownElement)&&(this.isOpen=!1,this.currentDropdownElement.removeClass(o.dropDownActiveClass),this.currentDropdownElement.remove(),this.currentDropdownElement=null,$(window).off(jsCommon.DOMConstants.mouseDownEventName,this.clickHandler))},o.prototype.showMenuCore=function(){var t=this;this.isOpen=!0,this.currentDropdownElement&&(this.clickHandler=function(e){return t.mouseDownHideDialog(e)},$(window).on(jsCommon.DOMConstants.mouseDownEventName,this.clickHandler),this.currentDropdownElement.addClass(o.dropDownActiveClass))},o.prototype.prepareMenuItem=function(e,t,o,i,n){var r,a;if(!this.currentDropdownElement||(s=this.currentDropdownElement).is(e)||(s.remove(),this.currentDropdownElement=null,this.currentAnchorElement=null),this.currentDropdownElement||(this.currentDropdownElement=e,this.currentAnchorElement=t,this.currentDropdownElement.appendTo("body")),o)r=o.y,l=o.x,a=c=0;else{if(!t)return;r=t.offset().top,l=t.offset().left,c=t.outerWidth(!0),a=t.height()}this.rtl&&this.rtl.isRtlLayout&&(l=this.windowMetrics.windowWidth-(l+c));var s=n?l+c:l,o=e.outerWidth(!0),t=o+s>$(window).width()?s+c-o:s,l=n?r:r+a,c=e.outerHeight(!0),o=c+l>$(window).height()?l-c:l;e.filter("ul").css({position:"absolute",zIndex:1e3,top:o,left:this.rtl&&this.rtl.isRtlLayout?null:Math.ceil(t),right:this.rtl&&this.rtl.isRtlLayout?Math.floor(t):null,opacity:1})},o.prototype.mouseDownHideDialog=function(e){this.currentDropdownElement&&this.isActive(this.currentDropdownElement)&&this.outOfBoundsClickHandler(e)&&(this.currentDropdownElement.remove(),this.isOpen=!1)},o.prototype.outOfBoundsClickHandler=function(e){var t=e.pageX,e=e.pageY;return!(this.currentAnchorElement&&this.currentDropdownElement&&this.isActive(this.currentDropdownElement)&&!this.isOutOfBounds(this.currentAnchorElement,t,e))&&(this.currentDropdownElement&&this.isActive(this.currentDropdownElement)?this.isOutOfBounds(this.currentDropdownElement,t,e):void 0)},o.prototype.isOutOfBounds=function(e,t,o){var i=e.offset(),n=i.left,i=i.top,r=n+e.outerWidth(),e=i+e.outerHeight();return t<n||r<t||o<i||e<o},o.prototype.isActive=function(e){return e.hasClass(o.dropDownActiveClass)},o.dropDownActiveClass="active";var i=o;function o(e,t,o){var i=this;this.rtl=t,this.windowMetrics=o,$(window).on("resize",(function(){return i.hideMenu()})),e.createChannelSubscriptionManager().subscribe(n.common.events.explorationUnloaded,(function(){return i.hideMenu()}))}})(powerbi=powerbi||{}),!(function(e){var l=e.common||(e.common={}),c=jsCommon.FocusGroupNavigation,s=(l.createDropdownService=function(e,t,o,i,n,r){return new a(e,t,o,i,n,r)},t.prototype.pin=function(){this.cancelHideTimeout(),this.pinned=!0},t.prototype.unpin=function(){this.pinned=!1},t.prototype.isPinned=function(){return this.pinned},t.prototype.hide=function(e){var t=this,e=(this.cancelHideTimeout(),void 0!==e?e:this.hideDelay);0===e?this.hideDropdown():this.hideTimeout=setTimeout((function(){t.hideDropdown()}),e)},t.prototype.hideDropdown=function(){this.pinned||this.dropdownService.hide(this.registeredDropdown)},t.prototype.show=function(){this.cancelHideTimeout()},t.prototype.cancelHideTimeout=function(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=void 0)},t.prototype.onMouseEnter=function(){this.cancelHideTimeout()},t.prototype.onMouseLeave=function(){this.hide()},t);function t(e,t,o,i,n){void 0===n&&(n=0);var r=this;this.registeredDropdown=e,this.overlayOptions=t,this.dropdownService=o,this.hideDelay=n,i&&(this.registeredDropdown.template.on("mouseenter",(function(){r.onMouseEnter()})),this.registeredDropdown.template.on("mouseleave",(function(){r.onMouseLeave()})),this.registeredDropdown.template.on("click",(function(){r.pin()})))}l.RegisteredDropdownContext=s,l.TemplatePath_ContextMenu="contextMenu.html",o.prototype.showContextMenu=function(e,t,o,i,n,r,a,s){e&&!_.isEmpty(e.items)&&(e=new d.ContextMenu(this.createServices(),l.TemplatePath_ContextMenu,e,o,!0,i,n,r,a,s&&s.backgroundStyle,s&&s.foregroundStyle,s&&s.anchorElement),this.registerDropdown(e),this.showDropdown(e,s=s||{position:t,hideExistingOverlays:!0,showInsideVisibleArea:!0}))},o.prototype.showMenu=function(e,t,o,i,n,r,a){t=p.compileAndBindDropdown(this.createServices(),t,e,i,a),e=new s(t,o,this,n,r);return this.registerDropdown(e.registeredDropdown),this.showDropdown(e.registeredDropdown,e.overlayOptions),this.promiseFactory.resolve(e)},o.prototype.hide=function(e){this.unregisterDropdown(e)},o.prototype.hideAll=function(e){for(this.overlayService.hideAllDropdowns(!0,void 0,e=void 0===e?!0:e);!_.isEmpty(this.registeredDropdowns);)this.unregisterDropdown(this.registeredDropdowns[0])},o.prototype.isDropdownRegistered=function(e){return this.promiseFactory.resolve(_.some(this.registeredDropdowns,e))},o.prototype.showDropdown=function(e,t){var o=this;this.$timeout((function(){_.includes(o.registeredDropdowns,e)&&o.overlayService.showOverlay(e.template,t)}),0,!1)},o.prototype.unregisterDropdown=function(e){_.pull(this.registeredDropdowns,e),e.template.off(l.constants.OverlayCloseEventName),e.scope.$destroy(),this.overlayService.unregister(e.template),e.parentExpandedMenuItem&&e.parentExpandedMenuItem.expanded&&(e.parentExpandedMenuItem.expanded=!1)},o.prototype.registerDropdown=function(e){var t=this;e.parentExpandedMenuItem&&(e.parentExpandedMenuItem.expanded=!0),this.registeredDropdowns.push(e),e.template.on(l.constants.OverlayCloseEventName,(function(){return t.unregisterDropdown(e)})),this.overlayService.isRegistered(e.template)||this.overlayService.register(e.template)},o.prototype.createServices=function(){var o=this;return{$rootScope:this.$rootScope,$compile:this.$compile,$templateCache:this.$templateCache,registeredDropdowns:this.registeredDropdowns,hideAll:function(){return o.hideAll()},show:function(e,t){return o.showDropdown(e,t)},unregister:function(e){return o.unregisterDropdown(e)},register:function(e){return o.registerDropdown(e)}}};var p,d,a=o;function o(e,t,o,i,n,r){this.$rootScope=e,this.$templateCache=t,this.$compile=o,this.overlayService=i,this.$timeout=n,this.promiseFactory=r,this.registeredDropdowns=[]}function u(t,e,o,i,n,r,a,s,l,c,d,u){this.services=t;o={model:o,darkTheme:r,verticalScrollbar:s,themeableElement:l,backgroundStyle:c,foregroundStyle:d,menuClick:function(e){t.hideAll(),i(e)}},n&&(o.menuItemEnter=this.onMenuItemEntered.bind(this,e,r,l,c,d,u)),s=p.compileAndBindDropdown(t,e,o);this.scope=s.scope,this.template=s.template,a&&this.template.attr("id",a)}(p||(p={})).compileAndBindDropdown=function(e,t,o,i,n){var r,a=n,a=(n||e.$rootScope).$new(!0),n=(_.assign(a,o),e.$templateCache.get("views/dropdowns/"+t));return i&&(r={transcludeControllers:((o={}).$$angularInjector={instance:i},o)}),{scope:a,template:e.$compile(n)(a,void 0,r)}},e=d=d||{},u.prototype.onMenuItemEntered=function(e,t,o,i,n,r,a,s){var l=_.last(this.services.registeredDropdowns);l&&l.parent&&(this.services.unregister(l),l=_.last(this.services.registeredDropdowns)),l&&a.children&&((e=new u(this.services,e,{items:a.children},l.scope.menuClick,!1,t,void 0,!0,o,i,n,r)).parentExpandedMenuItem=a,this.services.register(e),e.parent=l,t=c.getFirstFocusableParent(s.target),o=$(s.currentTarget),this.services.show(e,{anchorElement:o,returnFocusToElement:t?$(t):void 0,hideExistingOverlays:!1,horizontal:!0,showInsideVisibleArea:!0,showOutsideAnchorElement:!0}))},e.ContextMenu=u})(powerbi=powerbi||{}),jsCommon.iFrameUtility);!(function(t){var e,o;(e=t.common||(t.common={})).createContentProviderConfigHandlerService=function(e){return(e=iFrameUtility.isHostedInCrossDomainIFrame()?e.self:e.parent)[t.common.constants.contentProviderStoreCustomConfigurationService]||(e[t.common.constants.contentProviderStoreCustomConfigurationService]=new o,e[t.common.constants.contentProviderStoreCustomConfigurationService])},o=function(){},e.ContentProviderConfigHandlerService=o})(powerbi=powerbi||{}),(function(e){var t;function o(e){this._id=e+o._lastId++,this._frames=t.styleService.createStyleFrames("cls-"+this._id)}t=e.common||(e.common={}),Object.defineProperty(o.prototype,"frames",{get:function(){return this._frames},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"className",{get:function(){return this._frames.getClassName()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"style",{get:function(){return this._frames.style},set:function(e){this._frames.style=e},enumerable:!1,configurable:!0}),o.prototype.addFrame=function(e){this._frames.addFrame(e)},o.prototype.addFrameFromDefinition=function(e,t){e.style&&this._frames.addFrameFromDefinition(e,t)},o.prototype.ensureInitialFrame=function(){return this._frames.ensureInitialFrame(),this},o.prototype.startAnimationWithDefinition=function(e,t){e.style&&(this._frames.addFrameFromDefinition(e,t),this.startAnimationIfNeeded())},o.prototype.updateClassIfNeeded=function(){this._frames.style&&t.styleService.appendClassRule(this.className,this._frames.style)},o.prototype.startAnimationIfNeeded=function(){var e;this._frames.canAnimate()&&this._frames.style&&((e=angular.element(document.getElementsByClassName(this.className)))||alert("element not found in startAnimationIfNeeded "),e.length)&&t.styleService.startAnimation(e,this._frames)},o._lastId=0,t.ElementStyleDefinition=o})(powerbi=powerbi||{}),(function(e){var t,o;function i(){return{rowSpan:o.gridItemSmallLandscapeRowSpan,colSpan:o.gridItemSmallLandscapeColSpan}}function n(){return{rowSpan:o.gridItemMediumLandscapeRowSpan,colSpan:o.gridItemMediumLandscapeColSpan}}function r(){return{rowSpan:o.gridItemLargeLandscapeRowSpan,colSpan:o.gridItemLargeLandscapeColSpan}}t=e.common||(e.common={}),(o=t.GridLayoutConstants||(t.GridLayoutConstants={})).defaultGridWidth=260,o.defaultGridHeight=180,o.defaultGridItemSpacing=10,o.defaultGridItemHeaderHeight=50,o.dynamicGridWidth=44,o.dynamicGridHeight=50,o.dynamicGridItemSpacing=4,o.dynamicMaxGridWidthUnits=6,o.dynamicMaxGridHeigthUnits=7,o.gridItemSmallLandscapeRowSpan=1,o.gridItemSmallLandscapeColSpan=1,o.gridItemMediumLandscapeRowSpan=2*o.gridItemSmallLandscapeRowSpan,o.gridItemMediumLandscapeColSpan=2*o.gridItemSmallLandscapeColSpan,o.gridItemLargeLandscapeRowSpan=3*o.gridItemSmallLandscapeRowSpan,o.gridItemLargeLandscapeColSpan=3*o.gridItemSmallLandscapeColSpan,o.getSmallLandscapeGridItem=i,o.getMediumLandscapeGridItem=n,o.getLargeLandscapeGridItem=r,o.getDefaultGridItemViewport=function(e){return{height:e.rowSpan*o.defaultGridHeight-o.defaultGridItemSpacing,width:e.colSpan*o.defaultGridWidth-o.defaultGridItemSpacing}},o.getDefaultColSpanFromWidth=function(e){return Math.ceil((e+o.defaultGridItemSpacing)/o.defaultGridWidth)},o.getDefaultRowSpanFromHeight=function(e){return Math.ceil((e+o.defaultGridItemSpacing+o.defaultGridItemHeaderHeight)/o.defaultGridHeight)},o.gridItemSizes=[i(),n(),r()],o.gridItemSizeCount=o.gridItemSizes.length,o.resizeBuffer=20,t.createGridLayoutService=function(){return{strategy:new t.models.DefaultGridLayoutStrategy,displayLayout:0,skipVisualManualUpdate:!1,setViewport:_.noop,resetZoom:_.noop,setStrategy:_.noop}}})(powerbi=powerbi||{}),(function(e){var t;function o(){}e=e.common||(e.common={}),t=window.chromiumBridge,o.prototype.invoke=function(e){t&&t.call(e.operationName)},e.ChromiumHostInvokerService=o})(powerbi=powerbi||{}),(function(e){function t(){}e=e.common||(e.common={}),t.prototype.invoke=function(e){},e.VoidHostInvokerService=t})(powerbi=powerbi||{}),(function(e){var o,i;function t(e,t){this.promiseFactory=e,this.hostInvokerService=t,this.deferredMap={},this.secret=o.sessionStorageService.getData("SecureMobileWebViewSecret")||void 0}(o=e.common||(e.common={})).setHostServiceSink=function(e){i=e},o.onHostMessageSuccess=function(e,t){i.onSuccess(e,t)},o.onHostMessageFailure=function(e,t){i.onFailure(e,t)},t.prototype.invoke=function(e,t,o){var i=this.promiseFactory.defer(),e={serviceName:e,operationName:t,invocationId:jsCommon.Utility.generateGuid(),oneWay:!1,arguments:o,secret:this.secret};return this.deferredMap[e.invocationId]=i,this.hostInvokerService.invoke(e),i.promise},t.prototype.invokeAndForget=function(e,t,o){e={serviceName:e,operationName:t,invocationId:jsCommon.Utility.generateGuid(),oneWay:!0,arguments:o,secret:this.secret};this.hostInvokerService.invoke(e)},t.prototype.onSuccess=function(t,e){if(t in this.deferredMap){var o=void 0;if(angular.isDefined(e))try{o=JSON.parse(e)}catch(e){return void this.onFailure(t,"JSON parse error")}e=this.deferredMap[t];delete this.deferredMap[t],e.resolve(o)}},t.prototype.onFailure=function(e,t){var o;e in this.deferredMap&&(o=this.deferredMap[e],delete this.deferredMap[e],o.reject(t))},o.HostService=t})(powerbi=powerbi||{}),(function(e){var t,n;function o(e){this.hostTypeName=e||this.getHostTypeNameOrDefault(),this.hostType=this.convertHostTypeNameToHostType(this.hostTypeName)}t=e.common||(e.common={}),(e=(e=n=t.constants||(t.constants={})).HostType||(e.HostType={})).hostTypeQueryParamKey="hostType",e.none="none",e.localBrowser="localbrowser",e.phantomJs="phantomjs",e.chromium="chromium",o.prototype.getHostType=function(){return this.hostType},o.prototype.hasHostType=function(){return this.hostType!==t.HostType.None},o.prototype.isPhantomJs=function(){return this.hostType===t.HostType.PhantomJs},o.prototype.isChromium=function(){return this.hostType===t.HostType.Chromium},o.prototype.getHostTypeNameOrDefault=function(){for(var e=window.location.search.substr(1).split("&"),t=0,o=e.length;t<o;++t){var i=e[t].split("=");if(decodeURIComponent(i[0])===n.HostType.hostTypeQueryParamKey)return decodeURIComponent(i[1])}return n.HostType.none},o.prototype.convertHostTypeNameToHostType=function(e){switch(e.toLowerCase()){case n.HostType.phantomJs:return t.HostType.PhantomJs;case n.HostType.chromium:return t.HostType.Chromium;default:return t.HostType.None}},e=o,t.HostTypeResolutionService=e})(powerbi=powerbi||{}),(function(e){(e=(e=e.common||(e.common={})).HostType||(e.HostType={}))[e.None=0]="None",e[e.PhantomJs=1]="PhantomJs",e[e.Chromium=2]="Chromium"})(powerbi=powerbi||{}),(function(e){(e.common||(e.common={})).createLastFocusedElementService=function(){return new t},o.prototype.setLastFocusedElement=function(e){this.lastFocusedElement=e},o.prototype.returnFocus=function(){var e;this.lastFocusedElement&&((e=angular.element(this.lastFocusedElement))&&e.focus(),this.lastFocusedElement=null)};var t=o;function o(){}})(powerbi=powerbi||{}),define("PowerBICommon/services/loadProgressNotificationService",["require","exports"],(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0,t.create=function(e,t,o,i,n,r){return void 0===o&&(o=_.noop),new s(e,t,o,i,n=void 0===n?a:n,r=void 0===r?!1:r)};var a=1e3,s=(o.prototype.beginLoad=function(){this.counter++},o.prototype.endLoad=function(){var e=this;this.trackableHost&&!this.shouldTrackProgress&&0<this.counter&&(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress()),(this.shouldTrackProgress||0<this.counter)&&this.ngZone.runOutsideAngular((function(){e.$timeout((function(){e.counter--,0===e.counter&&e.shouldTrackProgress&&e.ngZone.run((function(){return e.invokeCompletionCallback()}))}),e.decrementDelayInMilliseconds,!1)}))},o.prototype.reset=function(){this.trackableHost?(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress(),this.shouldTrackProgress||this.invokeCompletionCallback()):this.shouldTrackProgress=!1},o.prototype.cancelTracking=function(){this.cancelFn()},o.prototype.register=function(e){var t=this,o={};return this.trackableHost=e,this.registerTrackableHostContext=o,function(){t.registerTrackableHostContext===o?(t.trackableHost=void 0,t.registerTrackableHostContext=void 0):"De-registered a loadProgressNotification trackableHost when ".concat(t.registerTrackableHostContext?"another":"none"," is registered")}},o.prototype.invokeCompletionCallback=function(){this.completionFn()},o);function o(e,t,o,i,n,r){void 0===n&&(n=a),void 0===r&&(r=!1),this.$timeout=e,this.completionFn=t,this.cancelFn=o,this.ngZone=i,this.decrementDelayInMilliseconds=n,this.ignoreShouldTrackLoadProgressCheck=r,this.counter=0,this.reset()}})),(function(t){var e;(e=t.common||(t.common={})).getLocalize=function(){return t.ensurePowerbiCommon().localize},e.setLocalize=function(e){t.ensurePowerbiCommon().localize=e},e.getCultureInfo=function(){return t.ensurePowerbiCommon().cultureInfo},e.setCultureInfo=function(e){t.ensurePowerbiCommon().cultureInfo=e},e.getUnmappedCultureInfo=function(){return t.ensurePowerbiCommon().unmappedCultureInfo},e.setUnmappedCultureInfo=function(e){t.ensurePowerbiCommon().unmappedCultureInfo=e},e.getFormattingLocale=function(){return t.ensurePowerbiCommon().formattingLocale},e.setFormattingLocale=function(e){t.ensurePowerbiCommon().formattingLocale=e},e.getLocalizedStrings=function(){return t.ensurePowerbiCommon().localizedStrings},e.setLocalizedStrings=function(e){t.ensurePowerbiCommon().localizedStrings=e}})(powerbi=powerbi||{}),(function(e){var t,i;t=e.common||(e.common={}),i=e.visuals.MapUtil.MapControlFactory,t.createMapControlFactory=function(e,t,o){return new i(e,t,o.bingMapControlUrl)}})(powerbi=powerbi||{}),(function(o){(o.common||(o.common={})).createNotificationToastService=function(e){return new t(e)},e.prototype.addNotificationFilter=function(e){this.logDeprecatedUsage("addNotificationFilter")},e.prototype.notify=function(e){return this.logDeprecatedUsage("notify",e.message||e.title),e.id=jsCommon.Utility.generateGuid(),e.id},e.prototype.hide=function(e){this.logDeprecatedUsage("hide")},e.prototype.hideAll=function(e){this.logDeprecatedUsage("hideAll")},e.prototype.hideCurrentNotification=function(){this.logDeprecatedUsage("hideCurrentNotification")},e.prototype.logDeprecatedUsage=function(e,t){this.telemetryService.logEvent(o.telemetry.DeprecatedNotificationToastUsage,{functionName:e,notificationData:t=void 0===t?"":t})};var t=e;function e(e){this.telemetryService=e,this.telemetryService.logEvent(o.telemetry.DeprecatedNotificationToastUsage,{functionName:"constructor",notificationData:""})}})(powerbi=powerbi||{}),(function(e){var o,r,a,s,i,n;function t(e,t,o,i){var n=this;this.root=o,this.rtl=i,this.dropdowns=[],this.$window=$(e).on(r.mouseDownEventName+".overlayService",(function(e){return n.mouseClickHideDialog(e,n.dropdowns)})).on("resize.overlayService",(function(){return n.hideAllDropdowns()})),this.root=o||$("body")}o=e.common||(e.common={}),r=jsCommon.DOMConstants,a=o.OverlayUtils,o.createOverlayService=function(e,t,o,i){return new n(e,t,o,i)},s="overlayActive",i="overlay",t.prototype.onDestroy=function(){$(this.$window).off(r.mouseDownEventName+".overlayService"),$(this.$window).off("resize.overlayService")},t.prototype.register=function(e,t){this.dropdowns.push({element:e}),e.addClass(i).appendTo(t||this.root)},t.prototype.unregister=function(t){_.remove(this.dropdowns,(function(e){return e.element.is(t)})),t.removeClass(i).removeClass(s).remove()},t.prototype.isRegistered=function(t){return _.some(this.dropdowns,(function(e){return e.element.is(t)}))},t.prototype.mouseClickHideDialog=function(t,e){var o=this;_.some(this.dropdowns,(function(e){return e.element.hasClass(s)&&!o.outOfBoundsClickHandler(t,e.element)}))||this.hideAllDropdowns(!0)},t.prototype.showOverlay=function(t,o){var i,n=this,e=(Number(!(!o.anchorElement&&!o.anchorDimensions)),Number(!!o.position),t.length,o.hideExistingOverlays&&this.hideAllDropdownsExcept(!0,t),t.addClass(s),t.attr("aria-modal","false"),t.attr("role","dialog"),o.anchorElement||o.anchorDimensions?(o.blurNeeded&&this.registerBlurHandler(o.anchorElement,o.disableAnimation),e=o.anchorDimensions||a.getAnchorDimensions(o.anchorElement),this.repositionDropdownWithAnchorCoordinates(t,e,!!o.preferLeft,o.horizontal,o.showOutsideAnchorElement,o.showIndicator,o.scale)):o.position&&o.showInsideVisibleArea?this.repositionDropdownWithAnchorCoordinates(t,{left:o.position.x,top:o.position.y,width:0,height:0},!!o.preferLeft,!1,o.showOutsideAnchorElement,o.showIndicator,o.scale):o.position&&this.repositionDropdown(t,o.position),_.filter(this.dropdowns,(function(e){return e.element.is(t)})));_.isEmpty(e)||((i=e[0]).escHandler=function(e){n.keyPress(e,i,o.anchorElement)},(e=i.element.get(0))&&e.addEventListener("keydown",i.escHandler),i.isModal=o.isModal,i.returnFocusToElement=o.returnFocusToElement),this.registerScrollHandler(),jsCommon.FocusManager.focusChildInGroup(t.get(0))},t.prototype.registerScrollHandler=function(){var e=this;setTimeout((function(){return e.registerScrollHandlerCore()}))},t.prototype.registerScrollHandlerCore=function(){var t=this;this.scrollEventListener||(this.scrollEventListener=function(e){o.directives.OnResize.isResizeSensorScrollEvent(e)||$(e.target).parents().addBack().hasClass(s)||t.hideAllDropdowns()},document.addEventListener("scroll",this.scrollEventListener,!0))},t.prototype.unregisterScrollHandler=function(){document.removeEventListener("scroll",this.scrollEventListener,!0),this.scrollEventListener=void 0},t.prototype.keyPress=function(e,t,o){e.skipOverlayServiceEscHandler||27!==e.keyCode||(o&&o.focus(),this.hideDropdown(t,!0),e.stopPropagation())},t.prototype.registerBlurHandler=function(t,o){var i=this;t.on("focusout.overlay",(function(e){t.off("focusout.overlay"),setTimeout((function(){return i.hideAllDropdowns(!!o)}))}))},t.prototype.toggleDropdown=function(e,t){var o=t.element;_.isString(o)&&(o=this.getOverlayElement(o)),t.blurNeeded&&this.registerBlurHandler(t.anchorElement,t.disableAnimation);for(var i=0,n=this.dropdowns;i<n.length;i++){var r=n[i];r.element.is(o)||this.hideDropdown(r,!0)}this.repositionDropdownWithAnchorCoordinates(o,a.getAnchorDimensions(t.anchorElement),t.preferLeft,t.horizontal,!1,!1),o.toggleClass(s),this.registerScrollHandler(),e&&e.stopPropagation()},t.prototype.getOverlayElement=function(e,t){e=this.getOverlaySelector(e);return t?t.siblings(e):$(e)},t.prototype.getOverlaySelector=function(e){return'[dropdown-overlay-name="'.concat(e,'"]')},t.prototype.outOfBoundsClickHandler=function(e,t){return!$(e.target).parents().addBack().hasClass(s)},t.prototype.repositionDropdownWithAnchorCoordinates=function(e,t,o,i,n,r,a){var s,l,c,d,u,p,m,h,g=this.$window.width(),f=this.$window.height(),v=e.find(".explorationAppBarMenu"),y=(v.length?v:e).outerWidth(!0),v=(v.length?v:e).outerHeight(!0),b=null==a?y:y*a,S=null==a?v:v*a,w=r?16:0,C=r?Math.floor(Math.sqrt(w*w+w*w)/2):0,b=(i?(i=u=d=void 0,d=t.top,u=t.left,h=(m=f<S+d-w)?d+t.height-v+w:d-w,c=this.rtl&&this.rtl.isRtlLayout?(l=!(p=(i=u)-b-C<0),p?i+C:i-y-C):(l=p=g<b+(i=u+t.width)+C)?i-y-C:i+C,n&&u<=c+y&&c<i&&(c=u-y)):(u=void 0,h=(m=f<S+(d=t.top+t.height)-w)?d-v+w:d-w,(c=o||this.rtl&&this.rtl.isRtlLayout?(l=!(p=(u=t.left+t.width)-y-C<0),p?u-t.width+C:u-y-C):(l=p=g<y+(u=t.left)+C)?u+t.width-y-C:u+C)<0&&(c=u)),h<0&&(h=10),{x:Math.ceil(c),y:h});r&&((n=t.top-b.y-w/2)<0?n+=w:n>e.height()-w&&(n-=w),s={top:n},b.x>=t.left?s.left=-8:s.right=-8),this.repositionDropdown(e,b,s,a,l,m)},t.prototype.repositionDropdown=function(e,t,o,i,n,r){o&&(s="top: ".concat(o.top,"px"),o=o.left?"left: ".concat(o.left,"px"):"right: ".concat(o.right,"px"),a="height: ".concat(16,"px;width: ").concat(16,"px"),a="position: absolute;transform: rotate(45deg);".concat(a,";").concat(s,";").concat(o,";"),s='<div class="indicator" style="'.concat(a,'"></div>'),e.append($.parseHTML(s)));var a,s,o={top:t.y,left:t.x};void 0!==i&&(o.transform="scale(".concat(i,")"),o["transform-origin"]="".concat(n?"right":"left"," ").concat(r?"bottom":"top")),e.css(o)},t.prototype.hideAllDropdowns=function(e,t,o){var i;t||(i=_.find(this.dropdowns,(function(e){return e.isModal}))),this.hideAllDropdownsExcept(e,i&&i.element)},t.prototype.hideAllDropdownsExcept=function(e,t){for(var o=[],i=0,n=this.dropdowns;i<n.length;i++){var r=n[i];r&&!r.element.is(t)&&r.element.hasClass(s)&&(this.hideDropdown(r,e),o.push(r))}this.removeAllFromRegister(o)},t.prototype.hideDropdown=function(e,t){var o,i=this;e.escHandler&&((o=e.element.get(0))&&o.removeEventListener("keydown",e.escHandler),e.escHandler=null),e.returnFocusToElement&&e.returnFocusToElement.focus(),t?this.hideOverlay(e):e.element.animate({opacity:0},250,(function(){return i.hideOverlay(e)})),this.unregisterScrollHandler(),this.removeSingleFromRegister(e)},t.prototype.removeSingleFromRegister=function(e){e.element.trigger(o.constants.OverlayCloseEventName)},t.prototype.removeAllFromRegister=function(e){_.forEach(e,(function(e){return e.element.trigger(o.constants.OverlayCloseEventName)}))},t.prototype.hideOverlay=function(e){e.element.removeClass(s).removeAttr("style")},n=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).perfMarkers||(e.perfMarkers={})).getJsParseTimes=function(e){var t,o=[];for(t in e){var i=e[t];i.start&&i.end&&o.push({start:new Date(i.start).toISOString(),end:new Date(i.end).toISOString(),startEval:i.startEval?new Date(i.startEval).toISOString():void 0,endEval:i.endEval?new Date(i.endEval).toISOString():void 0,fileName:t})}return o}})(powerbi=powerbi||{}),(function(e){e=e.common||(e.common={});e.createPopupWindowService=function(e){return new o(e)},i.prototype.open=function(e,t,o){var i=(this.windowService.outerWidth-(t=void 0===t?600:t))/2,n=(i+=this.windowService.screenX,(this.windowService.outerHeight-(o=void 0===o?480:o))/2);return n+=this.windowService.screenY,this.windowService.open("/popupserverredirect?url="+encodeURIComponent(e),"_blank","top="+n+", left="+i+", screenX="+i+", screenY="+n+", width="+t+", height="+o+", resizable=yes")};var t,o=i;function i(e){this.windowService=e}e.setPopupWindowService=function(e){t=e},e.getPopupWindowService=function(){return t}})(powerbi=powerbi||{}),(function(o){(o.common||(o.common={})).createPromiseFactory=function(e){return new t(e)},e.prototype.defer=function(e){return e?new o.PbiDeferred:this.q.defer()},e.prototype.reject=function(e,t){return(t?o.PbiPromise:this.q).reject(e)},e.prototype.resolve=function(e){var t=this.defer();return t.resolve(e),t.promise},e.prototype.all=function(e,t){return(t?o.PbiPromise:this.q).all(e)},e.prototype.allSettled=function(e){var o=this.defer(),i=e.length;if(0<i)for(var n=0,r=[],t=0;t<i;t++)!(function(t){e[t].then((function(e){r[t]={value:e,type:0}})).catch((function(e){r[t]={value:e,type:1}})).finally((function(){++n===i&&o.resolve(r)}))})(t);else o.resolve([]);return o.promise},e.prototype.when=function(e){return this.q.when(e)};var t=e;function e(e){this.q=e}})(powerbi=powerbi||{}),(function(e){var a=e.common||(e.common={}),n=(a.createScopedMixinProvider=function(e,t,o,i){return new n(e,t,o,i)},t.prototype.get=function(e){var t=this.instances[e];if(void 0===t){for(var o=[],i=0,n=this.factories[e]||[];i<n.length;i++){var r=n[i];o.push(this.instantiateMixin(r))}t=new a.MixinProvider(o),this.instances[e]=t}return t},t.prototype.instantiateMixin=function(e){var t=e.ng,o=!_.isEmpty(t),i=e.scoped,n=!_.isEmpty(i),r={};if(o)for(var a=this.$injector,s=0,l=t;s<l.length;s++){var c=void 0,c="$scope"===(d=l[s])?this.$scope:a.get(d);r[d]=c}if(n)for(var d,u=this.scopedProvider,p=this.$scope,m=0,h=i;m<h.length;m++)r[d=h[m]]=u.get(d,p);return e.fn(r)},t);function t(e,t,o,i){this.$injector=e,this.$scope=t,this.scopedProvider=o,this.factories=i,this.instances=[]}})(powerbi=powerbi||{}),(function(e){(e.common||(e.common={})).createScopedProvider=function(e){return new t(e)},i.prototype.register=function(e,t,o){var i;return o?((i=this.serviceFactoriesByInstance[o]||{})[e]=t,this.serviceFactoriesByInstance[o]=i):this.defaultServiceFactories[e]=t,this},i.prototype.attachTo=function(e,t){t&&(e[i.InstanceNameProperty]=t);t=new o(this.injector,this.getFactories(t),e);return e[i.getInstanceName(e)]=t},i.prototype.find=function(e){var t=e;do{var o=t[i.getInstanceName(t)];if(o)return o}while(t=t.$parent)},i.prototype.getFactories=function(e){var t=this.serviceFactoriesByInstance[e];if(!t)return this.defaultServiceFactories;var o,i=__assign({},this.defaultServiceFactories);for(o in t)i[o]=t[o];return i},i.getInstanceName=function(e){e=e[i.InstanceNameProperty];return e||i.DefaultInstanceName},i.DefaultInstanceName="scopedInstances",i.InstanceNameProperty="instanceProperty";var t=i;function i(e){this.injector=e,this.defaultServiceFactories={},this.serviceFactoriesByInstance={}}n.prototype.get=function(e,t){if(t=t||this.scope,"$scope"===e)return t;var o=this.instances[e];if(void 0===o){var i=this.factories[e],n=[],r=i.services;if(r)for(var a=this.injector,s=0,l=r.length;s<l;s++)n.push(a.get(r[s],e));var c=i.scopedServices;if(c)for(s=0,l=c.length;s<l;s++){var d=c[s],d=this.get(d,t);n.push(d)}i.scopedProviderInstance&&n.push(this),this.instances[e]=o=i.fn.apply(i,n)}return o},n.prototype.register=function(e,t){this.instances[t]=e};var o=n;function n(e,t,o){this.injector=e,this.factories=t,this.scope=o,this.instances={}}})(powerbi=powerbi||{}),(function(e){var t=e.common||(e.common={}),o=(t.SCOPED_ROOT_INJECTOR_NAME="$$modernScopedRootInjector",t.createScopedRootRegistrar=function(e,t){return new n(e,t)},t.ScopedRootRegistrarMixinFactory={ng:["$scope","scopedRootRegistrar"],scoped:[],fn:function(e){return new o(e)}},i.prototype.update=function(){},i.prototype.destroy=function(){this.services.scopedRootRegistrar.removeScope(this.services.$scope)},i);function i(e){(this.services=e).scopedRootRegistrar.addScope(e.$scope)}r.prototype.addScope=function(e){e=this.scopedProvider.find(e).scope[t.SCOPED_ROOT_INJECTOR_NAME];this.modernScopedRootRegistrar.addScopedRoot(e)},r.prototype.removeScope=function(e){e=this.scopedProvider.find(e).scope[t.SCOPED_ROOT_INJECTOR_NAME];this.modernScopedRootRegistrar.removeScopedRoot(e)},r.prototype.getTheScopedService=function(e){var t=this.modernScopedRootRegistrar.getTheScopedService("$scope");if(t){t=this.scopedProvider.find(t);if(t)return t.get(e)}},r.prototype.sendChannelEvent=function(e,t){return this.modernScopedRootRegistrar.sendChannelEvent(e,t)};var n=r;function r(e,t){this.modernScopedRootRegistrar=e,this.scopedProvider=t}})(powerbi=powerbi||{}),(function(e){(e.common||(e.common={})).createScopeEventSubscriptionManager=function(e){return new t(e)},o.prototype.subscribe=function(e,t){e=this.scope.$on(e,t);return e&&this.unsubscribeList.push(e),this},o.prototype.unsubscribeAll=function(){for(var e=this.unsubscribeList.length-1;0<=e;--e)this.unsubscribeList[e]();this.unsubscribeList=[]};var t=o;function o(e){this.scope=e,this.unsubscribeList=[]}})(powerbi=powerbi||{}),(function(e){var v;function t(m){var h=["$scope","$rootScope","$timeout","$compile","scopedProvider","applicationOptions"],g=h.length,f=m.createOptions&&m.createOptions();return f&&f.additionalServices&&h.push.apply(h,f.additionalServices),h.push((function(e,t,o,i,n,r){var a={rootScope:t,timeout:o,compile:i};if(f){t=f.additionalServices;if(t){t.length;for(var s=g,l=h.length-1;s<l;s++)a[h[s]]=arguments[s]}f.scopedServiceRoot&&n.attachTo(e,f.scopedProviderInstanceName);var c=f.scopedDependencies;if(c){var d=n.find(e);if(d)for(s=0,l=c.length;s<l;s++){var u=c[s];a[u]=d.get(u,e)}}v.HostModalDialogServices.validateHostModalDialogServices(e,t,c)}var p=new m(e,a);return r&&r.logToConsole,p.onDestroy&&e.$on("$destroy",(function(){return p.onDestroy()})),p})),h}(v=e.common||(e.common={})).createController=t,v.createScopedRootController=t})(powerbi=powerbi||{}),(function(e){function t(){}e=e.common||(e.common={}),t.prototype.getData=function(e){try{if(sessionStorage)return JSON.parse(sessionStorage[e])}catch(e){}return null},t.prototype.setData=function(e,t){try{sessionStorage&&(sessionStorage[e]=JSON.stringify(t))}catch(e){}},e.sessionStorageService=new t})(powerbi=powerbi||{}),(function(e){var i,e=e.common||(e.common={});function r(e,t){return{value:e,unit:void 0!==t?t:i.pixel}}(o=i=e.MeasurementUnit||(e.MeasurementUnit={}))[o.percentage=0]="percentage",o[o.inch=1]="inch",o[o.centimeter=2]="centimeter",o[o.millimeter=3]="millimeter",o[o.em=4]="em",o[o.ex=5]="ex",o[o.point=6]="point",o[o.pica=7]="pica",o[o.pixel=8]="pixel",e.makeLayoutUnit=r,e.BoxShadowUnit=function(){};var t,o,a=function(){},n=((o=t=e.DisplayValue||(e.DisplayValue={}))[o.inline=0]="inline",o[o.block=1]="block",o[o.flex=2]="flex",o[o.inlineBlock=3]="inlineBlock",o[o.inlineFlex=4]="inlineFlex",o[o.inlineTable=5]="inlineTable",o[o.listItem=6]="listItem",o[o.runIn=7]="runIn",o[o.table=8]="table",o[o.tableCaption=9]="tableCaption",o[o.tableColumnGroup=10]="tableColumnGroup",o[o.tableHeaderGroup=11]="tableHeaderGroup",o[o.tableFooterGroup=12]="tableFooterGroup",o[o.tableRowGroup=13]="tableRowGroup",o[o.tableCell=14]="tableCell",o[o.tableColumn=15]="tableColumn",o[o.tableRow=16]="tableRow",o[o.none=17]="none",o[o.initial=18]="initial",o[o.inherit=19]="inherit",(o=e.ExtendedTransition||(e.ExtendedTransition={}))[o.slideLeftBigIn=0]="slideLeftBigIn",o[o.slideLeftBigOut=1]="slideLeftBigOut",o[o.slideRightBigIn=2]="slideRightBigIn",o[o.slideRightBigOut=3]="slideRightBigOut",s.prototype.ensureInitialFrame=function(){0<this.frames.length||!this.style||this.frames.push({style:this.style,duration:0})},s.prototype.addFrame=function(e){var t=this.frames,o=(0<t.length?t[t.length-1]:this).style;l.areStylesEqual(o,e.style)||(t.push(e),null==this.style&&(this.style=e.style))},s.prototype.addFrameFromDefinition=function(e,t){e.style&&this.addFrame({style:e.style,duration:t});for(var o=e.frames,i=o.frames.length,n=1;n<i;n++)this.addFrame(o[n])},s.prototype.canAnimate=function(){return 0<this.frames.length},s.prototype.getFrames=function(){return this.frames},s.prototype.getClassName=function(){return this.className},s.prototype.keepFinalStyle=function(){0!==this.frames.length&&(this.style=this.frames[this.frames.length-1].style,this.frames=[])},s);function s(e){this.frames=[],this.style=null,this.className=e}c.prototype.createEmpty=function(){return new a},c.prototype.createPoint=function(e,t){var o=new a;return o.top=r(e||0),o.left=r(t||0),o.position="absolute",o},c.prototype.createBox=function(e,t,o,i){var n=new a;return n.top=r(e||0),n.left=r(t||0),n.width=i||0,n.height=o||0,n.position="absolute",n.overflow="hidden",n.whiteSpace="normal",n.tableLayout="fixed",n},c.prototype.createViewport=function(e){var t=new a;return t.width=e.width,t.height=e.height,t},c.prototype.createTruncateBox=function(e,t,o,i,n,r){e=this.createBox(e,t,o,i);return e.whiteSpace="nowrap",e.overflow="hidden",e.textOverflow="ellipsis",n&&(e.fontSize=n),r&&(e.color=r),e},c.prototype.createTranslateTransform=function(e,t,o,i){var n=new a;return n.transformTranslate={x:e,y:t,z:o,unit:i||"%"},n},c.prototype.createRotateTransform=function(e,t,o){var i=new a;return i.transformRotate={x:t,y:o,z:e},i},c.prototype.createStyleFrames=function(e){return new n(e)},c.prototype.appendClassRule=function(e,t){var o=this.classMap[e],i="."+e;if(o){if(c.areStylesEqual(o,t))return;for(var n=this.styleSheet.cssRules,r=n.length,a=0;a<r;a++){var s=n[a];if(s.selectorText===i)return this.classMap[e]=t,void(s.style.cssText=this.stringify(t))}}this.classMap[e]=t;o=i+"{"+this.stringify(t)+"}";this.styleSheet.insertRule(o,0)},c.prototype.startAnimation=function(e,t){var o=t.getFrames(),i=o.length;if(0!==i){t.keepFinalStyle();var n=e;n=e.animate({});for(var r=0;r<i;r++)var a=o[r],s=c.convertToJQueryAnimateStyle(a.style),n=n.animate(s,{duration:1e3*a.duration,easing:"ease-out"})}},c.areStylesEqual=function(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom&&e.height===t.height&&e.width===t.width&&e.marginTop===t.marginTop&&e.marginLeft===t.marginLeft&&e.fontSize===t.fontSize&&e.position===t.position&&e.overflow===t.overflow&&e.display===t.display&&e.verticalAlign===t.verticalAlign&&e.backgroundColor===t.backgroundColor&&e.backgroundImage===t.backgroundImage&&e.opacity===t.opacity&&e.color===t.color&&e.whiteSpace===t.whiteSpace&&e.tableLayout===t.tableLayout&&e.textAlign===t.textAlign&&e.textOverflow===t.textOverflow&&c.areTranslateRotateEqual(e,t)&&c.areTranslateTransformEqual(e,t)&&c.areBoxShadowStyleEqual(e,t)},c.areTranslateRotateEqual=function(e,t){return e===t||(e=e.transformRotate,t=t.transformRotate,e&&t&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.unit===t.unit)},c.areTranslateTransformEqual=function(e,t){return e===t||(e=e.transformTranslate,t=t.transformTranslate,e&&t&&e.x===t.x&&e.y===t.y&&e.unit===t.unit)},c.areBoxShadowStyleEqual=function(e,t){return e===t||(e=e.boxShadow,t=t.boxShadow,e&&t&&e.hShadow===t.hShadow&&e.vShadow===t.vShadow&&e.blur===t.blur&&e.spread===t.spread&&e.color===t.color&&e.unit===t.unit&&e.inset===t.inset)},c.convertToJQueryAnimateStyle=function(e){var t,o={};return void 0!==e.top&&(o.top=c.convertLayoutUnit(e.top)),void 0!==e.left&&(o.left=c.convertLayoutUnit(e.left)),void 0!==e.right&&(o.right=c.convertLayoutUnit(e.right)),void 0!==e.bottom&&(o.bottom=c.convertLayoutUnit(e.bottom)),void 0!==e.height&&(o.height=c.convertUnit(e.height)),void 0!==e.width&&(o.width=c.convertUnit(e.width)),void 0!==e.marginTop&&(o.marginTop=c.convertUnit(e.marginTop)),void 0!==e.marginLeft&&(o.marginLeft=c.convertUnit(e.marginLeft)),void 0!==e.fontSize&&(o.fontSize=c.convertUnit(e.fontSize)),void 0!==e.backgroundColor&&(o.backgroundColor=e.backgroundColor),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.color&&(o.color=e.color),void 0!==e.display&&(o.display=c.stringifyDisplayValue(e.display)),void 0!==e.transformRotate&&(t=e.transformRotate,o.rotateX=t.x||0,o.rotateY=t.y||0,o.rotateZ=t.z||0),void 0!==e.transformTranslate&&(t=e.transformTranslate,o.translateX=(t.x||0)+(t.x?t.unit:""),o.translateY=(t.y||0)+(t.y?t.unit:""),o.translateZ=(t.z||0)+(t.z?t.unit:"")),o},c.prototype.stringify=function(e){return c.stringifyLayoutUnit(e.top,"top")+c.stringifyLayoutUnit(e.left,"left")+c.stringifyLayoutUnit(e.right,"right")+c.stringifyLayoutUnit(e.bottom,"bottom")+c.stringifyUnit(e.height,"height")+c.stringifyUnit(e.width,"width")+c.stringifyUnit(e.marginTop,"margin-top")+c.stringifyUnit(e.marginLeft,"margin-left")+c.stringifyUnit(e.fontSize,"font-size")+c.stringifyProp(e.position,"position")+c.stringifyProp(e.overflow,"overflow")+c.stringifyProp(c.stringifyDisplayValue(e.display),"display")+c.stringifyProp(e.verticalAlign,"vertical-align")+c.stringifyProp(e.backgroundColor,"background-color")+c.stringifyProp(e.backgroundImage,"background-image")+c.stringifyProp(e.opacity,"opacity")+c.stringifyProp(e.color,"color")+c.stringifyProp(e.whiteSpace,"white-space")+c.stringifyProp(e.tableLayout,"table-layout")+c.stringifyProp(e.textAlign,"text-align")+c.stringifyProp(e.textOverflow,"text-overflow")+c.stringifyProp(c.stringifyBoxShadow(e.boxShadow),"box-shadow")+c.stringifyProp(c.stringifyTranslate(e.transformTranslate),"transform",!0)+c.stringifyProp(c.stringifyRotate(e.transformRotate),"transform",!0)},c.stringifyTranslate=function(e){var t;return null==e?null:(t=e.unit,"translateX("+(e.x||0)+(e.x?t:"")+") translateY("+(e.y||0)+(e.y?t:"")+")")},c.stringifyRotate=function(e){return null==e?null:"rotateX("+(e.x||0)+"deg) rotateY("+(e.y||0)+"deg) rotateZ("+(e.z||0)+"deg)"},c.stringifyBoxShadow=function(e){var t;return null==e?null:(t=e.unit?e.unit+" ":"px ",e.hShadow+t+(e.vShadow+t)+(e.blur?e.blur+t:"")+(e.spread?e.spread+t:"")+(e.color?e.color+" ":"")+(e.inset?"inset":""))},c.stringifyDisplayValue=function(e){switch(e){case t.inline:return"inline";case t.block:return"block";case t.flex:return"flex";case t.inlineBlock:return"inline-block";case t.inlineFlex:return"inline-flex";case t.inlineTable:return"inline-table";case t.listItem:return"list-item";case t.runIn:return"run-in";case t.table:return"table";case t.tableCaption:return"table-caption";case t.tableColumnGroup:return"table-column-group";case t.tableHeaderGroup:return"table-header-group";case t.tableFooterGroup:return"table-footer-group";case t.tableRowGroup:return"table-row-group";case t.tableCell:return"table-cell";case t.tableColumn:return"table-column";case t.tableRow:return"table-row";case t.none:return"none";case t.initial:return"initial";default:return"inherit"}},c.stringifyProp=function(e,t,o){return null==e?"":(t=c.isWebkit&&o?"-webkit-"+t:t)+":"+e+";"},c.stringifyUnit=function(e,t){return null==e?"":t+":"+c.convertUnit(e)+";"},c.stringifyLayoutUnit=function(e,t){return null==e?"":t+":"+c.convertLayoutUnit(e)+";"},c.convertUnit=function(e){return e+"px"},c.convertLayoutUnit=function(e){var t=e.value.toString(),o="";switch(e.unit){case i.percentage:o="%";break;case i.inch:o="in";break;case i.centimeter:o="cm";break;case i.millimeter:o="mm";break;case i.em:o="em";break;case i.ex:o="ex";break;case i.point:o="pt";break;case i.pica:o="pc";break;default:o="px"}return t+o},c.prototype.getDeviceViewport=function(){return{width:window.outerWidth,height:0}};var l=c;function c(){this.classMap={};var e=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(e),this.styleSheet=document.styleSheets[document.styleSheets.length-1],c.isWebkit="WebkitAppearance"in document.documentElement.style}e.styleService=new l})(powerbi=powerbi||{}),(function(e){e.createTelemetryServiceFromNamespace=function(e,t,o){return window.powerbi.createTelemetryService(e,t,o)},e.createUserActivityContextServiceFromNamespace=function(){return window.powerbi.createUserActivityContextService()},e.createTelemetryHostServiceFromNamespace=function(){return window.powerbi.createTelemetryHostService()},e.createTelemetryOptionsFromNamespace=function(){return window.powerbi.createTelemetryOptions()}})(powerbi=powerbi||{}),(function(e){var t,o,h,g;function f(e,t){return null==e?!t:"string"==typeof e&&o.isFullHexString(e)}t=e.common||(e.common={}),o=jsCommon.Color,h=e.visuals.DefaultColorManager,g=jsCommon.JsonExtensions,t.validateCustomThemeColor=f,t.parseCustomVisualTheme=function(e,t,o){var i=["background","foreground","accent","tableAccent","foreground","foregroundLight","foregroundDark","foregroundNeutralLight","foregroundNeutralDark","foregroundNeutralSecondary","foregroundNeutralSecondaryAlt","foregroundNeutralSecondaryAlt2","foregroundNeutralTertiary","foregroundNeutralTertiaryAlt","foregroundSelected","foregroundButton","background","backgroundLight","backgroundNeutral","backgroundDark","hyperlink","visitedHyperlink","shapeStroke","disabledText","mapPushpin","good","neutral","bad","maximum","center","minimum","null","firstLevelElements","secondLevelElements","thirdLevelElements","fourthLevelElements","secondaryBackground"],n=["title","label","callout","header","largeTitle","dataTitle","boldLabel","largeLabel","largeLightLabel","lightLabel","semiboldLabel","smallLabel","smallLightLabel","smallDataLabel"],r=["$schema","name","dataColors","textClasses","visualStyles","isHighContrast","icons"].concat(i,n,t=void 0===t?[]:t);try{var a,s=g.tryParseJSON(e);if(_.isObject(s)&&!_.isArray(s)&&!o){var l=s.name;if(!l||!_.isString(l))throw new Error("Theme name missing");var c=s.dataColors;if(null!=c&&(!_.isArray(c)||_.some(c,(function(e){return!f(e,!0)}))))throw new Error("Invalid theme data colors");for(var d=0,u=i;d<u.length;d++)if(!f(s[m=u[d]],!1))throw new Error("Invalid theme data color");for(m in s)if(-1===r.indexOf(m))throw new Error("Invalid theme field: "+m);var p=s.textClasses;if(!_.isEmpty(p))for(var m in p)if(-1===n.indexOf(m))throw new Error("Invalid theme text class: "+m)}if(s)return _.isEmpty(s.dataColors)||(a=h.getDefaultColors(),s.dataColors.length<a.length&&(s.dataColors=s.dataColors.concat(a.slice(s.dataColors.length).map((function(e){return e.value}))))),s}catch(e){}}})(powerbi=powerbi||{}),(function(e){var a=e.common||(e.common={}),t=(a.TimeoutServiceSmallDelayThreshold=100,a.TimeoutServiceSmallDelayQuantum=5,a.TimeoutServiceLargeDelayQuantum=50,a.createTimeoutService=function(e){return new t(e)},o.prototype.setTimeout=function(e,t){void 0===e&&(e=0);var t=this.promiseFactory.defer(t=void 0===t?!1:t),o=a.TimeoutServiceLargeDelayQuantum,i=this.queueDictionaryForBigDelays,n=(e<=a.TimeoutServiceSmallDelayThreshold&&(o=a.TimeoutServiceSmallDelayQuantum,i=this.queueDictionaryForSmallDelays),-1===e?-1:e?Math.ceil((Date.now()+e)/o):0),r=i[n];return r||(r=i[n]=[],o=function(){delete i[n],_.forEach(r,(function(e){return e.resolve(null)}))},-1===e?Zone.root.scheduleMicroTask("TimeoutService.scheduleMicroTask",o):window.setTimeout(o,e)),r.push(t),t},o);function o(e){this.promiseFactory=e,this.queueDictionaryForBigDelays={},this.queueDictionaryForSmallDelays={}}a.TimeoutService=t})(powerbi=powerbi||{}),(function(e){var l,i,u=e.common||(e.common={}),t=jsCommon.CssConstants.createClassAndSelector,p=e.common.directives.TooltipAnchorElementType,n=e.visuals.TooltipCommon,m=u.models.TooltipTheme,h=jsCommon.DOMConstants,r=t("themeableElement"),a=(u.createTooltipService=function(e,t,o){return new a(e,t,o)},(t=l=u.ArrowPosition||(u.ArrowPosition={}))[t.arrowTopLeft=0]="arrowTopLeft",t[t.arrowTopMiddle=1]="arrowTopMiddle",t[t.arrowTopRight=2]="arrowTopRight",t[t.arrowBottomLeft=3]="arrowBottomLeft",t[t.arrowBottomRight=4]="arrowBottomRight",t[t.arrowBottomMiddle=5]="arrowBottomMiddle",t[t.arrowSideMiddle=6]="arrowSideMiddle",(t=i=u.ArrowVerticalPosition||(u.ArrowVerticalPosition={}))[t.top=0]="top",t[t.bottom=1]="bottom",g.prototype.showTooltip=function(e,t,o){var i=this,n=this.createTooltipOptions(e,t,o);if(n&&n.anchorElement&&(n.delay=n.delay||g.defaultDisplayDelay,n.arrowPosition=void 0!==n.arrowPosition?n.arrowPosition:l.arrowBottomRight,this.hideDelay=n.hideDelay||0,!this.isTooltipVisible())){if(n.showTooltipEvent){e=n.showTooltipEvent.originalEvent||n.showTooltipEvent;if(this.showTooltipTimeoutId&&(this.previousMouseX===e.pageX||this.previousMouseY===e.pageY))return this.previousMouseX=e.pageX,void(this.previousMouseY=e.pageY);this.previousMouseX=e.pageX,this.previousMouseY=e.pageY}this.showTooltipTimeoutId&&window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=window.setTimeout((function(){var e;document.body.contains(o.get(0))&&(i.tooltipElement||(i.tooltipElement=$(g.htmlTemplate).addClass(r.class),i.tooltipTitleElement=i.tooltipElement.find(".title"),i.tooltipDescriptionElement=i.tooltipElement.find(".description"),i.tooltipElement.hover((function(){return i.isHovering=!0}),(function(){i.isHovering=!1,i.hideTooltip()}))),i.customClass=n.customClass,i.tooltipTitleElement.text(n.title),i.tooltipDescriptionElement.text(n.description),n.hyperlinkElement&&i.tooltipDescriptionElement.append(n.hyperlinkElement),null!=(e=i.getElementOffset(n.anchorElement,n.arrowPosition)).top&&e.top<g.minimalTopOffest&&(n.arrowPosition=i.flipTooltipBelow(n.arrowPosition)),i.tooltipElement.addClass(l[n.arrowPosition]).addClass(n.customClass).appendTo("body"),i.updateTooltipPosition(n.anchorElement,n.arrowPosition),i.tooltipElement.addClass(g.tooltipActiveClass),i.showTooltipTimeoutId=null)}),n.delay)}},g.prototype.hideTooltip=function(e){function t(){i.tooltipElement.removeClass(g.tooltipActiveClass).removeClass(i.arrowPositionClassSet).removeClass(i.customClass),i.tooltipTitleElement.empty(),i.tooltipDescriptionElement.empty(),i.tooltipElement.detach()}var o,i=this;e&&(e.preventDefault(),e.stopPropagation()),this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=null);this.tooltipElement&&e&&e.type===h.focusOutEventName?t():this.tooltipElement&&!this.isHovering&&(o=setTimeout((function(){i.isHovering||(t(),clearTimeout(o))}),this.hideDelay))},g.prototype.createTooltipOptions=function(e,t,o){if(!e.tooltipDisable&&(e.tooltipShowOnFocus||t.type!==h.focusInEventName)&&(!1!==e.tooltipShowOnHover||t.type!==h.mouseMoveEventName&&t.type!==h.pointerMoveEventName)){var i=e.tooltipLocalizeTitle,i=(_.isEmpty(i)||(n=this.localizationService.get(i)),e.tooltipLocalizeDescription),i=(_.isEmpty(i)||(s=this.localizationService.get(i)),n||e.tooltipTitle),n=s||e.tooltipDescription;if(null!=i||null!=n){var r,a=e.tooltipAnchorElementSelector,s=e.tooltipAnchorElementType;if(a)switch(s){case p.Sibling:r=o.siblings(a);break;case p.Ancestor:r=o.closest(a);break;case p.Descendant:r=o.find(a);break;default:r=$(a)}r&&0!==r.length||(r=o);var l,s=e.tooltipArrowPosition,c=(null==s&&null!=e.tooltipArrowVerticalPosition&&(c=r.offset(),s=u.TooltipService.getBestFitArrowPosition(c,e.tooltipArrowVerticalPosition,g.flipTooltipVerticallyMarginPx)),e.tooltipDelay),d=(null==c&&e.tooltipShowOnFocus&&(c=u.TooltipService.defaultFocusDisplayDelay),e.tooltipTheme||m.Light),d=u.models.TooltipTheme[d].toLowerCase();return e.isTooltipForModalDialog&&(d+=" modal-tooltip"),e.tooltipHyperlinkText&&e.tooltipHyperlinkUrl&&(l=$("<span> </span><a target='_blank' href='".concat(e.tooltipHyperlinkUrl,"'>").concat(e.tooltipHyperlinkText,"</a>"))),{anchorElement:r,showTooltipEvent:t,title:i,description:n,delay:c,hideDelay:e.tooltipHideDelay||0,arrowPosition:s,customClass:d,hyperlinkElement:l}}}},g.prototype.isTooltipVisible=function(){return this.tooltipElement&&this.tooltipElement.hasClass(g.tooltipActiveClass)&&this.tooltipElement.is(":visible")},g.prototype.updateTooltipPosition=function(e,t){e=this.getElementOffset(e,t);this.tooltipElement.css({left:this.rtl&&this.rtl.isRtlLayout?null:e.left,right:this.rtl&&this.rtl.isRtlLayout?e.left:null,top:e.top})},g.prototype.getArrowPositionClassSet=function(){var e,t="";for(e in l)isNaN(e)&&(t=t+" "+e);return t},g.prototype.getElementOffset=function(e,t){var o=this.tooltipElement.outerWidth(),i=this.tooltipElement.outerHeight(),n=e.width(),r=e.height(),a=e.offset(),s=g.arrowOffset;switch(this.rtl&&this.rtl.isRtlLayout&&(a.left=this.windowMetrics.windowWidth-(a.left+n)),t){case l.arrowTopLeft:return{left:a.left+n/2-s.x,top:a.top+r+s.y};case l.arrowTopMiddle:return{left:a.left+(n-o)/2,top:a.top+r+s.y};case l.arrowTopRight:return{left:a.left+n/2-o+s.x,top:a.top+r+s.y};case l.arrowBottomLeft:return{left:a.left+n/2-s.x,top:a.top-i-s.y};case l.arrowBottomRight:return{left:a.left+n/2-o+s.x,top:a.top-i-s.y};case l.arrowBottomMiddle:return{left:a.left+(n-o)/2,top:a.top-i-s.y};case l.arrowSideMiddle:return{left:a.left+n,top:a.top}}},g.prototype.flipTooltipBelow=function(e){switch(e){case l.arrowBottomLeft:return l.arrowTopLeft;case l.arrowBottomRight:return l.arrowTopRight}return e},g.getBestFitArrowPosition=function(e,t,o){e="height"in e?e:"x"in e?{top:e.y,left:e.x,height:0,width:0}:__assign(__assign({},e),{height:0,width:0}),null!=o&&e.top<=o&&(t=i.top),o=n.getClickedScreenArea(e,{width:window.innerWidth,height:window.innerHeight});return 0===o||3===o?t===i.top?l.arrowTopLeft:l.arrowBottomLeft:t===i.top?l.arrowTopRight:l.arrowBottomRight},g.defaultDisplayDelay=1e3,g.defaultFocusDisplayDelay=500,g.flipTooltipVerticallyMarginPx=70,g.tooltipActiveClass="active",g.htmlTemplate="<div class='tooltip'><div class='title'></div><div class='description'></div></div>",g.arrowOffset={x:20,y:12},g.minimalTopOffest=40,g);function g(e,t,o){this.rtl=e,this.windowMetrics=t,this.localizationService=o,this.hideDelay=0,this.isHovering=!1,this.arrowPositionClassSet=this.getArrowPositionClassSet()}u.TooltipService=a})(powerbi=powerbi||{}),(function(e){var i=e.common||(e.common={}),o=(i.createUpload=function(e,t){return new o(e,t)},t.prototype.post=function(e,t,o){e=i.HttpRequestConfig.create("POST",e,o,null);return e.file=t,this.worker.request(e,this.upload)},t.prototype.put=function(e,t,o){e=i.HttpRequestConfig.create("PUT",e,o,null);return e.file=t,this.worker.request(e,this.upload)},t);function t(o,e){this.upload=function(e){var t=o.get("$upload");return t.upload(e)},this.worker=e}})(powerbi=powerbi||{}),(function(l){var i,a,n,c;function e(){}i=l.common||(l.common={}),a=i.helpers||(i.helpers={}),n=jsCommon.BrowserUtils,c=l.common.constants,a.printMedia="print",a.setPrintMedia=function(e){a.printMedia=e},e.getPrintTargetViewPort=function(e){var t={width:i.constants.defaultPortraitPrintWidth,height:i.constants.defaultPortraitPrintHeight},o=e.width();return e.height()<o&&(t.width=i.constants.defaultLandscapePrintWidth,t.height=i.constants.defaultLandscapePrintHeight),n.isChrome()&&(o=e.parent(),t.width=o.width(),t.height=o.height()),t},e.calculateScaleFactor=function(e,t,o){var i=t.width/e.width,t=t.height/e.height;return o?Math.max(i,t):Math.min(i,t)},e.prototype.getStyleString=function(e){for(var t=Object.keys(e),o="",i=0,n=t.length;i<n;i++)var r=t[i],o=o+r+":"+e[r]+";";return o},e.prototype.onInit=function(o,i,n,r,a,e,t){var s=this;e||(this.globalSubscriptionManager=t.createChannelSubscriptionManager().subscribe(l.common.events.printModeChanged,(function(e,t){t===c.enterPrintModeEvent?s.insertPrintStylingInDOM(o,i,n,r,a):t===c.exitPrintModeEvent&&s.removePrintStylingFromDOM(o)})))},e.prototype.onDestroy=function(e,t){t||(this.domLayoutChangedDeregister&&this.domLayoutChangedDeregister(),this.onExitPrintModeDeregister&&this.onExitPrintModeDeregister(),this.globalSubscriptionManager.unsubscribeAll()),this.removePrintStylingFromDOM(e,!0)},e.prototype.insertPrintStylingInDOM=function(e,t,o,i,n){var r;null!=o&&(r=window.location.pathname.toLowerCase(),!1!==n.featureSwitches.printingEnabled||("/export/report"===r||"/reportembedexporthost"===r)?(this.printStyleElement||(this.printStyleElement=$("<style></style>").attr("type","text/css").attr("media",a.printMedia),$("body").append(this.printStyleElement)),n=t(e),r=this.getStyleString(n),this.printStyleElement.get(0).sheet.insertRule(".".concat(o," { ").concat(r," }"))):(this.printDisabledElement||(t=i.get("PrintingIsDisabledForThisTenantMessage"),n=$("<div>").addClass("errorTitle").text(t),o=$("<div>").attr("id","printDisabledOverlay").append(n),this.printDisabledElement=o,$("body").append(this.printDisabledElement)),e.hide()))},e.prototype.removePrintStylingFromDOM=function(e,t){if(void 0===t&&(t=!1),this.printDisabledElement&&(this.printDisabledElement.remove(),this.printDisabledElement=void 0,e.show()),this.printStyleElement)if(t)this.printStyleElement.remove(),this.printStyleElement=void 0;else for(var o=this.printStyleElement.get(0).sheet,i=o.cssRules.length;i--;)o.removeRule(i)},a.ContainerPrinterHelper=e})(powerbi=powerbi||{}),(function(e){var t,i;t=(t=e.common||(e.common={})).directives||(t.directives={}),i=e.common.helpers.ContainerPrinterHelper,t.ContainerPrinter=function(e,t,o){var a=this;this.featureSwitchService=e,this.localizationService=t,this.globalEventBridge=o,this.restrict="A",this.link=function(e,t,o){var i=e.$eval(o.calculatePrintStyles),n=e.$eval(o.disablePrint),r=(a.helper.onInit(t,i,o.printContainerSelector,a.localizationService,a.featureSwitchService,n,a.globalEventBridge),e.$on("$destroy",(function(){a.helper.onDestroy(t,!!n),r()})))},this.helper=new i}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).CustomModalDialog=function(e){this.restrict="E",this.templateUrl="views/customModalDialog.html",this.replace=!0,this.scope={message:"="},this.scope=e}})(powerbi=powerbi||{}),(function(e){var t,i,n,r,a,s,l,c,d,u;function o(e){var r=this;this.$parse=e,this.restrict="A",this.replace=!1,this.scope=!1,this.compileBase=function(e,i,t,o){var n=r.$parse(o[e]);return function(t,e){e.on(i,(function(e){t.$eval((function(){return n(t,{$event:e})})),e.isDefaultPrevented()||t.$digest()}));var o=t.$on("$destroy",(function(){e.off(i),o()}))}}}function p(){var o=null!==t&&t.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastClick","click",e,t)},o}function m(){var o=null!==n&&n.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastMousedown","mousedown",e,t)},o}function h(){var o=null!==r&&r.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastMouseup","mouseup",e,t)},o}function g(){var o=null!==a&&a.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastKeydown","keydown",e,t)},o}function f(){var o=null!==s&&s.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastKeyup","keyup",e,t)},o}function v(){var o=null!==l&&l.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastMouseenter","mouseenter",e,t)},o}function y(){var o=null!==c&&c.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastTouchmove","touchmove",e,t)},o}function b(){var o=null!==d&&d.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastTouchend","touchend",e,t)},o}function S(){var o=null!==u&&u.apply(this,arguments)||this;return o.compile=function(e,t){return o.compileBase("fastFocus",i,e,t)},o}e=(e=e.common||(e.common={})).directives||(e.directives={}),i=jsCommon.FocusManagerFocusOnEventName,e.FastEvent=o,__extends(p,t=o),e.FastClick=p,__extends(m,n=o),e.FastMousedown=m,__extends(h,r=o),e.FastMouseup=h,__extends(g,a=o),e.FastKeydown=g,__extends(f,s=o),e.FastKeyup=f,__extends(v,l=o),e.FastMouseenter=v,__extends(y,c=o),e.FastTouchmove=y,__extends(b,d=o),e.FastTouchend=b,__extends(S,u=o),e.FastFocus=S})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).FeatureSwitch=function(e){var r=this;this.asyncFeatureSwitchService=e,this.restrict="A",this.priority=599,this.terminal=!0,this.multiElement=!0,this.transclude="element",this.link=function(e,i,n,t,o){o((function(t,o){r.asyncFeatureSwitchService.getFeatureSwitches().then((function(e){e[n.featureSwitch]?i.after(t):(t.remove(),o&&o.$destroy())}))}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).FeatureSwitchClass=function(e){var t=this;this.asyncFeatureSwitchService=e,this.restrict="A",this.link=function(e,n,r){t.asyncFeatureSwitchService.getFeatureSwitches().then((function(e){r.featureSwitchClass;for(var t=0,o=_.map(r.featureSwitchClass.split(","),(function(e){return e.trim()}));t<o.length;t++){var i=o[t];e[i]&&n.addClass(i)}}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).FeatureSwitchNot=function(e){var r=this;this.asyncFeatureSwitchService=e,this.restrict="A",this.priority=599,this.terminal=!0,this.multiElement=!0,this.transclude="element",this.link=function(e,i,n,t,o){o((function(t,o){r.asyncFeatureSwitchService.getFeatureSwitches().then((function(e){e[n.featureSwitchNot]?(t.remove(),o&&o.$destroy()):i.after(t)}))}))}}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).OptionsModalDialog=function(e){this.restrict="E",this.templateUrl="views/optionsModalDialog.html",this.replace=!0,this.scope={message:"=",selected:0,options:[]},this.scope=e}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).directives||(e.directives={})).SelectPristineOnFocus=function(){this.restrict="A",this.link=function(e,t,o){function i(e){t.hasClass("ng-pristine")&&t.select()}t.on(jsCommon.DOMConstants.focusEventName,null,i),e.$on("$destroy",(function(){t.off(jsCommon.DOMConstants.focusEventName,i)}))}}})(powerbi=powerbi||{}),(function(e){var n,r;function t(){}n=e.common||(e.common={}),r=window,t.getClusterIndexForClusterUri=function(){for(var e=0;e<n.constants.clusterBackendUri.length;e++)for(var t=0,o=n.constants.clusterBackendUri[e].hostNameMatch;t<o.length;t++){var i=o[t];if(0<=r.clusterUri.toLocaleLowerCase().indexOf(i))return e}},n.ClusterLocationHelper=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).htmlTemplate||(e.htmlTemplate={})).put=function(e){e.put("components/dropDownList/dropDownList.html",'<ng-transclude><ng-repeat ng-repeat="menuItem in $ctrl.model.items"><drop-down-list-item model="menuItem" foreground-style="::$ctrl.foregroundStyle" list-pos="$ctrl.getItemPositionByIndex($index)" list-size="$ctrl.menuItemItems.length"></drop-down-list-item></ng-repeat></ng-transclude>'),e.put("components/dropDownListItem/dropDownListItem.html",'<ng-transclude><ng-switch on="$ctrl.model.type"><div tabindex="0" class="label" ng-attr-role="{{::$ctrl.getRoleForMenuItem()}}" aria-setsize="{{$ctrl.listSize}}" aria-posinset="{{$ctrl.listPos+1}}" aria-expanded="{{$ctrl.model.expanded === undefined ? null : $ctrl.model.expanded}}" aria-labelledby="{{$ctrl.contextMenuLabelId}}" aria-checked="{{($ctrl.model.checked || $ctrl.model.selected) ? true : false}}" aria-disabled="{{$ctrl.model.disabled ? true : false}}" aria-haspopup="{{$ctrl.model.children ? true : false}}" ng-switch-when="0" ng-class="{\'checked\': $ctrl.model.checked, \'hasChildren\': $ctrl.model.children, \'hasIcon\': $ctrl.hasIcon, \'selected\': $ctrl.model.selected, \'expanded\': $ctrl.model.expanded }" ng-disabled="::$ctrl.model.disabled" ng-attr-title="{{::$ctrl.model.tooltip || $ctrl.model.text}}" accessible-click="$ctrl.onAccessibleClick($event)" apply-style="::$ctrl.foregroundStyle"><svg-use-symbol sheet="exploreCanvasIcons" ng-if="$ctrl.model.checked" symbol-id="contextMenuCheckArrow"></svg-use-symbol><i ng-if="$ctrl.model.showIcon && !$ctrl.model.customIcon" class=\'dropdown-icon {{ $ctrl.model.icon }}\'></i> <span ng-if="$ctrl.model.showIcon && $ctrl.model.customIcon"><img class="itemIcon" ng-src="{{$ctrl.model.customIcon}}"/></span><h6 id="{{$ctrl.contextMenuLabelId}}" ng-bind="::$ctrl.model.text" class="itemLabel trimmedTextWithEllipsis"></h6></div><hr role="separator" ng-switch-when="1"/><h1 ng-switch-when="2" aria-label="{{$ctrl.model.text}}" ng-bind="::$ctrl.model.text"></h1></ng-switch></ng-transclude>'),e.put("components/emailsList/emailsList.html",'<div class="emailsList" id="emailsList" pbi-lazy-load-contents="$ctrl.moduleConfig"><tags-input ng-model="$ctrl.viewModel.inputUserList" tag-class="{invalid: $tag.isInvalid}" placeholder="{{ ::$ctrl.getInputPlaceholder() }}" max-tags="$ctrl.maxTags" spellcheck="false" replace-spaces-with-dashes="false" add-on-paste="true" paste-split-pattern=",|;" min-length="1" display-property="displayName" key-property="objectId" on-tag-adding="$ctrl.isValidUser($tag, $ctrl.checkValidOrgUser)" on-invalid-tag="$ctrl.showInvalidUserError($tag)" on-tag-added="$ctrl.setDirty();$ctrl.onTagAddedWithoutError($tag)" on-tag-removed="$ctrl.setDirty();$ctrl.onTagRemoved({$tag: $tag})" template="components/emailsList/emailsListTag.html" arialabel="{{ ::$ctrl.getInputPlaceholder() }}" arialabelledby="{{$ctrl.arialabelledby}}" ariadescribedby="{{$ctrl.ariadescribedby}}" ariarequired="$ctrl.ariarequired" ariaowns="emailsList"><auto-complete source="$ctrl.findUsers($query)" debounce-delay="200" min-length="1" onclick="event.stopPropagation();" add-on-blur="false" load-on-empty="true" template="components/emailsList/emailsListAutoComplete.html"></auto-complete><div class="autoCompleteSpinner" ng-if="$ctrl.areUsersLoading() || $ctrl.isFindingUsers"><spinner></spinner></div></tags-input><div class="errorMessageContainer" ng-if="$ctrl.viewModel.hasValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="errorMessage" ng-bind="$ctrl.viewModel.errorMessage" role="alert"></span></div></div>'),e.put("components/emailsList/emailsListAutoComplete.html",'<span aria-live="polite"><span class="displayName" highlight-string="data.displayName" search-string="data.searchString" highlight-tag="em" ng-attr-aria-label="{{data.displayName}}"></span><span class="userPrincipalName" highlight-string="data.userAdditionalDetailsForAutoComplete" search-string="data.searchString" highlight-tag="em" ng-attr-aria-label="{{data.userAdditionalDetailsForAutoComplete}}"></span></span>'),e.put("components/emailsList/emailsListTag.html",'<span class="displayName" ng-bind="::data.displayName" ng-attr-title="{{::data.userPrincipalName || data.displayName}}"></span><a class="removeBtn" ng-click="$removeTag()" role="button"><i class="glyphicon pbi-glyph-cancel" localize-tooltip="Delete"></i></a>'),e.put("components/modalDialog/dialogFrame/dialogFrame.html",'<div role="dialog" class="container themeableElement" tabindex="-1" ng-keydown="$ctrl.onKeydown($event)"><div class="frameDragHandle"></div><div class="frame"><header id="messageDialogHeader" class="dialogHeader" ng-transclude="dialogHeader"></header><main class="dialogBody" ng-transclude="dialogBody"></main><section class="dialogFooter" ng-transclude="dialogFooter"></section></div><pbi-button kind="icon" icon-name="cancel" icon-size="mini" labelless="true" no-label aria-label="Close" role="button" tabindex="0" class="closeIcon" ng-click="$ctrl.onCloseButtonClick()" ng-keydown="$ctrl.onCloseButtonKeydown($event)" ng-if="::$ctrl.isDismissable()"></pbi-button></div>'),e.put("components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialog.html",'<dialog-frame><dialog-header><span localize="$ctrl.titleText"></span></dialog-header><dialog-body><article localize="$ctrl.message"></article><a class="learnMoreLink" ng-if="::$ctrl.learnMoreUrl" target=\'_blank\' ng-href="{{::$ctrl.learnMoreUrl}}" localize="LearnMore"></a></dialog-body><dialog-footer> <button autofocus type="submit" ng-click="$ctrl.close()" class="primary" localize="PBI_Button_Label_Close"></button></dialog-footer></dialog-frame>'),e.put("components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialogDefinition.html",'<feature-not-supported-dialog title-text="::titleText" message="::message" learn-more-url="::learnMoreUrl"></feature-not-supported-dialog>'),e.put("components/modalDialog/hostDialogContainer/hostDialogContainer.html","<ng-transclude></ng-transclude>"),e.put("components/modalDialog/messageDialog/messageDialog.html",'<dialog-frame><dialog-header ng-if="::!!$ctrl.config.titleText"><span ng-bind="::$ctrl.config.titleText"></span></dialog-header><dialog-body><p ng-bind="::$ctrl.config.messageText"></p><section ng-if="::$ctrl.config.additionalMessageTexts"><p ng-repeat="message in ::$ctrl.config.additionalMessageTexts" ng-bind="::message"></p></section></dialog-body><dialog-footer> <button autofocus type="submit" ng-click="$ctrl.ok()" class="primary" ng-if="::$ctrl.config.okButtonText" ng-bind="::$ctrl.config.okButtonText"></button> <button class="cancelBtn" ng-click="$ctrl.cancel()" ng-if="::$ctrl.config.cancelButtonText" ng-bind="::$ctrl.config.cancelButtonText"></button></dialog-footer></dialog-frame>'),e.put("components/modalDialog/messageDialog/messageDialogDefinition.html",'<message-dialog config="config"></message-dialog>'),e.put("components/shareAccess/shareAccess.html",'<pbi-radio-group-legacy no-label ng-model="$ctrl.isSharedWithOrg" ng-change="$ctrl.selectionChanged()"><pbi-radio class="entireOrganizationRadio" label="TenantSetting_ApplyTo_EntireOrganization" ng-value="true"></pbi-radio><pbi-radio class="specificUsersRadio" label="TenantSetting_ApplyTo_SpecificUsers" ng-value="false"></pbi-radio></pbi-radio-group-legacy><div class="emailListContainer" ng-if="!$ctrl.isSharedWithOrg"><emails-list view-model="$ctrl.emails" allow-security-groups="true" allow-object-ids="true" allow-unified-groups="true"></emails-list></div>'),e.put("views/collapsibleSectionView.html",'<div class="collapsibleSectionControl" ng-class="{isExpanded: isCollapsibleSectionExpanded === true}"><div class="sectionTitle"><span class="collapseToggleContainer" ng-click="isCollapsibleSectionExpanded = !isCollapsibleSectionExpanded"><i class="glyphicon pbi-glyph-caretright collapseToggle"></i> <span>{{isCollapsibleSectionExpanded ? localizedExpandedTitle : localizedCollapsedTitle}}</span></span></div><div class="content" ng-show="isCollapsibleSectionExpanded" ng-transclude></div></div>'),e.put("views/confirmationModalDialog.html",'<div><div class="title" ng-if="viewModel.title">{{::viewModel.title}}</div><div class="message" ng-if="viewModel.message">{{::viewModel.message}}</div></div>'),e.put("views/customModalDialog.html",'<div class="customModalDialog"><div class="dialogMessage" ng-bind="::message"></div></div>'),e.put("views/dialogConfirmContent.html",'<div class="content"><div class="title">{{viewModel.title}}</div><div class="message" ng-if="viewModel.message">{{viewModel.message}}</div></div>'),e.put("views/dropdownMenu.html","<ul class='angular-dropdown' ng-class='{dropdownMenuClass: true, dark: dropdownDarkTheme === true}'><li ng-repeat='item in dropdownMenu' class='dropdown-item' dropdown-item-label='labelField' dropdown-item-description='descriptionField' dropdown-item-class='classField' dropdown-menu-item='item'></li></ul>"),e.put("views/dropdownMenuItems.html",'<ul class="clickable-menu-items {{dropdownClass}}" focus-trap role="menu" ng-class="{dark: dropdownDarkTheme === true}"><li ng-repeat="item in dropdownItems" class="dropdown-item {{item.dropdownItemClass}}" ng-click="dropdownOnItemSelected({ selected: item }); $event.stopPropagation();" ng-class="{selectedItem: item.checked}"> <button ng-if="::item.type === 0 && !item.href" class="{{::item.containerClass}}" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}" role="menuitem"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-if="::item.description">{{::item.description}}</div></div></button><a ng-if="::item.type === 0 && item.href" class="{{::item.containerClass}}" role="menuitem" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}" ng-href="{{::item.href}}" ng-attr-target="{{::item.hrefTarget ? item.hrefTarget : \'_blank\' }}"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-if="::item.description">{{::item.description}}</div></div></a><span ng-if="::item.type === 1" class="{{::item.containerClass}}" tabindex="0" role="heading" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-attr-title="{{::item.descriptionTitle}}" ng-if="::item.description">{{::item.description}}</div></div></span><span ng-if="::item.type === 2" class="dropdown-separator"></span></li></ul>'),e.put("views/dropdowns/contextMenu.html",'<dropdown-overlay focus-nav-mode="Group" keyboard-shortcuts="" dropdown-overlay-class="default-contextmenu dropdownOverlay" ng-class="::{dark: darkTheme === true, verticalScrollbar: verticalScrollbar === true, themeableElement: themeableElement === true, fluentTheme: fluentTheme === true}" apply-style="::backgroundStyle"><drop-down-list role="menu" data-automation-type="dropdownOverlayList" model="::model" foreground-style="::foregroundStyle" on-item-selected="menuClick(key)" on-item-enter="menuItemEnter(menuitem, $event)"></drop-down-list></dropdown-overlay>'),e.put("views/dropdowns/dropdownItemsLegacy.html",'<dropdown-overlay dropdown-overlay-name="{{overlayName}}" dropdown-overlay-class="angular-dropdown {{overlayClass}} override-box-shadow" on-close="onClose()"><dropdown-menu-items dropdown-items="menuItems" dropdown-class="active {{overlayClass}}" dropdown-on-item-selected="onItemSelected(selected)"></dropdown-menu-items></dropdown-overlay>'),e.put("views/inlineMessageView.html",'<div class="inlineWarning" ng-class="{errorBackground: useErrorBackground}"><div class="message" ng-init="detailExpand=false"><span ng-switch="displayIcon"><span ng-switch-when="0" class="glyphicon glyph-small" ng-class="\'pbi-glyph-info\'"></span><span ng-switch-when="1" class="glyphicon glyph-small" ng-class="\'pbi-glyph-error\'"></span><span ng-switch-when="2" class="glyphicon glyph-small" ng-class="\'pbi-glyph-warning\'"></span></span><span ng-transclude></span><span ng-if="traceDetails!=null"><span class="detailsExpander" ng-click="detailExpand=!detailExpand" ng-switch="detailExpand"><a href=\'\' localize="Generic_ShowDetails" ng-switch-when="false"></a><a href=\'\' localize="SettingsDataset_HideDetails" ng-switch-when="true"></a></span><span ng-show="detailExpand"><table class="warningDetails"><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_ActivityIdText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.activityId"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_RequestIdText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.requestId"></td></tr><tr ng-if="traceDetails.clusterUri"><td class="warningDetailName"><span localize="AdditionalErrorInfo_ClusterUriText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.clusterUri"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_ErrorCodeText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.errorCode"></td></tr><tr ng-if="traceDetails.error"><td class="warningDetailName"><span localize="AdditionalErrorInfo_ErrorText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.error"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_TimestampText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.time"></td></tr><tr><td class="warningDetailName"><span localize="PowerBI_Build_Version_Text"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.version"></td></tr><tr><td class="warningDetailName"><span localize="PowerBI_Client_Version_Text"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.clientVersion"></td></tr></table><table ng-if="traceDetails.details && traceDetails.details.length > 0" class="warningErrorDetails"><tr ng-repeat="errorDetail in traceDetails.details"><td class="warningErrorDetailName"><span ng-bind="errorDetail.key"></span>:</td><td class="warningDetailValue" ng-bind="errorDetail.value"></td></tr></table></span><div ng-if="traceDetails.linkText" class="warningTroubleshootLink"><a href=\'{{traceDetails.link}}\' target="_blank" ng-bind="traceDetails.linkText"></a></div></span></div></div>'),e.put("views/inlineNameValuePairsView.html",'<div class="inlineWarning"><div class="message"><span ng-if="showTitle" ng-class="mode==\'info\'?\'pbi-glyph-info\':\'pbi-glyph-error\'" class="glyphicon glyph-small"></span><span ng-transclude></span><span ng-if="nameValuePairs!=null"><span class="detailsExpander" ng-click="detailExpand=!detailExpand" ng-switch="detailExpand" ng-show="showTitle"><a href=\'\' localize="Generic_ShowDetails" ng-switch-when="false"></a><a href=\'\' localize="SettingsDataset_HideDetails" ng-switch-when="true"></a></span><table class="warningDetails" ng-show="detailExpand"><tr ng-repeat="pair in nameValuePairs"><td class="warningDetailName"><span ng-bind="::pair.Name"></span>:</td><td class="warningDetailValue"><span ng-bind="::pair.Value"></span></td></tr></table></span></div></div>'),e.put("views/loadNotificationView.html",'<div class="loading-modalContainer"><div class="content"><div class="information"><spinner [size]="\'large\'"></spinner><span class="message" ng-bind="message"></span></div></div></div>'),e.put("views/modalDialog.html",'<div class="modal"><div class="overlay"></div><form class="dialog" role="dialog" focus-trap><div ng-transclude ng-class="{\'dialog-content-filled\': viewModel.contentFilledDialog, \'dialog-content\': !viewModel.contentFilledDialog}"></div><div class="actions" ng-if="!viewModel.hideActionsButtons"> <button class="confirm biButton primary" ng-class="{\'elevated\': viewModel.confirmButtonImportance === \'elevated\', \'normal\': viewModel.confirmButtonImportance === \'normal\' }" ng-click="confirm()" ng-disabled="viewModel.isConfirmButtonDisabled" type="submit">{{viewModel.confirmButtonText}}</button> <button class="cancel biButton" ng-if="!viewModel.hideCancelButton" ng-class="{\'elevated\': viewModel.cancelButtonImportance === \'elevated\', \'normal\': viewModel.cancelButtonImportance === \'normal\' }" ng-click="cancel()" formnovalidate>{{viewModel.cancelButtonText}}</button></div> <button class="closeBtn pbi-glyph-exit glyphicon glyph-small" ng-click="cancel()" aria-label="Close" formnovalidate></button></form></div>'),e.put("views/modalOverlay.html",'<div class="modal"><div class="overlay"></div></div>'),e.put("views/optionsModalDialog.html",'<div class="customModalDialog"><div class="dialogMessage" ng-bind="::message"></div><div><ul><li ng-repeat="val in options"><div class="pbi-input"> <input type="radio" name="option" ng-model="$parent.selected" ng-value="$index"> <label class="form-label">{{val}}</label></div></li></ul></div></div>'),e.put("views/searchBox.html",'<div class="searchBox"><i class="glyphicon pbi-glyph-search"></i> <input type="text" ng-class="{\'inputWithClearButton addPadding\': showclearbutton && filter}" clear-on-escape ng-model="filter" ng-model-options="{debounce: 300}" ng-blur="onBlur({$event: $event})" placeholder="{{::placeholderText}}" ondrop="return false;" focus-on="shouldFocus" maxlength="200" role="search"/><i ng-if="showclearbutton && filter" class="delete glyphicon pbi-glyph-close glyph-micro" ng-click="clearFilterInput()" ng-keyup="$event.keyCode == 13 && clearFilterInput()" tabindex="0"></i></div>'),e.put("views/selectMenu.html",'<select ng-model="selectValue" aria-labelledby="{{labelId}}" class="select-element" ng-disabled="isDisabled"><option ng-repeat="option in options track by $index" value="{{option.value}}" ng-selected="{{selectValue === option.value}}" ng-bind="option.displayName"></option></select>'),e.put("views/textInput.html",'<input class="inputText" ng-class="textInputStyle" type="text" ng-focus="onInternalFocus()" ng-blur="onInternalBlur()" ng-keydown="onInternalKeyDown($event)" ng-model="inputValue" ng-change="onInternalChange()" maxlength="{{::maxInputLength}}" placeholder="{{::placeholder}}" spellcheck="false" ng-trim="false"/>'),e.put("views/toggleSwitch.html",'<div class="toggle-switch" role="switch" aria-checked="{{!!toggleValue}}" tabindex="{{isDisabled ? -1 : 0}}" ng-keydown="!isDisabled && handleToggleEvent($event)" ng-focus="handleToggleFocus($event)" aria-labelledby="{{::labelId}}" aria-disabled="{{isDisabled}}"> <input type="checkbox" name="toggle-switch" class="toggle-switch-checkbox" id="{{::$id}}" ng-model="toggleValue"/><label class="toggle-switch-label" for="{{::$id}}" ng-switch="!!toggleValue"><span ng-if="!warningMessage" ng-switch-when="true" class="toggle-switch-text trimmedTextWithEllipsis" localize="ToggleSwitchOn"></span><pbi-icon role="tooltip" aria-hidden="!warningMessage" aria-label="warningMessage.detail" ng-if="warningMessage" ng-switch-when="true" class="warning" name="warning" size="small" tooltip tooltip-config="getTooltipConfig()"></pbi-icon><span ng-switch-when="false" class="toggle-switch-text trimmedTextWithEllipsis" localize="ToggleSwitchOff"></span><span class="toggle-switch-inner"></span></label></div>')}})(powerbi=powerbi||{}),(function(t){var e;(e=t.common||(t.common={})).setErrorService=function(e){t.ensurePowerbiCommon().errorService=e},e.getErrorService=function(){return t.ensurePowerbiCommon().errorService}})(powerbi=powerbi||{}),(function(h){var l,e,g,t,o;function i(){o||(angular.module("powerbi.common",t).config(["$compileProvider",function(e){e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1)}]).config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]).factory("promiseFactory",["$q","$exceptionHandler","featureSwitchService",function(e,t,o){e=l.createPromiseFactory(e);return h.Promise.init(e,t,!0,o.featureSwitches.useNativePromiseForPowerBIPromise),e}]).factory("pbiTimeout",["$rootScope",function(t){return h.createPbiTimeout((function(e){return t.$evalAsync(e)}))}]).factory("scopedProvider",["$injector",function(e){return l.createScopedProvider(e)}]).factory("scopedRootRegistrar",["modernScopedRootRegistrar","scopedProvider",function(e,t){return l.createScopedRootRegistrar(e,t)}]).provider("lazy",(function(){var i=this;return this.factories={},this.$get=["$injector","moduleLoader","promiseFactory",function(e,t,o){return l.createLazyInjector(t,o,e,i.factories)}],this})).factory("lazyScopedFactories",["scopedProvider",function(e){var r={};return e.register("lazyScoped",{services:["$injector","moduleLoader","promiseFactory"],scopedServices:["$scope"],scopedProviderInstance:!0,fn:function(e,t,o,i,n){return l.createScopedLazyProvider(t,e,n,i,o,r)}}),r}]).provider("mixins",(function(){var t=this;return this.factories={},this.$get=["$injector",function(e){return l.createMixinsProvider(e,t.factories)}],this})).factory("mixinScopedFactories",[function(){return{}}]).factory("hostTypeResolutionService",[function(){return new l.HostTypeResolutionService}]).factory("hostInvokerService",["hostTypeResolutionService","$window","$http",function(e,t,o){return new(e.getHostType()!==l.HostType.Chromium?l.VoidHostInvokerService:l.ChromiumHostInvokerService)}]).factory("hostService",["promiseFactory","hostInvokerService",function(e,t){e=new l.HostService(e,t);return l.setHostServiceSink(e),e}]).factory("lastFocusedElementService",(function(){return l.createLastFocusedElementService()})).factory("dropdownMenuService",["rtl","windowMetrics","globalEventBridge",function(e,t,o){return l.createDropdownMenuService(o,e,t)}]).factory("dropdown",["$rootScope","$templateCache","$compile","overlayService","$timeout","promiseFactory",function(e,t,o,i,n,r){return l.createDropdownService(e,t,o,i,n,r)}]).factory("gridLayout",(function(){return l.createGridLayoutService()})).factory("contentProviderConfigHandler",["$window",function(e){return l.createContentProviderConfigHandlerService(e)}]).provider("pbiLazyLoad",l.services.PbiLazyLoadProvider).provider("telemetryService",(function(){return this.$get=["modernTelemetryService",function(e){var t,o=window;try{if(o!==o.parent)for(var i=0;o&&(null!=o.opener||o!==o.parent)&&null==t&&i<5;)t=(o=o.opener||o.parent).powerbi&&o.powerbi.common&&o.parentTelemetryService,i++;if(t)return t}catch(e){}return t=e,jsCommon.Trace.resetListeners(),jsCommon.Trace.addListener(t),l.parentTelemetryService=t}],this})).factory("activeFolderIdLegacy",["promiseFactory",function(e){return l.createActiveFolderIdService(e)}]).factory("notificationToast",["telemetryService",function(e){return l.createNotificationToastService(e)}]).factory("modalDialogService",["$compile","pbiLazyLoad","promiseFactory","$templateCache","$timeout","$rootScope","telemetryService","moduleLoader",function(e,t,o,i,n,r,a,s){return l.createModalDialogService(e,t,o,i,n,r,a,s)}]).factory("embedModeService",(function(){return null})).factory("upload",["$injector","httpRequestWorker",function(e,t){return l.createUpload(e,t)}]).run(["ngZone",function(e){jsCommon.Zone.initialize(e)}]).run(["pbiTimeout","featureSwitchService",function(e,t){h.PbiPromise.init(e,!1,void 0,t.featureSwitches.useNativePromiseForPbiPromise)}]).run(["activeFolderId",function(e){h.ensurePowerbiCommon().activeFolderIdService=e}]).run(["$templateCache",e]),o=!0)}function n(e,t,o){for(var i=0,n=t;i<n.length;i++){var r=n[i],a=r.consumerHostFlags;null==a&&(a=524287),null!=r.excludedConsumerHostFlags&&(a&=~r.excludedConsumerHostFlags),(a&e)===e&&!(function(e,t,o,i,n,r){var a,s,l,c,d,u,p=_.camelCase(e),m=g[t];h.contract.checkValue(m,"Attempt to register unknown base block type"),_.includes(m,p)||(2===t?(d=e,u=o,s=i,c=n.componentsTarget,l=n.componentsMap,u=u||(s?h.requireSync(s):l[d]),d=_.camelCase(d),angular.module(c).component(d,u)):1===t?(s=e,l=o,c=i,d=r,u=n.directivesTarget,r=n.directivesMap,l?(a=l).ng&&(d=a.ng):c?(a=h.requireSync(c),d=a.ng):a=r[s],s=_.camelCase(s),(d=d||[]).push((function(){for(var e=[],t=0,o=arguments.length;t<o;t++)e.push(arguments[t]);return new(Function.prototype.bind.apply(a,[null].concat(e)))})),angular.module(u).directive(s,d)):4===t&&(r=e,t=o,e=i,o=n.filtersTarget,i=n.filtersMap,t=t||(e?h.requireSync(e):i[r]),r=_.camelCase(r),angular.module(o).filter(r,t)),m.push(p))})(r.name,r.blockType,r.factory,r.syncModule,o,r.dependencies)}}l=h.common||(h.common={}),e=h.common.htmlTemplate.put,g={1:[],2:[],4:[]},l.initializeNgRightClick(),l.registerPBICommonBuildingBlocksForHost=function(e){var t=[{name:"ApplyStyle",blockType:1,consumerHostFlags:25995,factory:h.common.directives.ApplyStyle},{name:"AutoSelect",dependencies:["$timeout"],blockType:1,consumerHostFlags:1032,factory:h.common.directives.AutoSelect},{name:"ClearOnEscape",blockType:1,consumerHostFlags:25867,factory:h.common.directives.ClearOnEscape},{name:"ClickTelemetry",dependencies:["telemetryService"],blockType:1,consumerHostFlags:1037,factory:h.common.directives.ClickTelemetry},{name:"ContainerPrinter",dependencies:["featureSwitchService","localizationService","globalEventBridge"],blockType:1,consumerHostFlags:8203,factory:h.common.directives.ContainerPrinter},{name:"CustomModalDialog",blockType:1,consumerHostFlags:25610,factory:h.common.directives.CustomModalDialog},{name:"CustomClick",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.CustomClick},{name:"BindTextAndTooltip",blockType:1,consumerHostFlags:1165,factory:h.common.directives.BindTextAndTooltip},{name:"DialogConfirmContent",blockType:1,consumerHostFlags:26047,factory:h.common.directives.DialogConfirmContent},{name:"DialogFrame",dependencies:["modalDialogService"],blockType:2,consumerHostFlags:524287,factory:h.common.components.DialogFrame},{name:"Drag",dependencies:["$interval","dragDataService"],blockType:1,consumerHostFlags:25611,factory:h.common.directives.Drag},{name:"DragScroll",dependencies:["dragDataService"],blockType:1,consumerHostFlags:25611,factory:h.common.directives.DragScroll},{name:"Drop",dependencies:["$parse","$timeout","timeoutService"],blockType:1,consumerHostFlags:25611,factory:h.common.directives.Drop},{name:"DropDownList",blockType:2,consumerHostFlags:25867,factory:h.common.components.DropDownList},{name:"DropDownListItem",blockType:2,consumerHostFlags:25867,factory:h.common.components.DropDownListItem},{name:"DropdownOverlay",dependencies:["overlayService","$parse"],blockType:1,consumerHostFlags:25867,factory:h.common.directives.DropdownOverlay},{name:"DropdownOverlayInvoke",dependencies:["overlayService"],blockType:1,consumerHostFlags:25867,factory:h.common.directives.DropdownOverlayInvoke},{name:"DropdownMenu",blockType:1,consumerHostFlags:25883,factory:h.common.directives.DropdownMenu},{name:"DropdownMenuItems",blockType:1,consumerHostFlags:26047,factory:h.common.directives.DropdownMenuItems},{name:"EmailsList",blockType:2,consumerHostFlags:1032,factory:h.common.components.EmailsList},{name:"FastClick",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastClick},{name:"FastFocus",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastFocus},{name:"FastKeydown",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastKeydown},{name:"FastKeyup",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastKeyup},{name:"FastMousedown",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastMousedown},{name:"FastMouseenter",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastMouseenter},{name:"FastMouseup",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastMouseup},{name:"FastTouchmove",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastTouchmove},{name:"FastTouchend",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FastTouchend},{name:"FeatureNotSupportedDialog",dependencies:["modalDialogService"],blockType:2,consumerHostFlags:524287,factory:h.common.components.FeatureNotSupportedDialog},{name:"FeatureSwitch",dependencies:["asyncFeatureSwitchService"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FeatureSwitch},{name:"FeatureSwitchClass",dependencies:["asyncFeatureSwitchService"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FeatureSwitchClass},{name:"FeatureSwitchNot",dependencies:["asyncFeatureSwitchService"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.FeatureSwitchNot},{name:"HostDialogContainer",blockType:2,consumerHostFlags:524287,factory:h.common.components.HostDialogContainer},{name:"HighlightString",dependencies:["highlight"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.HighlightString},{name:"InlineMessage",blockType:1,consumerHostFlags:1036,factory:h.common.directives.InlineMessage},{name:"InlineNameValuePairs",blockType:1,consumerHostFlags:1036,factory:h.common.directives.InlineNameValuePairs},{name:"InViewport",blockType:1,consumerHostFlags:25995,factory:h.common.directives.InViewport},{name:"LegacyScopedRoot",blockType:2,consumerHostFlags:524287,factory:h.common.components.LegacyScopedRoot},{name:"Localize",dependencies:["localizationService"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.Localize},{name:"LocalizeAttr",dependencies:["localizationService"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.LocalizeAttr},{name:"LocalizeTooltip",dependencies:["localizationService"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.LocalizeTooltip},{name:"MessageDialog",blockType:2,consumerHostFlags:9226,factory:h.common.components.MessageDialog},{name:"ModalDialog",blockType:1,consumerHostFlags:26047,factory:h.common.directives.ModalDialog},{name:"ModalOverlay",blockType:1,consumerHostFlags:4,factory:h.common.directives.ModalOverlay},{name:"NgBindAttr",blockType:1,consumerHostFlags:524287,factory:h.common.directives.NgBindAttr},{name:"NgOnSelect",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.NgOnSelect},{name:"NgRightClick",syncModule:"PowerBICommon/directives/ngRightClick",blockType:1,consumerHostFlags:524287,excludedConsumerHostFlags:2},{name:"NgRepeatFinishEvent",dependencies:["$timeout"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.NgRepeatFinishEvent},{name:"NgScrollbars",dependencies:["$timeout"],blockType:1,consumerHostFlags:25867,factory:h.common.directives.NgScrollbars},{name:"OnResize",dependencies:["$parse","moduleLoader"],blockType:1,consumerHostFlags:25995,factory:h.common.directives.OnResize},{name:"OptionsModalDialog",blockType:1,consumerHostFlags:524287,factory:h.common.directives.OptionsModalDialog},{name:"PbiLazyLoadContents",dependencies:["$compile","pbiLazyLoad","moduleLoader"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.PbiLazyLoadContents},{name:"PbiTable",dependencies:["$rootScope","$compile","$filter","localizationService"],blockType:1,consumerHostFlags:1032,factory:h.common.directives.PbiTable},{name:"Resizable",blockType:1,consumerHostFlags:25995,factory:h.common.directives.Resizable},{name:"SearchBox",dependencies:["localizationService"],blockType:1,consumerHostFlags:25867,factory:h.common.directives.SearchBox},{name:"Select",blockType:1,consumerHostFlags:524287,factory:h.common.directives.Select},{name:"SelectMenu",dependencies:["$timeout"],blockType:1,consumerHostFlags:524287,factory:h.common.directives.SelectMenu},{name:"SelectPristineOnFocus",blockType:1,consumerHostFlags:1032,factory:h.common.directives.SelectPristineOnFocus},{name:"ShareAccess",blockType:2,consumerHostFlags:1032,factory:h.common.components.ShareAccess},{name:"GridLayout",blockType:1,consumerHostFlags:1192,factory:h.common.directives.GridLayout},{name:"GridLayoutItem",dependencies:["ngZone"],blockType:1,consumerHostFlags:1192,factory:h.common.directives.GridLayoutItem},{name:"Tooltip",blockType:1,consumerHostFlags:25995,factory:h.common.directives.Tooltip},{name:"TriggeredRecompile",blockType:2,consumerHostFlags:524287,factory:h.common.components.TriggeredRecompile},{name:"LoadNotification",blockType:1,consumerHostFlags:25883,factory:h.common.directives.LoadNotification},{name:"VResizable",blockType:1,consumerHostFlags:25995,factory:h.common.directives.VResizable}];n(e,h.a11y.PbiA11yBaseBlockDefinitions,{directivesTarget:"powerbi.a11y"}),n(e,t,{directivesTarget:"powerbi.common.directives",componentsTarget:"powerbi.common.components"})},angular.module("powerbi.common",[]),angular.module("powerbi.common.directives",[]),angular.module("powerbi.common.components",[]),angular.module("powerbi.common.controllers",[]),t=["powerbi.common.directives","powerbi.common.components","powerbi.common.controllers","stylelibrary","oc.lazyLoad","powerbi.a11y"],l.initializeAngularModule=i,l.registerBuildingBlocksForHost=n,o=!(l.containsDirective=function(e){return _.includes(g[1],_.camelCase(e))}),i()})(powerbi=powerbi||{}),(function(e){var t;function o(e,t){this.services=t}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),t=jsCommon.FocusManager,o.createOptions=function(){return{additionalServices:["$element"]}},o.prototype.$onChange=function(){this.setNumberOfItems()},o.prototype.getItemPositionByIndex=function(e){return _.indexOf(this.menuItemItems,this.model.items[e])},o.prototype.$onInit=function(){this.unregister=t.getInstance().register(this.services.$element.get(0)),this.setNumberOfItems()},o.prototype.$onDestroy=function(){this.unregister&&this.unregister()},o.prototype.onMenuItemSelected=function(e){1!==e.type&&!e.disabled&&null!=e.key&&_.isEmpty(e.children)&&this.onItemSelected({key:e.key})},o.prototype.onMenuItemEnter=function(e,t){this.onItemEnter({menuitem:e,$event:t})},o.prototype.setNumberOfItems=function(){this.menuItemItems=[],_.isEmpty(this.model)||(this.menuItemItems=_.filter(this.model.items,(function(e){return 0===e.type})))},e.DropDownListController=o})(powerbi=powerbi||{}),(function(e){var t;((t=e.common||(e.common={})).components||(t.components={})).DropDownList={templateUrl:"components/dropDownList/dropDownList.html",bindings:{model:"<",foregroundStyle:"<",onItemSelected:"&",onItemEnter:"&"},transclude:!0,controller:e.common.createController(t.controllers.DropDownListController)}})(powerbi=powerbi||{}),(function(e){function t(e,t){this.services=t,this.contextMenuLabelId=_.uniqueId("contextmenu-label-text")}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["$element","$window"]}},t.prototype.$onInit=function(){var t=this;this.services.$element.mouseenter((function(e){return t.onEnter(e)}))},t.prototype.onAccessibleClick=function(e){this.model.href&&this.services.$window.open(this.model.href,"_blank"),this.model.children?e.keyCode!==$.ui.keyCode.ENTER&&e.keyCode!==$.ui.keyCode.SPACE||this.onEnter(e):this.onClick()},Object.defineProperty(t.prototype,"hasIcon",{get:function(){return this.model.showIcon&&(!!this.model.icon||!!this.model.customIcon)},enumerable:!1,configurable:!0}),t.prototype.getRoleForMenuItem=function(){return void 0===this.model.checked?"menuitem":"menuitemcheckbox"},t.prototype.onClick=function(){this.dropDownListCtrl.onMenuItemSelected(this.model)},t.prototype.onEnter=function(e){this.dropDownListCtrl.onMenuItemEnter(this.model,e)},e.DropDownListItemController=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).DropDownListItem={templateUrl:"components/dropDownListItem/dropDownListItem.html",bindings:{model:"<",foregroundStyle:"<",listPos:"<",listSize:"<"},transclude:!0,require:{dropDownListCtrl:"^?dropDownList"},controller:e.createController(e.controllers.DropDownListItemController)}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).models||(e.models={})).EmailsListModel=function(){this.inputUserList=[],this.validEmailsList=[],this.validObjectIds=[],this.hasValidationError=!1,this.isDirty=!1}})(powerbi=powerbi||{}),(function(e){var r,s,l;function t(e,t){this.services=t,this.isUserExisting=!0,this.checkValidOrgUser=!1,this.isFindingUsers=!1,this.findingUsers=[]}r=e.common||(e.common={}),s=r.controllers||(r.controllers={}),e="([!#$%&'*+/=?^{|}~\\w\\-\\.\\u00c0-\\uffff]{1,64}@[\\w\\-\\.\\u00c0-\\uffff]{1,253}\\.\\w{1,63})",l=new RegExp("^"+e+"$"),s.ObjectIdRegExp=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/,s.MaxAllowedEmailAddresses=500,s.EmailValidator=new RegExp("^("+e+"|([^;,]*)<"+e+">)$"),t.createOptions=function(){return{additionalServices:["localizationService","promiseFactory","$element","userDirectoryHttpService"]}},t.emailsToUsers=function(e){for(var t=[],o=0,i=e;o<i.length;o++){var n=i[o],n=$.trim(n),r="";n&&(l.test(n)&&(r=n),t.push({displayName:n,userPrincipalName:r,objectId:r,objectType:1,isSecurityGroup:!1}))}return t},t.prototype.$onInit=function(){var t=this,e="ngTagsInput",o=(this.moduleConfig={name:e,dependency:{javascript:e,css:[e]}},this.services.$element);o.keyup((function(e){8===e.keyCode&&""===o.find("input.input").val()&&t.clearInvalidUserError()})),this.initializeViewModel(this.viewModel)},t.prototype.getInputPlaceholder=function(){var e=this.services.localizationService;return _.isEmpty(this.placeholder)?this.blockUsers?e.get("SecurityGroupsListPlaceholder"):e.get("EmailsListPlaceholder"):e.get(this.placeholder)},t.prototype.validationTrigger=function(){var e=[],t=this.resetViewModel(),o=t.inputUserList;t.inputUserList=[];for(var i=0,n=o;i<n.length;i++){var r=n[i];this.isValidUser(r)?(t.inputUserList.push(r),this.allowObjectIds&&s.ObjectIdRegExp.test(r.objectId)?t.validObjectIds.push(r.objectId):l.test(r.userPrincipalName)&&t.validEmailsList.push(r.userPrincipalName)):e.push(r.userPrincipalName||r.objectId||r.displayName)}var o=this.services.localizationService,a=o.get("PowerBI_ListDelimiter");return 0<e.length?(e=_.uniq(e),t.errorMessage=this.blockUsers?o.format("EmailsList_WrongSecurityGroups",[e.join(a)]):o.format("EmailsList_WrongEmailAddresses",[e.join(a)])):0===t.inputUserList.length?t.errorMessage=this.blockUsers?o.get("EmailsList_NoSecurityGroupSpecified"):o.get("EmailsList_NoEmailAddressSpecified"):t.inputUserList.length>=s.MaxAllowedEmailAddresses&&(t.errorMessage=this.blockUsers?o.format("EmailsList_SecurityGroupExceeded",[s.MaxAllowedEmailAddresses.toString()]):o.format("EmailsList_EmailAddressExceeded",[s.MaxAllowedEmailAddresses.toString()])),t.hasValidationError=""!==t.errorMessage,!this.viewModel.hasValidationError},t.prototype.areUsersLoading=function(){return null!=this.findUsersPromise},t.prototype.setDirty=function(){this.viewModel.isDirty=!0},t.prototype.showInvalidUserError=function(e){var t=this.viewModel,o=this.services.localizationService,e=e.userPrincipalName||e.displayName;t.hasValidationError=!0,t.errorMessage=this.blockUsers?o.format("EmailsList_WrongSecurityGroups",[e]):o.format("EmailsList_WrongEmailAddresses",[e])},t.prototype.isValidUser=function(e,t){if(void 0===t&&(t=!1),e.objectId&&this.allowObjectIds&&s.ObjectIdRegExp.test(e.objectId)&&!this.isUserRepeated(e)&&this.isValidObjectType(e))return!0;if(e.userPrincipalName){if(e.userPrincipalName=_.trim(e.userPrincipalName),!l.test(e.userPrincipalName))return!1}else{if(!(!e.objectId||this.allowObjectIds&&s.ObjectIdRegExp.test(e.objectId)))return!1;e.displayName=_.trim(e.displayName);var o=e.displayName.match(s.EmailValidator);if(!o)return!1;var i=o[2],n=o[3],o=o[4];i?(e.displayName=i,e.userPrincipalName=i,e.objectId=i,e.objectType=3):o&&(e.displayName=n,e.userPrincipalName=o,e.objectId=o,e.objectType=3)}return t&&this.findUserObjectIds(e),!this.isUserRepeated(e)&&this.isValidObjectType(e)},t.prototype.findUsers=function(e){var t,o=this,i=_.trim(e),n=this.services.promiseFactory.defer();return i?(e=this.allowSecurityGroups||this.allowUnifiedGroups||this.allowEmailEnabledSecurityGroups?this.blockUsers?2:3:1,t=!!this.includeGuests,this.findUsersPromise=this.services.userDirectoryHttpService.findUsers(i,e,r.constants.emailsListFindUsersLimit,t).toPromise(),this.findUsersPromise.then((function(e){e.data?(e=_.reduce(e.data,(function(e,t){return o.isValidObjectType(t)&&(t.aadAppId?t.userAdditionalDetailsForAutoComplete="AppID: "+t.aadAppId:t.userAdditionalDetailsForAutoComplete=t.userPrincipalName,t.searchString=i,t.displayName&&t.searchString&&t.displayName.toLocaleLowerCase()===t.searchString.toLocaleLowerCase()?e.splice(0,0,t):e.push(t)),e}),[]),n.resolve(e)):n.reject(),o.findUsersPromise=null}),(function(){n.reject(),o.findUsersPromise=null}))):n.resolve([]),n.promise},t.prototype.onTagAddedWithoutError=function(e){this.viewModel.hasValidationError&&this.clearInvalidUserError(),this.onTagAdded&&this.onTagAdded({$tag:e})},t.prototype.clearInvalidUserError=function(){var e=this.viewModel;e.hasValidationError=!1,e.errorMessage=""},t.prototype.resetViewModel=function(){var e=this.viewModel;return e.validEmailsList=[],e.validObjectIds=[],this.clearInvalidUserError(),e},t.prototype.initializeViewModel=function(e){var t=this;e&&(e.validationTrigger=function(){return t.validationTrigger()})},t.prototype.isUserRepeated=function(t){var e=_.filter(this.viewModel.inputUserList,(function(e){return e.userPrincipalName&&e.userPrincipalName===t.userPrincipalName||e.objectId&&e.objectId===t.objectId}));return!_.isEmpty(e)},t.prototype.isValidObjectType=function(e){return 2===e.objectType?e.isSecurityGroup?this.allowSecurityGroups||this.allowEmailEnabledSecurityGroups&&3===e.groupType:2===e.groupType?this.allowDistributionLists:this.allowUnifiedGroups:1===e.objectType&&e.aadAppId?this.allowServicePrincipals:(1===e.objectType||3===e.objectType)&&!this.blockUsers},t.prototype.findUserObjectIds=function(i){var n=this;this.findingUsers.push({name:i.userPrincipalName,status:!0}),this.isFindingUsers=!0,this.findUsers(i.userPrincipalName).then((function(e){var t,o;0===e.length?(o=_.findIndex(n.findingUsers,(function(e){return e.name===i.userPrincipalName})),n.findingUsers[o].status=!1,n.isFindingUsers=_.some(n.findingUsers,(function(e){return!0===e.status})),n.showInvalidUserError(i)):1===e.length&&(t=_.findIndex(n.viewModel.inputUserList,(function(e){return e.userPrincipalName===i.userPrincipalName})),n.viewModel.inputUserList[t].objectId=e[0].objectId,n.viewModel.inputUserList[t].objectType=e[0].objectType,o=_.findIndex(n.findingUsers,(function(e){return e.name===i.userPrincipalName})),n.findingUsers[o].status=!1,n.isFindingUsers=_.some(n.findingUsers,(function(e){return!0===e.status})),n.isFindingUsers||(n.findingUsers=[]))}))},e=t,s.EmailsListController=e})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).EmailsList={templateUrl:"components/emailsList/emailsList.html",bindings:{viewModel:"<",onTagAdded:"&?",onTagRemoved:"&?",allowDistributionLists:"<?",allowUnifiedGroups:"<?",allowEmailEnabledSecurityGroups:"<?",allowSecurityGroups:"<?",allowServicePrincipals:"<?",allowObjectIds:"<?",blockUsers:"<?",includeGuests:"<?",placeholder:"<?",maxTags:"<?",arialabel:"@?",arialabelledby:"@?",ariadescribedby:"@?",ariarequired:"<?",checkValidOrgUser:"<?",isFindingUsers:"=?"},controller:e.createController(e.controllers.EmailsListController)}})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).LegacyScopedRoot={transclude:!0,template:"<ng-transclude></ng-transclude>",controller:["scopedProvider","$scope","$element",function(e,t,o){o=o.attr("scoped-provider-instance-name"),e.attachTo(t,o)}]}})(powerbi=powerbi||{}),(function(e){var i,o;function t(e,t){this.services=t,this.unregister=i.getInstance().register(this.services.$element.get(0)),this.focusFinder=new o}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),i=jsCommon.FocusManager,o=jsCommon.DomOrderFocusFinder,t.createOptions=function(){return{additionalServices:["modalDialogService","$element"]}},t.prototype.$postLink=function(){this.setFocus()},t.prototype.$onDestroy=function(){this.unregister&&this.unregister()},t.prototype.setFocus=function(){var t=this,o=setInterval((function(){var e;t.services.$element.is(":visible")&&(clearInterval(o),e=t.focusFinder.findNext(t.services.$element.get(0),!0,!0))&&i.focus(e)}),100)},t.prototype.onKeydown=function(e){27===e.which&&this.onCloseButtonClick()},t.prototype.onCloseButtonKeydown=function(e){13!==e.which&&32!==e.which||this.onCloseButtonClick()},t.prototype.onCloseButtonClick=function(){this.isDismissable()&&(this.onCloseClick?this.onCloseClick():this.services.modalDialogService.close())},t.prototype.isDismissable=function(){return!1!==this.dismissable},e.DialogFrameController=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).DialogFrame={controller:e.createController(e.controllers.DialogFrameController),templateUrl:"components/modalDialog/dialogFrame/dialogFrame.html",bindings:{onCloseClick:"&?",dismissable:"<?"},transclude:{dialogHeader:"dialogHeader",dialogBody:"dialogBody",dialogFooter:"dialogFooter"}}})(powerbi=powerbi||{}),(function(e){function t(e,t){this.services=t}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["modalDialogService"]}},t.prototype.close=function(){this.services.modalDialogService.close()},e.FeatureNotSupportedDialogController=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).FeatureNotSupportedDialog={controller:e.createController(e.controllers.FeatureNotSupportedDialogController),templateUrl:"components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialog.html",bindings:{message:"<",titleText:"<",learnMoreUrl:"<?"}}})(powerbi=powerbi||{}),(function(e){function t(e){this.modalDialogService=e}e=(e=e.common||(e.common={})).dialogs||(e.dialogs={}),t.prototype.show=function(e,t,o){return this.modalDialogService.showHostModalDialog({bindings:{titleText:e,message:t,learnMoreUrl:o},definitionTemplateCachePath:"components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialogDefinition.html",dialogName:"FeatureNotSupported"})},e.FeatureNotSupportedDialogBuilder=t})(powerbi=powerbi||{}),(function(e){function t(){}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),t.createOptions=function(){return{scopedProviderInstanceName:"HostDialog"}},e.HostDialogController=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).HostDialogContainer={templateUrl:"components/modalDialog/hostDialogContainer/hostDialogContainer.html",bindings:{},transclude:!0,controller:e.createScopedRootController(e.controllers.HostDialogController)}})(powerbi=powerbi||{}),(function(e){function t(e,t){this.services=t}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["localizationService","modalDialogService"]}},t.prototype.$onInit=function(){var t=this;this.config.messageText=this.services.localizationService.getOptional(this.config.messageText)||this.config.messageText,this.config.cancelButtonText=this.services.localizationService.getOptional(this.config.cancelButtonText)||this.config.cancelButtonText,this.config.okButtonText=this.services.localizationService.getOptional(this.config.okButtonText)||this.config.okButtonText,this.config.titleText=this.services.localizationService.getOptional(this.config.titleText)||this.config.titleText,_.isEmpty(this.config.additionalMessageTexts)||(this.config.additionalMessageTexts=_.map(this.config.additionalMessageTexts,(function(e){return t.services.localizationService.getOptional(e)||e})))},t.prototype.ok=function(){this.services.modalDialogService.close(0)},t.prototype.cancel=function(){this.services.modalDialogService.close(1)},e.MessageDialogController=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).MessageDialog={templateUrl:"components/modalDialog/messageDialog/messageDialog.html",bindings:{config:"<"},controller:e.createController(e.controllers.MessageDialogController)}})(powerbi=powerbi||{}),(function(e){function t(e){this.modalDialogService=e}e=(e=e.common||(e.common={})).dialog||(e.dialog={}),t.prototype.show=function(e,t){return this.modalDialogService.showHostModalDialog({dialogName:e,definitionTemplateCachePath:"components/modalDialog/messageDialog/messageDialogDefinition.html",bindings:{config:t}})},e.MessageDialogBuilder=t})(powerbi=powerbi||{}),(function(e){function t(e){var o=this;this.restrict="E",this.replace=!0,this.transclude=!0,this.scope={ngScrollbarsConfig:"<"},this.template='<div class="scrollbar-inner" drag-scroll ng-transclude></div>',this.link=function(e,t){jsCommon.Zone.runOutsideAngular((function(){o.$timeout((function(){t.scrollbar(e.ngScrollbarsConfig)})),e.$on("$destroy",(function(){t.scrollbar("destroy")}))}))},this.$timeout=e}e=(e=e.common||(e.common={})).directives||(e.directives={}),t.scrollVertical=function(e,t){var o,i,n;e&&t&&(e=$(e),t=$(t),o=e.scrollTop(),i=e.offset(),(n=t.offset()).top<i.top?e.scrollTop(o-(i.top-n.top)):n.top+t.height()>i.top+e.height()&&e.scrollTop(o+n.top+t.height()-i.top-e.height()))},e.NgScrollbars=t})(powerbi=powerbi||{}),(function(e){var t,o;function i(){}t=(t=e.common||(e.common={})).controllers||(t.controllers={}),o=e.common.models.EmailsListModel,i.prototype.$onInit=function(){var e=this;this.cacheEmailsIfNeeded(),this.ngModel.$render=function(){return e.cacheEmailsIfNeeded()}},Object.defineProperty(i.prototype,"isSharedWithOrg",{get:function(){return"all"===this.getModel().sharedWith},set:function(e){var t=this.getModel();e?(this.cacheEmailsIfNeeded(),t.sharedWith="all"):t.sharedWith=this.emails||new o},enumerable:!1,configurable:!0}),i.prototype.getModel=function(){return this.ngModel.$viewValue},i.prototype.cacheEmailsIfNeeded=function(){var e=this.getModel().sharedWith;e instanceof o&&(this.emails=e)},t.ShareAccessController=i})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).ShareAccess={controller:e.createController(e.controllers.ShareAccessController),templateUrl:"components/shareAccess/shareAccess.html",require:{ngModel:"ngModel"}}})(powerbi=powerbi||{}),(function(e){function t(e,t){this.scope=e,this.services=t}e=(e=e.common||(e.common={})).controllers||(e.controllers={}),t.createOptions=function(){return{additionalServices:["$element","$attrs","$transclude"]}},t.prototype.transcludeContent=function(){var o=this;this.services.$element.empty(),this.transcludedScope&&this.transcludedScope.$destroy(),this.services.$transclude((function(e,t){o.services.$element.append(e),o.transcludedScope=t}))},t.prototype.$onInit=function(){var o=this,e=this.services.$attrs.trigger;this.scope.$parent.$watch(e,(function(e,t){e!==t&&o.transcludeContent()})),this.transcludeContent()},e.TriggeredRecompileController=t})(powerbi=powerbi||{}),(function(e){((e=e.common||(e.common={})).components||(e.components={})).TriggeredRecompile={transclude:!0,controller:e.createController(e.controllers.TriggeredRecompileController)}})(powerbi=powerbi||{}),(function(d){var u,p,m;u=d.common||(d.common={}),p=window,m=jsCommon.QueryStringUtil,u.getFilePath=function(e,t,o,i){void 0===o&&(o=!0);var n,r,a=d.getBuild(),s="";switch(o&&(s=m.getQueryStringValue("unmin")?"":".min"),t){case 0:n="scripts",r=".js";break;case 1:n="styles",r=".css";break;case 2:n="externals",r=".js";break;case 3:n="externals",r=".css"}if(o=[a],"True"===p.useCDN&&p.hashMappings){var a=void 0,a=(i?[i,n,"".concat(e).concat(s).concat(r)]:[n,"".concat(e).concat(s).concat(r)]).join("/"),l=u.createRtl(),c=(!l.isRtlLayout||1!==t&&3!==t||(a=-1<a.indexOf(".min")?a.replace(".min.css",".rtl.min.css"):a.replace(".css",".rtl.css")),p.hashMappings[a]);if(c||!l.isRtlLayout||1!==t&&3!==t||(a=a.replace(".rtl.min.css",".min.rtl.css"),c=p.hashMappings[a]),c)return[o=p.cdnUrl,c.substring(0,c.indexOf(r))].join("/")}return i&&o.push(i),!0===p.externalMigration&&1!==t&&3!==t&&o.push("ExternalMigration"),__spreadArray(__spreadArray([],o||[],!0),[n,"".concat(e).concat(s)],!1).join("/")}})(powerbi=powerbi||{}),(function(i){(i.common||(i.common={})).createDataReaderProvider=function(e,t,o){return i.data.createDataReaderProvider(i.data.createDataReaderFactory(e,t),o)}})(powerbi=powerbi||{}),(function(e){var e=e.common||(e.common={}),a=(t.prototype.update=function(e){for(var t=0,o=this.mixins;t<o.length;t++)o[t].update(e)},t.prototype.destroy=function(){for(var e=0,t=this.mixins;e<t.length;e++){var o=t[e];o.destroy&&o.destroy()}},t);function t(e){this.mixins=e}e.MixinProvider=a,e.createMixinsProvider=function(e,t){return new o(e,t)},i.prototype.get=function(e){var t=this.instances[e];if(void 0===t){for(var o=[],i=0,n=this.factories[e]||[];i<n.length;i++){var r=n[i];o.push(this.instantiateMixin(r))}t=new a(o),this.instances[e]=t}return t},i.prototype.instantiateMixin=function(e){var t=e.ng,o={};if(!_.isEmpty(t))for(var i=this.$injector,n=0,r=t;n<r.length;n++){var a=r[n],s=i.get(a);o[a]=s}return e.fn(o)};var o=i;function i(e,t){this.$injector=e,this.factories=t,this.instances=[]}})(powerbi=powerbi||{}),(function(e){(e.common||(e.common={})).createOptionsDialogBuilder=function(e,t,o){return new i(e,t,o)},t.prototype.show=function(e,t,o,i,n,r,a){var s=this.rootScope.$new(!0);if(_.isEmpty(i))return this.promiseFactory.resolve(s);null==a||a>i.length?s.selected=0:s.selected=a,s.options=_.map(i,(function(e){return e.name}));a=[new InJs.ModalDialogAction(n,function(){var e=i[s.selected].action;s.closeDialog(),setTimeout((function(){return e()}))}),new InJs.ModalDialogAction(r,function(){s.closeDialog()})];return this.modalDialogService.showLegacyWebModalDialog({dialogName:e,isDismissable:!0,scope:s,template:"<options-modal-dialog></options-modal-dialog>",dialogActions:a,containerCssClass:o,htmlMessageText:t})};var i=t;function t(e,t,o){this.modalDialogService=e,this.rootScope=t,this.promiseFactory=o}})(powerbi=powerbi||{}),(function(e){var t;function o(){return e.ensurePowerbiCommon().isCurrentContextRtl}(t=e.common||(e.common={})).getIsCurrentContextRtl=o,t.createRtl=function(){return{isRtlLayout:"True"===o()}}})(powerbi=powerbi||{}),(function(e){var E=e.common||(e.common={}),t=e.PbiPromise,s=(E.createScopedLazyProvider=function(e,t,o,i,n,r){var a=new s(e,t,o,i,n,r,{});return function(e){return a.get(e)}},o.prototype.get=function(D){return __awaiter(this,void 0,t,(function(){var t,o,i,n,r,a,s,l,c,d,u,p,m,h,g,f,v,y,b,S,w,C,T=this;return __generator(this,(function(e){switch(e.label){case 0:if((i=E.LazyScopedInterop.isInteropServiceName(D,E.LazyScopedInterop.ModernToLegacy))&&(D=E.LazyScopedInterop.getInteropServiceName(D,E.LazyScopedInterop.ModernToLegacy)),void 0!==(t=this.instances[D]))return[2,t.promise];if(t=this.instances[D]=this.promiseFactory.defer(!0),o=this.factories[D])return[3,5];if(i)return[3,4];if(!(i=this.scoped.get("lazyScopedProviderModern")))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,i.get(E.LazyScopedInterop.makeInteropServiceName(D,E.LazyScopedInterop.LegacyToModern))];case 2:return(n=e.sent())?(t.resolve(n),[2,n]):[3,4];case 3:return e.sent(),"Legacy-to-modern lazy scoped provider interop threw an exception for ".concat(D),[3,4];case 4:return t.reject(),[2,t.promise];case 5:if(n=o.ng,f=_.size(n),y=o.scoped,v=_.size(y),C=o.scopedModular,b=_.size(C),r=new Array(f+v+b),a=0,f)for(s=this.$inj,l=0,c=n;l<c.length;l++)g=c[l],d=void 0,d="$scope"===g?this.$scope:s.get(g,D),r[a++]=d;if(v)for(u=this.scoped,p=this.$scope,m=0,h=y;m<h.length;m++)g=h[m],r[a++]=u.get(g,p);if(!b)return[3,9];f=_.map(C,(function(e){return T.get(e)})),v=0,y=f,e.label=6;case 6:return v<y.length?(b=y[v],S=r,w=a++,[4,b]):[3,9];case 7:S[w]=e.sent(),e.label=8;case 8:return v++,[3,6];case 9:return[4,this.loader.require(o.source)];case 10:return C=e.sent(),t.resolve(o.fn.apply(o,__spreadArray([C],r||[],!1))),[2,t.promise]}}))}))},o);function o(e,t,o,i,n,r,a){this.loader=e,this.$inj=t,this.scoped=o,this.$scope=i,this.promiseFactory=n,this.factories=r,this.instances=a}})(powerbi=powerbi||{});;
"use strict";var powerbi;!(function(e){((e=(e=e.a11y||(e.a11y={})).util||(e.util={})).FocusUtility||(e.FocusUtility={})).isFocusInTree=function(e){var t=$(document.activeElement);return t.is(e)||0<t.closest(e).length}})(powerbi=powerbi||{}),(function(e){var i;e=(e=e.a11y||(e.a11y={})).directives||(e.directives={}),i=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],e.AccessibleClick=function(e){var n=this;this.$parse=e,this.retrict="A",this.scope=!1,this.compile=function(e,t){var r=n.$parse(t.accessibleClick);return function(t,n){n.on("click",(function(e){t.$apply((function(){return r(t,{$event:e})}))})),_.includes(i,n[0].nodeName)||n.on("keydown",(function(e){32!==e.keyCode&&13!==e.keyCode||!n.is(document.activeElement)||(e.preventDefault(),t.$apply((function(){return r(t,{$event:e})})))}))}}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).AlertOnEnter=function(e){var i=this;this.focusTracker=e,this.retrict="A",this.link=function(e,t,n){var n=n.alertOnEnter,r=i.focusTracker.announceOnFocusTransition(n,t.get(0),"inward","assertive",!1);e.$on("$destroy",(function(){r.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).AlertOnExit=function(e){var i=this;this.focusTracker=e,this.retrict="A",this.link=function(e,t,n){var n=n.alertOnExit,r=i.focusTracker.announceOnFocusTransition(n,t.get(0),"outward","assertive",!1);e.$on("$destroy",(function(){r.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).FocusOn=function(){this.restrict="A",this.link=function(e,n,t){var r=e.$watch(t.focusOn,(function(e,t){void 0!==e&&setTimeout((function(){jsCommon.FocusManager.focus(n[0])}),0)}));e.$on("$destroy",(function(){r()}))}}})(powerbi=powerbi||{}),(function(e){var s;function t(e,t){var o=this;this.$parse=e,this.focusTrapService=t,this.restrict="A",this.link=function(t,e,n){var r=e,i=(r.$$trapDestroyed=!1,n.focusOnEscape&&(r.$$escapeHandler=o.$parse(n.focusOnEscape),r.$$keydownHandler=function(e){return o.handleKeyEvent(e,t,r)},r.on(s.keyDownEventName,r.$$keydownHandler)),t.$watch((function(){return _.some(e.find(":tabbable"))}),(function(e,t){!0===e&&(o.focusTrapService.registerFocusTrap(r),i())})));r.on("$destroy",(function(){return o.destroy(r)}))}}e=(e=e.a11y||(e.a11y={})).directives||(e.directives={}),s=jsCommon.DOMConstants,t.prototype.destroy=function(e){e.$$trapDestroyed||(e.$$keydownHandler&&e.off(s.keyDownEventName,e.$$keydownHandler),this.focusTrapService.unregisterFocusTrap(e),e.$$trapDestroyed=!0)},t.prototype.handleKeyEvent=function(e,t,n){27===e.keyCode&&(n.$$escapeHandler&&t.$evalAsync(n.$$escapeHandler),this.destroy(n))},e.FocusTrap=t})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).KeyboardShortcuts=function(e){var o=this;this.shortcutsService=e,this.restrict="A",this.link=function(e,t,n){var r=jsCommon.FocusManager.setFocusOnPreviousElementOnDestroy(t,!0,!0),i=(t.on("$destroy",(function(){return r()})),o.shortcutsService.createElementShortcut(n.keyboardShortcuts,t.get(0)));i&&(o.shortcutsService.registerShortcut(i),e.$on("$destroy",(function(){return o.shortcutsService.unregisterShortcut(i)})))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).OnFocusEnter=function(e,t){var o=this;this.$parse=e,this.focusTracker=t,this.retrict="A",this.link=function(e,t,n){var r=o.$parse(n.onFocusEnter),i=o.focusTracker.onFocusTransition(t.get(0),"inward").subscribe((function(){return e.evalAsync(r)}));e.$on("$destroy",(function(){i.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).OnFocusExit=function(e,t){var o=this;this.$parse=e,this.focusTracker=t,this.retrict="A",this.link=function(e,t,n){var r=o.$parse(n.onFocusExit),i=o.focusTracker.onFocusTransition(t.get(0),"outward").subscribe((function(){return e.evalAsync(r)}));e.$on("$destroy",(function(){i.unsubscribe()}))}}})(powerbi=powerbi||{}),(function(e){((e=e.a11y||(e.a11y={})).directives||(e.directives={})).PbiAutoFocus=function(e){var o=this;this.$timeout=e,this.restrict="A",this.link=function(e,r,t){var i=e.$watch((function(){return r.is(":tabbable")||0<r.find(":tabbable").length}),(function(e,t){var n;!0===e&&((n=(r.is(":tabbable")?r:r.find(":tabbable")).get(0))&&o.$timeout((function(){return n.focus()}),500),i())}))}}})(powerbi=powerbi||{}),(function(e){var t;t=e.a11y||(e.a11y={}),angular.module("powerbi.a11y",[]),t.PbiA11yBaseBlockDefinitions=[{name:"AccessibleClick",dependencies:["$parse"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.AccessibleClick},{name:"FocusOn",blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.FocusOn},{name:"FocusTrap",dependencies:["$parse","focusTrapService"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.FocusTrap},{name:"PbiAutoFocus",dependencies:["$timeout"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.PbiAutoFocus},{name:"AlertOnEnter",dependencies:["focusTracker"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.AlertOnEnter},{name:"AlertOnExit",dependencies:["focusTracker"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.AlertOnExit},{name:"OnFocusEnter",dependencies:["$parse","focusTracker"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.OnFocusEnter},{name:"OnFocusExit",dependencies:["$parse","focusTracker"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.OnFocusExit},{name:"KeyboardShortcuts",dependencies:["shortcutsService"],blockType:1,consumerHostFlags:524287,factory:e.a11y.directives.KeyboardShortcuts}]})(powerbi=powerbi||{});;
"use strict";var powerbi,__awaiter=this&&this.__awaiter||function(e,n,s,l){return new(s=s||Promise)(function(i,t){function o(e){try{r(l.next(e))}catch(e){t(e)}}function a(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,a)}r((l=l.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(o,a){var r,n,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(i){return function(e){var t=[i,e];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(s=2&t[0]?n.return:t[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,t[1])).done)return s;switch(n=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,n=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=a.call(o,l)}catch(e){t=[6,e],n=0}finally{r=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};!(function(e){((e=e.connectivity||(e.connectivity={})).htmlTemplate||(e.htmlTemplate={})).put=function(e){e.put("components/authenticationDialog/authenticationDialog.html",'<modal-dialog class="authDialog" auth-dialog="$ctrl.viewModel" view-model="$ctrl.dialogModel" ng-if="$ctrl.viewModel.showModalDialog && !$ctrl.viewModel.showPlainUI" on-confirm-action="$ctrl.confirmDialog()" on-cancel-action="$ctrl.closeDialog()" on-close-action="$ctrl.closeDialog()"><label class="dialogTitle trimmedTextWithEllipsis" ng-bind="$ctrl.viewModel.dialogTitle" title="{{$ctrl.viewModel.dialogTitle}}"></label><authentication-dialog-body view-model="$ctrl.dialogBodyModel"></authentication-dialog-body></modal-dialog><div ng-if="$ctrl.viewModel.showModalDialog && $ctrl.viewModel.showPlainUI" class="authDialog plain"><authentication-dialog-body view-model="$ctrl.dialogBodyModel"></authentication-dialog-body><section ng-if="($ctrl.viewModel.learnMoreUrl && !$ctrl.viewModel.showTemplateAppsUI)" class="learnMoreLink"><label localize="GetData_NeedHelpConnecting"></label><a ng-href="{{$ctrl.viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></section><section ng-class="$ctrl.viewModel.showTemplateAppsUI ? \'template-app-mode-footer\' : \'action\'"><div class="go-to-app-doc" ng-if="($ctrl.viewModel.learnMoreUrl && $ctrl.viewModel.showTemplateAppsUI)"><a href="{{$ctrl.viewModel.learnMoreUrl}}" target="_blank" localize="GoToTheAppDoc" ng-click="$ctrl.sendNavigateToDocEvent()"></a><i class="glyphicon glyph-mini pbi-glyph-uprightarrow"></i></div><div ng-class="{\'template-app-mode-buttons-section\': $ctrl.viewModel.showTemplateAppsUI}"> <button ng-if="::$ctrl.viewModel.showBackButton" ng-click="$ctrl.goBack()" localize="Generic_Back" class="pbi-modern-button secondaryBtn back"></button> <button ng-click="$ctrl.confirmDialog()" ng-disabled="$ctrl.viewModel.isAuthenticating" class="pbi-modern-button primaryBtn sign-in">{{$ctrl.confirmDialogButtonText}}</button> <button ng-click="$ctrl.cancelDialog()" localize="Cancel_ButtonText" class="pbi-modern-button secondaryBtn cancelBtn cancel"></button></div></section></div>'),e.put("components/authenticationDialogBody/authenticationDialogBody.html",'<inline-name-value-pairs name-value-pairs="$ctrl.viewModel.errorDetails()" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="$ctrl.viewModel.authDialogModel.showError && !$ctrl.viewModel.authDialogModel.showTemplateAppsUI"><label ng-bind="$ctrl.viewModel.errorMessage()"></label></inline-name-value-pairs><section class="authForm" ng-class="::{\'template-apps-mode\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}" ng-style="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI ? {\'height\': $ctrl.calculateFormHeight() + \'px\'} : {}"><inline-name-value-pairs name-value-pairs="$ctrl.viewModel.errorDetails()" show-title="true" detail-expand="false" class="expandableBlockWarning inline-warning" ng-show="$ctrl.viewModel.authDialogModel.showError && $ctrl.viewModel.authDialogModel.showTemplateAppsUI"><label ng-bind="$ctrl.viewModel.errorMessage()"></label></inline-name-value-pairs><inline-message use-error-icon class="warning" ng-show="$ctrl.viewModel.showOAuthError()"><span ng-bind="$ctrl.viewModel.oAuthErrorMessage()"></span></inline-message><div class="proxyModelInfo" ng-if="::$ctrl.isProxyModel()"><label localize="AuthDialog_ProxyModelsText"></label><a href="https://go.microsoft.com/fwlink/?linkid=861818" localize="Generic_LearnMore" target="_blank"></a></div><section ng-class="::{\'template-apps-banner\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}"><section class="fields"><h2 ng-if="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI"> {{::$ctrl.viewModel.authDialogModel.connectingToLabelText}}</h2><section class="disabledField" ng-repeat="property in $ctrl.viewModel.authDialogModel.datasource.connectionStringGeneralProperties"> <span>{{property.name}}</span> <input type="text" class="textBox" value="{{property.value}}" aria-label="{{property.name}}" tabindex="-1" ng-disabled="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI"/></section></section><section ng-if="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI" class="illustration-section"> <img class="illustration" src="{{$ctrl.templateAppImgUrl}}"></section></section><div ng-class="::{\'scrollable\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}"><section class="group" ng-if="$ctrl.viewModel.authDialogModel.datasource.credentialTypesNames"><label id="authLabel" localize="AuthDialog_FieldName_Authentication"></label><div class="select-box"> <select ng-class="::{\'template-apps-select\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}" ng-model="$ctrl.viewModel.authDialogModel.selectedAuthenticationIndex" ng-change="$ctrl.customizeAuthDialog()" aria-labelledby="authLabel" ng-options="$ctrl.viewModel.authDialogModel.datasource.credentialTypesNames.indexOf(credentialType) as credentialType for credentialType in $ctrl.viewModel.authDialogModel.datasource.credentialTypesNames" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner || $ctrl.disableAuthSelection"></select> <button ng-if="$ctrl.disableAuthSelection" ng-click="$ctrl.enableAuthSelection()" localize-attr="{\'aria-label\': \'AuthDialog_Edit_Auth_AltText\'}" class="glyphicon pbi-glyph glyph-small edit-toggle pbi-glyph-edit" localize-tooltip="AuthDialog_Edit_Auth_Tooltip"></button></div></section><section class="editableField1" ng-if="$ctrl.viewModel.authDialogModel.showEditableField1"> <span>{{$ctrl.viewModel.authDialogModel.editableField1Label}}</span> <input type="text" class="textBox" aria-label="{{viewModel.editableField1Label}}" value="{{$ctrl.viewModel.authDialogModel.editableField1Value}}" ng-model="$ctrl.viewModel.authDialogModel.editableField1Value" ng-change="$ctrl.dismissSpinnerError()" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner" focus-on="true" required/></section><section class="editableField2" ng-if="$ctrl.viewModel.authDialogModel.showEditableField2"> <span>{{$ctrl.viewModel.authDialogModel.editableField2Label}}</span> <input type="password" class="textBox" aria-label="{{viewModel.editableField2Label}}" value="{{$ctrl.viewModel.authDialogModel.editableField2Value}}" ng-model="$ctrl.viewModel.authDialogModel.editableField2Value" ng-change="$ctrl.dismissSpinnerError()" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner" required/></section><section class="privacyLevelField group" ng-if="!$ctrl.isRDLReport() && $ctrl.viewModel.authDialogModel.privacyLevelOptions"><label id="privacylevellabel" localize="AuthDialog_FieldName_PrivacyLevel"></label><a ng-if="::$ctrl.viewModel.authDialogModel.showTemplateAppsUI" class="learn-more-link" target="_blank" href="https://go.microsoft.com/fwlink/?linkid=2137668" localize="LearnMore"></a><div class="select-box"> <select ng-class="::{\'template-apps-select\': $ctrl.viewModel.authDialogModel.showTemplateAppsUI}" ng-model="$ctrl.viewModel.authDialogModel.selectedPrivacyLevelIndex" ng-change="$ctrl.customizeAuthDialog()" aria-labelledby="privacylevellabel" ng-options="$ctrl.viewModel.authDialogModel.privacyLevelOptions.indexOf(privacyLevel) as privacyLevel for privacyLevel in $ctrl.viewModel.authDialogModel.privacyLevelOptions" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner || $ctrl.viewModel.authDialogModel.disablePrivacySelection"></select> <button ng-if="$ctrl.viewModel.authDialogModel.disablePrivacySelection" localize-attr="{\'aria-label\': \'AuthDialog_Edit_Privacy_AltText\'}" ng-click="$ctrl.enablePrivacySelection()" class="glyphicon pbi-glyph glyph-small edit-toggle pbi-glyph-edit pbi-focus-outline" localize-tooltip="AuthDialog_Edit_Privacy_Tooltip"></button></div></section><section class="singleSignOnSettingCheckBox" ng-if="$ctrl.viewModel.authDialogModel.showSingleSignOn"><pbi-checkbox id="singleSignOnForCloudDQ" ng-model="$ctrl.viewModel.authDialogModel.isSingleSignOnEnabled" no-label></pbi-checkbox><div><label localize="AuthDialog_Checkbox_SingleSignOnText" for="singleSignOnForCloudDQ_pbi"></label><a target="_blank" href="https://go.microsoft.com/fwlink/?linkid=861818" localize="LearnMore"></a></div></section><div class="waitingMessageWhenApplyOAuthCredential" ng-if="$ctrl.viewModel.authDialogModel.showWaitingMessageForOAuth"></div><div class="detailsMessage" ng-if="$ctrl.viewModel.authDialogModel.showDetailsMessage"> <span>{{$ctrl.viewModel.authDialogModel.detailsMessage}}</span></div><div class="singleSignOnSettingCheckBox" ng-if="$ctrl.viewModel.authDialogModel.skipTestConnectionOption"><pbi-checkbox id="skipTestConnection" ng-model="$ctrl.viewModel.authDialogModel.skipTestConnection" label="AuthDialog_Checkbox_SkipTestConnection"></pbi-checkbox></div></div><spinner class="signInSpinner" ng-show="$ctrl.viewModel.authDialogModel.showSpinner"></spinner></section>'),e.put("views/authDialogBodyView.html",'<div><inline-name-value-pairs name-value-pairs="errorDetails" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showError"><span ng-bind="errorMessage"></span></inline-name-value-pairs><div class="authForm"><inline-message use-error-icon class="warning" ng-show="showOAuthError"><span ng-bind="oAuthErrorMessage"></span></inline-message><inline-message use-error-icon class="inlineWarning" ng-show="showOAuthNotSupported"><span localize="OAuth_Not_Supported_Error"></span></inline-message><div class="disabledField" ng-repeat="property in viewModel.datasource.connectionStringGeneralProperties"> <label>{{property.name}}</label> <input type="text" aria-label="{{property.name}}" class="textBox" value="{{property.value}}"/></div><div class="group" ng-if="viewModel.datasource.credentialTypesNames"><label id="authlabel" localize="AuthDialog_FieldName_Authentication"></label> <select ng-model="viewModel.selectedAuthenticationIndex" ng-change="customizeAuthDialog()" aria-labelledby="authlabel" ng-options="viewModel.datasource.credentialTypesNames.indexOf(credentialType) as credentialType for credentialType in viewModel.datasource.credentialTypesNames" ng-disabled="viewModel.showSpinner"></select></div><div class="editableField1" ng-if="viewModel.showEditableField1"> <span>{{viewModel.editableField1Label}}</span> <input type="text" class="textBox" aria-label="{{viewModel.editableField1Label}}" value="{{viewModel.editableField1Value}}" ng-model="viewModel.editableField1Value" ng-change="dismissSpinnerError()" ng-disabled="viewModel.showSpinner" focus-on="true" required/></div><div class="editableField2" ng-if="viewModel.showEditableField2"> <span>{{viewModel.editableField2Label}}</span> <input type="password" class="textBox" aria-label="{{viewModel.editableField2Label}}" value="{{viewModel.editableField2Value}}" ng-model="viewModel.editableField2Value" ng-change="dismissSpinnerError()" ng-disabled="viewModel.showSpinner" required/></div><div class="privacyLevelField group" ng-if="viewModel.privacyLevelOptions"><label id="privacylevellabel" localize="AuthDialog_FieldName_PrivacyLevel"></label> <select ng-model="viewModel.selectedPrivacyLevelIndex" ng-change="customizeAuthDialog()" aria-labelledby="privacylevellabel" ng-options="viewModel.privacyLevelOptions.indexOf(privacyLevel) as privacyLevel for privacyLevel in viewModel.privacyLevelOptions" ng-disabled="viewModel.showSpinner"></select></div><div class="singleSignOnSettingCheckBox" ng-if="viewModel.showSingleSignOn"> <input id="singleSignOnForCloudDQ" type="checkbox" ng-model="viewModel.isSingleSignOnEnabled"/><label localize="AuthDialog_Checkbox_SingleSignOnText" for="singleSignOnForCloudDQ"></label><a target="_blank" href="https://go.microsoft.com/fwlink/?linkid=861818" localize="LearnMore"></a></div><div class="waitingMessageWhenApplyOAuthCredential" ng-if="viewModel.showWaitingMessageForOAuth"></div><div class="detailsMessage" ng-if="viewModel.showDetailsMessage"> <span>{{viewModel.detailsMessage}}</span></div><div class="singleSignOnSettingCheckBox" ng-if="viewModel.skipTestConnectionOption"> <input id="skipTestConnection" type="checkbox" ng-model="viewModel.skipTestConnection"/><label localize="AuthDialog_Checkbox_SkipTestConnection" for="skipTestConnection"></label></div><spinner class="signInSpinner" ng-show="viewModel.showSpinner"></spinner></div></div>'),e.put("views/authDialogView.html",'<div><modal-dialog class="authDialog" auth-dialog="viewModel" view-model="dialogModel" ng-if="viewModel.showModalDialog && !viewModel.showPlainUI" on-confirm-action="confirmDialog()" on-cancel-action="cancelDialog()" on-close-action="closeDialog()"><div class="title trimmedTextWithEllipsis"><span ng-bind="viewModel.dialogTitle" title="{{::viewModel.dialogTitle}}"></span></div><div class="auth-form-scrollable-region" ng-include="\'views/authDialogBodyView.html\'"></div></modal-dialog><div ng-if="viewModel.showModalDialog && viewModel.showPlainUI" class="authDialog plain"><div ng-include="\'views/authDialogBodyView.html\'" class="authDialogContent"></div><div ng-if="viewModel.learnMoreUrl" class="learnMoreLink"><span localize="GetData_NeedHelpConnecting"></span><a ng-href="{{::viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></div><div class="action"> <button ng-click="confirmDialog()" ng-disabled="viewModel.isAuthenticating" class="primary signin" localize="AuthDialog_LinkText_SignIn"></button> <button ng-click="cancelDialog()" localize="Cancel_ButtonText" class="cancel"></button></div></div></div>'),e.put("views/datasetParametersDialogBodyView.html",'<div><form name="parametersForm" class="parametersForm" ng-submit="confirmDialog()"><div ng-init="viewModel.parametersForm = parametersForm" class="parameterGroup"><div class="parameter" ng-repeat="parameter in viewModel.datasetModel.dataset.parameters"><span tabindex="-1" class="fieldName" ng-bind="parameter.name"></span><span class="description" tabindex="-1" ng-bind="parameter.description"></span> <input class="textBox" type="text" placeholder="{{parameter.sample}}" ng-model="parameter.value" ng-disabled="viewModel.showSpinner" autofocus tabindex="{{$index + 1}}" required ng-pattern="parameter.valueValidator" ng-change="enableConfirmButton()"></div></div></form></div><div class="action" ng-if="viewModel.showDatasetParametersDialog && viewModel.showPlainUI"> <button class="primary next" ng-click="confirmDialog()" localize="DatasetParametersDialog_NextButtonText" ng-disabled="dialogModel.isConfirmButtonDisabled"></button> <button class="cancel" ng-click="closeDialog()" localize="Cancel_ButtonText"></button></div>'),e.put("views/datasetParametersDialogView.html",'<div><modal-dialog class="datasetParametersDialog" view-model="dialogModel" ng-if="viewModel.showDatasetParametersDialog && !viewModel.showPlainUI" on-confirm-action="confirmDialog()" on-cancel-action="closeDialog()" on-close-action="closeDialog()"><div class="title trimmedTextWithEllipsis"><span ng-bind="viewModel.dialogTitle" title="{{::viewModel.dialogTitle}}"></span></div><div class="description">{{::viewModel.datasetModel.dataset.description}}</div><span localize="DatasetParametersDialog_HelpMessage"></span><a ng-click="relocateToLink()" href=""><span localize="LearnMore"></span></a><div class="datasetParametersDialogContentModal" ng-include="\'views/datasetParametersDialogBodyView.html\'"></div><spinner class="parametersSpinner" ng-if="viewModel.showSpinner"></spinner><div class="validationError" ng-if="viewModel.showValidationError"><inline-name-value-pairs name-value-pairs="viewModel.invalidParameterNameValuePairs" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showValidationError"><span localize="DatasetParametersDialog_ValidationError"></span></inline-name-value-pairs></div></modal-dialog><div ng-if="viewModel.showDatasetParametersDialog && viewModel.showPlainUI" class="datasetParametersDialog plain"><div class="validationError" ng-if="viewModel.showValidationError"><inline-name-value-pairs name-value-pairs="viewModel.invalidParameterNameValuePairs" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showValidationError"><span localize="DatasetParametersDialog_ValidationError"></span></inline-name-value-pairs></div><div ng-include="\'views/datasetParametersDialogBodyView.html\'" class="datasetParametersDialogContent"></div><div ng-if="viewModel.learnMoreUrl" class="learnMoreLink"><span localize="GetData_NeedHelpConnecting"></span><a ng-href="{{::viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></div><div ng-if="viewModel.showSpinner"><spinner class="parametersSpinner"></spinner><div class="credsSpinner" localize="DatasetParametersDialog_SearchingForCredentials"></div></div></div></div>')}})(powerbi=powerbi||{}),(function(i){var e,t,o;function a(){o||(i.common.initializeAngularModule(),angular.module("powerbi.connectivity.controllers",[]),angular.module("powerbi.connectivity.directives",[]),angular.module("powerbi.connectivity.components",[]),angular.module("powerbi.connectivity",["powerbi.common","powerbi.connectivity.controllers","powerbi.connectivity.directives","powerbi.connectivity.components"]).run(["$templateCache",t]),o=!0)}e=i.connectivity||(i.connectivity={}),t=i.connectivity.htmlTemplate.put,e.initializeAngularModule=a,o=!1,a(),e.registerBuildingBlocksForHost=function(e){var t=[{name:"AuthDialog",blockType:1,consumerHostFlags:12,factory:i.connectivity.directives.AuthDialog},{name:"AuthenticationDialog",blockType:2,consumerHostFlags:12,factory:i.connectivity.components.AuthenticationDialog},{name:"AuthenticationDialogBody",blockType:2,consumerHostFlags:12,factory:i.connectivity.components.AuthenticationDialogBody},{name:"DatasetParametersDialog",blockType:1,consumerHostFlags:12,factory:i.connectivity.directives.DatasetParametersDialog}];i.common.registerBuildingBlocksForHost(e,t,{componentsTarget:"powerbi.connectivity",directivesTarget:"powerbi.connectivity.directives"})}})(powerbi=powerbi||{}),(function(i){var e,l,o;function a(){}e=(e=i.connectivity||(i.connectivity={})).helpers||(e.helpers={}),l=i.common.constants,o=window,a.convertTestPackageConnectionDetailsToErrorMessage=function(e,t){return["SharePointProviderUnableToGetFilesAndFolders","SharePointProviderUnableToGetFileProperties","SharePoint_ItemNotExist","SharePoint_FileNotFound","OneDriveProviderUnableToGetFileProperties"].indexOf(e.faultCode)<0?t.get("ErrorMessage_DefaultTitle"):t.get("SettingsDataset_OneDrive_FileNotFound")},a.retrieveUnderlyingErrorMessageFromPowerBIServiceException=function(e,t){return e?a.retrieveErrorDetailsMessageFromPowerBIServiceException(e.error,t):null},a.retrieveErrorDetailsMessageFromPowerBIServiceException=function(e,t){if(e&&e["pbi.error"]&&e["pbi.error"].details){e=e["pbi.error"].details.filter((function(e){return e.code===t}));if(!_.isEmpty(e))return"PaginatedReportAuthoringError"===t?a.removePiiTag(e[0].detail.value):e[0].detail.value}return null},a.convertHttpResultToNameValuePairs=function(e,t){return e?[{Name:t.get("AdditionalErrorInfo_ActivityIdText"),Value:e.activityId},{Name:t.get("AdditionalErrorInfo_RequestIdText"),Value:e.requestId},{Name:t.get("AdditionalErrorInfo_ErrorCodeText"),Value:e.status.toString()},{Name:t.get("AdditionalErrorInfo_TimestampText"),Value:(new Date).toString()},{Name:t.get("PowerBI_Build_Version_Text"),Value:i.getBuild()},{Name:t.get("PowerBI_Client_Version_Text"),Value:i.getClientVersion()},{Name:t.get("AdditionalErrorInfo_ClusterUriText"),Value:o.clusterUri}]:null},a.convertInvalidParameterErrorToNameValuePairs=function(e){try{var t=e.error;if(null==t||t.code!==l.ContentProviderInvalidModelParameterErrorCode||null==t["pbi.error"]||null==t["pbi.error"].details||0===t["pbi.error"].details.length)return null;for(var i=[],o=0,a=t["pbi.error"].details;o<a.length;o++){var r,n,s=a[o];null!=s&&null!=s.code&&null!=s.detail&&null!=s.detail.value&&(r=s.code,n=s.detail.value,i.push({Name:r,Value:n}))}return i}catch(e){return null}},a.removePiiTag=function(e){return null==e?void 0:e.replace(/<pii>|<\/pii>/gm,"")},e.ErrorConverterHelper=a})(powerbi=powerbi||{}),(function(e){function t(){}e=(e=e.connectivity||(e.connectivity={})).helpers||(e.helpers={}),t.alwaysPromptForCredentials=function(e,t){if(null!=e||null!=t)return e&&e.alwaysPromptForContentProviderCreds||t&&t.alwaysPrompt},e.DatasetParametersDialogHelper=t})(powerbi=powerbi||{}),(function(i){var e,t,o;function a(e,t){this.services=t,this.templateAppImgUrl="".concat(i.getBuild(),"/images/template-apps-auth-dialog.png")}e=(e=i.connectivity||(i.connectivity={})).controllers||(e.controllers={}),t=i.common.contracts.gateway.CredentialType,o=i.common.contracts.gateway.SingleSignOnType,a.createOptions=function(){return{additionalServices:["localizationService"]}},a.prototype.$onInit=function(){this.initAuthDialog()},a.prototype.dismissSpinnerError=function(){this.viewModel.authDialogModel.showSpinner=!1,this.viewModel.authDialogModel.showError=!1,this.viewModel.authDialogModel.isAuthenticating=!1},a.prototype.enableAuthSelection=function(){this.viewModel.authDialogModel.disableAuthSelection=!1},a.prototype.enablePrivacySelection=function(){this.viewModel.authDialogModel.disablePrivacySelection=!1},a.prototype.isProxyModel=function(){var e=this.viewModel.authDialogModel.datasource.connectionStringGeneralProperties;return e&&0<e.length&&"server"===e[0].name&&(_.startsWith(e[0].value,"powerbi://")||_.startsWith(e[0].value,"asazure://"))},a.prototype.customizeAuthDialog=function(){var e=this.viewModel.authDialogModel;switch(this.resetAuthDialogState(),e.datasource.credentialTypes[e.selectedAuthenticationIndex]){case t.Anonymous:case t.WindowsWithoutImpersonation:this.customizeAuthDialogShowNothing();break;case t.Basic:this.customizeAuthDialogShowUserNameAndPassword();break;case t.OAuth2:this.customizeAuthDialogShowSignIn();break;case t.Key:this.customizeAuthDialogShowAccountKey();break;case t.Windows:this.customizeAuthDialogShowDetailsMessage(this.services.localizationService.get("AuthDialog_DetailsMessage_WindowsAuth"));break;case t.SAS:this.customizeAuthDialogShowSAS()}},a.prototype.isRDLReport=function(){return 0===this.viewModel.authDialogModel.assetType},a.prototype.initAuthDialog=function(){var e=this.viewModel.authDialogModel;e.selectedAuthenticationIndex||(e.selectedAuthenticationIndex=0),e.skipTestConnection||(e.skipTestConnection=!1),e.editableField1Value="",e.editableField2Value="",e.showSingleSignOn=e.allowSingleSignOn,e.isSingleSignOnEnabled=null!=e.datasource&&e.datasource.singleSignOnType===o.AzureActiveDirectory,this.customizeAuthDialog(),this.dismissSpinnerError(),this.handleTemplateAppsUIHeightOnResize()},a.prototype.resetAuthDialogState=function(){this.viewModel.authDialogModel.isAuthenticating=!1},a.prototype.customizeAuthDialogShowNothing=function(){this.viewModel.authDialogModel.showEditableField1=!1,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.editableField1Label="",this.viewModel.authDialogModel.showDetailsMessage=!1},a.prototype.customizeAuthDialogShowUserNameAndPassword=function(){this.viewModel.authDialogModel.showEditableField1=!0,this.viewModel.authDialogModel.showEditableField2=!0,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.showDetailsMessage=!1,this.viewModel.authDialogModel.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_Username"),this.viewModel.authDialogModel.editableField2Label=this.services.localizationService.get("AuthDialog_FieldName_Password")},a.prototype.customizeAuthDialogShowAccountKey=function(){this.viewModel.authDialogModel.showEditableField1=!0,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_AccountKey")},a.prototype.customizeAuthDialogShowSAS=function(){this.viewModel.authDialogModel.showEditableField1=!0,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_SAS")},a.prototype.customizeAuthDialogShowSignIn=function(){this.viewModel.authDialogModel.showEditableField1=!1,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.showDetailsMessage=!1},a.prototype.customizeAuthDialogShowDetailsMessage=function(e){this.viewModel.authDialogModel.showEditableField1=!1,this.viewModel.authDialogModel.showEditableField2=!1,this.viewModel.authDialogModel.showWaitingMessageForOAuth=!1,this.viewModel.authDialogModel.editableField1Label="",this.viewModel.authDialogModel.showDetailsMessage=!0,this.viewModel.authDialogModel.detailsMessage=e},a.prototype.handleTemplateAppsUIHeightOnResize=function(){var e,t=this;this.viewModel.authDialogModel.showTemplateAppsUI&&(e=_.debounce((function(){$(".template-apps-mode").height(t.calculateFormHeight())}),50),$(window).on("resize",e))},a.prototype.calculateFormHeight=function(){if(this.viewModel.authDialogModel.showTemplateAppsUI)return $(".app-install-config-dialog").height()-208},e.AuthenticationDialogBodyController=a})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).components||(t.components={})).AuthenticationDialogBody={templateUrl:"components/authenticationDialogBody/authenticationDialogBody.html",bindings:{viewModel:"<"},controller:e.common.createController(t.controllers.AuthenticationDialogBodyController)}})(powerbi=powerbi||{}),(function(h){var e,i,t,o,a,r,n,s,v,l,c,d,u,p,g;function m(e,t){this.services=t,this.initialized=!1,this.loginWindow=null;t=this.services.featureSwitchService.featureSwitches;this.provideStaticOAuthOption=t.ProvideStaticOAuthOption}e=(e=h.connectivity||(h.connectivity={})).controllers||(e.controllers={}),i=h.common.constants.contentProviderStoreCloseModalDialogMessage,t=h.common.constants.contentProviderStoreCancelModalDialogMessage,o=h.common.constants.contentProviderStoreGoBackModalDialogMessage,a=h.common.constants.contentProviderStoreGoToAppDocModalDialogMessage,r=h.common.constants,n=h.common.contracts.gateway.CredentialType,s=h.common.EncryptionContext,v=h.connectivity.helpers.ErrorConverterHelper,l=h.common.models.ModalDialogModel,c=h.common.models,d=h.common.contracts.gateway.PrivacyLevel,u=h.common.contracts.gateway.SingleSignOnType,p=h.common.models.TestConnectionState,g=window,m.createOptions=function(){return{additionalServices:["$window","localizationService","moduleLoader","promiseFactory","telemetryService","featureSwitchService","lazyProviderModern"]}},m.prototype.$onInit=function(){return __awaiter(this,void 0,h.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.initialized=!0,[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.initModalDialog(),this.getEntropy(),[2]}}))}))},m.prototype.$onChanges=function(e){var t;e&&(null==(t=null==(t=null==(t=e.viewModel)?void 0:t.currentValue)?void 0:t.datasource)?void 0:t.datasourceId)!==(null==(t=null==(e=null==(t=e.viewModel)?void 0:t.previousValue)?void 0:e.datasource)?void 0:t.datasourceId)&&this.initModalDialog()},m.prototype.$onDestroy=function(){this.removeWindowEventListenerIfExists()},m.prototype.goBack=function(){this.closeDialog(o)},m.prototype.cancelDialog=function(){var e=this.viewModel.sendCancelMessage?t:i;this.closeDialog(e)},m.prototype.sendNavigateToDocEvent=function(){this.sendMessage(a)},m.prototype.closeDialog=function(e){var t=this;void 0===e&&(e=i),this.viewModel.showModalDialog=!1,this.sendMessage(e),setTimeout((function(){t.notifyCloseDialog&&t.notifyCloseDialog()}),0)},m.prototype.confirmDialog=function(){this.viewModel.showError=!1;var e=this.dialogBodyModel.authDialogModel;if(e.skipTestConnection||this.services.featureSwitchService.featureSwitches.skipRequiredDatsourceCredentials||!(e.showEditableField1&&!e.editableField1Value||e.showEditableField2&&!e.editableField2Value))if(this.viewModel.allowSingleSignOn&&this.isSingleSignOnChanged())this.updateSingleSignOn();else{if(this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex]===n.OAuth2){if(void 0===this.oAuthResponse&&this.provideStaticOAuthOption)return void this.getOAuthDetailsAndSignInThroughOAuth();if(void 0===this.oAuthResponse)return void this.signInThroughOAuth()}this.viewModel.showSpinner=!0,this.dialogModel.isConfirmButtonDisabled=!0,this.viewModel.isAuthenticating=!0,this.viewModel.datasource.isCloudDirectQuery?this.updateCloudDirectQueryCredentials():this.updateDatasourceRequest()}else this.viewModel.showError=!0,this.errorMessage=this.services.localizationService.get("ModalDialogButtonText_FillInRequiredFields"),this.errorDetails=null},m.prototype.sendMessage=function(e){var t;this.viewModel.showPlainUI&&null!=(t=this.services.$window.parent)&&t.postMessage(JSON.stringify({message:e}),r.hostOrigin)},m.prototype.initModalDialog=function(){var e,t,i,o=this;this.initialized&&(this.dialogModel=new l(!1,this.services.localizationService.get("AuthDialog_LinkText_SignIn"),!0,this.services.localizationService,!1,!1,!1),e=this.dialogModel,t=this.viewModel,i=this.services.localizationService,e.cancelButtonText=i.get("ModalDialogButtonText_Cancel"),e.isConfirmButtonDisabled=!1,e.autoCloseDialogOnConfirmButtonSelected=!1,e.confirmButtonImportance=c.ButtonImportance.Elevated,e.cancelButtonImportance=c.ButtonImportance.Elevated,this.showOAuthError=!1,this.confirmDialogButtonText=this.viewModel.showTemplateAppsUI?this.viewModel.confirmDialogButtonText:i.get("AuthDialog_LinkText_SignIn"),t.showModalDialog=!0,t.showError=!1,t.showSingleSignOn=this.viewModel.allowSingleSignOn,t.isSingleSignOnEnabled=null!=this.viewModel.datasource&&this.viewModel.datasource.singleSignOnType===u.AzureActiveDirectory,this.oAuthErrorMessage=i.get("OAuth_Security_Error"),this.oAuthResponse=void 0,this.errorMessage=void 0,this.errorDetails=void 0,this.loginWindow=null,this.dialogBodyModel={authDialogModel:this.viewModel,errorDetails:function(){return o.errorDetails},errorMessage:function(){return o.errorMessage},showOAuthError:function(){return o.showOAuthError},oAuthErrorMessage:function(){return o.oAuthErrorMessage}},this.removeWindowEventListenerIfExists())},m.prototype.ensureGatewaysMetadataServiceLoaded=function(){return __awaiter(this,void 0,h.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return this.gatewaysMetadataService?[3,2]:[4,(t=this).services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","gatewaysMetadataService")];case 1:t.gatewaysMetadataService=e.sent(),e.label=2;case 2:return[2]}}))}))},m.prototype.getEntropy=function(){return __awaiter(this,void 0,h.Promise,(function(){var o=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.gatewaysMetadataService.getEntropy().then((function(e){if(e){o.entropy=[];for(var t=e.length,i=0;i<t;i++)o.entropy.push(e.charCodeAt(i))}else o.entropy=s.generateEntropy()})),[2]}}))}))},m.prototype.isSingleSignOnChanged=function(){var e=this.viewModel.isSingleSignOnEnabled,t=this.viewModel.datasource.singleSignOnType;return e&&t!==u.AzureActiveDirectory||!e&&t!==u.None},m.prototype.updateCloudDirectQueryCredentials=function(){return __awaiter(this,void 0,h.Promise,(function(){var t,i,o,a=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.localizationService,i=this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex],o=this.getCredentialsFromInput(),o={credentials:JSON.stringify(o),credentialType:i,encryptedConnection:0,privacyLevel:d.Public,encryptionAlgorithm:"none",skipTestConnection:this.viewModel.skipTestConnection},[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.gatewaysMetadataService.updateCredentials(this.viewModel.datasource.gatewayObjectId,this.viewModel.datasource.dataSourceObjectId,o).then((function(){var e;a.resetModelAfterAuthentication(!1),a.viewModel.datasource.testConnectionState=p.Passed,a.datasetDatasourceUpdated&&(e={name:(e=a.viewModel.datasource).name||e.fullName},a.datasetDatasourceUpdated(e)),a.closeDialog()}),(function(e){a.resetModelAfterAuthentication(!0),a.errorMessage=t.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),a.errorDetails=v.convertHttpResultToNameValuePairs(e,a.services.localizationService)})),[2]}}))}))},m.prototype.updateSingleSignOn=function(){return __awaiter(this,void 0,h.Promise,(function(){var t,i=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.localizationService,[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.gatewaysMetadataService.updateDataSource(this.viewModel.datasource.gatewayObjectId,this.viewModel.datasource.dataSourceObjectId,{dataSourceType:null,onPremGatewayRequired:null,connectionDetails:null,credentialDetails:null,dataSourceAnnotation:null,supportedAuthenticationTypes:null,singleSignOnType:!0===this.viewModel.isSingleSignOnEnabled?u.AzureActiveDirectory:u.None}).then((function(){i.resetModelAfterAuthentication(!1),i.viewModel.datasource.singleSignOnType=i.viewModel.isSingleSignOnEnabled?u.AzureActiveDirectory:u.None,i.confirmDialog()}),(function(e){i.resetModelAfterAuthentication(!0),i.errorMessage=t.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),i.errorDetails=v.convertHttpResultToNameValuePairs(e,i.services.localizationService)})),[2]}}))}))},m.prototype.getCredentialsFromInput=function(){switch(this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex]){case n.Anonymous:case n.Windows:case n.WindowsWithoutImpersonation:return this.getEmptyCredentialDetails();case n.Basic:return this.getCredentialDetailsUsernameAndPassword();case n.Key:return this.getCredentialDetailsKey();case n.OAuth2:return this.getCredentialDetailsRedirectEndpoint();case n.SAS:return this.getCredentialDetailsSAS()}},m.prototype.updateDatasourceCredentials=function(o){return __awaiter(this,void 0,h.Promise,(function(){var t,i=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.promiseFactory.defer(),[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.gatewaysMetadataService.updateCredentials(this.viewModel.datasource.gatewayObjectId,this.viewModel.datasource.dataSourceObjectId,o).then((function(){i.resetModelAfterAuthentication(!1),i.viewModel.datasource.testConnectionState=c.TestConnectionState.Passed,i.viewModel.datasource.selectedPrivacyLevel=o.privacyLevel,i.viewModel.validateParameters?i.validateParameters().finally((function(){t.resolve(null)})):(i.updateDataSourceComplete(),t.resolve(null))}),(function(e){i.errorMessage=i.services.localizationService.format("UpdateDatasourceCredential_Error_Title",[v.retrieveUnderlyingErrorMessageFromPowerBIServiceException(e.data,"DM_ErrorDetailNameCode_UnderlyingErrorMessage")]),i.errorDetails=v.convertHttpResultToNameValuePairs(e,i.services.localizationService),i.resetModelAfterAuthentication(!0),t.reject(e)})),[2,t.promise]}}))}))},m.prototype.validateParameters=function(){return __awaiter(this,void 0,h.Promise,(function(){var t,i,o,a=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.promiseFactory.defer(),[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.shouldRunValidateParametersOnImport()?(i=this.createValidateParametersEvent(),this.gatewaysMetadataService.validateParametersBeforeImport(this.viewModel.providerKey,this.viewModel.dataAccessInfo,i.event).then((function(e){a.handleParameterValidationSuccessResult(i)}),(function(e){a.handleParameterValidationErrorResult(e,i)})).finally((function(){return t.resolve(null)}))):this.shouldRunValidateParametersOnUpdate()?(o=this.createValidateParametersEvent(),this.gatewaysMetadataService.validateParametersBeforeUpdate(this.viewModel.datasource.modelId,o.event).then((function(e){a.handleParameterValidationSuccessResult(o)}),(function(e){a.handleParameterValidationErrorResult(e,o)})).finally((function(){return t.resolve(null)}))):t.resolve(null),[2,t.promise]}}))}))},m.prototype.createValidateParametersEvent=function(){return this.services.telemetryService.startEvent(h.telemetry.MashUpContentProviderValidateParameters,{providerId:this.viewModel.providerId,providerKey:this.viewModel.providerKey,isImport:this.viewModel.isImportScenario})},m.prototype.shouldRunValidateParametersOnImport=function(){return this.viewModel.isImportScenario&&null!=this.viewModel.dataAccessInfo&&null!=this.viewModel.providerKey},m.prototype.shouldRunValidateParametersOnUpdate=function(){return!this.viewModel.isImportScenario&&null!=this.viewModel.datasource&&null!=this.viewModel.datasource.modelId},m.prototype.sendUpdateDatasourceRequest=function(e){var t,i,o=this,a=this.services.telemetryService,a=(this.viewModel.showError=!1,t=this.viewModel.isImportScenario?a.startEvent(h.telemetry.MashUpContentProviderUpdateDatasource,{providerId:this.viewModel.providerId}):a.startEvent(h.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:this.viewModel.providerId}),this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex]);this.viewModel.datasource.onpremGatewayRequired?(i=atob(this.viewModel.personalGateway.gatewayPublicKey).split(/<\/Modulus>|<Modulus>/)[1],this.encryptCredentials(e,i,a,this.entropy).then((function(e){o.updateDatasourceCredentials(e).then((function(){t.resolve()}),(function(e){t.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error))}))}))):(i=a===n.Anonymous?d.Public:d.Private,e={credentials:JSON.stringify(e),credentialType:a,encryptedConnection:this.viewModel.datasource.datasourceType===h.common.contracts.gateway.DataSourceType.PostgreSql?0:2,privacyLevel:null==this.viewModel.selectedPrivacyLevelIndex?i:this.viewModel.privacyLevelMapping.indexOf(this.viewModel.privacyLevelOptions[this.viewModel.selectedPrivacyLevelIndex]),encryptionAlgorithm:"none",skipTestConnection:this.viewModel.skipTestConnection},this.updateDatasourceCredentials(e).then((function(){t.resolve()}),(function(e){t.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error))})))},m.prototype.handleParameterValidationSuccessResult=function(e){e.resolve(),this.updateDataSourceComplete()},m.prototype.handleParameterValidationErrorResult=function(e,t){t.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error));t=v.convertInvalidParameterErrorToNameValuePairs(e);!_.isEmpty(t)&&(this.datasetShowParameterDialogAfterInvalidParameter&&this.datasetShowParameterDialogAfterInvalidParameter({error:t}),this.viewModel.isImportScenario)||this.updateDataSourceComplete()},m.prototype.updateDataSourceComplete=function(){var e=this.viewModel.datasource,e=e.name||e.fullName;this.datasetDatasourceUpdated&&this.datasetDatasourceUpdated({name:e}),this.datasetShowDatasourceUpdatedNotification&&this.datasetShowDatasourceUpdatedNotification({name:e}),this.viewModel.leaveShowing||this.closeDialog()},m.prototype.sendUpdatePackageRequest=function(u){return __awaiter(this,void 0,h.Promise,(function(){var t,i,o,a,r,n,s,l,c,d=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.telemetryService,i=this.services.localizationService,[4,this.services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","datasetsService")];case 1:for(o=e.sent(),this.dialogModel.isConfirmButtonDisabled=!0,this.viewModel.showError=!1,r=0,n=u.credentialData;r<n.length;r++)if("redirectEndpoint"===(s=n[r]).name){(a=s.value)&&0<a.length&&(a=a.substr(a.indexOf("code=")+5),0<(s=a.indexOf("&"))&&(a=a.substr(0,s)),a=encodeURIComponent(a));break}return l=this.viewModel.datasource.packageId,c=t.startEvent(h.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:this.viewModel.providerId}),o.updatePackageCredentials(l,a,c.event).then((function(){var e;c.resolve(),d.resetModelAfterAuthentication(!1),d.viewModel.datasource.testConnectionState=p.Passed,d.datasetDatasourceUpdated&&(e={name:(e=d.viewModel.datasource).name||e.fullName},d.datasetDatasourceUpdated(e)),d.closeDialog()}),(function(e){d.errorDetails=v.convertHttpResultToNameValuePairs(e,d.services.localizationService);var t=e.data;t?(d.errorMessage=v.convertTestPackageConnectionDetailsToErrorMessage(e.data.testConnectionResponse,d.services.localizationService),d.errorDetails&&d.errorDetails.push({Name:d.services.localizationService.get("Details"),Value:t.testConnectionResponse.faultCode})):d.errorMessage=i.get("UpdateDatasourceCredential_Error_ShortTitle"),d.resetModelAfterAuthentication(!0),c.reject(h.errorDetailsHelper.getTelemetryErrorDetails(e.error))})),[2]}}))}))},m.prototype.resetModelAfterAuthentication=function(e){this.viewModel.showSpinner=!1,this.viewModel.isAuthenticating=!1,this.viewModel.showWaitingMessageForOAuth=!1,this.viewModel.showError=e,this.dialogModel.isConfirmButtonDisabled=!1},m.prototype.updateDatasourceRequest=function(){var e=this.getCredentialsFromInput();this.viewModel.updatePackage?this.sendUpdatePackageRequest(e):this.sendUpdateDatasourceRequest(e)},m.prototype.getCredentialDetailsUsernameAndPassword=function(){return{credentialData:[{name:"username",value:this.viewModel.editableField1Value},{name:"password",value:this.viewModel.editableField2Value}]}},m.prototype.getCredentialDetailsKey=function(){return{credentialData:[{name:"key",value:this.viewModel.editableField1Value}]}},m.prototype.getCredentialDetailsSAS=function(){return{credentialData:[{name:"Token",value:this.viewModel.editableField1Value}]}},m.prototype.getCredentialDetailsRedirectEndpoint=function(){return{credentialData:[{name:"redirectEndpoint",value:this.oAuthResponse},{name:"oAuth2Nonce",value:this.viewModel.datasource.oAuth2Nonce}]}},m.prototype.getEmptyCredentialDetails=function(){return{credentialData:[]}},m.prototype.getOAuthDetailsAndSignInThroughOAuth=function(){return __awaiter(this,void 0,h.Promise,(function(){var t,i=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.viewModel.datasource,[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.gatewaysMetadataService.getDataSourceOAuthDetailsForGatewayCluster(t.gatewayObjectId,t.dataSourceObjectId).then((function(e){i.viewModel.datasource.oAuth2URL=e.OAuthEndpoint,i.viewModel.datasource.oAuth2Nonce=e.OAuthNonce,i.signInThroughOAuth()}),(function(e){i.resetModelAfterAuthentication(!0),i.errorMessage=i.services.localizationService.get("OAuth_Not_Supported_Error"),i.errorDetails=v.convertHttpResultToNameValuePairs(e,i.services.localizationService)})),[2]}}))}))},m.prototype.signInThroughOAuth=function(){var e,i,o,a=this,t=this.viewModel.datasource.oAuth2URL,r=this.viewModel.datasource.oAuth2Nonce;"https:"!==t.substring(0,6).toLowerCase()?(this.showOAuthError=!0,this.oAuthErrorMessage=this.oAuthErrorMessage):(this.showOAuthError=!1,e=window.location.host,e=(t=this.reformUrlWithNewState(t,e))[0],i=t[1],t=jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))),o=this.services.featureSwitchService.featureSwitches.oAuthUseCallbackUri?this.getCallbackUriFromNonce(r):null!=(r=t.redirect_uri)?r:g.oauthRedirectUrl,this.oAuthListener=function(e){var t,e=JSON.parse(e.data);e&&e.OAuthResponse?(e=e.OAuthResponse,t=o,"?"===e.substring(0,1)?t+=e:t+="?"+e,(e=decodeURIComponent(a.reformUrlWithNewState(t,i)[0]))!==a.oAuthResponse&&(a.oAuthResponse=e,a.viewModel.showWaitingMessageForOAuth=!0,a.services.telemetryService.logEvent(h.telemetry.ConnectivityOAuthSucceeded,{providerId:a.viewModel.providerId,providerKey:a.viewModel.providerKey}),a.confirmDialog())):(a.showOAuthError=!0,a.oAuthErrorMessage=a.oAuthErrorMessage)},null===this.loginWindow&&this.services.$window.addEventListener(jsCommon.DOMConstants.messageEventName,this.oAuthListener),e&&(t=window.location.origin,r=o+jsCommon.QueryStringUtil.rebuildQueryString({login_uri:e,redirect_targeturi:t}),this.services.telemetryService.logEvent(h.telemetry.ConnectivityOAuthInitiated,{providerId:this.viewModel.providerId,providerKey:this.viewModel.providerKey}),this.loginWindow=h.common.helpers.OAuthPopupWindowHelper.popupOAuthWindow(r),this.loginWindow||(this.showOAuthError=!0,this.viewModel.isAuthenticating=!1,jsCommon.BrowserUtility.isInternetExplorerBrowser()?(this.oAuthErrorMessage=this.services.localizationService.get("OAuth_Referrer_Not_Available_Error"),this.services.telemetryService.logEvent(h.telemetry.ConnectivityOAuthReferrerNotAvailableInIE,{providerId:this.viewModel.providerId,providerKey:this.viewModel.providerKey})):this.oAuthErrorMessage=this.oAuthErrorMessage)))},m.prototype.reformUrlWithNewState=function(e,t){var i=jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))),o=null;return i.state&&(o=i.state,i.state=t),i["#state"]&&(o=i["#state"],i["#state"]=t),[e.substring(0,e.indexOf("?"))+jsCommon.QueryStringUtil.rebuildQueryString(i),o]},m.prototype.getCallbackUriFromNonce=function(e){e=atob(e);return JSON.parse(e).NavigationInfo.CallbackUri},m.prototype.encryptCredentials=function(e,t,i,o){var a=this,r=this.services.promiseFactory.defer();return s.create(JSON.stringify(e),t,o,(function(e){var t=i===n.Anonymous?d.Public:d.Private,e={credentials:e,credentialType:i,encryptedConnection:a.viewModel.datasource.datasourceType===h.common.contracts.gateway.DataSourceType.SqlServer?0:2,privacyLevel:null==a.viewModel.selectedPrivacyLevelIndex?t:a.viewModel.privacyLevelMapping.indexOf(a.viewModel.privacyLevelOptions[a.viewModel.selectedPrivacyLevelIndex]),encryptionAlgorithm:"RSA-OAEP"};r.resolve(e)}),this.services.moduleLoader).then((function(e){e.rsaEncrypt()})),r.promise},m.prototype.removeWindowEventListenerIfExists=function(){this.oAuthListener&&(this.services.$window.removeEventListener(jsCommon.DOMConstants.messageEventName,this.oAuthListener,!1),this.oAuthListener=void 0)},e.AuthenticationDialogController=m})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).components||(t.components={})).AuthenticationDialog={templateUrl:"components/authenticationDialog/authenticationDialog.html",bindings:{viewModel:"<",datasetDatasourceUpdated:"&",datasetShowParameterDialogAfterInvalidParameter:"&",datasetShowDatasourceUpdatedNotification:"&",notifyCloseDialog:"&"},controller:e.common.createController(t.controllers.AuthenticationDialogController)}})(powerbi=powerbi||{}),(function(u){var e,n,s,h,t,l,v,i,c;function o(e,t){var i=this;this.scope=e,this.model=this.scope.viewModel,this.services=t,this.loginWindow=null,this.scope.customizeAuthDialog=function(){return i.customizeAuthDialog()},this.scope.dismissSpinnerError=function(){return i.dismissSpinnerError()},this.scope.signInThroughOAuth=function(){return i.signInThroughOAuth()},this.initModalDialog(),this.initAuthDialog(),this.getEntropy()}e=(e=u.connectivity||(u.connectivity={})).controllers||(e.controllers={}),n=u.common.contracts.gateway.CredentialType,s=u.common.EncryptionContext,h=u.connectivity.helpers.ErrorConverterHelper,t=u.common.constants,l=u.common.contracts.gateway.PrivacyLevel,v=u.common.models.TestConnectionState,i=u.common.contracts.gateway.SingleSignOnType,c=window,o.createOptions=function(){return{additionalServices:["$window","$element","featureSwitchService","localizationService","moduleLoader","promiseFactory","telemetryService","lazyProviderModern","globalEventBridge"]}},o.prototype.$onInit=function(){return __awaiter(this,void 0,u.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),[2]}}))}))},o.prototype.ensureGatewaysMetadataServiceLoaded=function(){return __awaiter(this,void 0,u.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return this.gatewaysMetadataService?[3,2]:[4,(t=this).services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","gatewaysMetadataService")];case 1:t.gatewaysMetadataService=e.sent(),e.label=2;case 2:return[2]}}))}))},o.prototype.getEntropy=function(){return __awaiter(this,void 0,u.Promise,(function(){var o=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.gatewaysMetadataService.getEntropy().then((function(e){if(e){o.entropy=[];for(var t=e.length,i=0;i<t;i++)o.entropy.push(e.charCodeAt(i))}else o.entropy=s.generateEntropy()})),[2]}}))}))},o.prototype.relocateToLink=function(){var e=u.models.contentProviderHelpLink[this.model.providerId];e?this.services.$window.open(e,"_blank"):this.services.$window.open(u.models.contentProviderFallbackLink,"_blank")},o.prototype.initModalDialog=function(){var e=this;this.scope.dialogModel=new u.common.models.ModalDialogModel(!1,this.services.localizationService.get("AuthDialog_LinkText_SignIn"),!0,this.services.localizationService,!1,!1,!1),this.scope.dialogModel.cancelButtonText=this.services.localizationService.get("ModalDialogButtonText_Cancel"),this.scope.dialogModel.isConfirmButtonDisabled=!1,this.scope.dialogModel.autoCloseDialogOnConfirmButtonSelected=!1,this.scope.dialogModel.confirmButtonImportance=u.common.models.ButtonImportance.Elevated,this.scope.dialogModel.cancelButtonImportance=u.common.models.ButtonImportance.Elevated,this.scope.relocateToLink=function(){return e.relocateToLink()},this.scope.confirmDialog=function(){return e.confirmDialog()},this.scope.cancelDialog=function(){return e.cancelDialog()},this.scope.closeDialog=function(){return e.closeDialog()},this.scope.showOAuthError=!1,this.scope.showOAuthNotSupported=!1,this.model.showModalDialog=!0,this.model.showError=!1,this.oAuthErrorMessage=this.services.localizationService.get("OAuth_Security_Error")},o.prototype.initAuthDialog=function(){this.model.selectedAuthenticationIndex||(this.model.selectedAuthenticationIndex=0),this.model.skipTestConnection||(this.model.skipTestConnection=!1),this.model.editableField1Value="",this.model.editableField2Value="",this.model.showSingleSignOn=this.model.allowSingleSignOn,this.model.isSingleSignOnEnabled=null!=this.model.datasource&&this.model.datasource.singleSignOnType===i.AzureActiveDirectory,this.customizeAuthDialog(),this.dismissSpinnerError()},o.prototype.confirmDialog=function(){this.model.showError=!1;var e=this.model;e.skipTestConnection||this.services.featureSwitchService.featureSwitches.skipRequiredDatsourceCredentials||!(e.showEditableField1&&!e.editableField1Value||e.showEditableField2&&!e.editableField2Value)?this.model.allowSingleSignOn&&this.isSingleSignOnChanged()?this.updateSingleSignOn():this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex]===n.OAuth2&&void 0===this.scope.oAuthResponse?this.signInThroughOAuth():(this.model.showSpinner=!0,this.scope.dialogModel.isConfirmButtonDisabled=!0,this.model.isAuthenticating=!0,this.model.datasource.isCloudDirectQuery?this.updateCloudDirectQueryCredentials():this.model.isManageGatewaysScenario?this.returnToManageGatewaysToAddDatasource():this.updateDatasourceRequest()):(this.model.showError=!0,this.scope.errorMessage=this.services.localizationService.get("ModalDialogButtonText_FillInRequiredFields"),this.scope.errorDetails=null)},o.prototype.returnToManageGatewaysToAddDatasource=function(){this.resetModelAfterAuthentication(!1),this.model.datasource.testConnectionState=u.common.models.TestConnectionState.Passed,this.model.credentialData=this.getCredentialsFromInput(),this.updateDataSourceComplete()},o.prototype.isSingleSignOnChanged=function(){return this.model.isSingleSignOnEnabled&&this.model.datasource.singleSignOnType!==i.AzureActiveDirectory||!this.model.isSingleSignOnEnabled&&this.model.datasource.singleSignOnType!==i.None},o.prototype.updateCloudDirectQueryCredentials=function(){return __awaiter(this,void 0,u.Promise,(function(){var t,i,o=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),t=this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex],i=this.getCredentialsFromInput(),i={credentials:JSON.stringify(i),credentialType:t,encryptedConnection:0,privacyLevel:l.Public,encryptionAlgorithm:"none",skipTestConnection:this.model.skipTestConnection},this.gatewaysMetadataService.updateCredentials(this.model.datasource.gatewayObjectId,this.model.datasource.dataSourceObjectId,i).then((function(){o.resetModelAfterAuthentication(!1),o.model.datasource.testConnectionState=v.Passed;var e=o.model.datasource;o.services.globalEventBridge.publishToChannel(u.common.constants.datasetDatasourceUpdatedEvent,e.name||e.fullName),o.closeDialog()}),(function(e){o.resetModelAfterAuthentication(!0),o.scope.errorMessage=o.services.localizationService.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),o.scope.errorDetails=h.convertHttpResultToNameValuePairs(e,o.services.localizationService)})),[2]}}))}))},o.prototype.updateSingleSignOn=function(){return __awaiter(this,void 0,u.Promise,(function(){var t=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.gatewaysMetadataService.updateDataSource(this.model.datasource.gatewayObjectId,this.model.datasource.dataSourceObjectId,{dataSourceType:null,onPremGatewayRequired:null,connectionDetails:null,credentialDetails:null,dataSourceAnnotation:null,supportedAuthenticationTypes:null,singleSignOnType:!0===this.model.isSingleSignOnEnabled?i.AzureActiveDirectory:i.None}).then((function(){t.resetModelAfterAuthentication(!1),t.model.datasource.singleSignOnType=t.model.isSingleSignOnEnabled?i.AzureActiveDirectory:i.None,t.confirmDialog()}),(function(e){t.resetModelAfterAuthentication(!0),t.scope.errorMessage=t.services.localizationService.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"),t.scope.errorDetails=h.convertHttpResultToNameValuePairs(e,t.services.localizationService)})),[2]}}))}))},o.prototype.getCredentialsFromInput=function(){switch(this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex]){case n.Anonymous:case n.Windows:case n.WindowsWithoutImpersonation:return this.getEmptyCredentialDetails();case n.Basic:return this.getCredentialDetailsUsernameAndPassword();case n.Key:return this.getCredentialDetailsKey();case n.OAuth2:return this.getCredentialDetailsRedirectEndpoint();case n.SAS:return this.getCredentialDetailsSAS()}},o.prototype.updateDatasourceCredentials=function(o){return __awaiter(this,void 0,u.Promise,(function(){var t,i=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),t=this.services.promiseFactory.defer(),this.gatewaysMetadataService.updateCredentials(this.model.datasource.gatewayObjectId,this.model.datasource.dataSourceObjectId,o).then((function(){i.resetModelAfterAuthentication(!1),i.model.datasource.testConnectionState=u.common.models.TestConnectionState.Passed,i.model.validateParameters?i.validateParameters().finally((function(){t.resolve(null)})):(i.updateDataSourceComplete(),t.resolve(null))}),(function(e){i.scope.errorMessage=i.services.localizationService.format("UpdateDatasourceCredential_Error_Title",[h.retrieveUnderlyingErrorMessageFromPowerBIServiceException(e.data,"DM_ErrorDetailNameCode_UnderlyingErrorMessage")]),i.scope.errorDetails=h.convertHttpResultToNameValuePairs(e,i.services.localizationService),i.resetModelAfterAuthentication(!0),t.reject(e)})),[2,t.promise]}}))}))},o.prototype.validateParameters=function(){return __awaiter(this,void 0,u.Promise,(function(){var t,i,o,a=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.promiseFactory.defer(),[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.shouldRunValidateParametersOnImport()?(i=this.createValidateParametersEvent(),this.gatewaysMetadataService.validateParametersBeforeImport(this.model.providerKey,this.model.dataAccessInfo,i.event).then((function(e){a.handleParameterValidationSuccessResult(e,i)}),(function(e){a.handleParameterValidationErrorResult(e,i)})).finally((function(){return t.resolve(null)}))):this.shouldRunValidateParametersOnUpdate()?(o=this.createValidateParametersEvent(),this.gatewaysMetadataService.validateParametersBeforeUpdate(this.model.datasource.modelId,o.event).then((function(e){a.handleParameterValidationSuccessResult(e,o)}),(function(e){a.handleParameterValidationErrorResult(e,o)})).finally((function(){return t.resolve(null)}))):t.resolve(null),[2,t.promise]}}))}))},o.prototype.createValidateParametersEvent=function(){return this.services.telemetryService.startEvent(u.telemetry.MashUpContentProviderValidateParameters,{providerId:this.model.providerId,providerKey:this.model.providerKey,isImport:this.model.isImportScenario})},o.prototype.shouldRunValidateParametersOnImport=function(){return this.model.isImportScenario&&null!=this.model.dataAccessInfo&&null!=this.model.providerKey},o.prototype.shouldRunValidateParametersOnUpdate=function(){return!this.model.isImportScenario&&null!=this.model.datasource&&null!=this.model.datasource.modelId},o.prototype.sendUpdateDatasourceRequest=function(e){var t,i,o=this,a=this.services.telemetryService,r=this.model,a=(r.showError=!1,t=r.isImportScenario?a.startEvent(u.telemetry.MashUpContentProviderUpdateDatasource,{providerId:r.providerId}):a.startEvent(u.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:r.providerId}),r.datasource.credentialTypes[r.selectedAuthenticationIndex]);r.datasource.onpremGatewayRequired?(i=atob(r.personalGateway.gatewayPublicKey).split(/<\/Modulus>|<Modulus>/)[1],this.encryptCredentials(e,i,a,this.entropy).then((function(e){o.updateDatasourceCredentials(e).then((function(){t.resolve()}),(function(e){t.reject(u.errorDetailsHelper.getTelemetryErrorDetails(e.error))}))}))):(i=a===n.Anonymous?l.Public:l.Private,e={credentials:JSON.stringify(e),credentialType:a,encryptedConnection:null!=this.model.datasource&&this.model.datasource.datasourceType===u.common.contracts.gateway.DataSourceType.PostgreSql?0:2,privacyLevel:null==r.selectedPrivacyLevelIndex?i:r.privacyLevelMapping.indexOf(r.privacyLevelOptions[r.selectedPrivacyLevelIndex]),encryptionAlgorithm:"none",skipTestConnection:this.model.skipTestConnection},this.updateDatasourceCredentials(e).then((function(){t.resolve()}),(function(e){t.reject(u.errorDetailsHelper.getTelemetryErrorDetails(e.error))})))},o.prototype.handleParameterValidationSuccessResult=function(e,t){t.resolve(),this.updateDataSourceComplete()},o.prototype.handleParameterValidationErrorResult=function(e,t){t.reject(u.errorDetailsHelper.getTelemetryErrorDetails(e.error));t=h.convertInvalidParameterErrorToNameValuePairs(e);!_.isEmpty(t)&&(this.services.globalEventBridge.publishToChannel(u.common.constants.datasetShowParameterDialogAfterInvalidParameterEvent,t),this.model.isImportScenario)||this.updateDataSourceComplete()},o.prototype.updateDataSourceComplete=function(){var e=this.model.datasource,e=e.name||e.fullName;this.services.globalEventBridge.publishToChannel(u.common.constants.datasetDatasourceUpdatedEvent,e),this.scope.$emit(t.datasetShowDatasourceUpdatedNotification,e),this.model.leaveShowing||this.closeDialog()},o.prototype.sendUpdatePackageRequest=function(d){return __awaiter(this,void 0,u.Promise,(function(){var t,i,o,a,r,n,s,l,c=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.telemetryService,[4,this.services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","datasetsService")];case 1:for(i=e.sent(),this.scope.dialogModel.isConfirmButtonDisabled=!0,this.model.showError=!1,a=0,r=d.credentialData;a<r.length;a++)if("redirectEndpoint"===(n=r[a]).name){(o=n.value)&&0<o.length&&(o=o.substr(o.indexOf("code=")+5),0<(n=o.indexOf("&"))&&(o=o.substr(0,n)),o=encodeURIComponent(o));break}return s=this.model.datasource.packageId,l=t.startEvent(u.telemetry.DashboardAuthenticationDialogSaveCredentials,{providerId:this.model.providerId}),i.updatePackageCredentials(s,o,l.event).then((function(){l.resolve(),c.resetModelAfterAuthentication(!1),c.model.datasource.testConnectionState=v.Passed;var e=c.model.datasource;c.services.globalEventBridge.publishToChannel(u.common.constants.datasetDatasourceUpdatedEvent,e.name||e.fullName),c.closeDialog()}),(function(e){c.scope.errorDetails=h.convertHttpResultToNameValuePairs(e,c.services.localizationService);var t=e.data;t?(c.scope.errorMessage=h.convertTestPackageConnectionDetailsToErrorMessage(e.data.testConnectionResponse,c.services.localizationService),c.scope.errorDetails&&c.scope.errorDetails.push({Name:c.services.localizationService.get("Details"),Value:t.testConnectionResponse.faultCode})):c.scope.errorMessage=c.services.localizationService.get("UpdateDatasourceCredential_Error_ShortTitle"),c.resetModelAfterAuthentication(!0),l.reject(u.errorDetailsHelper.getTelemetryErrorDetails(e.error))})),[2]}}))}))},o.prototype.cancelDialog=function(){this.closeDialog(u.common.constants.contentProviderStoreCancelModalDialogMessage)},o.prototype.closeDialog=function(e){var t=this;void 0===e&&(e=u.common.constants.contentProviderStoreCloseModalDialogMessage),this.model.showModalDialog=!1,this.scope.viewModel.showPlainUI&&null!=this.services.$window.parent&&this.services.$window.parent.postMessage(JSON.stringify({message:e}),u.common.constants.hostOrigin),setTimeout((function(){t.model.showAuthDialog=!1,t.scope.$digest()}),0)},o.prototype.customizeAuthDialog=function(){this.resetAuthDialogState();var e=this.model;switch(e.datasource.credentialTypes[e.selectedAuthenticationIndex]){case n.Anonymous:case n.WindowsWithoutImpersonation:this.customizeAuthDialogShowNothing();break;case n.Basic:this.customizeAuthDialogShowUserNameAndPassword();break;case n.OAuth2:this.customizeAuthDialogShowSignIn();break;case n.Key:this.customizeAuthDialogShowAccountKey();break;case n.Windows:this.customizeAuthDialogShowDetailsMessage(this.services.localizationService.get("AuthDialog_DetailsMessage_WindowsAuth"));break;case n.SAS:this.customizeAuthDialogShowSAS()}},o.prototype.resetAuthDialogState=function(){this.scope.showOAuthNotSupported=!1,this.model.isAuthenticating=!1},o.prototype.resetModelAfterAuthentication=function(e){this.model.showSpinner=!1,this.model.isAuthenticating=!1,this.model.showWaitingMessageForOAuth=!1,this.model.showError=e,this.scope.dialogModel.isConfirmButtonDisabled=!1,e&&this.services.$element.find(".expandableBlockWarning").get(0).scrollIntoView()},o.prototype.customizeAuthDialogShowUserNameAndPassword=function(){this.model.showEditableField1=!0,this.model.showEditableField2=!0,this.model.showWaitingMessageForOAuth=!1,this.model.showDetailsMessage=!1,this.model.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_Username"),this.model.editableField2Label=this.services.localizationService.get("AuthDialog_FieldName_Password")},o.prototype.customizeAuthDialogShowAccountKey=function(){this.model.showEditableField1=!0,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_AccountKey")},o.prototype.customizeAuthDialogShowSAS=function(){this.model.showEditableField1=!0,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.editableField1Label=this.services.localizationService.get("AuthDialog_FieldName_SAS")},o.prototype.customizeAuthDialogShowSignIn=function(){this.model.showEditableField1=!1,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.showDetailsMessage=!1,null==this.scope.viewModel.datasource.oAuth2URL&&(this.scope.showOAuthNotSupported=!0,this.model.isAuthenticating=!0)},o.prototype.customizeAuthDialogShowNothing=function(){this.model.showEditableField1=!1,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.editableField1Label="",this.model.showDetailsMessage=!1},o.prototype.customizeAuthDialogShowDetailsMessage=function(e){this.model.showEditableField1=!1,this.model.showEditableField2=!1,this.model.showWaitingMessageForOAuth=!1,this.model.editableField1Label="",this.model.showDetailsMessage=!0,this.model.detailsMessage=e},o.prototype.updateDatasourceRequest=function(){var e=this.getCredentialsFromInput();this.model.updatePackage?this.sendUpdatePackageRequest(e):this.sendUpdateDatasourceRequest(e)},o.prototype.getCredentialDetailsUsernameAndPassword=function(){return{credentialData:[{name:"username",value:this.model.editableField1Value},{name:"password",value:this.model.editableField2Value}]}},o.prototype.getCredentialDetailsKey=function(){return{credentialData:[{name:"key",value:this.model.editableField1Value}]}},o.prototype.getCredentialDetailsSAS=function(){return{credentialData:[{name:"Token",value:this.model.editableField1Value}]}},o.prototype.getCredentialDetailsRedirectEndpoint=function(){return{credentialData:[{name:"redirectEndpoint",value:this.scope.oAuthResponse},{name:"oAuth2Nonce",value:this.scope.viewModel.datasource.oAuth2Nonce}]}},o.prototype.getEmptyCredentialDetails=function(){return{credentialData:[]}},o.prototype.dismissSpinnerError=function(){this.model.showSpinner=!1,this.model.showError=!1,this.model.isAuthenticating=!1},o.prototype.signInThroughOAuth=function(){var e,i,o,t,a=this,r=this.scope.viewModel.datasource.oAuth2URL,n=this.scope.viewModel.datasource.oAuth2Nonce;"https:"!==r.substring(0,6).toLowerCase()?(this.scope.showOAuthError=!0,this.scope.oAuthErrorMessage=this.oAuthErrorMessage):(this.scope.showOAuthError=!1,e=window.location.host,e=(r=this.reformUrlWithNewState(r,e))[0],i=r[1],r=jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))),o=this.services.featureSwitchService.featureSwitches.oAuthUseCallbackUri?this.getCallbackUriFromNonce(n):null!=(n=r.redirect_uri)?n:c.oauthRedirectUrl,t=function(e){var t,e=JSON.parse(e.data);e&&e.OAuthResponse?(e=e.OAuthResponse,t=o,"?"===e.substring(0,1)?t+=e:t+="?"+e,(e=decodeURIComponent(a.reformUrlWithNewState(t,i)[0]))!==a.scope.oAuthResponse&&(a.scope.oAuthResponse=e,a.model.showWaitingMessageForOAuth=!0,a.services.telemetryService.logEvent(u.telemetry.ConnectivityOAuthSucceeded,{providerId:a.model.providerId,providerKey:a.model.providerKey}),a.confirmDialog())):(a.scope.showOAuthError=!0,a.scope.oAuthErrorMessage=a.oAuthErrorMessage)},null===this.loginWindow&&this.services.$window.addEventListener(jsCommon.DOMConstants.messageEventName,t),this.scope.$on(u.common.constants.scopeDestroyEventName,(function(){a.services.$window.removeEventListener(jsCommon.DOMConstants.messageEventName,t,!1),a.loginWindow=null})),e&&(r=window.location.origin,n=o+jsCommon.QueryStringUtil.rebuildQueryString({login_uri:e,redirect_targeturi:r}),this.services.telemetryService.logEvent(u.telemetry.ConnectivityOAuthInitiated,{providerId:this.model.providerId,providerKey:this.model.providerKey}),this.loginWindow=u.common.helpers.OAuthPopupWindowHelper.popupOAuthWindow(n),this.loginWindow||(this.scope.showOAuthError=!0,this.model.isAuthenticating=!1,jsCommon.BrowserUtility.isInternetExplorerBrowser()?(this.scope.oAuthErrorMessage=this.services.localizationService.get("OAuth_Referrer_Not_Available_Error"),this.services.telemetryService.logEvent(u.telemetry.ConnectivityOAuthReferrerNotAvailableInIE,{providerId:this.model.providerId,providerKey:this.model.providerKey})):this.scope.oAuthErrorMessage=this.oAuthErrorMessage)))},o.prototype.reformUrlWithNewState=function(e,t){var i=jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))),o=null;return i.state&&(o=i.state,i.state=t),i["#state"]&&(o=i["#state"],i["#state"]=t),[e.substring(0,e.indexOf("?"))+jsCommon.QueryStringUtil.rebuildQueryString(i),o]},o.prototype.getCallbackUriFromNonce=function(e){e=atob(e);return JSON.parse(e).NavigationInfo.CallbackUri},o.prototype.encryptCredentials=function(e,t,i,o){var a=this.services.promiseFactory.defer(),r=this.model;return s.create(JSON.stringify(e),t,o,(function(e){var t=i===n.Anonymous?l.Public:l.Private,e={credentials:e,credentialType:i,encryptedConnection:r.datasource.datasourceType===u.common.contracts.gateway.DataSourceType.SqlServer?0:2,privacyLevel:null==r.selectedPrivacyLevelIndex?t:r.privacyLevelMapping.indexOf(r.privacyLevelOptions[r.selectedPrivacyLevelIndex]),encryptionAlgorithm:"RSA-OAEP"};a.resolve(e)}),this.services.moduleLoader).then((function(e){e.rsaEncrypt()})),a.promise},e.AuthDialogController=o})(powerbi=powerbi||{}),(function(l){var e,t,a,c,d,i;function o(e,t){this.scope=e,this.model=this.scope.viewModel,this.services=t,this.initModalDialog()}e=(e=l.connectivity||(l.connectivity={})).controllers||(e.controllers={}),t=l.connectivity.helpers.DatasetParametersDialogHelper,a=l.common.helpers.ImportHelper,c=l.common.helpers.ModelConverterHelper,d=l.common.models.TestConnectionState,i=l.connectivity.helpers.ErrorConverterHelper,o.createOptions=function(){return{additionalServices:["$window","errorService","telemetryService","localizationService","featureSwitchService","globalEventBridge","lazyProviderModern"]}},o.prototype.$onInit=function(){return __awaiter(this,void 0,l.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),[2]}}))}))},o.prototype.ensureGatewaysMetadataServiceLoaded=function(){return __awaiter(this,void 0,l.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return this.gatewaysMetadataService?[3,2]:[4,(t=this).services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","gatewaysMetadataService")];case 1:t.gatewaysMetadataService=e.sent(),e.label=2;case 2:return[2]}}))}))},o.prototype.relocateToLink=function(){var e=l.models.contentProviderHelpLink[this.model.providerIdentification.providerId];e?this.services.$window.open(e,"_blank"):this.services.$window.open(l.models.contentProviderFallbackLink,"_blank")},o.prototype.initModalDialog=function(){var i=this,e=this.scope.dialogModel=new l.common.models.ModalDialogModel(!1,this.services.localizationService.get("DatasetParametersDialog_NextButtonText"),!0,this.services.localizationService,!1,!1,!1);e.cancelButtonText=this.services.localizationService.get("ModalDialogButtonText_Cancel"),e.isConfirmButtonDisabled=!0,e.autoCloseDialogOnConfirmButtonSelected=!1,e.confirmButtonImportance=l.common.models.ButtonImportance.Elevated,e.cancelButtonImportance=l.common.models.ButtonImportance.Elevated,this.scope.confirmDialog=function(){return i.confirmDialog()},this.scope.closeDialog=function(){return i.closeDialog()},this.scope.enableConfirmButton=function(){return i.enableConfirmButton()},this.scope.relocateToLink=function(){return i.relocateToLink()},this.scope.checkConfirmButton=function(){return i.checkConfirmButton()},this.scope.$watch("viewModel.showDatasetParametersDialog",(function(e,t){e&&e!==t&&i.scope.checkConfirmButton()}),!0),this.scope.$watch("viewModel.parametersForm.$dirty",(function(e,t){e&&e!==t&&i.scope.dialogModel.isConfirmButtonDisabled&&(i.scope.dialogModel.isConfirmButtonDisabled=!1)}),!0)},o.prototype.enableConfirmButton=function(){this.scope.dialogModel.isConfirmButtonDisabled&&(this.scope.dialogModel.isConfirmButtonDisabled=!1)},o.prototype.confirmDialog=function(){return __awaiter(this,void 0,l.Promise,(function(){var t,i,o,a,r,n,s=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return(e.sent(),this.areAllParametersValueSet())?(this.model.showValidationError=!1,this.model.showSpinner=!0,t=this.services.telemetryService,[4,this.services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","datasetsService")]):(this.model.showValidationError=!0,this.model.invalidParameterNameValuePairs=null,[2]);case 2:return i=e.sent(),o=this.model.providerIdentification,this.scope.dialogModel.isConfirmButtonDisabled=!0,this.model.isImportScenario?(a=t.startEvent(l.telemetry.MashUpContentProviderSaveModelParameters,{providerId:o.providerId,providerKey:o.providerKey}),r=(r=o.providerKey)||o.providerId.toString(),this.model.proxy.updateMashUpProviderPackageModelParameters(r,this.model.datasetModel.dataset.parameters,a.event).then((function(e){a.resolve(),s.discoverDatasourcesForImport(e)}),(function(e){s.resetState(),i.displayOopsErrorAndEndTelemetry(t,s.services.errorService,"DatasetParametersDialog_Error_FailedToUpdateModelParameters",e,a)}))):(n=t.startEvent(l.telemetry.DashboardParametersDialogSaveParameters,{providerId:o.providerId}),i.updateModelParameters(this.model.datasetModel.dataset.modelId.toString(),this.model.datasetModel.dataset.parameters,n.event).then((function(){n.resolve(),s.getModelDatasources()}),(function(e){s.resetState(),i.displayOopsErrorAndEndTelemetry(t,s.services.errorService,"DatasetParametersDialog_Error_FailedToUpdateModelParameters",e,n)}))),[2]}}))}))},o.prototype.getModelDatasources=function(){return __awaiter(this,void 0,l.Promise,(function(){var t,i,o,a,r=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),t=this.services.telemetryService,[4,this.services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","datasetsService")];case 2:return i=e.sent(),o=this.model.providerIdentification,a=t.startEvent(l.telemetry.DashboardGetAggregatedDatasourcesForOneModel,{providerId:o.providerId}),this.gatewaysMetadataService.getModelDataSources(this.model.datasetModel.dataset.modelId).then((function(t){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return a.resolve(),this.model.datasetModel.dataset.datasources=c.convertDMTSDiscoverDatasourcesResponseToDatasources(this.model.datasetModel.dataset.modelId,t.datasources,this.services.localizationService),this.closeDialog(),[4,this.getCredentials()];case 1:return e.sent(),[2]}}))}))}),(function(e){r.resetState(),i.displayOopsErrorAndEndTelemetry(t,r.services.errorService,"SettingsDataset_Error_FailedToLoadDatasources",e,a)})),[2]}}))}))},o.prototype.discoverDatasourcesForImport=function(s){return __awaiter(this,void 0,l.Promise,(function(){var t,i,o,a,r,n=this;return __generator(this,(function(e){switch(e.label){case 0:return t=this.services.telemetryService,[4,this.services.lazyProviderModern.get("@powerbi/Connectivity/connectivity.module#ConnectivityModule","datasetsService")];case 1:return i=e.sent(),o=this.model.providerIdentification,a=s.data,this.model.dataAccessInfo=a,r=t.startEvent(l.telemetry.MashUpContentProviderGetAggregatedDatasourcesForImport,{providerCategory:o.providerCategory,providerId:o.providerId,providerKey:o.providerKey}),[4,this.ensureGatewaysMetadataServiceLoaded()];case 2:return e.sent(),i.discoverDatasourceForImport(o.providerId.toString(),a,r.event).then((function(i){return __awaiter(n,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){return r.resolve(),this.model.datasetModel.dataset.datasources=c.convertDMTSDiscoverDatasourcesResponseToDatasources(0,i.data.datasources,this.services.localizationService),this.gatewaysMetadataService.getDataSourceStatus(this.model.datasetModel.dataset.datasources[0].gatewayObjectId,this.model.datasetModel.dataset.datasources[0].dataSourceObjectId).then((function(){t.model.datasetModel.dataset.datasources[0].alreadyExecutedTestConnection=!0,t.model.datasetModel.dataset.datasources[0].testConnectionState=d.Passed}),(function(){t.model.datasetModel.dataset.datasources[0].alreadyExecutedTestConnection=!0,t.model.datasetModel.dataset.datasources[0].testConnectionState=d.Failed})).finally((function(){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.scope.viewModel.showPlainUI?this.scope.viewModel.showDatasetParametersDialog=!1:this.closeDialog(),[4,this.getCredentials()];case 1:return e.sent(),[2]}}))}))})),[2]}))}))}),(function(e){n.resetState(),i.displayOopsErrorAndEndTelemetry(t,n.services.errorService,"SettingsDataset_Error_FailedToLoadDatasources",e,r)})),[2]}}))}))},o.prototype.getCredentials=function(){return __awaiter(this,void 0,l.Promise,(function(){var t,i,o=this;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.ensureGatewaysMetadataServiceLoaded()];case 1:return e.sent(),this.alwaysPromptForCredentials()||null!=this.model.datasetModel.dataset.datasources&&0<this.model.datasetModel.dataset.datasources.length&&this.model.datasetModel.dataset.datasources[0].testConnectionState!==d.Passed?(t={dsIndex:0,dataAccessInfo:this.model.dataAccessInfo,modelId:this.model.datasetModel.dataset.modelId,providerKey:this.model.providerIdentification.providerKey,validateParameters:!0},this.services.globalEventBridge.publishToChannel(l.common.constants.datasetShowAuthDialogEvent,t)):this.model.isImportScenario?(i=this.services.telemetryService.startEvent(l.telemetry.MashUpContentProviderValidateParameters,{providerId:this.model.providerIdentification.providerId,providerKey:this.model.providerIdentification.providerKey,isImport:this.model.isImportScenario}),this.gatewaysMetadataService.validateParametersBeforeImport(this.model.providerIdentification.providerKey,this.model.dataAccessInfo,i.event).then((function(e){o.handleParameterValidationSuccessResult(e,i)}),(function(e){o.handleParameterValidationErrorResult(e,i)}))):a.continueWithImportFlow(this.services.$window,!1,this.model.dataAccessInfo),[2]}}))}))},o.prototype.handleParameterValidationSuccessResult=function(e,t){t.resolve(),a.continueWithImportFlow(this.services.$window,!1,this.model.dataAccessInfo)},o.prototype.handleParameterValidationErrorResult=function(e,t){t.reject(l.errorDetailsHelper.getTelemetryErrorDetails(e.error));t=i.convertInvalidParameterErrorToNameValuePairs(e);null!=t&&0<t.length?this.services.globalEventBridge.publishToChannel(l.common.constants.datasetShowParameterDialogAfterInvalidParameterEvent,t):a.continueWithImportFlow(this.services.$window,!1,this.model.dataAccessInfo)},o.prototype.closeDialog=function(){var e;this.resetState(),this.model.showDatasetParametersDialog=!1,this.scope.viewModel.showPlainUI&&null!=this.services.$window.parent&&(e={message:l.common.constants.contentProviderStoreCloseModalDialogMessage},this.services.$window.parent.postMessage(JSON.stringify(e),l.common.constants.hostOrigin))},o.prototype.resetState=function(){this.model.showSpinner=!1,this.checkConfirmButton()},o.prototype.areAllParametersValueSet=function(){return 0===_.filter(this.model.datasetModel.dataset.parameters,(function(e){return void 0===e.value||""===e.value})).length},o.prototype.areAnyParametersValueSet=function(){var e=this.model.datasetModel.dataset.parameters;return _.filter(e,(function(e){return void 0===e.value||""===e.value})).length<e.length},o.prototype.checkConfirmButton=function(){this.scope&&this.scope.dialogModel&&(this.scope.dialogModel.isConfirmButtonDisabled=!this.areAnyParametersValueSet())},o.prototype.alwaysPromptForCredentials=function(){return t.alwaysPromptForCredentials(this.services.featureSwitchService.featureSwitches,this.model)},e.DatasetParametersDialogController=o})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).directives||(t.directives={})).AuthDialog=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/authDialogView.html",this.scope={viewModel:"="},this.controller=e.common.createController(e.connectivity.controllers.AuthDialogController)}})(powerbi=powerbi||{}),(function(e){var t;((t=e.connectivity||(e.connectivity={})).directives||(t.directives={})).DatasetParametersDialog=function(){this.restrict="E",this.replace=!0,this.templateUrl="views/datasetParametersDialogView.html",this.scope={viewModel:"="},this.controller=e.common.createController(t.controllers.DatasetParametersDialogController)}})(powerbi=powerbi||{}),(function(e){((e=e.connectivity||(e.connectivity={})).models||(e.models={})).DatasetParametersDialogModel=function(){this.showDatasetParametersDialog=!1,this.showSpinner=!1,this.showValidationError=!1}})(powerbi=powerbi||{}),(function(e){((e=e.connectivity||(e.connectivity={})).models||(e.models={})).DataSourceContextMenuItemModel=function(e){this.source=e,this.metadata=[],this.actions=[]}})(powerbi=powerbi||{}),(function(e){var t;function i(e){this.source=e,this.metadata=[],this.actions=[]}e=(e=e.connectivity||(e.connectivity={})).models||(e.models={}),(t=e.GatewayStatus||(e.GatewayStatus={}))[t.NotReachable=1]="NotReachable",t[t.Live=2]="Live",t[t.Unknown=3]="Unknown",e.GatewayContextMenuItemModel=i})(powerbi=powerbi||{}),(function(e){(e=(e=(e=e.connectivity||(e.connectivity={})).models||(e.models={})).GatewaysSelectionType||(e.GatewaysSelectionType={}))[e.None=0]="None",e[e.Gateway=1]="Gateway",e[e.DataSource=2]="DataSource"})(powerbi=powerbi||{}),(function(t){var i=t.telemetry||(t.telemetry={}),e=jsCommon.Utility,o=t.telemetryEventFactory,a=t.telemetry.EventFactories;e?e.generateGuid:Function.prototype,i.ConnectivityUpdateGatewayEventName="PBI.Connectivity.UpdateGateway",i.ConnectivityUpdateGateway=a[i.ConnectivityUpdateGatewayEventName]=function(e){return o({name:i.ConnectivityUpdateGatewayEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityUpdateGatewayLoggers})},i.ConnectivityDeleteGatewayEventName="PBI.Connectivity.DeleteGateway",i.ConnectivityDeleteGateway=a[i.ConnectivityDeleteGatewayEventName]=function(e){return o({name:i.ConnectivityDeleteGatewayEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityDeleteGatewayLoggers})},i.ConnectivityCreateDataSourceEventName="PBI.Connectivity.CreateDataSource",i.ConnectivityCreateDataSource=a[i.ConnectivityCreateDataSourceEventName]=function(e){return o({name:i.ConnectivityCreateDataSourceEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityCreateDataSourceLoggers})},i.ConnectivityDeleteDataSourceEventName="PBI.Connectivity.DeleteDataSource",i.ConnectivityDeleteDataSource=a[i.ConnectivityDeleteDataSourceEventName]=function(e){return o({name:i.ConnectivityDeleteDataSourceEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityDeleteDataSourceLoggers})},i.ConnectivityBindModelToGatewayEventName="PBI.Connectivity.BindModelToGateway",i.ConnectivityBindModelToGateway=a[i.ConnectivityBindModelToGatewayEventName]=function(e){return o({name:i.ConnectivityBindModelToGatewayEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityBindModelToGatewayLoggers})},i.ConnectivityAddDataSourcePrincipalsEventName="PBI.Connectivity.AddDataSourcePrincipals",i.ConnectivityAddDataSourcePrincipals=a[i.ConnectivityAddDataSourcePrincipalsEventName]=function(e){return o({name:i.ConnectivityAddDataSourcePrincipalsEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityAddDataSourcePrincipalsLoggers})},i.ConnectivityRemoveDataSourcePrincipalsEventName="PBI.Connectivity.RemoveDataSourcePrincipals",i.ConnectivityRemoveDataSourcePrincipals=a[i.ConnectivityRemoveDataSourcePrincipalsEventName]=function(e){return o({name:i.ConnectivityRemoveDataSourcePrincipalsEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityRemoveDataSourcePrincipalsLoggers})},i.ConnectivityAddGatewayPrincipalsEventName="PBI.Connectivity.AddGatewayPrincipals",i.ConnectivityAddGatewayPrincipals=a[i.ConnectivityAddGatewayPrincipalsEventName]=function(e){return o({name:i.ConnectivityAddGatewayPrincipalsEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityAddGatewayPrincipalsLoggers})},i.ConnectivityRemoveGatewayPrincipalsEventName="PBI.Connectivity.RemoveGatewayPrincipals",i.ConnectivityRemoveGatewayPrincipals=a[i.ConnectivityRemoveGatewayPrincipalsEventName]=function(e){return o({name:i.ConnectivityRemoveGatewayPrincipalsEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityRemoveGatewayPrincipalsLoggers})},i.ConnectivityUpdateCredentialsEventName="PBI.Connectivity.UpdateCredentials",i.ConnectivityUpdateCredentials=a[i.ConnectivityUpdateCredentialsEventName]=function(e){return o({name:i.ConnectivityUpdateCredentialsEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityUpdateCredentialsLoggers})},i.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName="PBI.Connectivity.OpenGatewayDatasourceUPNMappingPane",i.ConnectivityOpenGatewayDatasourceUPNMappingPane=a[i.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName]=function(e){return o({name:i.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityOpenGatewayDatasourceUPNMappingPaneLoggers})},i.ConnectivityUpdateGatewayDatasourceUPNMappingEventName="PBI.Connectivity.UpdateGatewayDatasourceUPNMapping",i.ConnectivityUpdateGatewayDatasourceUPNMapping=a[i.ConnectivityUpdateGatewayDatasourceUPNMappingEventName]=function(e){return o({name:i.ConnectivityUpdateGatewayDatasourceUPNMappingEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityUpdateGatewayDatasourceUPNMappingLoggers})},i.ConnectivityTestGatewayDatasourceUPNMappingEventName="PBI.Connectivity.TestGatewayDatasourceUPNMapping",i.ConnectivityTestGatewayDatasourceUPNMapping=a[i.ConnectivityTestGatewayDatasourceUPNMappingEventName]=function(e){return o({name:i.ConnectivityTestGatewayDatasourceUPNMappingEventName,baseEvent:i.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:i.ConnectivityTestGatewayDatasourceUPNMappingLoggers})},i.ConnectivityOAuthInitiatedEventName="PBI.Connectivity.OAuthInitiated",i.ConnectivityOAuthInitiated=a[i.ConnectivityOAuthInitiatedEventName]=function(e){return o({name:i.ConnectivityOAuthInitiatedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.ConnectivityOAuthInitiatedLoggers})},i.ConnectivityOAuthReferrerNotAvailableInIEEventName="PBI.Connectivity.OAuthReferrerNotAvailableInIE",i.ConnectivityOAuthReferrerNotAvailableInIE=a[i.ConnectivityOAuthReferrerNotAvailableInIEEventName]=function(e){return o({name:i.ConnectivityOAuthReferrerNotAvailableInIEEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.ConnectivityOAuthReferrerNotAvailableInIELoggers})},i.ConnectivityOAuthSucceededEventName="PBI.Connectivity.OAuthSucceeded",i.ConnectivityOAuthSucceeded=a[i.ConnectivityOAuthSucceededEventName]=function(e){return o({name:i.ConnectivityOAuthSucceededEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.ConnectivityOAuthSucceededLoggers})}})(powerbi=powerbi||{});;
"use strict";var powerbi,__decorate=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(n<3?o(a):3<n?o(t,r,a):o(t,r))||a);return 3<n&&a&&Object.defineProperty(t,r,a),a},__extends=this&&this.__extends||(function(){var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}})(),__awaiter=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(r,t){function i(e){try{n(l.next(e))}catch(e){t(e)}}function o(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,o)}n((l=l.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var n,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=o.call(i,l)}catch(e){t=[6,e],a=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},commonGlobals=(!(function(t){var r=t.telemetry||(t.telemetry={}),e=jsCommon.Utility,i=t.telemetryEventFactory,o=t.telemetry.EventFactories;e?e.generateGuid:Function.prototype,r.ApprovedResourceFailLoadedEventName="PBI.ApprovedResource.FailLoaded",r.ApprovedResourceFailLoaded=o[r.ApprovedResourceFailLoadedEventName]=function(e){return i({name:r.ApprovedResourceFailLoadedEventName,baseEvent:r.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.ApprovedResourceFailLoadedLoggers})},r.ApprovedResourceSuccessfulLoadEventName="PBI.ApprovedResource.SuccessfulLoad",r.ApprovedResourceSuccessfulLoad=o[r.ApprovedResourceSuccessfulLoadEventName]=function(e){return i({name:r.ApprovedResourceSuccessfulLoadEventName,baseEvent:r.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.ApprovedResourceSuccessfulLoadLoggers})},r.ApprovedResourceEndpointDownEventName="PBI.ApprovedResource.EndpointDown",r.ApprovedResourceEndpointDown=o[r.ApprovedResourceEndpointDownEventName]=function(e){return i({name:r.ApprovedResourceEndpointDownEventName,baseEvent:r.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.ApprovedResourceEndpointDownLoggers})},r.ApproveResourceLoadResourcePackageEventName="PBI.ApproveResource.LoadResourcePackage",r.ApproveResourceLoadResourcePackage=o[r.ApproveResourceLoadResourcePackageEventName]=function(e){return i({name:r.ApproveResourceLoadResourcePackageEventName,baseEvent:r.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:r.ApproveResourceLoadResourcePackageLoggers})},r.AppSourceResourceEndpointDownEventName="PBI.AppSourceResource.EndpointDown",r.AppSourceResourceEndpointDown=o[r.AppSourceResourceEndpointDownEventName]=function(e){return i({name:r.AppSourceResourceEndpointDownEventName,baseEvent:r.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.AppSourceResourceEndpointDownLoggers})},r.VisualConsentRegisterEventName="PBI.VisualConsent.Register",r.VisualConsentRegister=o[r.VisualConsentRegisterEventName]=function(e){return i({name:r.VisualConsentRegisterEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.VisualConsentRegisterLoggers})},r.VisualConsentSetEventName="PBI.VisualConsent.Set",r.VisualConsentSet=o[r.VisualConsentSetEventName]=function(e){return i({name:r.VisualConsentSetEventName,baseEvent:r.CustomerAction(e),info:e,category:t.TelemetryCategory.CustomerAction,loggers:r.VisualConsentSetLoggers})},r.VisualConsentGetEventName="PBI.VisualConsent.Get",r.VisualConsentGet=o[r.VisualConsentGetEventName]=function(e){return i({name:r.VisualConsentGetEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.VisualConsentGetLoggers})},r.VisualEventDownloadContentEventEventName="PBI.VisualEvent.DownloadContentEvent",r.VisualEventDownloadContentEvent=o[r.VisualEventDownloadContentEventEventName]=function(e){return i({name:r.VisualEventDownloadContentEventEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.VisualEventDownloadContentEventLoggers})},r.TrustedVisualLoadEventName="PBI.TrustedVisual.Load",r.TrustedVisualLoad=o[r.TrustedVisualLoadEventName]=function(e){return i({name:r.TrustedVisualLoadEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.TrustedVisualLoadLoggers})},r.TrustedVisualGetConsentEventName="PBI.TrustedVisual.GetConsent",r.TrustedVisualGetConsent=o[r.TrustedVisualGetConsentEventName]=function(e){return i({name:r.TrustedVisualGetConsentEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.TrustedVisualGetConsentLoggers})},r.VisualAuthenticationGetResourceUrlEventName="PBI.VisualAuthentication.GetResourceUrl",r.VisualAuthenticationGetResourceUrl=o[r.VisualAuthenticationGetResourceUrlEventName]=function(e){return i({name:r.VisualAuthenticationGetResourceUrlEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.VisualAuthenticationGetResourceUrlLoggers})},r.VisualAuthenticationGetAADTokenEventName="PBI.VisualAuthentication.GetAADToken",r.VisualAuthenticationGetAADToken=o[r.VisualAuthenticationGetAADTokenEventName]=function(e){return i({name:r.VisualAuthenticationGetAADTokenEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.VisualAuthenticationGetAADTokenLoggers})},r.VisualAuthenticationGetWACTokenEventName="PBI.VisualAuthentication.GetWACToken",r.VisualAuthenticationGetWACToken=o[r.VisualAuthenticationGetWACTokenEventName]=function(e){return i({name:r.VisualAuthenticationGetWACTokenEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.VisualAuthenticationGetWACTokenLoggers})},r.LocalResourceLoadResourcePackageItemEventName="PBI.LocalResource.LoadResourcePackageItem",r.LocalResourceLoadResourcePackageItem=o[r.LocalResourceLoadResourcePackageItemEventName]=function(e){return i({name:r.LocalResourceLoadResourcePackageItemEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.LocalResourceLoadResourcePackageItemLoggers})},r.VisualAuthenticationBlockAccessTokenEventName="PBI.VisualAuthentication.BlockAccessToken",r.VisualAuthenticationBlockAccessToken=o[r.VisualAuthenticationBlockAccessTokenEventName]=function(e){return i({name:r.VisualAuthenticationBlockAccessTokenEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.VisualAuthenticationBlockAccessTokenLoggers})},r.AdminControlInitializedEventName="PBI.AdminControl.Initialized",r.AdminControlInitialized=o[r.AdminControlInitializedEventName]=function(e){return i({name:r.AdminControlInitializedEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.AdminControlInitializedLoggers})},r.PbivizUnzipFailedEventName="PBI.Pbiviz.UnzipFailed",r.PbivizUnzipFailed=o[r.PbivizUnzipFailedEventName]=function(e){return i({name:r.PbivizUnzipFailedEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.PbivizUnzipFailedLoggers})},r.CustomVisualsLicenseLicensesLoadedEventName="PBI.CustomVisualsLicense.LicensesLoaded",r.CustomVisualsLicenseLicensesLoaded=o[r.CustomVisualsLicenseLicensesLoadedEventName]=function(e){return i({name:r.CustomVisualsLicenseLicensesLoadedEventName,baseEvent:r.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.CustomVisualsLicenseLicensesLoadedLoggers})},r.CustomVisualsLicenseGetServicePlansCalledEventName="PBI.CustomVisualsLicense.GetServicePlansCalled",r.CustomVisualsLicenseGetServicePlansCalled=o[r.CustomVisualsLicenseGetServicePlansCalledEventName]=function(e){return i({name:r.CustomVisualsLicenseGetServicePlansCalledEventName,baseEvent:r.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.CustomVisualsLicenseGetServicePlansCalledLoggers})},r.CustomVisualsLicensePrefetchServicePlansCalledEventName="PBI.CustomVisualsLicense.PrefetchServicePlansCalled",r.CustomVisualsLicensePrefetchServicePlansCalled=o[r.CustomVisualsLicensePrefetchServicePlansCalledEventName]=function(e){return i({name:r.CustomVisualsLicensePrefetchServicePlansCalledEventName,baseEvent:r.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:r.CustomVisualsLicensePrefetchServicePlansCalledLoggers})}})(powerbi=powerbi||{}),!(function(e){var t,r;(e=e.visualHost||(e.visualHost={})).EsriVisual="esriVisual",e.EsriTestVisual="esriVisual_TEST",e.VisioVisual="Visio_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",e.VisioDFVisual="VisioDF_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",e.PowerAppsVisual="PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A",e.PowerAppsTestVisual="PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A_TEST",e.MapboxVisual="PBI_CV_EB3A4088_75C5_4746_9D8B_255A7B7ECD6C",e.MapboxTestVisual="MapboxVisual_TEST",e.MapboxNewVisual="PBI_CV_0157F990_CDD5_4FEC_8488_7262B9195669",e.FlowVisual="FlowVisual_C29F1DCC_81F5_4973_94AD_0517D44CC06A",e.FlowTestVisual="FlowVisual_C29F1DCC_81F5_4973_94AD_0517D44CC06A_TEST",e.CharticulatorVisual="charticulator58556A88422D44A99D9BF0052B958F87",e.CharticulatorTestVisual="charticulatorTest5CA7DEC756074797A2410E6A64934779",e.PowerOnVPMenuVisual="vPMenu6454E8C4E1BD492A83084AB46B0C248B",e.PowerOnDEMatrixV2Visual="DataEntryMatrix1444757060245",e.PowerOnDEMatrixV3Visual="PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD",e.PowerOnDetailReportVisual="detailReport1E51681FC15F46F9B4275CE593BECB98",e.PowerOnSmartFilterVisual="SmartFilterBySQLBI1458262140626",e.PowerOnTableEditorVisual="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB181",e.PowerOnTableEditorV2Visual="tableeditor_v2",e.PowerOnForecasterVisual="PBI_CV_8EDDC07B_EE79_4418_A84C_D73897C0E21E",e.PowerOnDraggableChartVisual="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB182",e.PowerOnDEMatrixV3Visual_TEST="PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD_TEST",e.OrgStoreVisualSuffix="_OrgStore",e.CustomVisualDeprecatedAPI="1.2.0",e.TrustedVisuals=[e.EsriVisual,e.EsriTestVisual,e.VisioVisual,e.VisioDFVisual,e.PowerAppsVisual,e.PowerAppsTestVisual,e.MapboxVisual,e.MapboxNewVisual,e.MapboxTestVisual,e.FlowVisual,e.FlowTestVisual,e.PowerOnVPMenuVisual,e.PowerOnDEMatrixV2Visual,e.PowerOnDEMatrixV3Visual,e.PowerOnDetailReportVisual,e.PowerOnSmartFilterVisual,e.PowerOnTableEditorVisual,e.PowerOnTableEditorV2Visual,e.PowerOnForecasterVisual,e.PowerOnDraggableChartVisual,e.PowerOnDEMatrixV3Visual_TEST,e.CharticulatorVisual,e.CharticulatorTestVisual],e.ESRINotSupportedInEmbed="Esri is not supported in Embedded scenario.",e.warningCodeForCV="CV_Warning_Code",e.warningTitleLimit=70,e.warningDetailsLimit=2e3,(r=t=e.ResourcePackageName||(e.ResourcePackageName={})).RegisteredResources="RegisteredResources",r.SharedResources="SharedResources",(r=e.constants||(e.constants={})).ResourcePackageNames=[],r.ResourcePackageNames[1]=t.RegisteredResources,r.ResourcePackageNames[2]=t.SharedResources,r.StaticResourcesDictionary={},r.StaticResourcesDictionary[1]=!0,r.StaticResourcesDictionary[2]=!0})(powerbi=powerbi||{}),!(function(e){(e=e.visualHost||(e.visualHost={})).resourceLoaderHttpTimeout=3e4,e.visualCDNBlobDevName="dev",e.visualCDNBlobDefaultName="prod",e.visualCDNBlobAppStoreName="app-store"})(powerbi=powerbi||{}),!(function(e){(e=e.events||(e.events={})).reloadEmptyVisuals={type:4,name:"reloadEmptyVisuals"},e.applyPendingChanges={type:4,name:"applyPendingChanges"}})(powerbi=powerbi||{}),!(function(e){var t;e=e.contracts||(e.contracts={}),(t=e.SharedResourcePackageNames||(e.SharedResourcePackageNames={})).BaseTheme="BaseTheme",t.Image="Image",t.ShapeMap="ShapeMap",(t=e.ResourcePackageItemType||(e.ResourcePackageItemType={}))[t.CustomVisualJavascript=0]="CustomVisualJavascript",t[t.CustomVisualsCss=1]="CustomVisualsCss",t[t.CustomVisualScreenshot=2]="CustomVisualScreenshot",t[t.CustomVisualIcon=3]="CustomVisualIcon",t[t.CustomVisualWatermark=4]="CustomVisualWatermark",t[t.CustomVisualMetadata=5]="CustomVisualMetadata",t[t.Image=100]="Image",t[t.ShapeMap=200]="ShapeMap",t[t.CustomTheme=201]="CustomTheme",t[t.BaseTheme=202]="BaseTheme",t[t.DashboardTheme=203]="DashboardTheme",t[t.DashboardBaseTheme=204]="DashboardBaseTheme",t[t.HighContrastTheme=205]="HighContrastTheme",t[t.AppNavigation=206]="AppNavigation",t[t.AppTheme=207]="AppTheme",t[t.AppBaseTheme=208]="AppBaseTheme"})(powerbi=powerbi||{}),!(function(e){(e=(e=e.visualHost||(e.visualHost={})).VisualErrorType||(e.VisualErrorType={}))[e.AlreadyOpen=1]="AlreadyOpen",e[e.NotAllowed=2]="NotAllowed",e[e.BlockedByUser=3]="BlockedByUser"})(powerbi=powerbi||{}),!(function(e){function r(e,t,r){var i,o;if(void 0!==e)return i=t.defer(),(o=new FileReader).onload=function(){i.resolve(o.result)},o.onerror=function(){i.reject(o.error)},r?o.readAsText(e):o.readAsDataURL(e),i.promise}(e=(e=e.visualHost||(e.visualHost={})).BlobHelper||(e.BlobHelper={})).readAsDataUrl=function(e,t){return r(e,t,!1)},e.readAsText=function(e,t){return r(e,t,!0)}})(powerbi=powerbi||{}),!(function(i){var s,e,o,n,t,a,r;function l(e){return e&&_.endsWith(e,i.visualHost.OrgStoreVisualSuffix)}function c(e,t,r,i,o,n,a){return!(!t||e===s.EsriVisual||l(e)||a)&&(!!r||!(!i||o.isApprovedResourceServerRender(e))&&(!n||o.isApprovedVisualsDefined()))}s=i.visualHost||(i.visualHost={}),e=s.CustomVisualsUtils||(s.CustomVisualsUtils={}),r=jsCommon.Version,(t=o=e.CustomVisualsAdminControlState||(e.CustomVisualsAdminControlState={}))[t.FeatureIsDisabled=0]="FeatureIsDisabled",t[t.AllCustomVisualsAreEnabled=1]="AllCustomVisualsAreEnabled",t[t.AllCustomVisualsAreDisabled=2]="AllCustomVisualsAreDisabled",t[t.NonCertifiedCustomVisualsAreDisabled=3]="NonCertifiedCustomVisualsAreDisabled",t[t.FailedEvaluatingState=4]="FailedEvaluatingState",(t=n=e.CustomVisualTypes||(e.CustomVisualTypes={}))[t.Unclassified=0]="Unclassified",t[t.NonCertifiedCustomVisual=1]="NonCertifiedCustomVisual",t[t.NonCdnCustomVisual=2]="NonCdnCustomVisual",t[t.CertifiedCustomVisual=3]="CertifiedCustomVisual",t[t.OrganizationalStore=4]="OrganizationalStore",t[t.Native=5]="Native",e.getAdminControlState=function(e,t,r){if(void 0===a)try{if(!(t&&e&&e.featureSwitches&&e.featureSwitches.customVisualsTenantSwitch))return a=o.FeatureIsDisabled;a=e.featureSwitches.customVisualsTenantEnabled?e.featureSwitches.certifiedCustomVisualsTenantEnabled?o.NonCertifiedCustomVisualsAreDisabled:o.AllCustomVisualsAreEnabled:o.AllCustomVisualsAreDisabled,t.logChildEvent(r&&r.event,i.telemetry.AdminControlInitialized,{AdminControlState:o[a]})}catch(e){a=o.FailedEvaluatingState}return a},e.isCustomVisualTypeDisabled=function(e,t,r,i,o,n,a){return n||a?c(t,!0,n,a,r,i,o):c(t,e.featureSwitches.customVisualsTenantSwitch,!e.featureSwitches.customVisualsTenantEnabled,e.featureSwitches.certifiedCustomVisualsTenantEnabled,r,i,o)},e.shouldAllowEmptyDataView=function(e){return!(!e||!e.capabilities)&&(!e.custom||e.apiVersion&&r.gt(e.apiVersion,"3.5.0"))&&e.capabilities.supportsEmptyDataView},e.areCustomVisualsDisabled=function(e,t){return t||e.featureSwitches.customVisualsTenantSwitch&&!e.featureSwitches.customVisualsTenantEnabled},e.isOrganizationalCustomVisual=l,e.isCustomVisualTypeDisabledHelper=c,e.getCustomVisualType=function(e,t,r){return r?l(t)?n.OrganizationalStore:e.isApprovedVisualsDefined()?e.isApprovedResourceServerRender(t)?n.CertifiedCustomVisual:e.isApprovedResource(t)?n.NonCertifiedCustomVisual:n.NonCdnCustomVisual:n.Unclassified:n.Native},e.SandboxPropertyTranslator=function(e){switch(e){case 0:return"allow-scripts";case 1:return"allow-popups";case 2:return"allow-same-origin";case 3:return"allow-forms";case 4:return"allow-top-navigation-by-user-activation";case 5:return"allow-downloads"}},e.isDebugVisual=function(e){return e&&e===(null==(e=i.visuals.plugins.debugVisual)?void 0:e.name)}})(powerbi=powerbi||{}),!(function(e){function t(){return window.powerbi||(window.powerbi={}),window.powerbi}(e=e.visualHost||(e.visualHost={})).ensurePowerbi=t,e.ensurePowerbiCommon=function(){var e=t();return e.common||(e.common={}),e.common},e.ensurePowerbiData=function(){var e=t();return e.data||(e.data={}),e.data},e.ensurePowerbiVisuals=function(){var e=t();return e.visuals||(e.visuals={}),e.visuals},e.ensurePowerbiExtensibility=function(){var e=t();return e.extensibility||(e.extensibility={}),e.extensibility},e.ensureJsCommon=function(){return window.jsCommon||(window.jsCommon={}),window.jsCommon}})(powerbi=powerbi||{}),!(function(e){var t,l,r,i,o,n;function a(e,t){return r[t](e)}function c(e){return e.type,!!n[e.type]}function s(e,t,r){return null!=e&&_.isArray(e),r=p(t,r),_.find(e,(function(e){return e.type===t&&e.name===r}))}function u(e,t){return _.find(e&&e.items,(function(e){return e.name===t}))}function p(e,t){e=o[e]||t;return e}t=(t=e.visualHost||(e.visualHost={})).utils||(t.utils={}),i=e.contracts.ResourcePackageItemType,o=e.visualHost.constants.ResourcePackageNames,n=e.visualHost.constants.StaticResourcesDictionary,l=t.ResourcePackageUtils||(t.ResourcePackageUtils={}),(r={})[i.BaseTheme]=function(e){return"BaseThemes/".concat(e,".json")},r[i.CustomTheme]=function(e){return"BuiltInThemes/".concat(e,".json")},r[i.HighContrastTheme]=function(e){return"HighContrastThemes/".concat(e,".json")},r[i.Image]=function(e){return"Images/".concat(e)},r[i.ShapeMap]=function(e){return"Shapemaps/".concat(e,".json")},l.getSharedResourcePath=a,l.newSharedResourceItem=function(e,t,r){return{type:t,path:a(e,t),name:e,content:r}},l.getStaticResources=function(e){return _.keyBy(_.filter(e,c),(function(e){return e.name}))},l.isStaticResource=c,l.ensureResourcePackage=function(e,t,r){_.isArray(e);var i=s(e,t,r=p(t,r));return i||e.push(i={id:void 0,name:r,type:t,items:[]}),i},l.findResourcePackage=s,l.findItemInPackages=function(e,t,r,i){return u(s(e,t,i),r)},l.findItemInPackage=u,l.ensurePackageName=p,l.mergeStaticResourcePackages=function(e,t){c(e),c(t),e.type,t.type,e.name,t.name,null==e.id&&null!=t.id&&(e.id=t.id);for(var r=0,i=t.items;r<i.length;r++){var o,n,a=i[r],s=l.findItemInPackage(e,a.name);s?(n=o=void 0,n=a,(o=s).name,n.name,o.path,n.path,o.type,n.type,null==o.id&&null!=n.id&&(o.id=n.id),!o.content&&n.content&&(o.content=n.content),!o.contentBlob&&n.contentBlob&&(o.contentBlob=n.contentBlob),!o.contentBlobUrl&&n.contentBlobUrl&&(o.contentBlobUrl=n.contentBlobUrl),o.content||o.contentBlob||o.promise||!n.promise||(o.promise=n.promise),o.content&&o.contentBlob):e.items.push(a)}},l.isCustomVisualResourcePackage=function(e){return e&&(0===e.type||3===e.type)},l.getCustomVisualTypes=function(e){return _.chain(e).filter((function(e){return l.isCustomVisualResourcePackage(e)})).map((function(e){return e.name})).uniq().value()}})(powerbi=powerbi||{}),!(function(l){var e,u,r,d,p,c,h,v,f,y;function g(e,t,r,i,o){return n(t,{packageType:e.packageType,packageName:e.packageName,itemName:e.itemName},r,i,o).then((function(e){return null==e?h.nullConstant():h.text(e)}),(function(e){return h.nullConstant()}))}function m(e){return e?"string"==typeof e?e:null!=e.status?e.status.toString():e.stack?e.stack.toString():e.message?e.message.toString():"Unknown reason":"No reason given"}function n(e,t,r,i,o){var n,e=c.findResourcePackage(e,t.packageType,t.packageName);return e?a(e,t.itemName,r,i,o):(f.error("Missing resource package ".concat(t.packageType),!0),e=void 0,2===t.packageType&&o&&null!=(e=o.itemTypeFromReference)?(n=c.getSharedResourcePath(t.itemName,e),r.loadSharedResource(n,e).catch((function(e){f.error("Error loading shared resource from app ".concat(n," ").concat(m(e)),!1)}))):i.resolve())}function a(e,t,r,i,o){var n,a,s=o&&o.usePersistableFormat,l=o&&o.itemTypeFromReference;return e?(!(n=c.findItemInPackage(e,t))&&2===e.type&&l&&e&&l&&(n=c.newSharedResourceItem(t,l),e.items.push(n)),n&&n.path,n&&n.path?(o=2===e.type?n.content?i.resolve(n.content):n.promise||(n.promise=r.loadSharedResource(n.path,n.type).finally((function(){delete n.promise})).then((function(e){return e instanceof Blob?n.contentBlob=e:(_.isString(e)||(e=JSON.stringify(e)),n.content=e)}),(function(e){throw f.error("Error loading shared resource from app ".concat(n.path," ").concat(m(e)),!1),e}))):r.loadResourcePackageItem(e,t),a=i.defer(),o.then((function(){!(function(e,t,r,i,o){var n=null;if(t){var a,o=o===p.ShapeMap||t.type===p.ShapeMap,s=t.type===p.BaseTheme||t.type===p.CustomTheme||t.type===p.HighContrastTheme,l=3===e.type||0===e.type,c=t.content;if(c)o&&y.isDataUri(c)&&(c=y.atou(y.getBase64ContentFromDataUri(c))),n=c;else if(t.contentBlob){if(2===e.type&&t.type===p.Image||i||o||l||s)return a=r.defer(),(o||l||s?u.readAsText:u.readAsDataUrl)(t.contentBlob,r).then((function(e){return a.resolve(e)}),(function(e){return a.resolve(null)})),a.promise;t.contentBlobUrl||(t.contentBlobUrl=window.URL.createObjectURL(t.contentBlob)),n=t.contentBlobUrl}}return r.resolve(n)})(e,n,i,s,l).then((function(e){return a.resolve(e)}))})).catch((function(e){return a.reject(e)})),a.promise):(f.error("Missing resource item or path !resourcePackageItem=".concat(!n,", resourcePackageItem.path=").concat(n&&n.path),!0),i.resolve())):i.reject(new Error("loadAndResolveContent: no package"))}function o(e,t,r,i){return r?(r=c.findResourcePackage(r,1))?t.loadResourcePackageItem(r,i):e.reject(new Error("loadRegisteredResource: no RegisteredResources package")):e.reject(new Error("loadRegisteredResource: no packages"))}function S(e,t,a){var s=[];return r.visitPropertyExprs({definitions:e,descriptors:t,visitor:function(e,t,r,i,o){var n,i=i&&i.geoJson&&1===o.length&&"content"===o[0];i&&17===(o=t).type.kind&&17===o.name.kind&&17===o.content.kind&&o.type.value===l.GeoJsonTypes.shared&&"string"==typeof(n=o.name.value)&&null==o.content.value&&(a&&a(n,p.ShapeMap),e=h.resourcePackageItem(c.ensurePackageName(2),2,n),o.content=e),e instanceof v&&(n={getRefValue:function(){return t[r]},setRefValue:function(e){t[r]=e}},i&&(n.itemType=p.ShapeMap),s.push(n))}}),s}e=l.visualHost||(l.visualHost={}),u=l.visualHost.BlobHelper,r=l.data.DataViewObjectDefinitions,d=l.data.services.DataViewObjectSerializer,p=l.contracts.ResourcePackageItemType,c=l.visualHost.utils.ResourcePackageUtils,h=l.data.SQExprBuilder,v=l.data.SQResourcePackageItemExpr,f=jsCommon.Trace,y=jsCommon.UrlUtils,(e=e.ResourcePackageReferenceResolver||(e.ResourcePackageReferenceResolver={})).loadFromDataViewObjects=function(e,t,r,i,o,n){if(!e)return o.resolve(null);for(var a=[],s=0,l=S(e,t,n);s<l.length;s++){var c=l[s],u=c.getRefValue();a.push(g(u,r(),i,o,{itemTypeFromReference:c.itemType}))}return o.all(a)},e.loadAndResolveFromDataViewObjects=function(e,t,i,o,n,a,s){if(!e)return n.resolve(null);for(var e=d.serializeObjects(e,t),r=d.deserializeObjects(e,t),e=S(r,t),l=[],c=0,u=e;c<u.length;c++)!(function(t){var e=t.getRefValue(),r=null!=s&&s.isRunning()?s.createChildActivity({name:"Visual Container Resource Load",resourceType:e.packageType}):void 0,e=g(e,i,o,n,{usePersistableFormat:a,itemTypeFromReference:t.itemType}).then((function(e){t.setRefValue(e),r&&r.resolve()})).catch((function(){r&&r.reject()}));l.push(e)})(u[c]);var p=n.defer();return n.all(l).then((function(){return p.resolve(r)})),p.promise},e.hasResourceReferencesToResolve=function(e,t){return!!e&&0<S(e,t).length},e.loadAndResolveFromSQExpr=g,e.getLoadAndResolveErrorReason=m,e.loadAndResolveItemContent=n,e.loadAndResolveContent=a,e.loadRegisteredResource=o,e.loadRegisteredResourceAsDataUri=function(t,e,r,i){return o(t,e,r,i).then((function(e){return 0 instanceof Blob,e instanceof Blob?l.visualHost.BlobHelper.readAsDataUrl(e,t):"string"!=typeof e||y.isDataUri(e)?e:y.makeJsonDataUri(e)}))},e.loadRegisteredResourceAsDecodedString=function(t,e,r,i){return o(t,e,r,i).then((function(e){return 0 instanceof Blob,e instanceof Blob?l.visualHost.BlobHelper.readAsText(e,t):e})).then((function(e){try{"string"==typeof e&&y.isDataUri(e)&&(e=y.atou(y.getBase64ContentFromDataUri(e)))}catch(e){throw f.error("Error decoding registeredResource: ".concat(JSON.stringify(e)),!!e.stack),e}return e}))}})(powerbi=powerbi||{}),!(function(e){((e=e.visualHost||(e.visualHost={})).VisualHostUtils||(e.VisualHostUtils={})).isDefined=function(e,t){for(var r,i=t.split(".");r=i.shift();){if(!e||void 0===e[r]||null===e[r])return!1;e=e[r]}return!0}})(powerbi=powerbi||{}),!(function(l){var i=l.visualHost||(l.visualHost={}),n=(i.createApprovedResourceLoader=function(e,t,r,i,o){return new n(e,t,r,i,o)},e.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},e.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackage=function(n){function t(e,t,r,i,o){a.telemetryService.logEvent(l.telemetry.ApprovedResourceFailLoaded,{visualType:n.name,fileName:e,isClientGenerated:!!o,start:r,end:i,parentId:a.telemetryService.root.id,isError:!0,errorSource:"PowerBI",errorCode:t})}var a=this;return this.approvedResourceService.loadApprovedResourcesMetadata(this.promiseFactory,this.onlyApprovedForServerRenderResources).catch((function(e){return a.promiseFactory.reject(e)})).then((function(){var e=[];return a.approvedResourceService.isApprovedResource(n.name)?(e.push(a.loadResourcesWithVisualApi(n,t)),a.promiseFactory.all(e)):a.promiseFactory.reject("Visual is not an approved visual")}))},e.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},e.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},e.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},e.prototype.loadVisualPlugin=function(t){var r=this.promiseFactory.defer();return t&&t.items&&0<t.items.length?this.loadResourcePackage(t).then((function(){var e=l.visuals.plugins[t.name];e?(e.iconUrl=i.resourceInjector.getInjectedIconUrl(t.name),r.resolve(e)):r.reject("Unable to load visual plugin from resource package: "+t.name)})).catch((function(){r.reject("failed to resolve all promises")})):r.resolve(null),r.promise},e.prototype.destroy=function(){},e.prototype.loadResourcesWithVisualApi=function(r,i){var o=this,n=this.promiseFactory.defer(),a=(new Date).toISOString(),s=this.featureSwitchService?!!this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps:void 0;return this.approvedResourceService.getCustomVisualPbivizJson(r.name).then((function(e){var t=(new Date).toISOString();o.handleLoadResourceResponse(e.data,r),o.telemetryService.logEvent(l.telemetry.ApprovedResourceSuccessfulLoad,{visualType:r.name,fileName:o.approvedResourceService.customVisualJsonUrlBuilder(r.name),isClientGenerated:!!r.isPublic,consumePublicCvsWithoutRps:s,start:a,end:t,parentId:o.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),n.resolve(null)}),(function(e){var e=JSON.stringify(e),t=(new Date).toISOString();i(o.approvedResourceService.customVisualJsonUrlBuilder(r.name),e,a,t,r.isPublic),n.reject(e)})),n.promise},e.prototype.handleLoadResourceResponse=function(e,t){t.items&&t.items[0]&&(t.items[0].content=JSON.stringify(e));e=i.visualPluginUtility.createVisualPlugin(e,this.locale,2),e&&(e.isDeprecated=this.approvedResourceService.isDeprecated(t.name),e.approvedForNoIframe=this.approvedResourceService.isApprovedForNoIframe(t.name)),l.extensibility.visualPluginAdapter.transformPlugin(e),t=l.visuals.plugins[e.name];t&&(e.favoriteId=t.favoriteId,e.isOutOfBox=t.isOutOfBox),l.visuals.plugins[e.name]=e},e);function e(e,t,r,i,o){this.approvedResourceService=t,this.telemetryService=r,this.featureSwitchService=i,this.onlyApprovedForServerRenderResources=o,this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory}})(powerbi=powerbi||{}),window),CustomVisualsUtils=(!(function(n){var a=n.visualHost||(n.visualHost={}),s=jsCommon.Version.gt,r=jsCommon.Version.lt,t=jsCommon.BrowserUtility,l=(a.createApprovedResourceService=function(e,t,r,i,o){return new l(e,t,r,i,o)},i.prototype.getCustomVisualPbivizJson=function(e){var e=this.customVisualJsonUrlBuilder(e),t={responseType:"json",timeout:n.visualHost.resourceLoaderHttpTimeout,retryCount:this.resourcesRetryCount,logRetries:!0,addRequestIdToRetries:!0};return this.httpService.get(e,t)},i.prototype.getCustomVisualVersion=function(e){e=this.getCompatibleVisualVersion(e);return e?e.version:null},i.prototype.getCustomVisualApiVersion=function(e){e=this.getCompatibleApiVersion(e);return e&&e!==this.legacy?e:null},i.prototype.customVisualJsonUrlBuilder=function(e){var t=this.getCompatibleVisualVersion(e);if(t)return this.customVisualsEndpoint+"/"+e+"."+t.version+"."+t.hash+".pbiviz.json"},i.prototype.getVisualIdFromAssetId=function(e){for(var t in this.approvedVisuals)if(this.approvedVisuals[t]&&this.approvedVisuals[t].assetId===e)return t;return null},i.prototype.isApprovedVisualsDefined=function(){return!!this.approvedVisuals},i.prototype.isApprovedResource=function(e){return!!this.approvedVisuals&&!!this.approvedVisuals[e]},i.prototype.isApprovedResourceByAssetId=function(e){return!!this.approvedVisualsAssetIds&&!!this.approvedVisualsAssetIds[e]},i.prototype.isApprovedResourceServerRender=function(e){var t=this.getCompatibleVisualVersion(e);return this.isApprovedResource(e)&&!!t&&!!t.approvedForServerRender},i.prototype.isApprovedForNoIframe=function(e){return!(this.onlyApprovedForServerRenderResources||t.isInternetExplorerBrowser()||!(e=this.getCompatibleVisualVersion(e))||!e.approvedForNoIframe)},i.prototype.isTrustedResource=function(t){return!!_.find(this.trustedVisuals,(function(e){return e===t}))},i.prototype.addTrustedVisual=function(e){this.isTrustedResource(e)||this.trustedVisuals.push(e)},i.prototype.isDeprecated=function(e){var t=this.getCompatibleVisualVersion(e);return this.isApprovedResource(e)&&!!t&&(!!t.isDeprecated||t.apiVersion&&r(t.apiVersion,a.CustomVisualDeprecatedAPI))},i.prototype.usesExternalResourcesInAirGappedEnv=function(e){e=this.getCompatibleVisualVersion(e);return this.featureSwitchService.featureSwitches.restrictServiceOutboundFlowsEnabled&&e&&e.usesExternalResources},i.prototype.canUseLocalStorage=function(e){var t;return!this.onlyApprovedForServerRenderResources&&!!(t=this.getCompatibleVisualVersion(e))&&!!this.isApprovedResource(e)&&t.canUseLocalStorage},i.prototype.removeApprovedResource=function(e){this.approvedVisuals&&(this.approvedVisuals[e]=void 0)},i.prototype.getCdnEnvEndpointName=function(e){var t=n.getVisualCDNBlobContainerUrl()||a.visualCDNBlobDefaultName;return e+(t=this.featureSwitchService.featureSwitches.appStoreCdnOverride?a.visualCDNBlobAppStoreName:t)},i.prototype.loadApprovedResourcesMetadata=function(t,e){var i=this;return this.approvedResourceJsonInProccess||(this.approvedResourceJsonRequest=t.defer(),this.approvedResourceJsonInProccess=!0,(e?"boolean"==typeof e?t.resolve(e):e:t.resolve(!1)).then((function(e){if(e&&(i.onlyApprovedForServerRenderResources=!!e),i.approvedVisuals)return i.setApprovedResources(),i.approvedResourceJsonRequest.resolve(null),i.approvedResourceJsonRequest.promise;e=null!=(e=null==(e=i.options)?void 0:e.isApprovedLoadingDisabled())?e:t.resolve(!1);t.allSettled([i.featureSwitchService.getFeatureSwitches(),e,i.customVisualsEndpointPromise]).then((function(e){i.approvedResourcesDisabled=e[1].value,i.customVisualsEndpoint=e[2].value})).finally((function(){var r,e;i.approvedResourcesDisabled?i.approvedResourceJsonRequest.reject("approvedResourcesDisabled is true in an unsupported environment for loading metadata"):(r=(new Date).toISOString(),e={responseType:"json",timeout:n.visualHost.resourceLoaderHttpTimeout,retryCount:i.resourcesRetryCount,logRetries:!0,addRequestIdToRetries:!0},i.httpService.get(i.customVisualsEndpoint+"/approvedResources.json",e).then((function(e){var t=(new Date).toISOString();i.telemetryService&&i.telemetryService.logEvent(n.telemetry.ApprovedResourceEndpointDown,{endpoint:i.customVisualsEndpoint,allEndpointDown:!1,start:r,end:t,parentId:i.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),i.setApprovedResources(e.data),i.approvedResourceJsonRequest.resolve(null),i.approvedResourceJsonInProccess=!1}),(function(e){var t=(new Date).toISOString();i.telemetryService&&i.telemetryService.logEvent(n.telemetry.ApprovedResourceEndpointDown,{endpoint:i.customVisualsEndpoint,allEndpointDown:!0,start:r,end:t,parentId:i.telemetryService.root.id,isError:!0,errorSource:"PowerBI",errorCode:JSON.stringify(e)}),i.approvedResourceJsonRequest.reject(JSON.stringify(e)),i.approvedResourceJsonInProccess=!1})))}))}))),this.approvedResourceJsonRequest.promise},i.prototype.cdnUrlBuilder=function(e,t,r){var i=this.getCompatibleApiVersion(t);return i?this.getCdnEnvEndpointName(e)+"/"+i+"/"+t+r:this.getCdnEnvEndpointName(e)+"/"+t+r},i.prototype.getTrustedResources=function(){return this.trustedVisuals},i.prototype.hasApi=function(e){e=this.getCompatibleVisualVersion(e);return!!(e&&this.approvedVisuals&&e&&e.apiVersion&&e.apiVersion!==this.legacy)},i.prototype.getTelemetryUsageLimit=function(e){var t=this.getCompatibleVisualVersion(e);return t&&this.isApprovedResource(e)&&t.telemetryUsageLimit||0},i.prototype.canRefreshHostData=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&!!this.isApprovedResource(e)&&t.canRefreshHostData},i.prototype.canGetAADToken=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&!this.blockedAccessToken(e)&&!!this.isApprovedResource(e)&&t.canGetAADToken},i.prototype.blockedAccessToken=function(e){if(this.options&&this.options.shouldBlockAccessToken())return this.telemetryService&&this.telemetryService.logEvent(n.telemetry.VisualAuthenticationBlockAccessToken,{visualType:e,reason:"Access Token does not exists in publishToWeb/PaasEmbed"}),!0;try{var t=JSON.parse(atob(commonGlobals.powerBIAccessToken.split(".")[1])).scp;return 0<=t.indexOf("user_impersonation")||0<=t.indexOf("__Tokens.WAC")?!1:(this.telemetryService&&this.telemetryService.logEvent(n.telemetry.VisualAuthenticationBlockAccessToken,{visualType:e,reason:"Access Token is blocked due to insufficient scope"}),!0)}catch(e){return!1}},i.prototype.canGetWACToken=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&!this.blockedAccessToken(e)&&!!this.isApprovedResource(e)&&t.canGetWACToken},i.prototype.getAllApprovedForServerRenderResourcesTypes=function(){var e,t=this;return this.approvedVisuals?(e=Object.keys(this.approvedVisuals),_.filter(e,(function(e){return t.isApprovedResourceServerRender(e)}))):[]},i.prototype.getPublicId=function(e){return this.isApprovedResource(e)&&this.approvedVisuals[e].assetId?this.approvedVisuals[e].assetId:null},i.prototype.canManageAsyncUpdate=function(e){if(this.isApprovedResource(e)){e=this.getCompatibleVisualVersion(e);if(e&&e.callsRenderingCompleted)return!0}return!1},i.prototype.getCompatibleApiVersion=function(e){if(!this.isApprovedResource(e))return null;if(!this.approvedVisuals[e].allVersions)return null;for(var e=this.approvedVisuals[e].allVersions,r=(e.sort((function(e,t){return e.apiVersion&&(!t.apiVersion||s(e.apiVersion,t.apiVersion))?-1:1})),this),t=0,i=e;t<i.length;t++){var o=(function(t){if(n.extensibility.getVisualApiVersions().some((function(e){return e.version===t.apiVersion}))&&!r.shouldSkipVersion(t))return{value:t.apiVersion}})(i[t]);if("object"==typeof o)return o.value}return this.legacy},i.prototype.shouldSkipVersion=function(e){return null!=e.gradualExposureFSNumber&&(e="".concat(this.gradualExposureFSPrefix).concat(e.gradualExposureFSNumber),!this.featureSwitchService.featureSwitches[e])},i.prototype.getCompatibleVisualVersion=function(e){var t=this.getCompatibleApiVersion(e);if(t)for(var r=0,i=this.approvedVisuals[e].allVersions;r<i.length;r++){var o=i[r];if(o.apiVersion===t)return o}return null},i.prototype.setApprovedResources=function(e){e&&(this.approvedVisuals=e,this.approvedVisualsAssetIds=i.buildApprovedVisualsAssetIds(e)),this.onlyApprovedForServerRenderResources&&(e=this.getAllApprovedForServerRenderResourcesTypes(),e=_.pick(this.approvedVisuals,e),this.approvedVisuals=e)},i.buildApprovedVisualsAssetIds=function(e){return _.reduce(e,(function(e,t){return t.assetId&&(e[t.assetId]=!0),e}),{})},i);function i(e,t,r,i,o){this.featureSwitchService=e,this.httpService=t,this.options=i,this.telemetryService=o,this.trustedVisuals=a.TrustedVisuals,this.resourcesRetryCount=5,this.legacy="legacy",this.gradualExposureFSPrefix="customVisualsGradualExposure",this.approvedResourceJsonInProccess=!1,this.customVisualsEndpointPromise=r.getCustomVisualsEndpointAsync()}})(powerbi=powerbi||{}),powerbi.visualHost.CustomVisualsUtils),createDataViewScopeIdentity=(!(function(o){var n=o.visualHost||(o.visualHost={}),a=(n.createConditionalResourceLoader=function(e,t,r,i,o){return new a(e,t,r,i,o)},e.prototype.resourceLoaderSelector=function(e){switch(e.type){case 0:case 3:return this.getCustomVisualResourceLoader(e);case 1:case 2:return this.getStaticResourceResourceLoader();default:e.type,e.type}},e.prototype.getStaticResourceResourceLoader=function(){return this.getLocalResourceLoader()},e.prototype.getCustomVisualResourceLoader=function(e){if(3===e.type)return this.getOrganizationalStoreResourceLoader();if(e.developerModeVisual)return this.getSandboxResourceLoader();if(this.approvedResourceService.isTrustedResource(e.name)){if(this.getApprovedResourcesForTrustedVisualsEnabled())return this.getTrustedResourceLoader()}else{if(this.resourceLoaderInitOptions.getApprovedResourcesEnabled())return this.getApprovedResourceLoader();if(this.resourceLoaderInitOptions.getSandboxVisualsEnabled())return this.getSandboxResourceLoader()}return this.getLocalResourceLoader()},e.prototype.getApprovedResourcesForTrustedVisualsEnabled=function(){return this.resourceLoaderInitOptions.getApprovedResourcesEnabled()||o.getVisualCDNBlobContainerUrl()!==n.visualCDNBlobDevName},e.prototype.getLocalResourceLoader=function(){return void 0===this.resourceLoaderCollection.localResourceLoader&&(this.resourceLoaderCollection.localResourceLoader=this.resourceLoaderFactories.localResourceLoaderFactory()),this.resourceLoaderCollection.localResourceLoader},e.prototype.getSandboxResourceLoader=function(){return void 0===this.resourceLoaderCollection.sandboxResourceLoader&&(this.resourceLoaderCollection.sandboxResourceLoader=this.resourceLoaderFactories.sandboxResourceLoaderFactory()),this.resourceLoaderCollection.sandboxResourceLoader},e.prototype.getApprovedResourceLoader=function(){return void 0===this.resourceLoaderCollection.approvedResourceLoader&&(this.resourceLoaderCollection.approvedResourceLoader=this.resourceLoaderFactories.approvedResourceLoaderFactory()),this.resourceLoaderCollection.approvedResourceLoader},e.prototype.getTrustedResourceLoader=function(){return void 0===this.resourceLoaderCollection.trustedResourceLoader&&(this.resourceLoaderCollection.trustedResourceLoader=this.resourceLoaderFactories.trustedResourceLoaderFactory()),this.resourceLoaderCollection.trustedResourceLoader},e.prototype.getOrganizationalStoreResourceLoader=function(){return void 0===this.resourceLoaderCollection.organizationalStoreResourceLoader&&(this.resourceLoaderCollection.organizationalStoreResourceLoader=this.resourceLoaderFactories.organizationalStoreResourceLoaderFactory()),this.resourceLoaderCollection.organizationalStoreResourceLoader},e.prototype.loadTrustedResourcePackages=function(e){var t=[];return t.push(this.getTrustedResourceLoader().loadTrustedResourcePackages(e)),this.promiseFactory.all(t)},e.prototype.updateResourcePackageId=function(e){var t;return o.visuals.plugins&&(t=o.visuals.plugins[e.name])&&(t.resourcePackageId=e.id),null},e.prototype.isValid=function(e){var t;return null!=o.visuals.plugins&&null!=e&&null!=e.name&&!(n.CustomVisualsUtils.isOrganizationalCustomVisual(e.name)&&3!==e.type||null!=(t=o.visuals.plugins[e.name])&&!0!==t.custom&&!this.approvedResourceService.isTrustedResource(e.name))},e.prototype.loadResourcePackages=function(e){for(var t=this,r=[],i=this,o=0,n=e;o<n.length;o++)!(function(e){r.push(i.resourceLoaderSelector(e).loadResourcePackage(e).then((function(){return t.updateResourcePackageId(e)})))})(n[o]);return this.promiseFactory.all(r)},e.prototype.isPublicManagedVisual=function(e){var t=this.promiseFactory.defer();return this.managedCustomVisualsService?this.managedCustomVisualsService.isPublicManagedVisualByVisualType(e).then((function(e){t.resolve(e)})).catch((function(){t.reject()})):t.resolve(!1),t.promise},e.prototype.loadResourcePackage=function(t){var r=this;if(o.getVisualCDNBlobContainerUrl()!==n.visualCDNBlobDevName&&!1===this.isValid(t))return this.promiseFactory.reject("Attempting to load an invalid custom visual");var e,i=this.resourceLoaderSelector(t);if(i===this.resourceLoaderCollection.approvedResourceLoader)e=i.loadResourcePackage(t).catch((function(e){return r.isPublicManagedVisual(t.name).then((function(e){return e||r.resourceLoaderInitOptions.getSandboxVisualsEnabled?r.approvedResourceService.isApprovedResource(t.name)?r.promiseFactory.reject("Fallback is blocked for public custom visuals"):(r.approvedResourceService.removeApprovedResource(t.name),e?r.promiseFactory.reject("Fallback is blocked for public managed visuals"):r.getSandboxResourceLoader().loadResourcePackage(t)):r.getLocalResourceLoader().loadResourcePackage(t)}))}));else{if(i===this.resourceLoaderCollection.trustedResourceLoader)return i.loadResourcePackage(t);e=this.isPublicManagedVisual(t.name).then((function(e){return e&&!t.developerModeVisual?r.promiseFactory.reject("Fallback is blocked for public managed visuals"):r.approvedResourceService.isApprovedResource(t.name)&&!t.developerModeVisual?r.promiseFactory.reject("Fallback is blocked for public custom visuals"):i.loadResourcePackage(t)}))}return e.then((function(){return r.updateResourcePackageId(t)}))},e.prototype.loadVisualPlugin=function(e){return this.resourceLoaderSelector(e).loadVisualPlugin(e)},e.prototype.loadVisualPlugins=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.resourceLoaderSelector(o).loadVisualPlugin(o))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackageItem=function(e,t){return this.resourceLoaderSelector(e).loadResourcePackageItem(e,t)},e.prototype.loadSharedResource=function(e,t){return this.getLocalResourceLoader().loadSharedResource(e,t)},e.prototype.destroy=function(){var e,t=this.resourceLoaderCollection;for(e in t)t.hasOwnProperty(e)&&t[e].destroy()},e);function e(e,t,r,i,o){this.promiseFactory=e,this.resourceLoaderInitOptions=t,this.resourceLoaderFactories=r,this.approvedResourceService=i,this.managedCustomVisualsService=o,this.resourceLoaderCollection={}}})(powerbi=powerbi||{}),!(function(l){var a=l.visualHost||(l.visualHost={}),s=(a.createTrustedResourceLoader=function(e,t,r,i,o,n,a){return new s(e,t,r,i,o,n,a)},a.CustomVizJSONSuffix=".pbiviz.json",e.prototype.loadTrustedResourcePackages=function(e){var t=[];if(e&&0<e.length)for(var r=9999,i=0,o=e;i<o.length;i++){var n=o[i];l.visuals.plugins[n]?t.push(this.promiseFactory.resolve([l.visuals.plugins[n]])):(n={id:r++,name:n,type:0,items:[{name:n,type:l.contracts.ResourcePackageItemType.CustomVisualMetadata,path:n+a.CustomVizJSONSuffix}]},this.resourcePackagesService.registerPackages([n]),t.push(this.loadResourcePackage(n)))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},e.prototype.loadResourcePackage=function(r){var i=this;return this.resourceLoaderInitOptions&&!this.resourceLoaderInitOptions.getApprovedResourcesEnabled()?this.promiseFactory.all([]):this.approvedResourceService.loadApprovedResourcesMetadata(this.promiseFactory,this.onlyApprovedForServerRenderResources).catch((function(e){return i.promiseFactory.reject(e)})).then((function(){var e,t=[];return i.onlyApprovedForServerRenderResources&&!i.approvedResourceService.isApprovedResource(r.name)?i.promiseFactory.reject("Visual is not an approved visual"):i.approvedResourceService.hasApi(r.name)?((e=i.loadCustomVisualJson(r.name,r.isPublic)).catch((function(e){return i.promiseFactory.reject(e)})),t.push(e),i.promiseFactory.all(t)):i.promiseFactory.reject("The trusted visual does not have a supported API version for this client")}))},e.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},e.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},e.prototype.loadVisualPlugins=function(e){return this.promiseFactory.reject()},e.prototype.loadVisualPlugin=function(e){return this.promiseFactory.reject()},e.prototype.destroy=function(){},e.prototype.loadCustomVisualJson=function(r,i){var o=this,n=this.promiseFactory.defer(),a=(new Date).toISOString(),s=this.featureSwitchService?!!this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps:void 0;return this.approvedResourceService.getCustomVisualPbivizJson(r).then((function(e){var t=(new Date).toISOString(),t=(o.telemetryService.logEvent(l.telemetry.ApprovedResourceSuccessfulLoad,{visualType:r,fileName:o.approvedResourceService.customVisualJsonUrlBuilder(r),isClientGenerated:!!i,consumePublicCvsWithoutRps:s,start:a,end:t,parentId:o.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),o.handleLoadResourceResponse(e.data));n.resolve(t)}),(function(e){var t=(new Date).toISOString(),t=o.handleLoadResourceError(e,r,o.approvedResourceService.customVisualJsonUrlBuilder(r),a,t,i);n.reject(t),n.reject(e.data)})),n.promise},e.prototype.handleLoadResourceError=function(e,t,r,i,o,n){e=JSON.stringify(e);return this.telemetryService.logEvent(l.telemetry.ApprovedResourceFailLoaded,{visualType:t,fileName:r,isClientGenerated:!!n,start:i,end:o,parentId:this.telemetryService.root.id,isError:!0,errorSource:"PowerBI",errorCode:e}),e},e.prototype.handleLoadResourceResponse=function(e){var t;try{t=a.visualPluginUtility.createVisualPlugin(e,this.locale,2)}catch(e){return null}t.custom=!0,t.isDeprecated=this.approvedResourceService.isDeprecated(t.name),(t.name===a.EsriVisual||t.name===a.PowerAppsVisual||t.name===a.FlowVisual&&this.featureSwitchService.featureSwitches.powerAutomateNativeVisual)&&(t.custom=!1);e=l.visuals.plugins[t.name];return e&&(t.favoriteId=e.favoriteId,t.isOutOfBox=e.isOutOfBox),l.extensibility.visualPluginAdapter.transformPlugin(t),l.visuals.plugins[t.name]=t},e);function e(e,t,r,i,o,n,a){this.approvedResourceService=t,this.resourcePackagesService=r,this.featureSwitchService=i,this.telemetryService=o,this.onlyApprovedForServerRenderResources=n,this.resourceLoaderInitOptions=a,this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory}})(powerbi=powerbi||{}),!(function(o){var n=o.visualHost||(o.visualHost={}),e=o.telemetry.LocalResourceLoadResourcePackageItemEventName,t=o.MonitorWith,r=o.contracts.ResourcePackageItemType,i=n.utils.ResourcePackageUtils,a=(n.createResourceLoader=function(e,t,r){return new l(e,t,r||new a(e.promiseFactory))},s.prototype.get=function(e,t,r){return this.promiseFactory.reject()},s.prototype.getBlob=function(e,t,r){return this.promiseFactory.reject()},s);function s(e){this.promiseFactory=e}n.DefaultSharedResourceItemProxy=a,c.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},c.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},c.prototype.loadResourcePackage=function(e){var t=[];if(e&&e.items)for(var r=0,i=e.items;r<i.length;r++){var o=i[r];t.push(this.loadCustomVisualResourcePackageItem(o,e))}return this.promiseFactory.all(t)},c.prototype.loadResourcePackageItem=function(e,t){t=i.findItemInPackage(e,t);return t?t.content?this.promiseFactory.resolve(t.content):this.loadBlob(e.id,e.name,t):(jsCommon.Trace.warning("loadResourcePackageItem: item not found in package"),this.promiseFactory.resolve(null))},c.prototype.loadSharedResource=function(e,t){return t===r.Image?this.sharedResourceItemProxy.getBlob(null,i.ensurePackageName(2),e,{retries:1}):this.sharedResourceItemProxy.get(null,i.ensurePackageName(2),e,{retries:1})},c.prototype.loadVisualPlugin=function(t){var r=this,i=this.promiseFactory.defer();return t&&t.items&&0<t.items.length?this.loadResourcePackage(t).then((function(){var e=o.visuals.plugins[t.name];e?(e.iconUrl=r.getIconUrl(t),i.resolve(e)):i.reject("Unable to load visual plugin from resource package")})).catch((function(){i.reject("failed to resolve all promises")})):i.resolve(null),i.promise},c.prototype.destroy=function(){},c.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},c.prototype.getIconUrl=function(e){var t="#css-"+e.name,r=$(t)[0],i=_.find(document.styleSheets,(function(e){return e.ownerNode===r}));if(i)for(var o=0;o<i.cssRules.length;o++){var n=i.cssRules[o];if(n.selectorText&&n.selectorText===".visual-icon."+e.name)return n.style.backgroundImage}return""},c.prototype.loadCustomVisualResourcePackageItem=function(e,t){switch(e.type){case o.contracts.ResourcePackageItemType.CustomVisualJavascript:return this.loadCustomVisualJS(t.id,t.name,e);case o.contracts.ResourcePackageItemType.CustomVisualsCss:return this.loadCustomVisualCss(t.id,t.name,e);case o.contracts.ResourcePackageItemType.CustomVisualMetadata:return this.loadCustomVisualMetadata(t.id,t.name,e)}},c.prototype.loadCustomVisualJS=function(e,t,r){var i=this,o=this.promiseFactory.defer();return r.content?(n.resourceInjector.injectJsCode(t,r.content),o.resolve(r.content)):(this.provider,this.provider.get(e,t,r.path,{retries:1}).then((function(e){n.resourceInjector.injectJsCode(t,e),r.content=e,i.transformPlugin(t).then((function(){return o.resolve(e)}),(function(e){return o.reject(e)}))})).catch((function(e){o.reject(e)}))),o.promise},c.prototype.transformPlugin=function(e){var t=o.visuals.plugins[e];return t?(o.extensibility.visualPluginAdapter.transformPlugin(t),this.promiseFactory.resolve()):this.promiseFactory.reject("Unable to load visual plugin from resource package: "+e)},c.prototype.loadCustomVisualCss=function(e,t,r){var i=this.promiseFactory.defer();return r.content?(n.resourceInjector.injectCssCode(t,r.content),i.resolve(r.content)):(this.provider,this.provider.get(e,t,r.path,{retries:1}).then((function(e){n.resourceInjector.injectCssCode(t,e),r.content=e,i.resolve(e)})).catch((function(e){i.reject(e)}))),i.promise},c.prototype.loadCustomVisualMetadata=function(e,t,r){var i=this,o=this.promiseFactory.defer();try{r.content?o.resolve(this.createPlugin(t,r.content)):this.provider.get(e,t,r.path,{retries:1}).then((function(e){r.content=e,o.resolve(i.createPlugin(t,e))})).catch((function(e){o.reject(e)}))}catch(e){o.reject(e)}return o.promise},c.prototype.createPlugin=function(e,t){var r=t,t=("object"!=typeof t&&(r=JSON.parse(t)),o.visualHost.visualPluginUtility.createVisualPlugin(r,this.locale,0)),r=(o.extensibility.visualPluginAdapter.transformPlugin(t),o.visuals.plugins[t.name]);return r&&!r.custom&&(t.custom=!1),r&&(t.favoriteId=r.favoriteId,t.isOutOfBox=r.isOutOfBox),o.visuals.plugins[t.name]=t},c.prototype.loadBlob=function(e,t,r){var i=this.promiseFactory.defer(this.telemetryV2Enabled);return r.contentBlob?i.resolve(r.contentBlob):r.promise?r.promise.then((function(e){return i.resolve(e)})):(r.promise=this.provider.getBlob(e,t,r.path,{retries:1}),r.promise.then((function(e){r.contentBlob=e,i.resolve(e)})).catch((function(e){i.reject(e)})).finally((function(){delete r.promise}))),i.promise},__decorate([t(e)],c.prototype,"loadResourcePackageItem",null);var l=c;function c(e,t,r){this.provider=t,this.sharedResourceItemProxy=r,this.promiseFactory=e&&e.promiseFactory,this.locale=e&&e.locale,this.telemetryV2Enabled=e&&e.telemetryV2Enabled}n.LocalResourceLoader=l})(powerbi=powerbi||{}),!(function(e){function i(e,t){t=r(t);return e&&e.stringResources?e.stringResources[t]:null}function r(e){return{ar:"ar-SA",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR","en-US":"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fi:"fi-FI",fr:"fr-FR",gl:"gl-ES",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",id:"id-ID",it:"it-IT",ja:"ja-JP",kk:"kk-KZ",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ms:"ms-MY",no:"nb-NO",nl:"nl-NL",pl:"pl-PL",br:"pt-BR",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",si:"sl-SI","sr-Cyrl":"sr-Cyrl-RS","sr-Latn":"sr-Latn-RS",sv:"sv-SE",th:"th-TH",tr:"tr-TR",uk:"uk-UA",vi:"vi-VN","zh-Hans":"zh-CN","zh-Hant":"zh-TW"}[e]||e||navigator.language}(e=(e=e.visualHost||(e.visualHost={})).LocalizationResourceUtility||(e.LocalizationResourceUtility={})).setLocalizedCapabilities=function(e,t){var r=e.capabilities,t=i(e,t)||i(e,"en-US");return r&&t&&(function e(t,r){for(var i in t){var o;t.hasOwnProperty(i)&&("object"==typeof t[i]?e(t[i],r):"displayNameKey"===i&&t.displayName?(o=t.displayNameKey,t.displayName=r[o]||t.displayName):"descriptionKey"===i&&t.description?(o=t.descriptionKey,t.description=r[o]||t.description):"placeHolderTextKey"===i&&t.placeHolderText&&(o=t.placeHolderTextKey,t.placeHolderText=r[o]||t.placeHolderText))}})(r,t),e},e.getLocalizedResources=i,e.getLocale=r})(powerbi=powerbi||{}),!(function(t){var e,r,i,o,n;e=t.visualHost||(t.visualHost={}),o=jsCommon.Lazy,n=t.visuals.plugins,e=e.utils||(e.utils={}),r=["play","subview","smallMultiple"],i=new o(function(){var e={};return e[n.card.name]=!0,e[n.gauge.name]=!0,e[n.image.name]=!0,e[n.kpi.name]=!0,e[n.textbox.name]=!0,e}),e.isCustomVisual=function(e,t){return e?!!e.custom:!_.includes(r,t)},e.isScriptVisual=function(e){return e&&e.capabilities&&e.capabilities.dataViewMappings&&!!t.ScriptResultUtil.findScriptResultMapping(e.capabilities.dataViewMappings)},e.isScriptVisualQueryable=function(e,t){return"pythonVisual"===e||!(!t||!t.scriptVisualEnabled)},e.isLightWeightRenderingVisual=function(e){return!!e&&!!i.getValue()[e.name]}})(powerbi=powerbi||{}),!(function(l){var c,e;function t(){this.visualPlugins={},this.loadedVisualPlugins={}}c=l.visualHost||(l.visualHost={}),e=c.visualPluginServiceHelpers||(c.visualPluginServiceHelpers={}),t.prototype.getLoadedPlugins=function(){return _.map(this.loadedVisualPlugins,(function(e){return e}))},t.prototype.getLoadedPlugin=function(e){return this.loadedVisualPlugins[e]},t.prototype.hasPlugin=function(e){return!!this.visualPlugins[e]},t.prototype.loadPlugin=function(e,t){var r;t&&(null==(r=this.visualPlugins[e])||!0===r.custom||t.developerModeVisual)&&(this.visualPlugins[e]=t),this.loadedVisualPlugins[e]=this.visualPlugins[e]},t.prototype.unloadPlugin=function(e){delete this.loadedVisualPlugins[e]},e.VisualPluginStorage=t,(e=e.VisualPluginStorage||(e.VisualPluginStorage={})).ensurePlugin=function(t,e,r,i,o,n){var a,s=e.defer();return i.name!==c.PowerAppsVisual||i.isPublic?!o&&t.hasPlugin(i.name)?(t.loadPlugin(i.name),s.resolve(null)):!o&&l.visuals.plugins[i.name]?(t.loadPlugin(i.name,l.visuals.plugins[i.name]),s.resolve(null)):_.isEmpty(i.items)?s.reject("Resource package does not contain any items"):(n&&(a=n.startEvent(l.telemetry.ApproveResourceLoadResourcePackage,{resourcePackageName:i.name})),r.loadResourcePackage(i).catch((function(e){i.name})).finally((function(){var e=l.visuals.plugins[i.name];e?(e.iconUrl||(e.iconUrl=c.visualPluginServiceHelpers.getPluginIconUrl(i.name)),t.loadPlugin(e.name,e),s.resolve(null),a&&a.resolve()):(s.reject("Unable to load visual plugin from resource package"),a&&a.reject())}))):s.resolve(null),s.promise},e.ensureTrustedVisualPlugins=function(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];e.loadPlugin(o.name,o)}}})(powerbi=powerbi||{}),!(function(n){var e,r;function a(e,t){if(t)switch(e.name){case r.actionButton.name:e.capabilities=n.visuals.getActionButtonCapabilities(t);break;case r.scatterChart.name:e.capabilities=n.visuals.getScatterChartCapabilities(t);break;case r.areaChart.name:e.capabilities=n.visuals.getLineChartCapabilities(!1,!0,t);break;case r.lineChart.name:e.capabilities=n.visuals.getLineChartCapabilities(!1,!1,t);break;case r.stackedAreaChart.name:e.capabilities=n.visuals.getLineChartCapabilities(!0,!0,t);break;case r.waterfallChart.name:e.capabilities=n.visuals.getWaterfallChartCapabilities(t);break;case r.comboChart.name:e.capabilities=n.visuals.getLegacyComboChartCapabilities(!1);break;case r.lineStackedColumnComboChart.name:e.capabilities=n.visuals.getComboChartCapabilities(!0,t);break;case r.lineClusteredColumnComboChart.name:e.capabilities=n.visuals.getComboChartCapabilities(!1,t);break;case r.columnChart.name:case r.hundredPercentStackedColumnChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!1,!0,!1,t);break;case r.barChart.name:case r.hundredPercentStackedBarChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!0,!0,!1,t);break;case r.clusteredBarChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!0,!1,!1,t);break;case r.clusteredColumnChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!1,!1,!1,t);break;case r.ribbonChart.name:e.capabilities=n.visuals.getColumnChartCapabilities(!1,!1,!0,t);break;case r.pivotTable.name:e.capabilities=n.visuals.getPivotTableCapabilities(t);break;case r.filledMap.name:e.capabilities=n.visuals.getFilledMapCapabilities(t);break;case r.azureMap.name:e.capabilities=n.visuals.getAzureMapCapabilities(t);break;case r.map.name:e.capabilities=n.visuals.getMapCapabilities(t);break;case r.donutChart.name:case r.pieChart.name:e.capabilities=n.visuals.getDonutChartCapabilities(t);break;case r.kpi.name:e.capabilities=n.visuals.getKPIStatusWithHistoryCapabilities(t);break;case r.funnel.name:e.capabilities=n.visuals.getFunnelChartCapabilities(t);break;case r.shapeMap.name:e.capabilities=n.visuals.getShapeMapCapabilities();break;case r.table.name:e.capabilities=n.visuals.getTableCapabilities(t);break;case r.tableEx.name:e.capabilities=n.visuals.getTableExCapabilities(t);break;case r.treemap.name:e.capabilities=n.visuals.getTreemapCapabilities(t);break;case r.slicer.name:e.capabilities=n.visuals.getSlicerCapabilities(t);break;case r.keyDriversVisual.name:e.capabilities=n.visuals.getKeyDriversCapabilities();break;case r.decompositionTreeVisual.name:e.capabilities=n.visuals.getDecompositionTreeCapabilities(t)}}e=n.visualHost||(n.visualHost={}),r=n.visuals.plugins,(e=e.visualPluginServiceHelpers||(e.visualPluginServiceHelpers={})).getPluginCopyWithFeatureSwitches=function(e,t,r,i){return e=e,t=t,i=i,o=function(e){return a(e,r)},(e=n.Prototype.inherit(e)).create=t,e.createES6=i,o&&o(e),e;var o},e.applyFeatureSwitches=a,e.getPluginIconUrl=function(e){var t=$("#css-"+e)[0],r=_.find(document.styleSheets,(function(e){return e.ownerNode===t}));if(r&&r.cssRules)for(var i=0;i<r.cssRules.length;i++){var o=r.cssRules[i];if(o.selectorText&&o.selectorText===".visual-icon."+e)return o.style.backgroundImage}return""}})(powerbi=powerbi||{}),!(function(c){var e;(e=(e=c.visualHost||(c.visualHost={})).visualPluginServiceHelpers||(e.visualPluginServiceHelpers={})).isVisualPluginLoaded=function(e){return!!c.visuals.plugins[e]},e.ensurePlugin=function(r,i,o,n,e,a,t){function s(){var e,t=i.getPlugin(r);return t&&t.module?t.createES6&&!t.module.css?(l&&l.resolve(),n.resolve(t)):(e={javascript:t.createES6?void 0:t.module.javascript,css:t.module.css},o.require(e).then((function(){return l&&l.resolve(),t}),(function(){return l&&l.reject(),null}))):(l&&(t?l.resolve():l.reject()),(a?c.PbiPromise:n).resolve(t))}var l;if(e&&e.isRunning()&&(l=e.createChildActivity({name:"Visual Container Module Load"})),t){e=t.ensureCustomVisual(r);if(e)return e.then(s)}return s()}})(powerbi=powerbi||{}),!(function(e){var n,a;n=e.visualHost||(e.visualHost={}),a=jsCommon.Version,(e=n.resourceInjector||(n.resourceInjector={})).injectJsCode=function(e,t,r,i){void 0===r&&(r=!1),void 0===i&&(i=null);var o={major:1,minor:8,patch:0},n=document.createElement("script");r?i&&a.gt(i,o)||a.eq(i,o)?n.innerHTML="\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    ".concat(t,";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                \t\tif (key ===\"window\" || key === \"self\"){\n                                            Object.defineProperty(newWindow, key, {\n                                                get: (function(newWindow) {\n                                                    return function() {\n                                                        return newWindow;\n                                                    }\n                                                })(newWindow),\n                                                set: function() { }\n                                        });\n                                    } else {\n                                        Object.defineProperty(newWindow, key, {\n                                            get: (function(item) {\n                                                return function() {\n                                                    return item;\n                                                }\n                                            })(item),\n                                            set: function() { }\n                                        });\n                                    }\n                                } else if (typeof item === 'number' || typeof item === 'boolean' || typeof item === 'string') {\n                                      Object.defineProperty(newWindow, key, {\n                                          get: (function(w, keyString) {\n                                              return function() {\n                                                  return w[keyString];\n                                              }\n                                          })(w, key.toString()),\n                                          set: (function(w, keyString) {\n                                              return function(newValue) {\n                                                  w[keyString] = newValue;\n                                              }\n                                          })(w, key.toString())\n                                      });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            "):n.innerHTML="\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    ".concat(t,";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                    Object.defineProperty(newWindow, key, {\n                                        get: (function(item) {\n                                            return function() {\n                                                return item;\n                                            }\n                                        })(item),\n                                        set: function() { }\n                                    });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            "):n.innerHTML=t,n.id="js-"+e,n.setAttribute("name",e),document.body.appendChild(n)},e.injectCssCode=function(e,t){(t=$("<style></style>",{html:t,id:"css-"+e})).attr("name",e),$("head").append(t)},e.injectJsUrl=function(e,t,r){var i=e.defer();return $.ajax({url:r,dataType:"script",cache:!0,success:function(){return i.resolve(null)},error:function(e,t,r){return i.reject(r)},timeout:n.resourceLoaderHttpTimeout}),i.promise},e.injectCssUrl=function(e,t,r){var i=e.defer(),o=setTimeout((function(){return i.reject("Timeout")}),n.resourceLoaderHttpTimeout);return $("<link>",{id:"css-"+t,type:"text/css",rel:"stylesheet",href:r,crossorigin:"anonymous"}).on("load",(function(e){clearTimeout(o),i.resolve(null)})).on("error",(function(e){clearTimeout(o),i.reject(e)})).appendTo($("head")),i.promise},e.getInjectedIconUrl=function(e){var t=$("#css-"+e)[0],r=_.find(document.styleSheets,(function(e){return e.ownerNode===t}));if(r&&r.cssRules)for(var i=0;i<r.cssRules.length;i++){var o=r.cssRules[i];if(o.selectorText&&_.includes(o.selectorText,e))return o.style.backgroundImage}return""}})(powerbi=powerbi||{}),!(function(e){var t=e.visualHost||(e.visualHost={}),n=t.utils.ResourcePackageUtils,r=(t.createResourcePackagesService=function(){return new r},i.prototype.getAllPackages=function(){return this.packages},i.prototype.registerPackages=function(e){if(e)for(var t=0,r=e;t<r.length;t++){var i,o=r[t];!o.items||0===o.items.length||3===o.type&&o.disabled||(this.resourcePackageNameIdLookupTable[o.id]=o.name,(i=n.findResourcePackage(this.packages,o.type,o.name))?n.isStaticResource(o)?n.mergeStaticResourcePackages(i,o):_.merge(i,o):((i=_.clone(o)).items=_.clone(o.items),this.packages.push(i)))}},i.prototype.getPackage=function(t){return _.find(this.packages,(function(e){return e.name===t}))},i.prototype.delete=function(t){_.remove(this.packages,(function(e){return e.name===t}))},i.prototype.getPackageById=function(e){e=this.resourcePackageNameIdLookupTable[e];return e&&this.getPackage(e)},i.prototype.clear=function(){this.packages=[],this.resourcePackageNameIdLookupTable={}},i);function i(){this.resourcePackageNameIdLookupTable={},this.packages=[{id:void 0,name:t.ResourcePackageName.SharedResources,type:2,items:[]}]}})(powerbi=powerbi||{}),!(function(c){var u,e,p=c.visualHost||(c.visualHost={}),s=c.contracts.ResourcePackageItemType,r=c.visualHost.utils.ResourcePackageUtils,d=jsCommon.Version.lt;p.createSandboxResourceLoader=function(e,t,r,i,o){return new n(e,t,r,i,o)},(e=u=u||{}).loadResourcePackage="loadResourcePackage",e.loadVisualPlugin="loadVisualPlugin",e.loadVisualPluginWithContent="loadVisualPluginWithContent",e.onVisualPluginLoad="onVisualPluginLoad",e.onResourcePackageLoad="onResourcePackageLoad",e.onVisualPluginLoadError="onVisualPluginLoadError",e.onResourcePackageLoadError="onResourcePackageLoadError",a=p.LocalResourceLoader,__extends(t,a),t.prototype.loadResourcePackage=function(e,t){return r.isCustomVisualResourcePackage(e),this.loadVisualPlugin(e,t)},t.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},t.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},t.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},t.prototype.loadVisualPlugin=function(n,a){var s=this,l=this.promiseFactory.defer();return this.loadResourcesContent(n).then((function(e){if(!e||_.isEmpty(e))l.resolve(null);else{var e=_.keyBy(e,"type"),t=e[c.contracts.ResourcePackageItemType.CustomVisualMetadata];if(t)try{var r=jsCommon.JsonExtensions.tryParseJSON(t.content),i=p.visualPluginUtility.createVisualPlugin(r,s.locale,a?1:0),o=(c.extensibility.visualPluginAdapter.transformPlugin(i),c.visuals.plugins[i.name]);o&&(i.favoriteId=o.favoriteId,i.isOutOfBox=o.isOutOfBox),i.developerModeVisual=n.developerModeVisual,i.apiVersion&&d(i.apiVersion,p.CustomVisualDeprecatedAPI)&&(i.isDeprecated=!0),c.visuals.plugins[i.name]=i,l.resolve(i)}catch(e){l.reject(e)}else{t={pluginName:n.name,mappedPluginContent:e},r={eventName:u.loadVisualPluginWithContent,arguments:[t]};s.messageProxy.postMessageAsync(r).then((function(e){var t=c.visuals.plugins[e.name];t&&!t.custom||(e.custom=!0,t=e.capabilities.objects,e.capabilities.objects=c.data.services.DataViewObjectDescriptorSerializer.deserialize(t),c.extensibility.visualPluginAdapter.transformPlugin(e),s.approvedResourceService&&s.approvedResourceService.isApprovedVisualsDefined()&&(e.isDeprecated=!0),c.visuals.plugins[e.name]=e,l.resolve(e))})).catch((function(e){l.reject(e)}))}}})).catch((function(e){l.reject(e)})),l.promise},t.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},t.prototype.destroy=function(){this.iframe.remove(),this.iframe=null,this.messageProxy.destroy(),this.messageProxy=null,this.contentWindow=null},t.prototype.initIFrame=function(){var e=this,t=this.sandboxLoaderUri;jsCommon.QueryStringUtil.getQueryStringValue("unmin")&&(t+="?unmin=1"),this.iframe=$('<iframe role="presentation" class="sandbox-resource-loader ng-hide" sandbox="allow-scripts"></iframe>').attr("src",t).one("load",(function(){return e.onIFrameLoad()})).appendTo(document.body)},t.prototype.onIFrameLoad=function(){this.contentWindow=this.iframe[0].contentWindow,this.messageProxy.contentWindow=this.contentWindow,this.messageProxy.flushQueue()},t.prototype.loadResourcesContent=function(e){for(var t=[],r=e.id,i=e.name,o=0,n=e.items;o<n.length;o++){var a=n[o];a.type!==s.CustomVisualIcon&&t.push(this.loadResourceContent(r,i,a,e))}return this.promiseFactory.all(t)},t.prototype.loadResourceContent=function(t,e,r,i){var o=this,n=this.promiseFactory.defer();return r.content?n.resolve(this.getItemContent(r.content,r)):this.provider.get(t,e,r.path).then((function(e){e?n.resolve(o.getItemContent(e,r)):t<0?n.reject("no blob content for client generated rps"):p.ResourcePackageReferenceResolver.loadAndResolveContent(i,r.name,o,o.promiseFactory).then((function(e){n.resolve(o.getItemContent(e,r))}))})).catch((function(e){n.reject(e)})),n.promise},t.prototype.getItemContent=function(e,t){e=_.isString(e)?e:JSON.stringify(e);return t.content=t.type===s.CustomVisualMetadata?e:void 0,{type:t.type,content:e}};var a,n=t;function t(e,t,r,i,o){var n=a.call(this,e,i,null)||this;return e.promiseFactory,n.approvedResourceService=o,n.locale=e&&e.locale,n.promiseFactory=e.promiseFactory,n.messageProxy=t,n.sandboxLoaderUri=r,n.provider=i,n.initIFrame(),n}p.SandboxResourceLoader=n})(powerbi=powerbi||{}),!(function(e){var s=e.visualHost||(e.visualHost={});s.createOrganizationalStoreResourceLoader=function(e,t,r,i,o,n){return new a(e,t,i,o,r,n)},l=s.SandboxResourceLoader,__extends(t,l),t.prototype.loadResourcePackage=function(n){var a=this;if(n)return this.resourcePackageResolver(n).then((function(e){var r=[];if(e&&e.items&&!e.disabled)for(var i,t=0,o=e.items;t<o.length;t++)!(function(t){i=s.ResourcePackageReferenceResolver.loadAndResolveContent(e,t.name,a,a.promiseFactory).then((function(e){t.content=e})),r.push(i)})(o[t]);else if(!e||e.disabled)return a.resourcePackagesService.delete(n.name),null;return a.promiseFactory.all(r).then((function(){return l.prototype.loadResourcePackage.call(a,e,!0)}))})).catch((function(){return a.resourcePackagesService.delete(n.name),null}))};var l,a=t;function t(e,t,r,i,o,n){e=l.call(this,e,t,r,i)||this;return e.resourcePackagesService=o,e.resourcePackageResolver=n,e.resourcePackagesService.getAllPackages(),e}})(powerbi=powerbi||{}),!(function(e){function t(e){this.promiseFactory=e,this.promiseFactory=e}e=e.visualHost||(e.visualHost={}),t.prototype.loadResourcePackage=function(e){return this.promiseFactory.resolve()},t.prototype.loadResourcePackages=function(e){return this.promiseFactory.resolve()},t.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.resolve()},t.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.resolve()},t.prototype.loadSharedResource=function(e){return this.promiseFactory.resolve()},t.prototype.loadVisualPlugin=function(e){return this.promiseFactory.resolve(null)},t.prototype.loadVisualPlugins=function(e){return this.promiseFactory.resolve()},t.prototype.destroy=function(){},e.UnapprovedResourceLoader=t})(powerbi=powerbi||{}),!(function(i){var e,t,o;function r(e){return{objectName:e.objectName,displayName:e.displayName,properties:(function(e){var t,r={};for(t in e)r[t]=(function(e){if(e instanceof i.data.SemanticFilter)return o.serializeFilter(e);return void 0===e?null:e})(e[t]);return r})(e.properties),selector:t.serializeSelector(e.selector),altConstantValueSelector:t.serializeSelector(e.altConstantValueSelector),validValues:e.validValues,containerIdx:e.containerIdx,propertyInstanceKind:e.propertyInstanceKind}}function n(e){return{objectName:e.objectName,displayName:e.displayName,properties:(function(e){var t,r={};for(t in e)r[t]=(function(e){var t=e;if(t&&t.From&&t.Where)return o.deserializeFilter(t);return e})(e[t]);return r})(e.properties),selector:t.deserializeSelector(e.selector),altConstantValueSelector:t.deserializeSelector(e.altConstantValueSelector),validValues:e.validValues,containerIdx:e.containerIdx,propertyInstanceKind:e.propertyInstanceKind}}e=(e=i.visualHost||(i.visualHost={})).services||(e.services={}),t=i.data.services.DataViewObjectSerializer,o=i.data.services.SemanticQuerySerializer,(e=e.VisualObjectInstanceSerializer||(e.VisualObjectInstanceSerializer={})).serialize=function(e){return 0===e.length?[]:_.map(e,r)},e.deserialize=function(e){return 0===e.length?[]:_.map(e,n)},e.serializeContainers=function(e,t){return _.map(e,(function(e){return{displayName:i.data.getDisplayName(e.displayName,t)}}))},e.deserializeContainers=function(e){return _.map(e,(function(e){return{displayName:e.displayName}}))}})(powerbi=powerbi||{}),!(function(e){var t,r;function i(e){var t={selector:r.serializeSelector(e.selector),altStaticSelector:r.serializeSelector(e.altStaticSelector),objects:e.objects};return void 0!==e.allowOverrideSubtotalMatching&&(t.allowOverrideSubtotalMatching=e.allowOverrideSubtotalMatching),t}function o(e){var t={selector:r.deserializeSelector(e.selector),altStaticSelector:r.deserializeSelector(e.altStaticSelector),objects:e.objects};return void 0!==e.allowOverrideSubtotalMatching&&(t.allowOverrideSubtotalMatching=e.allowOverrideSubtotalMatching),t}t=(t=e.visualHost||(e.visualHost={})).services||(t.services={}),r=e.data.services.DataViewObjectSerializer,(t=t.VisualObjectRepetitionSerializer||(t.VisualObjectRepetitionSerializer={})).serialize=function(e){return _.isEmpty(e)?[]:_.map(e,i)},t.deserialize=function(e){return _.isEmpty(e)?[]:_.map(e,o)}})(powerbi=powerbi||{}),!(function(t){var e;function r(e){return{dataColors:o(e.dataColors),foreground:e.foreground,foregroundLight:e.foregroundLight,foregroundDark:e.foregroundDark,foregroundNeutralLight:e.foregroundNeutralLight,foregroundNeutralDark:e.foregroundNeutralDark,foregroundNeutralSecondary:e.foregroundNeutralSecondary,foregroundNeutralSecondaryAlt:e.foregroundNeutralSecondaryAlt,foregroundNeutralSecondaryAlt2:e.foregroundNeutralSecondaryAlt2,foregroundNeutralTertiary:e.foregroundNeutralTertiary,foregroundNeutralTertiaryAlt:e.foregroundNeutralTertiaryAlt,foregroundSelected:e.foregroundSelected,foregroundButton:e.foregroundButton,background:e.background,backgroundLight:e.backgroundLight,backgroundNeutral:e.backgroundNeutral,backgroundDark:e.backgroundDark,hyperlink:e.hyperlink,tableAccent:e.tableAccent,visitedHyperlink:e.visitedHyperlink,mapPushpin:e.mapPushpin,shapeStroke:e.shapeStroke,disabledText:e.disabledText,selection:e.selection,separator:e.separator}}function i(e){return{dataColors:n(e.dataColors),foreground:e.foreground,foregroundLight:e.foregroundLight,foregroundDark:e.foregroundDark,foregroundNeutralLight:e.foregroundNeutralLight,foregroundNeutralDark:e.foregroundNeutralDark,foregroundNeutralSecondary:e.foregroundNeutralSecondary,foregroundNeutralSecondaryAlt:e.foregroundNeutralSecondaryAlt,foregroundNeutralSecondaryAlt2:e.foregroundNeutralSecondaryAlt2,foregroundNeutralTertiary:e.foregroundNeutralTertiary,foregroundNeutralTertiaryAlt:e.foregroundNeutralTertiaryAlt,foregroundSelected:e.foregroundSelected,foregroundButton:e.foregroundButton,background:e.background,backgroundLight:e.backgroundLight,backgroundNeutral:e.backgroundNeutral,backgroundDark:e.backgroundDark,hyperlink:e.hyperlink,visitedHyperlink:e.visitedHyperlink,mapPushpin:e.mapPushpin,shapeStroke:e.shapeStroke,disabledText:e.disabledText,tableAccent:e.tableAccent,selection:e.selection,separator:e.separator}}function o(e){return{colors:e.getAllColors(),sentimentColors:e.getSentimentColors(),gradientColors:e.getGradientColors()}}function n(e){return new t.visuals.DataColorPalette(e.colors,e.sentimentColors,e.gradientColors)}(e=(e=t.visualHost||(t.visualHost={})).VisualStyleSerializer||(e.VisualStyleSerializer={})).serializeVisualStyle=function(e){return{colorPalette:r(e.colorPalette),isHighContrast:e.isHighContrast,icons:e.icons}},e.deserializeVisualStyle=function(e){return{colorPalette:i(e.colorPalette),isHighContrast:e.isHighContrast,icons:e.icons}},e.serializeColorPalette=r,e.deserializeColorPalette=i,e.serializeDataColors=o,e.deserializeDataColors=n})(powerbi=powerbi||{}),!(function(a){var s,e,i=a.visualHost||(a.visualHost={}),r=((e=s=i.UserConsent||(i.UserConsent={}))[e.NotRequired=0]="NotRequired",e[e.Declined=1]="Declined",e[e.Approved=2]="Approved",i.createVisualConsentService=function(e,t){return new r(e,t)},t.prototype.registerVisualConsent=function(e,t){this.visualConsentOptionsMap[e],this.visualConsentOptionsMap[e]=t,this.telemetryService.logEvent(a.telemetry.VisualConsentRegister,{visualType:e,parentId:this.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),this.loadConsentAsync(e)},t.prototype.hasConsent=function(e){return this.cachedConsentMap[e]},t.prototype.setConsent=function(e,t){if(!this.isConsentRequiringVisual(e))return this.promiseFactory.reject("Visual type does not require consent");this.cachedConsentMap[e]=t;var r=this.visualConsentOptionsMap[e]&&this.visualConsentOptionsMap[e].consentPersistencyProvider;return this.telemetryService.logEvent(a.telemetry.VisualConsentSet,{visualType:e,userConsent:t,parentId:this.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),r?r.saveConsent(t):this.promiseFactory.reject("No persistencyProvider was set for visual "+e)},t.prototype.getConsent=function(e){for(var r=this,i=[],o=(e=_.uniq(e),this.telemetryService.logEvent(a.telemetry.VisualConsentGet,{visualTypes:e.join(", "),parentId:this.telemetryService.root.id,isError:!1,errorSource:"PowerBI"}),this),t=0,n=e;t<n.length;t++)!(function(t){var e;if(!o.isConsentRequiringVisual(t))return e={visualType:t,consent:s.NotRequired},i.push(o.promiseFactory.resolve(e));i.push(o.loadConsentAsync(t).then((function(e){return e?(e={visualType:t,consent:s.Approved},r.promiseFactory.resolve(e)):r.showConsentDialog(t)})))})(n[t]);return this.promiseFactory.allSettled(i).then((function(e){return _.map(_.filter(e,(function(e){return 0===e.type})),(function(e){return e.value}))}))},t.prototype.isConsentRequiringVisual=function(e){return!!this.visualConsentOptionsMap[e]},t.prototype.loadConsentAsync=function(t){var e,r=this;return this.visualConsentOptionsMap[t],void 0!==this.cachedConsentMap[t]?this.promiseFactory.resolve(this.cachedConsentMap[t]):(e=this.visualConsentOptionsMap[t]&&this.visualConsentOptionsMap[t].consentPersistencyProvider)?e.loadConsent().then((function(e){return r.cachedConsentMap[t]=e,r.promiseFactory.resolve(e)})).catch((function(e){if(e!==i.ESRINotSupportedInEmbed)return r.promiseFactory.reject(e)})):this.promiseFactory.reject("VisualConsentService.getConsentAsync: Missing consentPersistencyProvider for visual "+t)},t.prototype.showConsentDialog=function(t){var e,r=this;return this.isConsentRequiringVisual(t)?(e=this.visualConsentOptionsMap[t]&&this.visualConsentOptionsMap[t].consentDialogProvider)?e.showConsentDialog().then((function(e){r.setConsent(t,e);e={visualType:t,consent:e?s.Approved:s.Declined};return r.promiseFactory.resolve(e)})).catch((function(e){return r.promiseFactory.reject(e)})):this.promiseFactory.reject("VisualConsentService.showConsentDialog: Missing consentDialogProvider for visual "+t):this.promiseFactory.reject("VisualConsentService.showConsentDialog: Visual type does not require consent")},t);function t(e,t){this.promiseFactory=e,this.telemetryService=t,this.cachedConsentMap={},this.visualConsentOptionsMap={}}})(powerbi=powerbi||{}),!(function(e){(e.visualHost||(e.visualHost={})).createVisualInstanceIdTrackingService=function(){return new t},r.prototype.associate=function(e,t){for(var r=0,i=this.listeners;r<i.length;r++)i[r].onInstanceAssociated(e,t)},r.prototype.subscribeToInstanceIdAssociation=function(e){_.includes(this.listeners,e)||this.listeners.push(e)};var t=r;function r(){this.listeners=[]}})(powerbi=powerbi||{}),!(function(o){var n;((n=o.visualHost||(o.visualHost={})).visualPluginUtility||(n.visualPluginUtility={})).createVisualPlugin=function(t,e,r){t.content,t.content.iconBase64,t=e?n.LocalizationResourceUtility.setLocalizedCapabilities(t,e):t;var e=e?n.LocalizationResourceUtility.getLocalizedResources(t,e):null,i=n.LocalizationResourceUtility.getLocalizedResources(t,"en-US"),i={name:t.visual.guid,apiVersion:t.apiVersion,class:t.visual.visualClassName,displayName:t.visual.displayName,capabilities:t.capabilities,custom:!0,iconUrl:'url("'+t.content.iconBase64+'")',content:t.content,version:t.visual.version,create:function(){return null},customizeQuery:function(e){return null},localizationResources:e||i?{enUSStrings:i,localizedStrings:e}:null,supportUrl:t.visual.supportUrl,source:r,publisher:t.author?t.author.name:void 0};return t.capabilities&&(t.capabilities.subtotals||t.capabilities.dataReductionCustomization)&&(i.customizeQuery=function(e){return o.visuals.CustomVisualPluginMethods.customizeQuery(e,t.capabilities)}),i}})(powerbi=powerbi||{}),!(function(e){var t,e=e.visualHost||(e.visualHost={}),r=jsCommon.Utility,i=((t=e.events||(e.events={})).WindowMessageProxyMessageEvent="message",t.WindowMessageProxyErrorEvent="error","message"),s="onMessageProxyAsyncComplete",o=(e.createWindowMessageProxy=function(e,t){return new o(e,t)},Object.defineProperty(n.prototype,"allowSameWindow",{get:function(){return this._allowSameWindow},set:function(e){this._allowSameWindow=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"contentWindow",{get:function(){return this._contentWindow},set:function(e){this._contentWindow=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"queue",{get:function(){return jQuery.extend([],this._queue)},enumerable:!1,configurable:!0}),n.prototype.postMessage=function(e){this.contentWindow?this.sendMessage(e):this.queueMessage(e)},n.prototype.postMessageAsync=function(e){var t=this,r=this.promiseFactory.defer(),i=this.createRandomString();return this.deferredCache[i]=r,e.id=i,this.postMessage(e),r.promise.finally((function(){delete t.deferredCache[i]})),r.promise},n.prototype.queueMessage=function(e,t){void 0===t&&(t=this._queue.length);e=this.prepareMessage(e);this._queue.splice(t,0,e)},n.prototype.on=function(e,t){!this.handlers[e]||-1<this.handlers[e].indexOf(t)||this.handlers[e].push(t)},n.prototype.off=function(e,t){this.handlers[e]&&(t?-1<(t=this.handlers[e].indexOf(t))&&this.handlers[e].splice(t,1):this.handlers[e].length=0)},n.prototype.flushQueue=function(){!this.isFlushing&&this.contentWindow&&(this.isFlushing=!0,this.contentWindow.postMessage&&this.contentWindow.postMessage(this._queue,"*"),this._queue.length=0,this.isFlushing=!1)},n.prototype.sendMessage=function(e){e=this.prepareMessage(e);this.contentWindow&&this.contentWindow.postMessage&&this.contentWindow.postMessage(e,"*")},n.prototype.prepareMessage=function(e){var t;try{t=JSON.stringify(e)}catch(e){throw t=null,r.ensureError(e)}return t},n.prototype.onMessageReceived=function(e){if(this.allowSameWindow||e.source!==window){var t;try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){t=null}if(t)for(var r=0,i=jQuery.isArray(t)?t:[t];r<i.length;r++){var o=i[r],n=void 0,a=void 0;try{a=("string"==typeof o?(n=JSON.parse(o),o):(n=o,e.data)).length}catch(e){n=null}if(!n)return;this.dispatchMessage(e,n,a)}}},n.prototype.dispatchMessage=function(e,t,r){var i={message:t,source:e.source,origin:e.origin,packedSize:r};if(t.id&&(t.eventName===s||t.result||t.error))return(e=this.deferredCache[t.id])?t.error?e.reject(t.error):e.resolve(t.result):void 0;for(var o=0,n=t.error?this.handlers.error:this.handlers.message;o<n.length;o++){var a=n[o];this.invokeHandler(a,i)}},n.prototype.invokeHandler=function(e,t){var r,i,o=this;t.message.id&&(i={id:t.message.id,eventName:s,arguments:[]});try{r=e.call(null,t),i&&this.promiseFactory.when(r).then((function(e){i.result=e,o.postMessage(i)})).catch((function(e){i.error=e,o.postMessage(i)}))}catch(e){i&&(i.error={message:e.message},this.postMessage(i))}},n.prototype.createRandomString=function(){return(Math.random()+1).toString(36).substring(7)},n.prototype.destroy=function(){this.handlers.message.length=0,this.handlers.error.length=0,$(window).off(i,this.windowMessageHandler),this.windowMessageHandler=null},n);function n(e,t){var r=this;this.promiseFactory=e,this._queue=[],this._allowSameWindow=!1,this.handlers={message:[],error:[]},this.isFlushing=!1,t&&(this._contentWindow=t),this.deferredCache={},this.windowMessageHandler=function(e){return r.onMessageReceived(e.originalEvent)},$(window).on(i,this.windowMessageHandler)}})(powerbi=powerbi||{}),!(function(r){var e,t;function i(e){var t=e.type||r.VisualUpdateType.Data;return t&r.VisualUpdateType.Resize&&2===e.resizeMode&&(t|=r.VisualUpdateType.ResizeEnd),t}function o(t,e){return{update:function(e){t.update&&t.update({viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,type:i(e)})},destroy:function(){t.destroy&&t.destroy()},enumerateObjectInstances:function(e){return t.enumerateObjectInstances&&t.enumerateObjectInstances(e)||[]}}}function n(e){return{}}e=r.extensibility||(r.extensibility={}),(t=e.v100||(e.v100={})).convertLegacyUpdateType=i,t.addVersion=function(){e.getVisualApiVersions().push({version:"1.0.0",overloads:o,hostAdapter:n})}})(powerbi=powerbi||{}),!(function(t){var i,e,r;function o(r,e){return{update:function(e){var t;r.update&&(e={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,type:i.v100.convertLegacyUpdateType(e)},t=r.constructor.__transform__,_.isFunction(t)?r.update(e,t(e.dataViews)):r.update(e))}}}function n(e){return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:e.host})},colors:r.isDefined(e,"style.colorPalette.dataColors.getAllColors")?e.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors()}}i=t.extensibility||(t.extensibility={}),e=i.v110||(i.v110={}),r=t.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.1.0",overloads:o,hostAdapter:n})}})(powerbi=powerbi||{}),!(function(r){var o,e,i;function t(r,i){return{update:function(e){var t;r.update&&(e={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,type:o.v100.convertLegacyUpdateType(e)},i.colorPalette.reset(),t=r.constructor.__transform__,_.isFunction(t)?r.update(e,t(e.dataViews)):r.update(e))}}}function n(t){var e=i.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new o.SelectionManager({hostServices:t.host})},colorPalette:o.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)}}}o=r.extensibility||(r.extensibility={}),e=o.v120||(o.v120={}),i=r.visualHost.VisualHostUtils,e.addVersion=function(){o.getVisualApiVersions().push({version:"1.2.0",overloads:t,hostAdapter:n})}})(powerbi=powerbi||{}),!(function(r){var i,e,o;function t(t){var e=o.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:t.host})},colorPalette:i.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService({hostServices:t.host})}}i=r.extensibility||(r.extensibility={}),e=i.v130||(i.v130={}),o=r.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.3.0",hostAdapter:t})}})(powerbi=powerbi||{}),!(function(r){var i,e,o;function t(t){var e=o.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:t.host})},colorPalette:i.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService({hostServices:t.host}),locale:t.host.locale()}}i=r.extensibility||(r.extensibility={}),e=i.v140||(i.v140={}),o=r.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.4.0",hostAdapter:t})}})(powerbi=powerbi||{}),!(function(r){var i,e,o;function t(t){var e=o.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new i.SelectionManager({hostServices:t.host})},colorPalette:i.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService({hostServices:t.host}),locale:t.host.locale(),allowInteractions:!(!t||!t.interactivity)&&t.interactivity.isVisualInteractive}}i=r.extensibility||(r.extensibility={}),e=i.v150||(i.v150={}),o=r.visualHost.VisualHostUtils,e.addVersion=function(){i.getVisualApiVersions().push({version:"1.5.0",hostAdapter:t})}})(powerbi=powerbi||{}),!(function(r){var o,e,i;function t(r,i){return{update:function(e){var t;r.update&&(e={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,type:o.v100.convertLegacyUpdateType(e)},i.colorPalette.reset(),t=r.constructor.__transform__,_.isFunction(t)?r.update(e,t(e.dataViews)):r.update(e))}}}function n(t){var e=i.isDefined(t,"style.colorPalette.dataColors.getAllColors")?t.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return new o.SelectionManager({hostServices:t.host})},colorPalette:o.createColorPalette(e),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:o.createTooltipService({hostServices:t.host}),locale:t.host.locale(),allowInteractions:!(!t||!t.interactivity)&&t.interactivity.isVisualInteractive}}o=r.extensibility||(r.extensibility={}),e=o.v160||(o.v160={}),i=r.visualHost.VisualHostUtils,e.addVersion=function(){o.getVisualApiVersions().push({version:"1.6.0",overloads:t,hostAdapter:n})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(o){var e=i.isDefined(o,"style.colorPalette.dataColors.getAllColors")?o.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:o.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return o.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:o.host}),telemetry:r.createTelemetryService({hostServices:o.host}),locale:o.host.locale(),allowInteractions:!(!o||!o.interactivity)&&o.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r){var i;e?((i=[]).push(e),o.host.applyJsonFilter(i,t,r)):o.host.applyJsonFilter(null,t,r)}}}r=t.extensibility||(t.extensibility={}),e=r.v170||(r.v170={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.7.0",hostAdapter:o})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:n.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()}}}r=t.extensibility||(t.extensibility={}),e=r.v180||(r.v180={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.8.0",hostAdapter:o})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:n.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()}}}r=t.extensibility||(t.extensibility={}),e=r.v190||(r.v190={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.9.0",hostAdapter:o})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return new r.SelectionManager({hostServices:n.host})},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)}}}r=t.extensibility||(t.extensibility={}),e=r.v1100||(r.v1100={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.10.0",hostAdapter:o})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(n){var e=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():t.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){var e=n.host;return e.selectionManager=new r.SelectionManager({hostServices:e}),e.selectionManager},colorPalette:r.createColorPalette(e),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)}}}r=t.extensibility||(t.extensibility={}),e=r.v1110||(r.v1110={}),i=t.visualHost.VisualHostUtils,e.addVersion=function(){r.getVisualApiVersions().push({version:"1.11.0",hostAdapter:o})}})(powerbi=powerbi||{}),!(function(r){var o,e,i;function t(r,i){return{update:function(e){var t;r.update&&(e={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,operationKind:e.operationKind,type:o.v100.convertLegacyUpdateType(e)},i.colorPalette.reset(),t=r.constructor.__transform__,_.isFunction(t)?r.update(e,t(e.dataViews)):r.update(e))}}}function n(n){var e=n.host,t=i.isDefined(n,"style.colorPalette.dataColors.getAllColors")?n.style.colorPalette.dataColors.getAllColors():r.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new r.visuals.SelectionIdBuilder},createSelectionManager:function(){return e.selectionManager=new o.SelectionManager({hostServices:e}),e.selectionManager},colorPalette:o.createColorPalette(t),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:o.createTooltipService({hostServices:n.host}),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}o=r.extensibility||(r.extensibility={}),e=o.v011200||(o.v011200={}),i=r.visualHost.VisualHostUtils,e.addVersion=function(){o.getVisualApiVersions().push({version:"1.12.0",overloads:t,hostAdapter:n})}})(powerbi=powerbi||{}),!(function(t){var r;function e(n){var e=n.host;return{createSelectionIdBuilder:function(){return new t.visuals.SelectionIdBuilder},createSelectionManager:function(){return e.selectionManager=new r.SelectionManager({hostServices:e}),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}((r=t.extensibility||(t.extensibility={})).v011300||(r.v011300={})).addVersion=function(){r.getVisualApiVersions().push({version:"1.13.0",hostAdapter:e})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(n){var e=n.host;return e.apiVersion=i,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=new r.SelectionManager({hostServices:e,apiVersion:i}),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService({hostServices:n.host}),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}r=t.extensibility||(t.extensibility={}),e=r.v020000||(r.v020000={}),i="2.0.0",e.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(e){var o,t;function r(r,i){return{update:function(e){var t;r.update&&(e={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,operationKind:e.operationKind,type:o.v100.convertLegacyUpdateType(e),jsonFilters:e.jsonFilters},i.colorPalette.reset(),t=r.constructor.__transform__,_.isFunction(t)?r.update(e,t(e.dataViews)):r.update(e))}}}function i(n){var e=n.host;return e.apiVersion=t,{createSelectionIdBuilder:function(){return e.createSelectionIdBuilder()},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(t),e.selectionManager},colorPalette:o.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}o=e.extensibility||(e.extensibility={}),e=o.v020100||(o.v020100={}),t="2.1.0",e.addVersion=function(){o.getVisualApiVersions().push({version:t,overloads:r,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(e){var t,r;function i(n){var e=n.host;return e.apiVersion=r,{createSelectionIdBuilder:function(){return e.createSelectionIdBuilder()},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(r),e.selectionManager},colorPalette:t.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:t.createTelemetryService({hostServices:n.host}),authenticationService:t.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()}}}t=e.extensibility||(e.extensibility={}),e=t.v020200||(t.v020200={}),r="2.2.0",e.addVersion=function(){t.getVisualApiVersions().push({version:r,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var o,e,r;function i(r,i){return{update:function(e){var t;r.update&&(e={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,operationKind:e.operationKind,jsonFilters:e.jsonFilters,type:o.v100.convertLegacyUpdateType(e),updateId:e.updateId},i.colorPalette.reset(),t=r.constructor.__transform__,_.isFunction(t)?r.update(e,t(e.dataViews)):r.update(e))}}}function n(n){var e=n.host;return e.apiVersion=r,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(r),e.selectionManager},colorPalette:o.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()},storageService:o.createStorageService(e),eventService:o.createEventService(e)}}o=t.extensibility||(t.extensibility={}),e=o.v020300||(o.v020300={}),r="2.3.0",e.addVersion=function(){o.getVisualApiVersions().push({version:r,overloads:i,hostAdapter:n})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(n){var e=n.host;return e.apiVersion=i,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(i),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()},storageService:r.createStorageService(e),eventService:r.createEventService(e)}}r=t.extensibility||(t.extensibility={}),e=r.v020400||(r.v020400={}),i="2.4.0",e.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(t){var r,e,i;function o(n){var e=n.host;return e.apiVersion=i,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return e.selectionManager=e.createSelectionManager(i),e.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:e.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return e.fetchMoreData()},storageService:r.createStorageService(e),eventService:r.createEventService(e)}}r=t.extensibility||(t.extensibility={}),e=r.v020500||(r.v020500={}),i="2.5.0",e.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(e){var o,t,r;function i(r,i){return{update:function(e){var t;r.update&&(e={viewport:e.viewport,dataViews:e.dataViews,viewMode:e.viewMode,editMode:e.editMode,isInFocus:!!e.isInFocus,operationKind:e.operationKind,jsonFilters:e.jsonFilters,type:o.v100.convertLegacyUpdateType(e),updateId:e.updateId},i.colorPalette.reset(),t=r.constructor.__transform__,_.isFunction(t)?r.update(e,t(e.dataViews)):r.update(e))}}}function n(n){var t=n.host;return t.apiVersion=r,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(r),t.selectionManager},colorPalette:o.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:o.createTelemetryService({hostServices:n.host}),authenticationService:o.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new o.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return t.fetchMoreData()},storageService:o.createStorageService(t),eventService:o.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)}}}o=e.extensibility||(e.extensibility={}),t=o.v020600||(o.v020600={}),r="2.6.0",t.addVersion=function(){o.getVisualApiVersions().push({version:r,overloads:i,hostAdapter:n})}})(powerbi=powerbi||{}),!(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return t.fetchMoreData()},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030200||(r.v030200={}),i="3.2.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(){return t.fetchMoreData()},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030300||(r.v030300={}),i="3.3.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return t.fetchMoreData(e)},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030400||(r.v030400={}),i="3.4.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return t.fetchMoreData(e)},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030500||(r.v030500={}),i="3.5.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(e){var r,t,i;function o(n){var t=n.host;return t.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return t.selectionManager=t.createSelectionManager(i),t.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:t.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return t.fetchMoreData(e)},storageService:r.createStorageService(t),eventService:r.createEventService(t),switchFocusModeState:function(e){return t.switchFocusModeState(e)},hostEnv:n.hostEnv}}r=e.extensibility||(e.extensibility={}),t=r.v030600||(r.v030600={}),i="3.6.0",t.addVersion=function(){r.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(e){var t,r,i;function o(n){var r=n.host;return r.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return r.selectionManager=r.createSelectionManager(i),r.selectionManager},colorPalette:t.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:r.createTooltipService(),telemetry:t.createTelemetryService({hostServices:n.host}),authenticationService:t.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),allowInteractions:!(!n||!n.interactivity)&&n.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return r.fetchMoreData(e)},storageService:t.createStorageService(r),eventService:t.createEventService(r),switchFocusModeState:function(e){return r.switchFocusModeState(e)},hostEnv:n.hostEnv,displayWarningIcon:function(e,t){return r.displayWarningIcon(e,t)}}}t=e.extensibility||(e.extensibility={}),r=t.v030700||(t.v030700={}),i="3.7.0",r.addVersion=function(){t.getVisualApiVersions().push({version:i,hostAdapter:o})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v030800||(r.v030800={}),o="3.8.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v030900||(r.v030900={}),o="3.9.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040000||(r.v040000={}),o="4.0.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040100||(r.v040100={}),o="4.1.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040200||(r.v040200={}),o="4.2.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)}}}r=t.extensibility||(t.extensibility={}),e=r.v040300||(r.v040300={}),o="4.3.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i)}}r=t.extensibility||(t.extensibility={}),e=r.v040400||(r.v040400={}),o="4.4.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i)}}r=t.extensibility||(t.extensibility={}),e=r.v040500||(r.v040500={}),o="4.5.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i),webAccessService:r.createWebAccessService(i)}}r=t.extensibility||(t.extensibility={}),e=r.v040600||(r.v040600={}),o="4.6.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i),webAccessService:r.createWebAccessService(i),drill:function(e){return i.drill(e)}}}r=t.extensibility||(t.extensibility={}),e=r.v040700||(r.v040700={}),o="4.7.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i),webAccessService:r.createWebAccessService(i),drill:function(e){return i.drill(e)}}}r=t.extensibility||(t.extensibility={}),e=r.v050000||(r.v050000={}),o="5.0.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i),webAccessService:r.createWebAccessService(i),drill:function(e){return i.drill(e)},applyCustomSort:function(e){return i.applyCustomSort(e)}}}r=t.extensibility||(t.extensibility={}),e=r.v050100||(r.v050100={}),o="5.1.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i),webAccessService:r.createWebAccessService(i),drill:function(e){return i.drill(e)},applyCustomSort:function(e){return i.applyCustomSort(e)}}}r=t.extensibility||(t.extensibility={}),e=r.v050200||(r.v050200={}),o="5.2.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i),webAccessService:r.createWebAccessService(i),drill:function(e){return i.drill(e)},applyCustomSort:function(e){return i.applyCustomSort(e)}}}r=t.extensibility||(t.extensibility={}),e=r.v050300||(r.v050300={}),o="5.3.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(t){var r,e,o;function i(n){var e,i=n.host;return i.apiVersion=o,{createSelectionIdBuilder:function(){return new t.visuals.CustomVisualSelectionId},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(o),i.selectionManager},colorPalette:r.createExtendedColorPalette(n.style),persistProperties:function(e){return n.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:r.createTelemetryService({hostServices:n.host}),authenticationService:r.createAuthenticationService({hostServices:n.host}),locale:n.host.locale(),hostCapabilities:{allowInteractions:!(null==(e=n.interactivity)||!e.isVisualInteractive),allowModalDialog:!(null==(e=n.interactivity)||!e.allowModalDialog)},applyJsonFilter:function(e,t,r,i){var o;e?Array.isArray(e)?n.host.applyJsonFilter(e,t,r,i):((o=[]).push(e),n.host.applyJsonFilter(o,t,r,i)):n.host.applyJsonFilter(null,t,r,i)},launchUrl:function(e){return n.host.launchUrl(e)},instanceId:n.host.instanceId,refreshHostData:function(){return n.host.refreshHostData()},createLocalizationManager:function(){return new r.LocalizationManager(n.localizationResources)},fetchMoreData:function(e){return i.fetchMoreData(e)},storageService:r.createStorageService(i),downloadService:r.createDownloadService(i),eventService:r.createEventService(i),switchFocusModeState:function(e){return i.switchFocusModeState(e)},hostEnv:n.hostEnv,openModalDialog:function(e,t,r){return i.openModalDialog(e,t,r)},displayWarningIcon:function(e,t){return i.displayWarningIcon(e,t)},licenseManager:r.createLicenseManager(i),webAccessService:r.createWebAccessService(i),drill:function(e){return i.drill(e)},applyCustomSort:function(e){return i.applyCustomSort(e)}}}r=t.extensibility||(t.extensibility={}),e=r.v050400||(r.v050400={}),o="5.4.0",e.addVersion=function(){r.getVisualApiVersions().push({version:o,hostAdapter:i})}})(powerbi=powerbi||{}),!(function(a){var s=a.extensibility||(a.extensibility={}),l=[];function e(){return function(e,t,r){Object.defineProperty(r.value,"approvedMessage",{value:!0})}}function c(e,t){return e=e&&(e=new s.VisualTimeTrackingWrapper(e),t)?new s.VisualOutsideZoneAdapter(e,t):e}s.ApprovedMessage=e,s.getVisualApiVersions=function(){return l},s.setVisualApiVersions=function(e){l=e},a.extensibility.v100.addVersion(),a.extensibility.v110.addVersion(),a.extensibility.v120.addVersion(),a.extensibility.v130.addVersion(),a.extensibility.v140.addVersion(),a.extensibility.v150.addVersion(),a.extensibility.v160.addVersion(),a.extensibility.v170.addVersion(),a.extensibility.v180.addVersion(),a.extensibility.v190.addVersion(),a.extensibility.v1100.addVersion(),a.extensibility.v1110.addVersion(),a.extensibility.v011200.addVersion(),a.extensibility.v011300.addVersion(),a.extensibility.v020000.addVersion(),a.extensibility.v020100.addVersion(),a.extensibility.v020200.addVersion(),a.extensibility.v020300.addVersion(),a.extensibility.v020400.addVersion(),a.extensibility.v020500.addVersion(),a.extensibility.v020600.addVersion(),a.extensibility.v030200.addVersion(),a.extensibility.v030300.addVersion(),a.extensibility.v030400.addVersion(),a.extensibility.v030500.addVersion(),a.extensibility.v030600.addVersion(),a.extensibility.v030700.addVersion(),a.extensibility.v030800.addVersion(),a.extensibility.v030900.addVersion(),a.extensibility.v040000.addVersion(),a.extensibility.v040100.addVersion(),a.extensibility.v040200.addVersion(),a.extensibility.v040300.addVersion(),a.extensibility.v040400.addVersion(),a.extensibility.v040500.addVersion(),a.extensibility.v040600.addVersion(),a.extensibility.v040700.addVersion(),a.extensibility.v050000.addVersion(),a.extensibility.v050100.addVersion(),a.extensibility.v050200.addVersion(),a.extensibility.v050300.addVersion(),a.extensibility.v050400.addVersion(),s.wrapAdapter=c,s.createVisualApiAdapter=function(e,t,r,i,o,n,a){return t=new u(e,t,r,i,o,a),o=c(t,n),new s.VisualSafeExecutionWrapper(o,e,r,i,t.isPluginInError,a)},t.prototype.init=function(n){return __awaiter(this,void 0,a.Promise,(function(){var t,r,i,o;return __generator(this,(function(e){switch(e.label){case 0:return(n.element,n.host,n.element.empty(),n=a.Prototype.inherit(n),this.legacy)?(i={module:this.module,featureSwitches:n.featureSwitches},this.plugin.createES6?[4,(t=this).plugin.createES6(i)]:[3,2]):[3,5];case 1:return t.visual=e.sent(),[3,3];case 2:this.visual=this.creator(i),e.label=3;case 3:return[4,this.visualLegacy.init(n)];case 4:return e.sent(),[3,9];case 5:return(r=this.host=l[this.apiVersionIndex].hostAdapter(n),i={element:n.element.get(0),host:r,module:this.module,featureSwitches:n.featureSwitches},this.plugin.createES6)?[4,(o=this).plugin.createES6(i)]:[3,7];case 6:return o.visual=e.sent(),[3,8];case 7:this.visual=this.creator(i),e.label=8;case 8:this.overloadMethods(),e.label=9;case 9:return[2]}}))}))},t.prototype.update=function(t){return __awaiter(this,void 0,a.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return(this.plugin.systemVisual||((t=a.Prototype.inherit(t)).visualDefinitionData=void 0,t.dataTransforms=void 0),(t.type&a.VisualUpdateType.Resize)===a.VisualUpdateType.Resize&&this.visualHasMethod("onResizing"))?this.plugin.custom&&this.visualHasMethod("update")?[4,this.visualLegacy.update(t)]:[3,2]:[3,3];case 1:e.sent(),e.label=2;case 2:return this.onResizing(t.viewport,t.resizeMode),[3,6];case 3:return this.visualHasMethod("update")?[4,this.visualLegacy.update(t)]:[3,5];case 4:return e.sent(),[3,6];case 5:(!t.type||t.type&a.VisualUpdateType.Data)&&this.onDataChanged(_.pick(t,["dataViews","operationKind"])),t.type&a.VisualUpdateType.ViewMode&&this.onViewModeChanged(t.viewMode),e.label=6;case 6:return[2]}}))}))},t.prototype.destroy=function(){this.visualHasMethod("destroy")&&this.visualLegacy.destroy()},t.prototype.enumerateObjectInstances=function(e){if(this.visualHasMethod("enumerateObjectInstances"))return this.visualLegacy.enumerateObjectInstances(e)},t.prototype.enumerateObjectRepetition=function(){if(this.visualHasMethod("enumerateObjectRepetition"))return this.visualLegacy.enumerateObjectRepetition()},t.prototype.enumerateObjectInstancesAsync=function(e){return this.visualHasMethod("enumerateObjectInstancesAsync")?this.visualAdapter.enumerateObjectInstancesAsync(e):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},t.prototype.enumerateObjectRepetitionAsync=function(){return this.visualHasMethod("enumerateObjectRepetitionAsync")?this.visualAdapter.enumerateObjectRepetitionAsync():this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(t.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!1,configurable:!0}),t.prototype.onResizing=function(e,t){this.visualHasMethod("onResizing")&&this.visualLegacy.onResizing(e,t)},t.prototype.onDataChanged=function(e){this.visualHasMethod("onDataChanged")&&this.visualLegacy.onDataChanged(e)},t.prototype.onViewModeChanged=function(e){this.visualHasMethod("onViewModeChanged")&&this.visualLegacy.onViewModeChanged(e)},t.prototype.onClearSelection=function(){this.visualHasMethod("onClearSelection")&&this.visualLegacy.onClearSelection()},t.prototype.onRestoreSelection=function(e){if(this.visualHasMethod("onRestoreSelection"))return this.visualLegacy.onRestoreSelection(e)},t.prototype.canResizeTo=function(e){if(this.visualHasMethod("canResizeTo"))return this.visualLegacy.canResizeTo(e)},t.prototype.unwrap=function(){return this.visual},t.prototype.getTelemetryInformation=function(){if(this.visualHasMethod("getTelemetryInformation"))return this.visualLegacy.getTelemetryInformation()},t.prototype.getFormattingModel=function(){if(this.visualHasMethod("getFormattingModel"))return this.visualAdapter.getFormattingModel()},t.prototype.getFormattingModelAsync=function(){return this.visualHasMethod("getFormattingModelAsync")?this.visualAdapter.getFormattingModelAsync():this.promiseFactory.resolve(this.getFormattingModel())},t.prototype.resolveFormattingPlaceholder=function(e){if(this.visualHasMethod("resolveFormattingPlaceholder"))return this.visualLegacy.resolveFormattingPlaceholder(e)},t.prototype.getSubSelectionStyles=function(e){if(this.visualHasMethod("getSubSelectionStyles"))return this.visualLegacy.getSubSelectionStyles(e)},t.prototype.getSubSelectionShortcuts=function(e,t){if(this.visualHasMethod("getSubSelectionShortcuts"))return this.visualLegacy.getSubSelectionShortcuts(e,t)},t.prototype.getSubSelectables=function(e){if(this.visualHasMethod("getSubSelectables"))return this.visualLegacy.getSubSelectables(e)},t.prototype.getNextSubSelectable=function(e,t){if(this.visualHasMethod("getNextSubSelectable"))return this.visualLegacy.getNextSubSelectable(e,t)},t.prototype.onDataViewObjectChanged=function(e,t){if(this.visualHasMethod("onDataViewObjectChanged"))return this.visualAdapter.onDataViewObjectChanged(e,t)},Object.defineProperty(t.prototype,"visualNew",{get:function(){if(!this.legacy)return this.visual},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visualLegacy",{get:function(){if(this.legacy)return this.visual},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visualAdapter",{get:function(){return this.visual},enumerable:!1,configurable:!0}),t.prototype.visualHasMethod=function(e){var t=this.legacy?this.visualLegacy:this.visualNew;return a.visualHost.CustomVisualsUtils.isDebugVisual(this.plugin.name)?t&&_.isFunction(t[e])&&t.visualHasMethod(e):t&&_.isFunction(t[e])},t.prototype.getVersionIndex=function(e){if(e)for(var t=s.getVisualApiVersions().length,r=0;r<t;r++)if(s.getVisualApiVersions()[r].version===e)return r;return-1},t.prototype.overloadMethods=function(){var e,t=this.getCompiledOverloads();for(e in t)this[e]=t[e]},t.prototype.getCompiledOverloads=function(){for(var e={},t=this.apiVersionIndex,r=this.visualNew,i=0;i<=t;i++){var o=s.getVisualApiVersions()[i].overloads;_.isFunction(o)&&_.assign(e,o(r,this.host))}return e},__decorate([e()],t.prototype,"enumerateObjectInstancesAsync",null),__decorate([e()],t.prototype,"enumerateObjectRepetitionAsync",null),__decorate([e()],t.prototype,"onResizing",null),__decorate([e()],t.prototype,"onDataChanged",null),__decorate([e()],t.prototype,"onViewModeChanged",null),__decorate([e()],t.prototype,"onClearSelection",null),__decorate([e()],t.prototype,"canResizeTo",null),__decorate([e()],t.prototype,"getTelemetryInformation",null),__decorate([e()],t.prototype,"getFormattingModelAsync",null),__decorate([e()],t.prototype,"resolveFormattingPlaceholder",null),__decorate([e()],t.prototype,"getSubSelectionStyles",null),__decorate([e()],t.prototype,"getSubSelectionShortcuts",null),__decorate([e()],t.prototype,"getSubSelectables",null),__decorate([e()],t.prototype,"getNextSubSelectable",null),__decorate([e()],t.prototype,"onDataViewObjectChanged",null);var u=t;function t(e,t,r,i,o,n){this.plugin=e,this.creator=t,this.promiseFactory=r,this.telemetryService=i,this.module=o,this.certifiedEventsService=n,this.isPluginInError=!1,t||this.plugin.createES6,this.telemetryService,this.certifiedEventsService;r=e.apiVersion,i=this.getVersionIndex(r);r?-1<i?(this.apiVersionIndex=i,this.legacy=!1):this.isPluginInError=!0:this.legacy=!0}s.VisualApiAdapter=u})(powerbi=powerbi||{}),powerbi.data.createDataViewScopeIdentity),ensurePowerbi=powerbi.visualHost.ensurePowerbi,ensurePowerbiData=powerbi.visualHost.ensurePowerbiData,ensurePowerbiExtensibility=powerbi.visualHost.ensurePowerbiExtensibility,createColorPalette=powerbi.extensibility.createColorPalette,createExtendedColorPalette=powerbi.extensibility.createExtendedColorPalette,getVisualApiVersions=powerbi.extensibility.getVisualApiVersions,sqexprbuilder=powerbi.data.SQExprBuilder,QueryStringUtil=jsCommon.QueryStringUtil;!(function(t){var r,n;function a(i,o){return{get:function(e,t){var r,e=e[t],t="".concat(i,".").concat(t.toString());return void 0===e?n.has(t)||(r=t,r=JSON.stringify({eventName:"onGlobalUndefinedGet",arguments:[t]}),window.parent.postMessage(r,"*"),n.add(t)):e&&"object"==typeof e&&0<o&&(e=new Proxy(e,a(t,o-1))),e},set:function(e,t,r){return e[t]=r,!0}}}function i(){var e;window.powerbi=(e=t.ensurePowerbi(),new Proxy(e,a("powerbi",4)))}r=t.extensibility||(t.extensibility={}),n=new Set(["powerbi.common.cultureInfo","powerbi.visuals.plugins","powerbi.extensibility.utils","powerbi.extensibility.utils.color","powerbi.extensibility.utils.type","powerbi.extensibility.utils.type.Prototype","powerbi.extensibility.utils.type.ArrayExtensions","powerbi.extensibility.utils.type.EnumExtensions","powerbi.extensibility.utils.type.ValueUtil","powerbi.extensibility.utils.type.PixelConverter","powerbi.extensibility.utils.type.RegExpExtensions","powerbi.extensibility.utils.type.StringExtensions","powerbi.extensibility.utils.type.LogicExtensions","powerbi.extensibility.utils.type.JsonComparer","powerbi.extensibility.utils.type.TextSizeDefaults","powerbi.extensibility.utils.type.PrimitiveType","powerbi.extensibility.utils.type.ExtendedType","powerbi.extensibility.utils.svg","powerbi.extensibility.utils.svg.shapes","powerbi.extensibility.utils.svg.CssConstants","powerbi.extensibility.utils.svg.touch","powerbi.extensibility.utils.dataview","powerbi.extensibility.utils.dataview.DataRoleHelper","powerbi.extensibility.utils.dataview.DataViewObject","powerbi.extensibility.utils.dataview.DataViewObjects","powerbi.extensibility.utils.dataview.converterHelper","powerbi.extensibility.utils.formatting","powerbi.extensibility.utils.formatting.stringExtensions","powerbi.extensibility.utils.formatting.wordBreaker","powerbi.extensibility.utils.formatting.DateTimeUnit","powerbi.extensibility.utils.formatting.textMeasurementService","powerbi.extensibility.utils.formatting.dateUtils","powerbi.extensibility.utils.formatting.font","powerbi.extensibility.utils.formatting.numberFormat","powerbi.extensibility.utils.formatting.DisplayUnitSystemType","powerbi.extensibility.utils.formatting.textUtil","powerbi.extensibility.utils.formatting.valueFormatter","powerbi.extensibility.utils.filter","powerbi.extensibility.utils.interactivity","powerbi.extensibility.utils.interactivity.interactivityUtils","powerbi.extensibility.visual"]),r.initializeCustomVisualsEM=function(){var e;QueryStringUtil.getQueryStringValue("pbiglobals")&&((e=t.ensurePowerbi()).VisualDataRoleKind=t.VisualDataRoleKind,e.VisualDataChangeOperationKind=t.VisualDataChangeOperationKind,e.VisualUpdateType=t.VisualUpdateType,e.VisualPermissions=t.VisualPermissions,null!=sqexprbuilder&&sqexprbuilder.entity&&((e=ensurePowerbiData()).SQExprBuilder={},e.SQExprBuilder.entity=sqexprbuilder.entity,e.SQExprBuilder.subqueryRef=sqexprbuilder.subqueryRef,e.SQExprBuilder.namedQueryRef=sqexprbuilder.namedQueryRef,e.SQExprBuilder.columnRef=sqexprbuilder.columnRef,e.SQExprBuilder.measureRef=sqexprbuilder.measureRef,e.SQExprBuilder.nativeMeasure=sqexprbuilder.nativeMeasure,e.SQExprBuilder.nativeColumn=sqexprbuilder.nativeColumn,e.SQExprBuilder.aggregate=sqexprbuilder.aggregate,e.SQExprBuilder.selectRef=sqexprbuilder.selectRef,e.SQExprBuilder.percentile=sqexprbuilder.percentile,e.SQExprBuilder.rangePercent=sqexprbuilder.rangePercent,e.SQExprBuilder.arithmetic=sqexprbuilder.arithmetic,e.SQExprBuilder.floor=sqexprbuilder.floor,e.SQExprBuilder.scopedEval=sqexprbuilder.scopedEval,e.SQExprBuilder.filteredEval=sqexprbuilder.filteredEval,e.SQExprBuilder.withRef=sqexprbuilder.withRef,e.SQExprBuilder.groupRef=sqexprbuilder.groupRef,e.SQExprBuilder.hierarchy=sqexprbuilder.hierarchy,e.SQExprBuilder.propertyVariationSource=sqexprbuilder.propertyVariationSource,e.SQExprBuilder.hierarchyLevel=sqexprbuilder.hierarchyLevel,e.SQExprBuilder.transformTableRef=sqexprbuilder.transformTableRef,e.SQExprBuilder.transformOutputRoleRef=sqexprbuilder.transformOutputRoleRef,e.SQExprBuilder.roleRef=sqexprbuilder.roleRef,e.SQExprBuilder.summaryValueRef=sqexprbuilder.summaryValueRef,e.SQExprBuilder.allRolesRef=sqexprbuilder.allRolesRef,e.SQExprBuilder.and=sqexprbuilder.and,e.SQExprBuilder.between=sqexprbuilder.between,e.SQExprBuilder.inValues=sqexprbuilder.inValues,e.SQExprBuilder.inTable=sqexprbuilder.inTable,e.SQExprBuilder.or=sqexprbuilder.or,e.SQExprBuilder.compare=sqexprbuilder.compare,e.SQExprBuilder.conditional=sqexprbuilder.conditional,e.SQExprBuilder.contains=sqexprbuilder.contains,e.SQExprBuilder.exists=sqexprbuilder.exists,e.SQExprBuilder.equal=sqexprbuilder.equal,e.SQExprBuilder.not=sqexprbuilder.not,e.SQExprBuilder.startsWith=sqexprbuilder.startsWith,e.SQExprBuilder.nullConstant=sqexprbuilder.nullConstant,e.SQExprBuilder.emptyString=sqexprbuilder.emptyString,e.SQExprBuilder.now=sqexprbuilder.now,e.SQExprBuilder.defaultValue=sqexprbuilder.defaultValue,e.SQExprBuilder.anyValue=sqexprbuilder.anyValue,e.SQExprBuilder.boolean=sqexprbuilder.boolean,e.SQExprBuilder.dateAdd=sqexprbuilder.dateAdd,e.SQExprBuilder.dateTime=sqexprbuilder.dateTime,e.SQExprBuilder.dateSpan=sqexprbuilder.dateSpan,e.SQExprBuilder.decimal=sqexprbuilder.decimal,e.SQExprBuilder.double=sqexprbuilder.double,e.SQExprBuilder.integer=sqexprbuilder.integer,e.SQExprBuilder.text=sqexprbuilder.text,e.SQExprBuilder.typedConstant=sqexprbuilder.typedConstant,e.SQExprBuilder.fromRawValue=sqexprbuilder.fromRawValue,e.SQExprBuilder.sparklineData=sqexprbuilder.sparklineData,e.SQExprBuilder.setAggregate=sqexprbuilder.setAggregate,e.SQExprBuilder.removeAggregate=sqexprbuilder.removeAggregate,e.SQExprBuilder.setPercentOfGrandTotal=sqexprbuilder.setPercentOfGrandTotal,e.SQExprBuilder.removePercentOfGrandTotal=sqexprbuilder.removePercentOfGrandTotal,e.SQExprBuilder.setPercentOfRoleTotal=sqexprbuilder.setPercentOfRoleTotal,e.SQExprBuilder.removePercentOfRoleTotal=sqexprbuilder.removePercentOfRoleTotal,e.SQExprBuilder.removeEntityVariables=sqexprbuilder.removeEntityVariables,e.SQExprBuilder.setVisualCalcExpression=sqexprbuilder.setVisualCalcExpression,e.SQExprBuilder.fillRule=sqexprbuilder.fillRule,e.SQExprBuilder.themeDataColor=sqexprbuilder.themeDataColor,e.SQExprBuilder.resourcePackageItem=sqexprbuilder.resourcePackageItem,e.SQExprBuilder.discretize=sqexprbuilder.discretize,e.SQExprBuilder.member=sqexprbuilder.member,e.SQExprBuilder.color=sqexprbuilder.color,e.SQExprBuilder.nativeVisualCalc=sqexprbuilder.nativeVisualCalc,e.createDataViewScopeIdentity=createDataViewScopeIdentity),(e=ensurePowerbiExtensibility()).createColorPalette=r.createColorPalette,e.createExtendedColorPalette=r.createExtendedColorPalette,e.getVisualApiVersions=r.getVisualApiVersions),i()}})(powerbi=powerbi||{}),(function(e){function t(e,t){var r=this;this.wrappedVisual=e,this.run=t,e.update&&(this.update=function(e){return r.apply(r.wrappedVisual.update,e)}),e.onResizing&&(this.onResizing=function(e,t){r.apply(r.wrappedVisual.onResizing,e,t)}),e.onDataChanged&&(this.onDataChanged=function(e){r.apply(r.wrappedVisual.onDataChanged,e)})}e=e.extensibility||(e.extensibility={}),t.prototype.init=function(e){return this.apply(this.wrappedVisual.init,e)},t.prototype.destroy=function(){this.apply(this.wrappedVisual.destroy)},t.prototype.onViewModeChanged=function(e){this.apply(this.wrappedVisual.onViewModeChanged,e)},t.prototype.onClearSelection=function(){this.apply(this.wrappedVisual.onClearSelection)},t.prototype.onRestoreSelection=function(e){return this.apply(this.wrappedVisual.onRestoreSelection,e)},t.prototype.canResizeTo=function(e){return this.apply(this.wrappedVisual.canResizeTo,e)},t.prototype.enumerateObjectInstances=function(e){return this.apply(this.wrappedVisual.enumerateObjectInstances,e)},t.prototype.enumerateObjectInstancesAsync=function(e){return this.apply(this.wrappedVisual.enumerateObjectInstancesAsync,e)},t.prototype.enumerateObjectRepetition=function(){return this.apply(this.wrappedVisual.enumerateObjectRepetition)},t.prototype.enumerateObjectRepetitionAsync=function(){return this.apply(this.wrappedVisual.enumerateObjectRepetitionAsync)},t.prototype.visualHasMethod=function(e){return this.apply(this.wrappedVisual.visualHasMethod,e)},t.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},Object.defineProperty(t.prototype,"sandbox",{get:function(){var e;return null==(e=this.wrappedVisual)?void 0:e.sandbox},enumerable:!1,configurable:!0}),t.prototype.getTelemetryInformation=function(){return this.apply(this.wrappedVisual.getTelemetryInformation)},t.prototype.getFormattingModel=function(){return this.apply(this.wrappedVisual.getFormattingModel)},t.prototype.getFormattingModelAsync=function(){return this.apply(this.wrappedVisual.getFormattingModelAsync)},t.prototype.resolveFormattingPlaceholder=function(e){var t=this;return this.run((function(){return t.wrappedVisual.resolveFormattingPlaceholder(e)}))},t.prototype.getSubSelectionStyles=function(e){var t=this;return this.run((function(){return t.wrappedVisual.getSubSelectionStyles(e)}))},t.prototype.getSubSelectionShortcuts=function(e,t){var r=this;return this.run((function(){return r.wrappedVisual.getSubSelectionShortcuts(e,t)}))},t.prototype.getSubSelectables=function(e){var t=this;return this.run((function(){return t.wrappedVisual.getSubSelectables(e)}))},t.prototype.getNextSubSelectable=function(e,t){var r=this;return this.run((function(){return r.wrappedVisual.getNextSubSelectable(e,t)}))},t.prototype.onDataViewObjectChanged=function(e,t){return this.apply(this.wrappedVisual.onDataViewObjectChanged,e,t)},t.prototype.apply=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=this.wrappedVisual;return this.run((function(){return e.apply(i,t)}))},e.VisualOutsideZoneAdapter=t})(powerbi=powerbi||{}),(function(P){var e,r,i;function A(e){switch(e.toLowerCase()){case"grouping":case P.VisualDataRoleKind.Grouping.toString():return P.VisualDataRoleKind.Grouping;case"measure":case P.VisualDataRoleKind.Measure.toString():return P.VisualDataRoleKind.Measure;case"groupingormeasure":case P.VisualDataRoleKind.GroupingOrMeasure.toString():return P.VisualDataRoleKind.GroupingOrMeasure}}function M(e,t){return _.isString(e)||-1===_.indexOf(r,t)?e:P.data.getDisplayName(e,i)}e=(e=P.extensibility||(P.extensibility={})).visualPluginAdapter||(e.visualPluginAdapter={}),r=["displayName","description","placeHolderText"],i={get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}},e.transformPlugin=function(e){if(e.apiVersion){var t=e.capabilities;if(t){var r,i=t.objects;for(r in i){r=i[r];if(r){var o=r.properties;if(o)for(var n in o){var n=o[n];n&&(n=n.type)&&n.enumeration&&(n.enumeration=P.createEnumType(n.enumeration))}}}var a,s=t.dataRoles;for(a in s){a=s[a];a&&a.kind&&(a.kind=A(a.kind.toString()))}var l,c=t.dataViewMappings;for(l in c){l=c[l];if(l){var u=l.conditions;if(u)for(var p in u){var d=u[p];if(d)for(var h in d){var v=d[h];v&&v.kind&&(d[h].kind=A(v.kind.toString()))}}}}}}else{t=e.capabilities;if(t){var f,y=t.objects;for(f in y){var g=y[f];if(g){var m=(g=y[f]=_.mapValues(g,M)).properties;if(m)for(var S in m){var b=m[S];b&&(S=(b=m[S]=_.mapValues(b,M)).type)&&S.enumeration&&_.isFunction(S.enumeration.members)&&(b=S.enumeration.members().map((function(e){return _.mapValues(e,M)})),S.enumeration=P.createEnumType(b))}}}var w,V=t.dataRoles;for(w in V){var C=V[w];C&&(V[w]=_.mapValues(C,M))}}}}})(powerbi=powerbi||{}),(function(n){var e,o,t,a;function r(e,t,r,i,o,n,a){this.wrappedVisual=e,this.visualPlugin=t,this.promiseFactory=r,this.telemetryService=i,this.isPluginInError=o,this.certifiedEventsService=n,this.silent=a,this.initCalled=!1,this.visualLoadStartTime=jsCommon.performance.now(),this.startTimeISO=(new Date).toISOString()}e=n.extensibility||(n.extensibility={}),o=jsCommon.ExceptionHelper,t=jsCommon.Trace,a=jsCommon.Version,r.prototype.init=function(e){var t,r=this;if(this.initCalled=!0,e&&e.host&&e.host.telemetry&&(t=e.host.telemetry(),this.visualName=t&&t.visualName,this.instanceId=t&&t.instanceId),this.wrappedVisual.init)return this.executeSafelyAsync((function(){return r.wrappedVisual.init(e)}))},r.prototype.checkInit=function(){return!!this.initCalled||(t.assertFail("Another visual method was called before init"),!1)},r.prototype.destroy=function(){var e=this;this.wrappedVisual.destroy&&this.executeSafely((function(){return e.wrappedVisual.destroy()}))},r.prototype.update=function(o){var e=this;if(this.checkInit(),this.wrappedVisual.update)return this.executeSafelyAsync((function(){return __awaiter(e,void 0,n.Promise,(function(){var t,r,i;return __generator(this,(function(e){switch(e.label){case 0:return[4,this.wrappedVisual.update(o)];case 1:return e.sent(),this.telemetryService&&this.startTimeISO&&this.visualPlugin.custom&&(r=this.visualPlugin,t=r.version,r=r.apiVersion,i=(new Date).toISOString(),this.telemetryService.logEvent(n.telemetry.VisualApiUsage,{name:this.visualPlugin.name,apiVersion:r,custom:!!this.visualPlugin.custom,visualVersion:t,visualName:this.visualName,instanceId:this.instanceId,start:this.startTimeISO,end:i,isError:this.isPluginInError,errorSource:"User"}),null!=(i=this.certifiedEventsService)&&i.logTimedStandardizedFeatureEvent({visualId:this.visualPlugin.name,operationEndTime:jsCommon.performance.now(),operationStartTime:this.visualLoadStartTime,correlationId:null==(i=null==(i=this.telemetryService)?void 0:i.root)?void 0:i.id,activityName:"Visual Render",activityAttributes:{apiMajorVersion:r&&(null==(i=a.tryParse(r))?void 0:i.major),apiMinorVersion:r&&(null==(i=a.tryParse(r))?void 0:i.minor),visualMajorVersion:t&&(null==(r=a.tryParse(t))?void 0:r.major),visualMinorVersion:t&&(null==(i=a.tryParse(t))?void 0:i.minor)},featureName:"Custom Visuals",activityStatus:"Succeeded"}),this.startTimeISO=null),[2]}}))}))}))},r.prototype.onResizing=function(e,t){var r=this;this.checkInit(),this.wrappedVisual.onResizing&&this.executeSafely((function(){return r.wrappedVisual.onResizing(e,t)}))},r.prototype.onDataChanged=function(e){var t=this;this.checkInit(),this.wrappedVisual.onDataChanged&&this.executeSafely((function(){return t.wrappedVisual.onDataChanged(e)}))},r.prototype.onViewModeChanged=function(e){var t=this;this.checkInit(),this.wrappedVisual.onViewModeChanged&&this.executeSafely((function(){return t.wrappedVisual.onViewModeChanged(e)}))},r.prototype.onClearSelection=function(){var e=this;this.checkInit(),this.wrappedVisual.onClearSelection&&this.executeSafely((function(){return e.wrappedVisual.onClearSelection()}))},r.prototype.onRestoreSelection=function(e){var t=this;return this.checkInit(),!!this.wrappedVisual.onRestoreSelection&&this.executeSafely((function(){return t.wrappedVisual.onRestoreSelection(e)}))},r.prototype.canResizeTo=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.canResizeTo)return this.executeSafely((function(){return t.wrappedVisual.canResizeTo(e)}))},r.prototype.enumerateObjectInstances=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.enumerateObjectInstances)return this.executeSafely((function(){return t.wrappedVisual.enumerateObjectInstances(e)}))},r.prototype.enumerateObjectRepetition=function(){var e=this;if(this.checkInit(),this.wrappedVisual.enumerateObjectRepetition)return this.executeSafely((function(){return e.wrappedVisual.enumerateObjectRepetition()}))},r.prototype.enumerateObjectInstancesAsync=function(e){var t=this;return this.checkInit(),this.visualAdapter.enumerateObjectInstancesAsync?this.executeSafely((function(){return t.visualAdapter.enumerateObjectInstancesAsync(e)})):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},r.prototype.enumerateObjectRepetitionAsync=function(){var e=this;return this.checkInit(),this.visualAdapter.enumerateObjectRepetitionAsync?this.executeSafely((function(){return e.visualAdapter.enumerateObjectRepetitionAsync()})):this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(r.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"visualAdapter",{get:function(){return this.wrappedVisual},enumerable:!1,configurable:!0}),r.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},r.prototype.visualHasMethod=function(e){var t=this.wrappedVisual;return t&&t.visualHasMethod(e)},r.prototype.getTelemetryInformation=function(){var e=this;if(this.checkInit(),this.wrappedVisual.getTelemetryInformation)return this.executeSafely((function(){return e.wrappedVisual.getTelemetryInformation()}))},r.prototype.getFormattingModel=function(){var e=this;if(this.checkInit(),this.wrappedVisual.getFormattingModel)return this.executeSafely((function(){return e.wrappedVisual.getFormattingModel()}))},r.prototype.getFormattingModelAsync=function(){var e=this;return this.checkInit(),this.visualAdapter.getFormattingModelAsync?this.executeSafely((function(){return e.visualAdapter.getFormattingModelAsync()})):this.promiseFactory.resolve(this.getFormattingModel())},r.prototype.resolveFormattingPlaceholder=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.resolveFormattingPlaceholder)return this.executeSafely((function(){return t.wrappedVisual.resolveFormattingPlaceholder(e)}))},r.prototype.getSubSelectionStyles=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.getSubSelectionStyles)return this.executeSafely((function(){return t.wrappedVisual.getSubSelectionStyles(e)}))},r.prototype.getSubSelectionShortcuts=function(e,t){var r=this;if(this.checkInit(),this.wrappedVisual.getSubSelectionShortcuts)return this.executeSafely((function(){return r.wrappedVisual.getSubSelectionShortcuts(e,t)}))},r.prototype.getSubSelectables=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.getSubSelectables)return this.executeSafely((function(){return t.wrappedVisual.getSubSelectables(e)}))},r.prototype.getNextSubSelectable=function(e,t){var r=this;if(this.checkInit(),this.wrappedVisual.getNextSubSelectable)return this.executeSafely((function(){return r.wrappedVisual.getNextSubSelectable(e,t)}))},r.prototype.onDataViewObjectChanged=function(e,t){var r=this;if(this.checkInit(),this.visualAdapter.onDataViewObjectChanged)return this.executeSafely((function(){return r.wrappedVisual.onDataViewObjectChanged(e,t)}))},r.prototype.executeSafely=function(e){try{return e()}catch(e){this.silent,this.telemetryService&&this.logVisualExceptionEvent(e)}},r.prototype.executeSafelyAsync=function(r){return __awaiter(this,void 0,n.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,r()];case 1:return[2,e.sent()];case 2:return t=e.sent(),this.silent,this.telemetryService&&this.logVisualExceptionEvent(t),[3,3];case 3:return[2]}}))}))},r.prototype.logVisualExceptionEvent=function(e){var t=!!this.visualPlugin.custom,r=this.visualPlugin,i=r.version,r=r.apiVersion;this.telemetryService.logEvent(n.telemetry.VisualException,{visualType:this.visualPlugin.name,isCustom:t,apiVersion:r,visualName:this.visualName,instanceId:this.instanceId,isDeprecated:!!this.visualPlugin.isDeprecated,source:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,message:t?void 0:o.cleanExceptionMessage(e),stack:t?void 0:o.cleanExceptionStack(e)}),t&&null!=(e=this.certifiedEventsService)&&e.logStandardizedFeatureEvent({visualId:this.visualPlugin.name,correlationId:null==(e=null==(t=this.telemetryService)?void 0:t.root)?void 0:e.id,activityName:"Visual Exception",activityAttributes:{apiMajorVersion:r&&(null==(t=a.tryParse(r))?void 0:t.major),apiMinorVersion:r&&(null==(e=a.tryParse(r))?void 0:e.minor),visualMajorVersion:i&&(null==(t=a.tryParse(i))?void 0:t.major),visualMinorVersion:i&&(null==(r=a.tryParse(i))?void 0:r.minor),isDeprecated:!!this.visualPlugin.isDeprecated},featureName:"Custom Visuals",activityStatus:"Failed"})},e.VisualSafeExecutionWrapper=r})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).VisualPlugin=function(t){return function(e){e.__transform__=t.transform}}})(powerbi=powerbi||{}),(function(e){var e=e.extensibility||(e.extensibility={}),t=(e.createColorPalette=function(e){return new t(e)},e.createExtendedColorPalette=function(e){return new i(e)},r.prototype.getColor=function(e){var t,r=this.colorPalette[e];return r||(t=this.colors,r=this.colorPalette[e]=t[this.colorIndex++],this.colorIndex>=t.length&&(this.colorIndex=0)),r},r.prototype.reset=function(){return this.colorIndex=0,this.colorPalette={},this},r);function r(e){this.colorPalette={},this.colorIndex=0,this.colors=e}__extends(n,o=t);var o,i=n;function n(e){var t=this,r=e.colorPalette.dataColors,i=((t=o.call(this,r.getAllColors())||this).isHighContrast=e.isHighContrast,t.foreground=e.colorPalette.foreground,t.foregroundLight=e.colorPalette.foregroundLight,t.foregroundDark=e.colorPalette.foregroundDark,t.foregroundNeutralLight=e.colorPalette.foregroundNeutralLight,t.foregroundNeutralDark=e.colorPalette.foregroundNeutralDark,t.foregroundNeutralSecondary=e.colorPalette.foregroundNeutralSecondary,t.foregroundNeutralSecondaryAlt=e.colorPalette.foregroundNeutralSecondaryAlt,t.foregroundNeutralSecondaryAlt2=e.colorPalette.foregroundNeutralSecondaryAlt2,t.foregroundNeutralTertiary=e.colorPalette.foregroundNeutralTertiary,t.foregroundNeutralTertiaryAlt=e.colorPalette.foregroundNeutralTertiaryAlt,t.foregroundSelected=e.colorPalette.foregroundSelected,t.foregroundButton=e.colorPalette.foregroundButton,t.background=e.colorPalette.background,t.backgroundLight=e.colorPalette.backgroundLight,t.backgroundNeutral=e.colorPalette.backgroundNeutral,t.backgroundDark=e.colorPalette.backgroundDark,t.hyperlink=e.colorPalette.hyperlink,t.visitedHyperlink=e.colorPalette.visitedHyperlink,t.mapPushpin=e.colorPalette.mapPushpin,t.shapeStroke=e.colorPalette.shapeStroke,r.getSentimentColors()),r=(t.bad=i.bad,t.neutral=i.neutral,t.good=i.good,r.getGradientColors());return t.minimum=r.minColor,t.center=r.midColor,t.maximium=r.maxColor,t.null=r.nullColor,t.negative=i.bad,t.positive=i.good,t.selection=e.colorPalette.selection,t.separator=e.colorPalette.separator,t}})(powerbi=powerbi||{}),(function(e){var t;function r(){}t=e.extensibility||(e.extensibility={}),r.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&(this.ensureDataMap()[e.source.queryName]=[e.identity[t]]),this},r.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&(this.ensureDataMap()[e.source.queryName]=[t.identity]),this},r.prototype.withMeasure=function(e){return this.measure=e,this},r.prototype.createSelectionId=function(){return e.visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(),this.measure)},r.prototype.ensureDataMap=function(){return this.dataMap||(this.dataMap={}),this.dataMap},t.SelectionIdBuilder=r})(powerbi=powerbi||{}),(function(t){var e,r,n;function o(e,t){void 0===t&&(t=!1),this.dataPointObjectName="dataPoint",this.filterPropertyIdentifier={objectName:"general",propertyName:"filter"},this.hostServices=e.hostServices,this.apiVersion=e.apiVersion,this.selectedIds=[],this.promiseFactory=this.hostServices.promiseFactory(),this.noIframe=t}e=t.extensibility||(t.extensibility={}),r=t.visuals.CustomVisualSelectionId,n=jsCommon.Version,o.prototype.select=function(e,t){void 0===t&&(t=!1);var r=this.promiseFactory.defer();return e?(e instanceof Array||(e=[e]),this.hostServices.shouldRetainSelection()?this.sendSelectionToHost(e,t):(this.selectInternal(e,t),this.sendSelectionToHost(this.selectedIds,t)),r.resolve(this.selectedIds)):r.reject(),r.promise},o.prototype.showContextMenu=function(e,t,r){var i=this.promiseFactory.defer();return this.sendContextMenuToHost(e=e||{},t,r),i.resolve(null),i.promise},o.prototype.toggleExpandCollapse=function(e,t){var r=this.promiseFactory.defer();return this.sendExpandCollapseToHost(e,!0===t),r.resolve(null),r.promise},o.prototype.hasSelection=function(){return 0<this.selectedIds.length},o.prototype.clear=function(){var e=this.promiseFactory.defer();return this.selectedIds=[],this.sendSelectionToHost([]),e.resolve(null),e.promise},o.prototype.getSelectionIds=function(){return this.selectedIds},o.prototype.setSelectionIds=function(e){this.selectedIds=e},o.prototype.sendSelectionToHost=function(e,t){var r,i,o;this.noIframe||!this.apiVersion||n.lt(this.apiVersion,"2.0.0")?(r=this.dataPointObjectName,o=!(i={type:0,visualObjects:_.chain(e).filter((function(e){return e.hasIdentity()})).map((function(e){return{objectName:r,selectorsByColumn:e.getSelectorsByColumn()}})).value(),selectors:void 0,selectionMode:t?3:0}),(o=_.isEmpty(e)?o:e[0].getSelector()&&!e[0].getSelectorsByColumn())&&(i.selectors=_.chain(e).filter((function(e){return e.hasIdentity()})).map((function(e){return e.getSelector()})).value()),this.hostServices.onSelect(i)):this.hostServices.sendSelectionIdsToHost(this.prepareCustomVisualSelectEventArgs(e,t))},o.prototype.sendContextMenuToHost=function(e,t,r){e&&t&&this.hostServices.customVisualOnContextMenu({data:[e],position:t,dataRoles:r?[r]:void 0})},o.prototype.sendExpandCollapseToHost=function(e,t){e&&null!=e.nodeIsCollapsed&&this.hostServices.customVisualOnExpandCollapse({data:e,entireLevel:t})},o.prototype.selectInternal=function(r,e){var i=this;r.length<1||(1<r.length?this.selectedIds=e?r.filter((function(t){return!i.selectedIds.some((function(e){return e.equals(t)}))})).concat(this.selectedIds.filter((function(t){return!r.some((function(e){return e.equals(t)}))}))):r:o.containsSelection(this.selectedIds,r[0])?this.selectedIds=e?this.selectedIds.filter((function(e){return!r[0].equals(e)})):1<this.selectedIds.length?r:[]:e?this.selectedIds.push(r[0]):this.selectedIds=r)},o.containsSelection=function(e,t){return e.some((function(e){return t.equals(e)}))},o.getSelectorsByColumn=function(e){return e&&e[0]instanceof r?e:_(e).filter((function(e){return e&&e.hasIdentity})).map((function(e){return e.getSelectorsByColumn()})).compact().value()},o.createChangeForFilterProperty=function(e,t){var r={},i={objectName:e.objectName,selector:void 0,properties:r};return null==t?(r[e.propertyName]={},{remove:[i]}):(r[e.propertyName]=t,{merge:[i]})},o.prototype.getFilterFromSelectors=function(){var e;if(this.hasSelection())return e=_.chain(this.selectedIds).filter((function(e){return e.hasIdentity()})).map((function(e){return e.getSelector()})).value(),t.data.Selector.filterFromSelector(e,!1)},o.prototype.prepareCustomVisualSelectEventArgs=function(e,t){var r={selectionIds:[],multiSelect:t};if(e&&e[0]&&(e[0].dataMap||e[0].measures))for(var i=0,o=e;i<o.length;i++){var n=o[i];r.selectionIds.push(n)}return r},o.prototype.applySelectionFilter=function(){this.hostServices.persistProperties(o.createChangeForFilterProperty(this.filterPropertyIdentifier,this.getFilterFromSelectors()))},o.prototype.registerOnSelectCallback=function(e){this.onSelectCallback=e},o.prototype.invokeOnSelectCallback=function(e){_.isFunction(this.onSelectCallback)&&this.onSelectCallback(e)},e.SelectionManager=o})(powerbi=powerbi||{}),(function(e){var t=e.extensibility||(e.extensibility={}),r=(t.createTooltipService=function(e){return new r(e)},i.prototype.enabled=function(){return this.tooltipService&&this.tooltipService.enabled()},i.prototype.show=function(e){this.enabled()&&(e={coordinates:e.coordinates,dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.SelectionManager.getSelectorsByColumn(e.identities)},this.tooltipService.show(e))},i.prototype.move=function(e){this.enabled()&&(e={coordinates:e.coordinates,dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.SelectionManager.getSelectorsByColumn(e.identities)},this.tooltipService.move(e))},i.prototype.hide=function(e){this.enabled()&&this.tooltipService.hide(e)},i);function i(e){this.hostServices=e.hostServices,this.tooltipService=this.hostServices.tooltips()}})(powerbi=powerbi||{}),(function(e){var e=e.extensibility||(e.extensibility={}),t=(e.createTelemetryService=function(e){return new t(e)},r.prototype.trace=function(e,t){this.telemetryService&&this.telemetryService.trace(e,t)},r);function r(e){this.hostServices=e.hostServices,this.telemetryService=this.hostServices&&this.hostServices.telemetry&&this.hostServices.telemetry(),this.instanceId=this.telemetryService&&this.telemetryService.instanceId}e.convertVisualEventType=function(e){switch(e){case 3:return"VisualEventError";case 2:return"VisualEventTrace";case 0:return"VisualEventRenderStarted";case 1:return"VisualEventRenderCompleted";default:return}},e.convertStringToVisualEventType=function(e){switch(e){case"VisualEventError":return 3;case"VisualEventTrace":return 2;case"VisualEventRenderStarted":return 0;case"VisualEventRenderCompleted":return 1;default:return}}})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).createAuthenticationService=function(e){return new t(e)},r.prototype.getResourceUrl=function(){return this.authenticationService?this.authenticationService.getResourceUrl():this.promiseFactory.reject()},r.prototype.getAADAuthenticationToken=function(){return this.authenticationService?this.authenticationService.getAADAuthenticationToken():this.promiseFactory.reject()},r.prototype.getAADToken=function(){return this.authenticationService?this.authenticationService.getAADToken():this.promiseFactory.reject()},r.prototype.getWACToken=function(e,t){return this.authenticationService?this.authenticationService.getWACToken(e,t):this.promiseFactory.reject()},r.prototype.getSignedInAccessToken=function(){return this.promiseFactory.reject()},r.prototype.getClusterInfo=function(){return this.promiseFactory.reject()};var t=r;function r(e){this.hostServices=e.hostServices,this.authenticationService=this.hostServices&&this.hostServices.authenticationService&&this.hostServices.authenticationService(),this.promiseFactory=this.hostServices.promiseFactory()}})(powerbi=powerbi||{}),(function(e){function t(e){this.localizationResources=e}e=e.extensibility||(e.extensibility={}),t.prototype.getDisplayName=function(e){var t=this.localizationResources;return t&&t.localizedStrings&&t.localizedStrings.hasOwnProperty(e)?t.localizedStrings[e]:t&&t.enUSStrings&&t.enUSStrings.hasOwnProperty(e)?t.enUSStrings[e]:e},e.LocalizationManager=t})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).createEventService=function(e){return new t(e)},r.prototype.renderingStarted=function(e){this.eventService&&this.eventService.renderingStarted(e)},r.prototype.renderingFinished=function(e){this.eventService&&this.eventService.renderingFinished(e)},r.prototype.renderingFailed=function(e,t){this.eventService&&this.eventService.renderingFailed(e,t)};var t=r;function r(e){this.eventService=e&&e.eventService&&e.eventService()}})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).createLicenseManager=function(e){return new t(e)},r.prototype.getAvailableServicePlans=function(){return this.licenseManagerService?this.licenseManagerService.getAvailableServicePlans():this.promiseFactory.reject()},r.prototype.notifyLicenseRequired=function(e){return this.licenseManagerService?this.licenseManagerService.notifyLicenseRequired(e):this.promiseFactory.reject()},r.prototype.notifyFeatureBlocked=function(e){return this.licenseManagerService?this.licenseManagerService.notifyFeatureBlocked(e):this.promiseFactory.reject()},r.prototype.clearLicenseNotification=function(){return this.licenseManagerService?this.licenseManagerService.clearLicenseNotification():this.promiseFactory.reject()};var t=r;function r(e){this.licenseManagerService=e&&e.licenseManagerService&&e.licenseManagerService(),this.promiseFactory=e.promiseFactory()}})(powerbi=powerbi||{}),(function(e){var t,r;t=(t=e.extensibility||(e.extensibility={})).legacy||(t.legacy={}),r=e.data.Selector,t.isOldSelectEventArgs=function(e){var t=null!=e.data||null!=e.selectors,e=_.some(e.visualObjects,(function(e){return e.selectorsByColumn&&e.selectorsByColumn.metadata&&!_.isArray(e.selectorsByColumn.metadata)}));return t||e},t.getSelectorsByColumn=function(e){var t;if(e.data2)t=e.data2;else{if(e.selectors||e.data)return _.map(e.selectors||e.data,(function(e){var t;if(e)return(t={})[""]=e.data,{dataMap:t,metadata:[e.metadata]}}));if(!e.visualObjects)return[];t=_.map(e.visualObjects,(function(e){return e.selectorsByColumn}))}for(var r=0,i=t;r<i.length;r++){var o=i[r],n=o.metadata;n&&!_.isArray(n)&&(o.metadata=[n])}return t},t.getSelectors=function(e){return null!=e.selectors?e.selectors:e.data||(e.visualObjects?_.map(e.visualObjects,(function(e){return r.convertSelectorsByColumnToSelector(e.selectorsByColumn)})):e.data)}})(powerbi=powerbi||{}),(function(r){var e;function t(e){var r=this;(this.wrappedVisual=e).update&&(this.update=function(e){return r.trackVisualTime((function(){return r.wrappedVisual.update(e)}),(function(){return e&&e.parentContextActivity?e.parentContextActivity.createChildActivity({name:"Visual Update"}):void 0}))}),e.onResizing&&(this.onResizing=function(e,t){r.trackVisualTime((function(){return r.wrappedVisual.onResizing(e,t)}))}),e.onDataChanged&&(this.onDataChanged=function(e){r.trackVisualTime((function(){return r.wrappedVisual.onDataChanged(e)}))})}e=r.extensibility||(r.extensibility={}),t.prototype.init=function(e){var t=this;if(this.wrappedVisual.init)return this.trackVisualTime((function(){return t.wrappedVisual.init(e)}))},t.prototype.destroy=function(){var e=this;this.wrappedVisual.destroy&&this.trackVisualTime((function(){return e.wrappedVisual.destroy()}))},t.prototype.onViewModeChanged=function(e){var t=this;this.wrappedVisual.onViewModeChanged&&this.trackVisualTime((function(){return t.wrappedVisual.onViewModeChanged(e)}))},t.prototype.onClearSelection=function(){var e=this;this.wrappedVisual.onClearSelection&&this.trackVisualTime((function(){return e.wrappedVisual.onClearSelection()}))},t.prototype.onRestoreSelection=function(e){var t=this;return!!this.wrappedVisual.onRestoreSelection&&this.trackVisualTime((function(){return t.wrappedVisual.onRestoreSelection(e)}))},t.prototype.canResizeTo=function(e){var t=this;if(this.wrappedVisual.canResizeTo)return this.trackVisualTime((function(){return t.wrappedVisual.canResizeTo(e)}))},t.prototype.enumerateObjectInstances=function(e){var t=this;if(this.wrappedVisual.enumerateObjectInstances)return this.trackVisualTime((function(){return t.wrappedVisual.enumerateObjectInstances(e)}))},t.prototype.enumerateObjectRepetition=function(){var e=this;if(this.wrappedVisual.enumerateObjectRepetition)return this.trackVisualTime((function(){return e.wrappedVisual.enumerateObjectRepetition()}))},t.prototype.enumerateObjectInstancesAsync=function(e){var t=this;return this.visualAdapter.enumerateObjectInstancesAsync?this.trackVisualTime((function(){return t.visualAdapter.enumerateObjectInstancesAsync(e)})):r.Promise.resolve(this.enumerateObjectInstances(e))},t.prototype.enumerateObjectRepetitionAsync=function(){var e=this;return this.visualAdapter.enumerateObjectRepetitionAsync?this.trackVisualTime((function(){return e.visualAdapter.enumerateObjectRepetitionAsync()})):r.Promise.resolve(this.enumerateObjectRepetition())},Object.defineProperty(t.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visualAdapter",{get:function(){return this.wrappedVisual},enumerable:!1,configurable:!0}),t.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},t.prototype.visualHasMethod=function(e){var t=this.wrappedVisual;return t&&t.visualHasMethod(e)},t.prototype.getTelemetryInformation=function(){var e=this;if(this.wrappedVisual.getTelemetryInformation)return this.trackVisualTime((function(){return e.wrappedVisual.getTelemetryInformation()}))},t.prototype.getFormattingModel=function(){var e=this;if(this.wrappedVisual.getFormattingModel)return this.trackVisualTime((function(){return e.wrappedVisual.getFormattingModel()}))},t.prototype.getFormattingModelAsync=function(){var e=this;return this.visualAdapter.getFormattingModelAsync?this.trackVisualTime((function(){return e.visualAdapter.getFormattingModelAsync()})):r.Promise.resolve(this.getFormattingModel())},t.prototype.resolveFormattingPlaceholder=function(e){var t=this;if(this.wrappedVisual.resolveFormattingPlaceholder)return this.trackVisualTime((function(){return t.wrappedVisual.resolveFormattingPlaceholder(e)}))},t.prototype.getSubSelectionStyles=function(e){var t=this;if(this.wrappedVisual.getSubSelectionStyles)return this.trackVisualTime((function(){return t.wrappedVisual.getSubSelectionStyles(e)}))},t.prototype.getSubSelectionShortcuts=function(e,t){var r=this;if(this.wrappedVisual.getSubSelectionShortcuts)return this.trackVisualTime((function(){return r.wrappedVisual.getSubSelectionShortcuts(e,t)}))},t.prototype.getSubSelectables=function(e){var t=this;if(this.wrappedVisual.getSubSelectables)return this.trackVisualTime((function(){return t.wrappedVisual.getSubSelectables(e)}))},t.prototype.getNextSubSelectable=function(e,t){var r=this;if(this.wrappedVisual.getNextSubSelectable)return this.trackVisualTime((function(){return r.wrappedVisual.getNextSubSelectable(e,t)}))},t.prototype.onDataViewObjectChanged=function(e,t){var r=this;if(this.wrappedVisual.onDataViewObjectChanged)return this.trackVisualTime((function(){return r.wrappedVisual.onDataViewObjectChanged(e,t)}))},t.prototype.trackVisualTime=function(e,t){t=t&&t();try{return e()}finally{t&&t.resolve()}},e.VisualTimeTrackingWrapper=t})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).createAcquireAADTokenService=function(e){return new t(e)},r.prototype.acquireAADToken=function(){return null!=this.acquireAADTokenService?this.acquireAADTokenService.acquireAADToken():this.promiseFactory.reject()},r.prototype.acquireAADTokenstatus=function(){return null!=this.acquireAADTokenService?this.acquireAADTokenService.getAcquireAADTokenStatus():this.promiseFactory.resolve(2)};var t=r;function r(e){this.acquireAADTokenService=e&&e.acquireAADTokenService&&e.acquireAADTokenService(),this.promiseFactory=e.promiseFactory()}})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).createDownloadService=function(e){return new t(e)},r.prototype.exportStatus=function(){return null!=this.downloadService?this.downloadService.getExportStatus():this.promiseFactory.resolve(2)},r.prototype.exportVisualsContent=function(e,t,r,i){return null!=this.downloadService?this.downloadService.exportVisualsContent(e,t,r,i).then((function(e){return e.downloadCompleted})):this.promiseFactory.reject()},r.prototype.exportVisualsContentExtended=function(e,t,r,i){return null!=this.downloadService?this.downloadService.exportVisualsContent(e,t,r,i):this.promiseFactory.reject()};var t=r;function r(e){this.downloadService=e&&e.downloadService&&e.downloadService(),this.promiseFactory=e.promiseFactory()}})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).createStorageService=function(e){return new t(e)},r.prototype.status=function(){return null!=this.storageService?this.storageService.getStorageStatus():this.promiseFactory.resolve(2)},r.prototype.get=function(e){return null!=this.storageService&&e?this.storageService.getStorageData(e):this.promiseFactory.reject()},r.prototype.set=function(e,t){return null!=this.storageService&&e&&t?this.storageService.setStorageData(e,t):this.promiseFactory.reject()},r.prototype.remove=function(e){null!=this.storageService&&e&&this.storageService.removeStorageData(e)};var t=r;function r(e){this.storageService=e&&e.localStorageService&&e.localStorageService(),this.promiseFactory=e.promiseFactory()}})(powerbi=powerbi||{}),(function(e){(e.extensibility||(e.extensibility={})).createWebAccessService=function(e){return new t(e)},r.prototype.webAccessStatus=function(e){return null!=this.webAccessService?this.webAccessService.getWebAccessStatus(e):this.promiseFactory.resolve(2)};var t=r;function r(e){this.webAccessService=e&&e.webAccessService&&e.webAccessService(),this.promiseFactory=e.promiseFactory()}})(powerbi=powerbi||{});;
"use strict";var powerbi,__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;0<=s;s--)(n=e[s])&&(a=(r<3?n(a):3<r?n(t,i,a):n(t,i))||a);return 3<r&&a&&Object.defineProperty(t,i,a),a},__awaiter=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(i,t){function o(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}r((l=l.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(o,n){var r,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(i){return function(e){var t=[i,e];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(o,l)}catch(e){t=[6,e],a=0}finally{r=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},DataViewObjectSerializer=(!(function(o){var e=o.visualSandbox||(o.visualSandbox={}),s=window;function l(){return window.resourceLoaderUrl||"/explore/resourcePackageItem/"}e.getResourceLoaderUrl=l,e.createJQueryResourceItemProxy=function(e){return new t(e)},i.prototype.get=function(e,t,i){var o=this.promiseFactory.defer(),n=s.clusterUri,r=window.powerBIAccessToken,a=(top&&top.powerBIAccessToken&&(r=top.powerBIAccessToken),l()),r={authorization:"Bearer "+r},e=(window.isAnonymousEmbed&&(n=window.clusterApiUri,a=window.resourceLoaderUrl+e+"/",r["X-PowerBI-ResourceKey"]=window.powerBIResourceKey),n+a+encodeURIComponent(i));return $.ajax({url:e,headers:r,dataType:"string"}).then((function(e){return o.resolve(e)}),(function(e){return o.reject(e)})),o.promise},i.prototype.getBlob=function(e,t,i){return o.createJQueryPromiseFactory().reject()};var t=i;function i(e){this.promiseFactory=e}})(powerbi=powerbi||{}),!(function(r){var e=r.visualSandbox||(r.visualSandbox={}),a=r.visualHost,s=r.contracts.ResourcePackageItemType,t=(e.createResourceLoaderHost=function(){var e=r.createJQueryPromiseFactory(),e={messageProxy:a.createWindowMessageProxy(e,window.parent),promiseFactory:e,resourceProvider:{get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}}};return new t(e)},i.prototype.onMessageReceived=function(e){if("loadVisualPluginWithContent"===e.message.eventName)return this.loadVisualPluginWithContent.apply(this,e.message.arguments)},i.prototype.loadVisualPluginWithContent=function(e){var t=this.promiseFactory.defer(),i=e.pluginName,e=e.mappedPluginContent,o=e[s.CustomVisualJavascript].content,e=e[s.CustomVisualsCss].content;try{a.resourceInjector.injectJsCode(i,o),a.resourceInjector.injectCssCode(i,e);var n=r.visuals.plugins[i];n.iconUrl=a.visualPluginServiceHelpers.getPluginIconUrl(i),n.content={js:o,css:e,iconBase64:n.iconUrl},r.extensibility.visualPluginAdapter.transformPlugin(n),n.capabilities.objects=r.data.services.DataViewObjectDescriptorSerializer.serialize(n.capabilities.objects,this.resourceProvider),t.resolve(n)}catch(e){t.reject(e)}return t.promise},i);function i(e){var t=this;e.messageProxy,e.promiseFactory,this.messageProxy=e.messageProxy,this.promiseFactory=e.promiseFactory,this.resourceProvider=e.resourceProvider,this.messageProxy.on(a.events.WindowMessageProxyMessageEvent,(function(e){return t.onMessageReceived(e)}))}function o(){var e;n||(window.powerbi||(window.powerbi={}),window.powerbi.visualSandbox||(window.powerbi.visualSandbox={}),e=r.visualSandbox.createResourceLoaderHost,window.powerbi.visualSandbox.createResourceLoaderHost=function(){return e()},n=!0)}e.ResourceLoaderHost=t,e.exportCreateResourceLoaderHostToGlobal=o;var n=!1;o()})(powerbi=powerbi||{}),!(function(d){var e,t,i,o,y=d.visualSandbox||(d.visualSandbox={}),n=d.extensibility.ApprovedMessage,r=d.extensibility.createVisualApiAdapter,s=d.data.segmentation.DataViewMerger,a=d.data.services.DataViewObjectSerializer,l=jsCommon.Version,u=d.extensibility.VisualApiAdapter,h=d.extensibility.initializeCustomVisualsEM,p=d.visualHost.services.VisualObjectInstanceSerializer,c=d.visualHost.services.VisualObjectRepetitionSerializer,g=d.visualHost.VisualStyleSerializer,f=((i=e=e||{}).Click="click",i.MouseUp="mouseup",i.MSPointerUp="MSPointerUp",i.PointerUp="pointerup",(i=t=t||{}).Tap="tap",i.TouchCancel="touchcancel",i.Touchend="touchend",(o=o||{}).KeyDown="keydown",y.relayMouseEvents=Object.values(e),y.relayTouchEvents=Object.values(t),y.relayKeyboardEvents=Object.values(o),y.relayUIEvents=y.relayMouseEvents.concat(y.relayTouchEvents),y.relayUIEventProps=["type","bubbles","which","buttons","button","ctrlKey","altKey","metaKey","shiftKey","x","y","clientX","clientY","pageX","pageY","movementX","movementY","layerX","layerY","changedTouches","keyCode","code","key","cancelable","composed"],["Escape"]),v=(m.getLastId=function(){return m.counter},m.counter=0,m);function m(e){this.id=++m.counter,this.deferred=e}y.SandboxPromise=v,w.getLastId=function(){return w.counter},w.counter=0;var S=w;function w(e){this.id=++w.counter,this.deferred=e}y.SandboxPromise2=S,x.prototype.CreatePromise=function(e){e=new v(e);return this.promises[e.id]=e},x.prototype.ResolvePromise=function(e,t){var i=this.promises[e];i&&(i.deferred.resolve(t),this.promises[e]=null)},x.prototype.RejectPromise=function(e,t){var i=this.promises[e];i&&(i.deferred.reject(t),this.promises[e]=null)},x.prototype.CreatePromise2=function(e){e=new S(e);return this.promises2[e.id]=e},x.prototype.ResolvePromise2=function(e,t){var i=this.promises2[e];i&&(i.deferred.resolve(t),this.promises2[e]=null)},x.prototype.RejectPromise2=function(e,t){var i=this.promises2[e];i&&(i.deferred.reject(t),this.promises2[e]=null)};var b=x;function x(){this.promises={},this.promises2={}}function V(){return window.powerbi.visuals.plugins}function P(e,t,i){var o=e.content,n=e.hasBeenInjected||V()&&V().hasOwnProperty(e.name)&&V()[e.name].hasBeenInjected,n=(t&&n||(d.visualHost.resourceInjector.injectJsCode(e.name,o.js,i,e.apiVersion),d.visualHost.resourceInjector.injectCssCode(e.name,o.css)),!e.apiVersion||l.lt(e.apiVersion,{major:3,minor:0,patch:0})?(V()[e.name],V()[e.name]):(window[e.name],window[e.name].default));return e.apiVersion&&(n.iconUrl=e.iconUrl,n.capabilities=e.capabilities,n.localizationResources=e.localizationResources,n.isDeprecated=e.isDeprecated,n.version=e.version),t&&(n.hasBeenInjected=!0,n.approvedForNoIframe=!0,V()[e.name]=n),n}y.SandboxPromiseHandler=b,y.onSecurityPolicyViolation=function(e){e={eventName:"onSecurityPolicyViolation",arguments:[e.blockedURI,e.violatedDirective,e.originalPolicy]},e=JSON.stringify(e),window.parent.postMessage(e,"*")},y.createSandboxHost=function(e,t){void 0===t&&(t=!1);var i,o,n=d.createJQueryPromiseFactory(),r=d.visualHost.createWindowMessageProxy(n),a=(y.SandboxVisualHostServices.initialize(),h(),{promiseFactory:n}),s=y.createSandboxTelemetryProxyService(r),l=y.createSandboxCertifiedEventsProxyService(r),u=new b,p=y.createVisualHostServices(r,u),c={$element:e,hostServices:p,hostServicesControl:p,dataProxy:(i=n,o=y.createSandboxNoOpTelemetryProxyService(),e={dsr:{name:"dsr",reader:function(e){return new d.data.dsr.DsrDataReader(e,{execute:function(){return i.reject()}},o,{dsrV2:!1},null,void 0,void 0)}}},c={promiseFactory:function(){return i}},e=d.data.createDataReaderProvider(d.data.createDataReaderFactory(e,{}),c),d.data.createDataProxy(i,e,o)),promiseFactory:n,messageProxy:r,resourceLoader:d.visualHost.createResourceLoader(a,null),resourceProvider:{get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}},telemetryProxyService:s,certifiedEventsProxyService:l,instanceId:"",sandboxPromiseHandler:u},e=p.getQueryStringValue("cspiframe");return r.contentWindow=(e?window.parent:window).parent,new I(c,t)},y.injectCustomVisual=P,Object.defineProperty(D.prototype,"visual",{get:function(){return this._visual},enumerable:!1,configurable:!0}),D.prototype.init=function(e){this.hostServices.initInstanceId(e.instanceId),this.hostServicesControl.initInstanceId(e.instanceId),this.style=g.deserializeVisualStyle(e.style);var t={animation:e.animation,element:this.container,host:this.hostServices,interactivity:e.interactivity,style:this.style,viewport:e.viewport,localizationResources:this.plugin.localizationResources,hostEnv:e.hostEnv,dataMultiSelectMode:e.dataMultiSelectMode};return this.featureSwitches=e.featureSwitches,this.skipRedundantResize=this.featureSwitches&&this.featureSwitches.cvSkipExtraResize,this.attachRelayUIEventListener(),this.attachWindowResizeListener(),this.visual.init(t)},D.prototype.destroy=function(){this.detachRelayUIEventListener(),this.detachWindowResizeListener(),this.messageProxy.off(d.visualHost.events.WindowMessageProxyMessageEvent),this.messageProxy.destroy(),this.visual&&this.visual.destroy&&this.visual.destroy()},D.prototype.categoriesExists=function(e){return!!(e&&e.dataViews&&0<e.dataViews.length&&e.dataViews[0].categorical&&e.dataViews[0].categorical.categories&&0<e.dataViews[0].categorical.categories.length&&e.dataViews[0].categorical.categories[0]&&e.dataViews[0].categorical.categories[0].values)},D.prototype.getHostCategoriesValues=function(e,t,i){try{if(e){if(i)for(var o=0;o<e.length;o++)e[o]&&(e[o]=new Date(e[o]));t.dataViews[0].categorical.categories[0].values=e}}catch(e){this.sendError(e)}return t},D.prototype.update=function(t){var i,e,o=this,n=t.message.arguments[0];this.plugin&&this.plugin.apiVersion&&!l.lt(this.plugin.apiVersion,"2.0.0")?(this.stringifiedDataView=n.serializedDataView?n.serializedDataView.stringifiedDataView:null,e=!(!this.plugin.capabilities.expandCollapse||!this.plugin.capabilities.dataViewMappings[0].matrix),e=n.serializedDataView?[this.dataViewSerializer.deserializeDataView(n.serializedDataView,l.gt(this.plugin.apiVersion,"3.5.9"),e,[],l.ge(this.plugin.apiVersion,"5.3.0"))]:[],e=this.lastVisualUpdateOptions={dataViews:e,suppressAnimations:n.suppressAnimations,viewMode:n.viewMode,editMode:n.editMode,viewport:n.viewport,type:n.type,operationKind:d.VisualDataChangeOperationKind.Create,resizeMode:n.resizeMode,isInFocus:n.isInFocus,jsonFilters:n.jsonFilters||null,updateId:n.updateId},this.plugin&&this.plugin.apiVersion&&!l.lt(this.plugin.apiVersion,"3.5.0")?(this.onRestoreCvSelectionIds(n.selections,!l.gt(this.plugin.apiVersion,"2.4.0")),this.fixUpdateOptionsAndUpdateVisual(e,t,n)):(this.fixUpdateOptionsAndUpdateVisual(e,t,n),this.onRestoreCvSelectionIds(n.selections,!l.gt(this.plugin.apiVersion,"2.4.0")))):(n.dataTransforms&&(i=d.data.services.DataViewTransformActionsSerializer.deserializeDataViewTransformActions(n.dataTransforms,this.plugin.capabilities||{})),this.transformDataViewSource(n.dataViewSource,i,!0).then((function(e){e=o.lastVisualUpdateOptions={dataViews:e.dataViews,suppressAnimations:n.suppressAnimations,viewMode:n.viewMode,editMode:n.editMode,viewport:n.viewport,type:n.type,operationKind:d.VisualDataChangeOperationKind.Create,resizeMode:n.resizeMode,isInFocus:n.isInFocus,jsonFilters:n.jsonFilters||null,updateId:n.updateId};o.visualHasNullFilter(i)&&o.onRestoreSelection(null),o.fixUpdateOptionsAndUpdateVisual(e,t,n)})).catch((function(e){return o.sendError(e)})))},D.prototype.visualHasNullFilter=function(e){var t;if(null!=(t=null==(t=null==(t=null==(t=null==(t=this.plugin)?void 0:t.capabilities)?void 0:t.objects)?void 0:t.general)?void 0:t.properties)&&t.filter){e=null==(t=null==e?void 0:e.objects)?void 0:t.general;if(e&&0<e.length&&null!=(t=e[0])&&t.properties&&!e[0].properties.filter)return!0}return!1},D.prototype.updateWithCachedData=function(e){var t,i,o=e.message.arguments[0],n=(this.plugin&&this.plugin.apiVersion&&!l.lt(this.plugin.apiVersion,"2.0.0")?(this.lastVisualUpdateOptions.dataViews&&this.lastVisualUpdateOptions.dataViews[0]&&this.lastVisualUpdateOptions.dataViews[0].metadata&&(i=this.lastVisualUpdateOptions.dataViews[0].metadata.segment,this.lastVisualUpdateOptions.dataViews[0].metadata=o.dataViewMetadata?JSON.parse(o.dataViewMetadata):void 0,this.lastVisualUpdateOptions.dataViews[0].metadata.segment=i),i=this.lastVisualUpdateOptions.dataViews,t=!0):(o.dataTransforms&&(n=d.data.services.DataViewTransformActionsSerializer.deserializeDataViewTransformActions(o.dataTransforms,this.plugin.capabilities||{})),this.lastDataViewTransformApplyOptions.transforms=n,i=d.data.DataViewTransform.apply(this.lastDataViewTransformApplyOptions).dataViews),this.lastVisualUpdateOptions={dataViews:i,suppressAnimations:o.suppressAnimations,viewMode:o.viewMode,editMode:o.editMode,viewport:o.viewport,type:o.type,operationKind:d.VisualDataChangeOperationKind.Create,resizeMode:o.resizeMode,isInFocus:o.isInFocus,jsonFilters:o.jsonFilters||null,updateId:o.updateId});this.fixUpdateOptionsAndUpdateVisual(n,e,o,t)},D.prototype.loadResourcePackage=function(t){var i=this;this.resourceLoader.loadVisualPlugin(t).then((function(e){i.plugin=e,i.createAdapter()})).catch((function(){var e=new Error("Unable to load plugin, resource package id: "+t.id);return i.sendError(e)}))},D.prototype.createAdapter=function(){var e=this.plugin;if(this.container.addClass("visual-"+e.name),this._visual=r(e,e.create,this.promiseFactory,this.telemetryProxyService,void 0,void 0,this.certifiedEventsProxyService),!e||!this.visual)return e=new Error("Unable to create visual from plugin "+e.name),this.sendError(e);this.flushQueue(),this.isVisualInitialized=!0,this.sendSandboxReady()},D.prototype.loadWithoutResourcePackage=function(e){var t;this.plugin?this.sendError(new Error("Plugin is already loaded")):(t=e.apiVersion?this.isolate&&l.lt(e.apiVersion,"3.0.0"):this.isolate,this.plugin=P(e,!1,t),d.extensibility.visualPluginAdapter.transformPlugin(this.plugin),this.createAdapter())},D.prototype.enumerateObjectInstances=function(e){if(this.visual.enumerateObjectInstances){var t,i,e=this.visual.enumerateObjectInstances(e);if(e)return t=e,i=this.plugin&&this.plugin.apiVersion&&!l.lt(this.plugin.apiVersion,"2.0.0"),t&&t.instances?i?{instances:t.instances,containers:t.containers}:{instances:p.serialize(t.instances),containers:t.containers?p.serializeContainers(t.containers,this.resourceProvider):null}:i?e:p.serialize(e)}},D.prototype.enumerateObjectRepetition=function(){var e;return this.visual.enumerateObjectRepetition&&(e=this.visual.enumerateObjectRepetition())?c.serialize(e):void 0},D.prototype.getFormattingModel=function(){var e,t;return null==(t=(e=this.visual).getFormattingModel)?void 0:t.call(e)},D.prototype.sendUpdateResult=function(){var e=this.container.children("*").length;this.messageProxy.postMessage({eventName:"onUpdateResult",arguments:[e]})},D.prototype.sendSandboxReady=function(){this.messageProxy.postMessage({eventName:"onPluginReady",arguments:[]})},D.prototype.flushQueue=function(){for(;0<this.messageQueue.length;){var e=this.messageQueue.shift();this.executeMessage(e)}},D.prototype.sendError=function(e,t){t={eventName:"onError",arguments:[],error:{id:t?t.id:null,eventName:t?t.eventName:null,name:e.name,message:e.message,pluginName:this.plugin.name}};this.messageProxy.postMessage(t)},D.prototype.sendErrorMessage=function(e,t){e={eventName:"onError",arguments:[],error:{eventName:e,message:t,pluginName:this.plugin.name}};this.messageProxy.postMessage(e)},D.prototype.onMessageReceived=function(e){if(this.isVisualInitialized||"loadResourcePackage"===e.message.eventName||"loadWithoutResourcePackage"===e.message.eventName)return this.executeMessage(e);this.messageQueue.push(e)},D.prototype.validateSandboxHostMessage=function(e){e=this[e.message.eventName];return e?"function"!=typeof e?{error:"not a function"}:e.approvedMessage?{ok:!0}:{error:"unapproved type"}:{error:"undefined method"}},D.prototype.validateVisualMessage=function(e){var t,e=e.message;return this.visual?(t=this.visual[e.eventName])?"function"!=typeof t?{error:"not a function"}:u.prototype[e.eventName].approvedMessage?{ok:!0}:{error:"unapproved type"}:{error:"undefined method"}:{error:"unset visual"}},D.prototype.executeMessage=function(e){var t,i,o=e.message,n="SandboxHost.executeMessage rejected message:";if(e.source!==this.messageProxy.contentWindow)return this.sendErrorMessage(o.eventName,"".concat(n," invalid source"));if(e.origin!==this.hostOrigin)return this.sendErrorMessage(o.eventName,"".concat(n," invalid origin"));try{if((t=this.validateSandboxHostMessage(e)).ok)return"update"===o.eventName||"updateWithCachedData"===o.eventName||"handleLoadMoreDataResult"===o.eventName?this[o.eventName].call(this,e):this[o.eventName].apply(this,o.arguments);if((i=this.validateVisualMessage(e)).ok)return this.visual[o.eventName].apply(this.visual,o.arguments)}catch(e){return void this.sendError(e,o)}this.sendErrorMessage(o.eventName,"".concat(n," ").concat(null==t?void 0:t.error,", ").concat(null==i?void 0:i.error))},D.prototype.transformDataViewSource=function(e,t,i){var o=this,n=this.promiseFactory.defer();return(e?this.createDataView(e):this.promiseFactory.resolve({dataView:null})).then((function(e){e=d.data.DataViewTransform.apply(o.lastDataViewTransformApplyOptions={prototype:e.dataView,objectDescriptors:o.plugin.capabilities?o.plugin.capabilities.objects:void 0,dataViewMappings:o.plugin.capabilities?o.plugin.capabilities.dataViewMappings:void 0,dataRoles:o.plugin.capabilities?o.plugin.capabilities.dataRoles:void 0,drillCapabilities:o.plugin.capabilities&&o.plugin.capabilities.drilldown,expandCollapseCapabilties:o.plugin.capabilities&&o.plugin.capabilities.expandCollapse,transforms:t,colorAllocatorFactory:d.visuals.createColorAllocatorFactory(),bypassConcatenation:i,visualStyle:o.style,keepAllMetadataColumnsCapability:!!o.plugin.capabilities&&o.plugin.capabilities.keepAllMetadataColumns,featureSwitches:o.featureSwitches}).dataViews;n.resolve({dataViews:e})})).catch((function(e){return o.sendError(e)})),n.promise},D.prototype.createDataView=function(e){var t=this,i=this.promiseFactory.defer(),e={type:e.type,query:{dataSources:null,command:e.data}};return this.dataProxy.execute(e).then((function(e){e=e&&e.dataReaderResult?e.dataReaderResult.dataView:null,e=d.DataViewAnalysis.validateAndReshape(e,t.plugin.capabilities?t.plugin.capabilities.dataViewMappings:null);i.resolve({dataView:e.dataView})})).catch((function(e){return t.sendError(e)})),i.promise},D.prototype.attachWindowResizeListener=function(){$(window).on("resize",this.windowResizeListener.bind(this)),$(window).trigger("resize")},D.prototype.detachWindowResizeListener=function(){$(window).off("resize")},D.prototype.windowResizeListener=function(){var e,t,i;this.lastVisualUpdateOptions&&(e=$(window).height(),t=$(window).width(),this.skipRedundantResize&&this.lastVisualUpdateOptions.viewport&&this.lastVisualUpdateOptions.viewport.width&&this.lastVisualUpdateOptions.viewport.height&&Math.abs(t-this.lastVisualUpdateOptions.viewport.width)<=1&&Math.abs(e-this.lastVisualUpdateOptions.viewport.height)<=1||((i=d.Prototype.inherit(this.lastVisualUpdateOptions)).viewport={width:t,height:e,scale:this.lastVisualUpdateOptions.viewport.scale},i.type=d.VisualUpdateType.Resize,i.resizeMode=1,this.visual.update(i)))},D.prototype.attachRelayUIEventListener=function(){$(window).on(y.relayKeyboardEvents.join(" "),this.relayKeyboardEventListener),this.container.on(y.relayUIEvents.join(" "),this.relayUIEventListener)},D.prototype.detachRelayUIEventListener=function(){$(window).off(y.relayKeyboardEvents.join(" "),this.relayKeyboardEventListener),this.container.off(y.relayUIEvents.join(" "),this.relayUIEventListener)},D.prototype.handleLoadMoreDataResult=function(a){return __awaiter(this,void 0,d.Promise,(function(){var t,i,o,n,r;return __generator(this,(function(e){switch(e.label){case 0:return(t=a.message.arguments[1],this.plugin&&this.plugin.apiVersion&&!l.lt(this.plugin.apiVersion,"2.0.0"))?(o=a.message.arguments[0],r=a.message.arguments[2],o&&this.stringifiedDataView!==o.stringifiedDataView?(this.stringifiedDataView=o.stringifiedDataView,i=!(!this.plugin.capabilities.expandCollapse||!this.plugin.capabilities.dataViewMappings[0].matrix),i=[this.dataViewSerializer.deserializeDataView(o,l.gt(this.plugin.apiVersion,"3.5.9"),i,r,l.ge(this.plugin.apiVersion,"5.3.0"))],this.lastVisualUpdateOptions.type=d.VisualUpdateType.Data,t?(s.mergeDataViews(this.lastVisualUpdateOptions.dataViews[0],i[0]),this.lastVisualUpdateOptions.operationKind=d.VisualDataChangeOperationKind.Append,[4,this.aggregateDataViewSizeAndUpdateVisual(a.packedSize)]):[3,2]):[3,4]):[3,5];case 1:return e.sent(),[3,4];case 2:return this.lastVisualUpdateOptions.dataViews[0]=i[0],this.lastVisualUpdateOptions.operationKind=d.VisualDataChangeOperationKind.Segment,[4,this.visual.update(this.lastVisualUpdateOptions)];case 3:e.sent(),e.label=4;case 4:return[3,9];case 5:return(this.lastDataViewTransformApplyOptions&&this.lastDataViewTransformApplyOptions.prototype,o=a.message.arguments[0],n=o?o.dataReaderResult.dataView:null)?(this.lastVisualUpdateOptions.type=d.VisualUpdateType.Data,t?(s.mergeDataViews(this.lastDataViewTransformApplyOptions.prototype,n),this.lastVisualUpdateOptions.dataViews=d.data.DataViewTransform.apply(this.lastDataViewTransformApplyOptions).dataViews,this.lastVisualUpdateOptions.operationKind=d.VisualDataChangeOperationKind.Append,[4,this.aggregateDataViewSizeAndUpdateVisual(a.packedSize)]):[3,7]):[3,9];case 6:return e.sent(),[3,9];case 7:return this.lastVisualUpdateOptions.dataViews[0]=n,this.lastVisualUpdateOptions.operationKind=d.VisualDataChangeOperationKind.Segment,[4,this.visual.update(this.lastVisualUpdateOptions)];case 8:e.sent(),e.label=9;case 9:return r={eventName:"stopProgressBar",arguments:[]},this.messageProxy.postMessage(r),[2]}}))}))},D.prototype.aggregateDataViewSizeAndUpdateVisual=function(t){return __awaiter(this,void 0,d.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.aggregatedDataViewSize+=t,104857600<=this.aggregatedDataViewSize?this.hostServicesControl.enableLoadMoreData(!1):this.hostServicesControl.enableLoadMoreData(!0),[4,this.visual.update(this.lastVisualUpdateOptions)];case 1:return e.sent(),[2]}}))}))},D.prototype.handleGetResourceUrlResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.payload):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.payload)},D.prototype.handleGetAADAuthenticationTokenResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.payload):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e)},D.prototype.handleGetAADTokenResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.payload):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.payload)},D.prototype.handleGetWACTokenResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise2(e.promiseId,e.payload||""):this.sandboxPromiseHandler.ResolvePromise2(e.promiseId,e.wacToken)},D.prototype.handleGetStorageStatus=function(e){this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.status)},D.prototype.handleGetStorageData=function(e){e.data?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.data):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},D.prototype.handleSetStorageData=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.freeSpace)},D.prototype.handleExportVisualsContentStatus=function(e){void 0!==e.status?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.status):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},D.prototype.handleExportVisualsContent=function(e){void 0!==e.data?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.data):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},D.prototype.handleGetWebAccessStatus=function(e){void 0!==e.status?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.status):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},D.prototype.handleModalDialogResult=function(e){e.isError?this.sandboxPromiseHandler.RejectPromise(e.promiseId,e.data):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.data)},D.prototype.handleAcquireAADTokenResult=function(e){this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.data)},D.prototype.handleGetAcquireAADTokenStatus=function(e){this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.status)},D.prototype.handleLicenseResult=function(e){e.licenseInfoResult?this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.licenseInfoResult):this.sandboxPromiseHandler.RejectPromise(e.promiseId)},D.prototype.handleLicenseNotificationResult=function(e){null==e.licenseNotificationResult?this.sandboxPromiseHandler.RejectPromise(e.promiseId):this.sandboxPromiseHandler.ResolvePromise(e.promiseId,e.licenseNotificationResult)},D.prototype.onRestoreSelection=function(e){var t=this.hostServices.selectionManager;t&&(e&&e.selection?(e=e.selection.map((function(e){return d.visuals.SelectionId.fromSelectorsByColumn(a.deserializeSelectorsByColumn(e))})),t.setSelectionIds(e),t.invokeOnSelectCallback(e)):(t.setSelectionIds([]),t.invokeOnSelectCallback([])))},D.prototype.onRestoreCvSelectionIds=function(e,t){void 0===t&&(t=!0);var i,o=this.hostServices.selectionManager;o&&(i=[],e?(i=_.map(e,(function(e){return new d.visuals.CustomVisualSelectionId(e.serializedDataMap,e.measures)})),o.setSelectionIds(i)):o.setSelectionIds([]),t)&&o.invokeOnSelectCallback(i)},D.prototype.fixUpdateOptionsAndUpdateVisual=function(e,t,i,o){(o=void 0===o?!1:o)||(e=this.categoriesExists(e)?this.getHostCategoriesValues(i.categoriesValues,e,i.isCategoryDate):e,this.hostServicesControl.enableLoadMoreData(!0),this.aggregatedDataViewSize=t.packedSize),this.visual.update(e),this.sendUpdateResult()},__decorate([n()],D.prototype,"init",null),__decorate([n()],D.prototype,"destroy",null),__decorate([n()],D.prototype,"update",null),__decorate([n()],D.prototype,"updateWithCachedData",null),__decorate([n()],D.prototype,"loadWithoutResourcePackage",null),__decorate([n()],D.prototype,"enumerateObjectInstances",null),__decorate([n()],D.prototype,"enumerateObjectRepetition",null),__decorate([n()],D.prototype,"getFormattingModel",null),__decorate([n()],D.prototype,"handleLoadMoreDataResult",null),__decorate([n()],D.prototype,"handleGetResourceUrlResult",null),__decorate([n()],D.prototype,"handleGetAADAuthenticationTokenResult",null),__decorate([n()],D.prototype,"handleGetAADTokenResult",null),__decorate([n()],D.prototype,"handleGetWACTokenResult",null),__decorate([n()],D.prototype,"handleGetStorageStatus",null),__decorate([n()],D.prototype,"handleGetStorageData",null),__decorate([n()],D.prototype,"handleSetStorageData",null),__decorate([n()],D.prototype,"handleExportVisualsContentStatus",null),__decorate([n()],D.prototype,"handleExportVisualsContent",null),__decorate([n()],D.prototype,"handleGetWebAccessStatus",null),__decorate([n()],D.prototype,"handleModalDialogResult",null),__decorate([n()],D.prototype,"handleAcquireAADTokenResult",null),__decorate([n()],D.prototype,"handleGetAcquireAADTokenStatus",null),__decorate([n()],D.prototype,"handleLicenseResult",null),__decorate([n()],D.prototype,"handleLicenseNotificationResult",null),__decorate([n()],D.prototype,"onRestoreSelection",null),__decorate([n()],D.prototype,"onRestoreCvSelectionIds",null);var I=D;function D(e,t){var i=this;this.isolate=t=void 0===t?!1:t,this.isVisualInitialized=!1,this.messageQueue=[],this.relayUIEventListener=function(e){e=_.pick(e.originalEvent,y.relayUIEventProps);i.messageProxy.postMessage({eventName:"onRelayUIEvent",arguments:[e]})},this.relayKeyboardEventListener=function(e){var t=_.pick(e.originalEvent,y.relayUIEventProps);_.includes(f,e.key)&&i.messageProxy.postMessage({eventName:"onRelayUIEvent",arguments:[t]})},this.container=e.$element,this.hostServices=e.hostServices,this.hostServicesControl=e.hostServicesControl,this.dataProxy=e.dataProxy,this.promiseFactory=e.promiseFactory,this.messageProxy=e.messageProxy,this.resourceLoader=e.resourceLoader,this.resourceProvider=e.resourceProvider,this.telemetryProxyService=e.telemetryProxyService,this.certifiedEventsProxyService=e.certifiedEventsProxyService,this.sandboxPromiseHandler=e.sandboxPromiseHandler,this.aggregatedDataViewSize=0,this.dataViewSerializer=new y.SandboxDataViewSerializer,this.skipRedundantResize=!1,this.hostOrigin=new URL(window.location.href).origin,this.messageProxy.on(d.visualHost.events.WindowMessageProxyMessageEvent,(function(e){return i.onMessageReceived(e)}))}function M(){var i;E||(window.powerbi||(window.powerbi={}),window.powerbi.visualSandbox||(window.powerbi.visualSandbox={}),i=d.visualSandbox.createSandboxHost,window.powerbi.visualSandbox.createSandboxHost=function(e,t){return i(e,t=void 0===t?!1:t)},E=!0)}y.SandboxHost=I,y.exportCreateSandboxToGlobal=M;var E=!1;function C(){var t;A||(window.powerbi||(window.powerbi={}),window.powerbi.visualSandbox||(window.powerbi.visualSandbox={}),t=d.visualSandbox.onSecurityPolicyViolation,window.powerbi.visualSandbox.onSecurityPolicyViolation=function(e){return t(e)},A=!0)}M(),y.exportOnSecurityPolicyViolationToGlobal=C;var A=!1;C(),y.exportCreateResourceLoaderHostToGlobal()})(powerbi=powerbi||{}),!(function(e){var t=e.visualSandbox||(e.visualSandbox={}),i=e.data.services.DataViewObjectSerializer,o=e.visuals.CustomVisualSelectionId,n=(t.createSandboxVisualHostTooltipService=function(e){return new n(e)},r.prototype.serializeIdentities=function(e){return e&&e[0]instanceof o?e:e&&_(e).map((function(e){return i.serializeSelectorsByColumn(e)})).compact().value()},r.prototype.show=function(e){e=e&&{coordinates:e.coordinates,dataItems:e.dataItems,identities:this.serializeIdentities(e.identities),isTouchEvent:e.isTouchEvent};this.messageProxy.postMessage({eventName:"showTooltip",arguments:[e]})},r.prototype.move=function(e){e=e&&{coordinates:e.coordinates,dataItems:e.dataItems,identities:this.serializeIdentities(e.identities),isTouchEvent:e.isTouchEvent};this.messageProxy.postMessage({eventName:"moveTooltip",arguments:[e]})},r.prototype.hide=function(e){this.messageProxy.postMessage({eventName:"hideTooltip",arguments:[e]})},r.prototype.visible=function(){return!1},r.prototype.isTouchOptimized=function(){return!1},r.prototype.container=function(){return this.rootElement},r.prototype.enabled=function(){return!0},r);function r(e){this.messageProxy=e,this.rootElement=window.document.body}})(powerbi=powerbi||{}),!(function(e){var t=e.visualSandbox||(e.visualSandbox={}),i=e.extensibility.convertVisualEventType,o=(t.createSandboxVisualHostTelemetryService=function(e,t){return new o(e,t)},n.prototype.trace=function(e,t){this.messageProxy.postMessageAsync({eventName:"logVisualEvent",arguments:[i(e),{instanceId:this.instanceId,payload:t}]})},n);function n(e,t){this.messageProxy=e,this.instanceId=t}})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),o=(e.createSandboxVisualHostLocalStorageService=function(e,t,i){return new o(e,t,i)},t.prototype.getStorageStatus=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getStorageStatus",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getStorageData=function(e){var t=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"getStorageData",arguments:[e,t.id]};return this.messageProxy.postMessage(e),t.deferred.promise},t.prototype.setStorageData=function(e,t){var i=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"setStorageData",arguments:[e,t,i.id]};return this.messageProxy.postMessage(e),i.deferred.promise},t.prototype.removeStorageData=function(e){this.messageProxy.postMessage({eventName:"removeStorageData",arguments:[e]})},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostLocalStorageService=o})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),i=(e.createSandboxVisualHostEventService=function(e,t){return new i(e,t)},t.prototype.renderingStarted=function(e){e={eventName:"renderingStarted",arguments:[this.instanceId,e.updateId]};this.messageProxy.postMessage(e)},t.prototype.renderingFinished=function(e){e={eventName:"renderingFinished",arguments:[this.instanceId,e.updateId]};this.messageProxy.postMessage(e)},t.prototype.renderingFailed=function(e,t){e={eventName:"renderingFailed",arguments:[this.instanceId,e.updateId,t]};this.messageProxy.postMessage(e)},t);function t(e,t){this.messageProxy=e,this.instanceId=t}e.SandboxVisualHostEventService=i})(powerbi=powerbi||{}),!(function(o){var i,e,t=o.visualSandbox||(o.visualSandbox={}),n=((e=i=t.proxiedTelemetryEventType||(t.proxiedTelemetryEventType={})).VisualApiUsage="VisualApiUsage",e.VisualException="VisualException",t.createSandboxTelemetryProxyService=function(e){return new n(e)},r.prototype.getOpenActivityById=function(e){},r.prototype.suspend=function(){},r.prototype.resume=function(){},r.prototype.flush=function(){},r.prototype.restart=function(){},r.prototype.stopActivity=function(e,t,i){},r.prototype.startPerfEventDeprecated=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0;return new a({info:{}})},r.prototype.logEvent=function(e,t){return _.isArray(t),e===o.telemetry.VisualApiUsage?this.windowMessageProxy.postMessageAsync({eventName:"logEvent",arguments:[i.VisualApiUsage,t]}):e===o.telemetry.VisualException&&this.windowMessageProxy.postMessageAsync({eventName:"logEvent",arguments:[i.VisualException,t]}),null},r.prototype.logTelemetryData=function(e,t,i){return null},r.prototype.logChildEvent=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0},r.prototype.startActivity=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0;return new a({info:{}})},r.prototype.startChildActivity=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0},r.prototype.startEvent=function(e){for(var t=1;t<arguments.length;t++)t-1,0;return new a({info:{}})},r.prototype.startMonitoredActivity=function(e,t,i){var o={info:{}};return{activityEvent:o,activityDeferred:new a(o)}},r.prototype.startChildEvent=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0;return new a({info:{}})},r.prototype.logTrace=function(e){},Object.defineProperty(r.prototype,"sessionId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"appInstanceId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){},enumerable:!1,configurable:!0}),r.prototype.setHostInfo=function(e,t){},r.prototype.getHostData=function(){},r.prototype.setExpAssignmentContext=function(e){},r);function r(e){this.windowMessageProxy=e}s.prototype.resolve=function(){this.isEnded=!0,this.onResolve()},s.prototype.cancel=function(e){return e?this.resolve():this.reject({isCancelled:!0,errorCode:"non-ignorable cancellation of deferred telemety event"})},s.prototype.reject=function(e){this.isEnded=!0,this.onReject()},s.prototype.isActive=function(){return!this.isEnded};var a=s;function s(e){var i=this;this.event=e,this.promise=new o.Promise(function(e,t){i.onResolve=e,i.onReject=t})}t.EmptyDeferredTelemetryEvent=a})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),t=(e.createSandboxCertifiedEventsProxyService=function(e){return new t(e)},i.prototype.logStandardizedFeatureEvent=function(e){this.windowMessageProxy.postMessage({eventName:"logStandardizedFeatureEvent",arguments:[e]})},i.prototype.logTimedStandardizedFeatureEvent=function(e){this.windowMessageProxy.postMessage({eventName:"logTimedStandardizedFeatureEvent",arguments:[e]})},i.prototype.startTimedStandardizedFeatureEvent=function(e){return new o(this,e)},i);function i(e){this.windowMessageProxy=e}e.SandboxCertifiedEventsProxyService=t,n.prototype.setAttributes=function(e){this.event.activityAttributes=__assign({},e)},n.prototype.setAttribute=function(e,t){this.event.activityAttributes[e]=t},n.prototype.getAttributes=function(){return this.event.activityAttributes},n.prototype.complete=function(e,t){this.event.resultCode=t,this.event.activityStatus=e,this.event.operationEndTime=jsCommon.performance.now(),this.certifiedEventsService.logTimedStandardizedFeatureEvent(this.event)};var o=n;function n(e,t){this.certifiedEventsService=e,this.event=_.cloneDeep(t),this.event.operationStartTime=jsCommon.performance.now()}e.VisualsRunningTimedStandardizedFeatureEvent=o})(powerbi=powerbi||{}),!(function(e){var n=e.visualSandbox||(e.visualSandbox={}),t=(n.createSandboxNoOpTelemetryProxyService=function(){return new t},i.prototype.getOpenActivityById=function(e){},i.prototype.suspend=function(){},i.prototype.resume=function(){},i.prototype.flush=function(){},i.prototype.restart=function(){},i.prototype.stopActivity=function(e,t,i){},i.prototype.startPerfEventDeprecated=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0;return new n.EmptyDeferredTelemetryEvent({info:{}})},i.prototype.logEvent=function(e){for(var t=1;t<arguments.length;t++)t-1,0;return null},i.prototype.logTelemetryData=function(e,t,i){return null},i.prototype.logChildEvent=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0},i.prototype.startActivity=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0;return new n.EmptyDeferredTelemetryEvent({info:{}})},i.prototype.startChildActivity=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0},i.prototype.startEvent=function(e){for(var t=1;t<arguments.length;t++)t-1,0;return new n.EmptyDeferredTelemetryEvent({info:{}})},i.prototype.startMonitoredActivity=function(e,t,i){var o={info:{}};return{activityEvent:o,activityDeferred:new n.EmptyDeferredTelemetryEvent(o)}},i.prototype.startChildEvent=function(e,t){for(var i=2;i<arguments.length;i++)i-2,0;return new n.EmptyDeferredTelemetryEvent({info:{}})},i.prototype.logTrace=function(e){},Object.defineProperty(i.prototype,"sessionId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"appInstanceId",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){},enumerable:!1,configurable:!0}),i.prototype.setHostInfo=function(e,t){},i.prototype.getHostData=function(){},i.prototype.setExpAssignmentContext=function(e){},i);function i(){}})(powerbi=powerbi||{}),!(function(i){var o,n,t,r,a,s,l,u;function p(e,t){this.messageProxy=e,this.sandboxPromiseHandler=t,this.loadMoreDataEnabled=!0,this.visualHostTooltipService=o.createSandboxVisualHostTooltipService(e),this.queryDictionary=p.parseUrlParameters(),this.authService=o.createSandboxVisualHostAuthenticationService(e,this.promiseFactory(),t),this.storageService=o.createSandboxVisualHostLocalStorageService(e,this.promiseFactory(),t),this.hostWebAccessService=o.createSandboxVisualHostWebAccessService(e,this.promiseFactory(),t),this.contentDownloadService=o.createSandboxVisualHostDownloadService(e,this.promiseFactory(),t),this.licensesManagerService=o.createSandboxVisualHostLicenseManagerService(e,this.promiseFactory(),t),this.acquireTokenService=o.createSandboxVisualHostAcquireAADTokenService(e,this.promiseFactory(),t),this.dialogPromiseFactory=this.promiseFactory()}o=i.visualSandbox||(i.visualSandbox={}),n=i.data.services.DataViewObjectSerializer,t=i.extensibility.SelectionManager,r=jsCommon.Version,a=i.visualHost.services.VisualObjectInstanceSerializer,s={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"},l={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",Restatement_Comma:"{0}, {1}",Restatement_CompoundAnd:"{0} and {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Decrease:"Decrease",Increase:"Increase",Waterfall_TotalLabel:"Total",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"},p.prototype.initInstanceId=function(e){this._instanceId=e,this.telemetryService=o.createSandboxVisualHostTelemetryService(this.messageProxy,e),this.eventsService=o.createSandboxVisualHostEventService(this.messageProxy,e)},p.initialize=function(){i.visuals.ToolTipComponent&&(i.visuals.ToolTipComponent.localizationOptions=p.createTooltipLocaleOptions())},p.createLocaleOptions=function(){return{null:l.NullValue,true:l.BooleanTrue,false:l.BooleanFalse,NaN:l.NaNValue,infinity:l.InfinityValue,negativeInfinity:l.NegativeInfinityValue,beautify:function(e){return p.beautify(e)},describe:function(e){return p.describeUnit(e)},restatementComma:l.Restatement_Comma,restatementCompoundAnd:l.Restatement_CompoundAnd,restatementCompoundOr:l.Restatement_CompoundOr}},p.createTooltipLocaleOptions=function(){return{highlightedValueDisplayName:l.Tooltip_HighlightedValueDisplayName}},p.prototype.getLocalizedString=function(e){return l[e]},p.prototype.onSelecting=function(e){e.action=0},p.prototype.onSelect=function(e){var t={eventName:"onSelect",arguments:[i.extensibility.legacy.isOldSelectEventArgs(e)?{data:n.serializeSelectors((t=e).data),data2:n.serializeSelectorsByColumn(t.data2),selectors:n.serializeSelectors(t.selectors)}:{type:e.type,visualObjects:n.serializeVisualObjects(e.visualObjects)}]};this.messageProxy.postMessage(t)},p.prototype.customVisualOnContextMenu=function(e){this.messageProxy.postMessage({eventName:"onCustomVisualContextMenu",arguments:[e]})},p.prototype.customVisualOnExpandCollapse=function(e){this.messageProxy.postMessage({eventName:"onCustomVisualExpandCollapse",arguments:[e]})},p.prototype.switchFocusModeState=function(e){this.messageProxy.postMessage({eventName:"onSwitchFocusModeState",arguments:[e]})},p.prototype.displayWarningIcon=function(e,t){null!=e&&null!=t&&this.messageProxy.postMessage({eventName:"onDisplayWarningIcon",arguments:[e,t]})},p.prototype.persistProperties=function(e){var t=e,t=this.apiVersion&&(r.gt(this.apiVersion,"2.0.0")||r.eq(this.apiVersion,"2.0.0"))?e:t.merge||t.remove||t.replace?{merge:t.merge?a.serialize(t.merge):null,replace:t.replace?a.serialize(t.replace):null,remove:t.remove?a.serialize(t.remove):null}:a.serialize(e);this.messageProxy.postMessage({eventName:"persistProperties",arguments:[t]})},p.prototype.sendSelectionIdsToHost=function(e){this.messageProxy.postMessage({eventName:"transformCvSelectionIdsAndSelect",arguments:[e]})},p.prototype.loadMoreData=function(){this.fetchMoreData(!0)},p.prototype.loadWindow=function(e){},p.prototype.fetchMoreData=function(e){return!!this.loadMoreDataEnabled&&(this.messageProxy.postMessage({eventName:"loadMoreData",arguments:[e=!1!==e?!0:e]}),!0)},p.prototype.launchUrl=function(e){this.messageProxy.postMessage({eventName:"launchUrl",arguments:[e]})},p.prototype.drill=function(e){this.messageProxy.postMessage({eventName:"drill",arguments:[e]})},p.prototype.openModalDialog=function(e,t,i){var o=this.sandboxPromiseHandler.CreatePromise(this.dialogPromiseFactory.defer()),e={eventName:"openModalDialog",arguments:[e,t,i,o.id]};return this.messageProxy.postMessage(e),o.deferred.promise},p.prototype.tooltips=function(){return this.visualHostTooltipService},p.prototype.telemetry=function(){return this.telemetryService},p.prototype.authenticationService=function(){return this.authService},p.prototype.localStorageService=function(){return this.storageService},p.prototype.eventService=function(){return this.eventsService},p.prototype.licenseManagerService=function(){return this.licensesManagerService},p.prototype.acquireAADTokenService=function(){return this.acquireTokenService},p.prototype.visualTimeSynchronization=function(){return this.visualTimeSynchronizationService},p.prototype.networkAvailability=function(){return this.networkAvailabilityService},p.prototype.webAccessService=function(){return this.hostWebAccessService},p.prototype.getSectionsMetadata$=function(){},p.prototype.getBookmarksMetadata$=function(){},p.prototype.downloadService=function(){return this.contentDownloadService},p.prototype.artifactService=function(){},p.prototype.getQueryStringValue=function(e){return this.queryDictionary&&this.queryDictionary[e]},p.prototype.locale=function(){var e=this.queryDictionary&&this.queryDictionary.locale;return e||navigator.language},p.prototype.loader=function(){var e=this;return{require:function(){return e.promiseFactory().reject()}}},p.prototype.applyJsonFilter=function(e,t,i,o){e=[e,t,i];return o&&e.push(o),this.messageProxy.postMessage({eventName:"applyJsonFilter",arguments:e}),!0},p.prototype.applyIdentityFilter=function(e,t,i,o){e=[e,t,i];return o&&e.push(o),this.messageProxy.postMessage({eventName:"applyIdentityFilter",arguments:e}),!0},p.prototype.getJSONFilter=function(e,t){return this.promiseFactory().reject()},p.parseUrlParameters=function(e){var t={},e=e=void 0===e?window.location.search:e;if(e&&"?"===e.substr(0,1))for(var i=0,o=e.substr(1).split("&");i<o.length;i++){var n=o[i],n=n&&n.split("=");n&&2===n.length&&(t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]))}return t},p.prototype.destroy=function(){this.messageProxy.destroy(),this.messageProxy=null},p.prototype.refreshHostData=function(){this.messageProxy.postMessage({eventName:"refreshHostData",arguments:null})},p.prototype.createSelectionIdBuilder=function(){return new i.visuals.CustomVisualSelectionId},p.prototype.createTooltipService=function(){return i.extensibility.createTooltipService({hostServices:this})},p.prototype.createSelectionManager=function(e){return new t({hostServices:this,apiVersion:e})},p.prototype.applyCustomSort=function(e){this.messageProxy.postMessage({eventName:"applyCustomSort",arguments:[e]})},p.prototype.alertScreenReader=function(e){},p.prototype.alertWithDebounce=function(e,t){},p.prototype.requestFocus=function(){},p.prototype.setShouldDeferData=function(){},p.prototype.onDragStart=function(){},p.prototype.onContextMenu=function(){},p.prototype.onSwitchFocusModeState=function(){},p.prototype.onDisplayWarningIcon=function(){},p.prototype.onClearCustomizedWarningIcon=function(){},p.prototype.getVisualLinkProperties=function(){},p.prototype.canSelect=function(){return!1},p.prototype.canExpandCollapse=function(e){return!1},p.prototype.setNodeExpansionState=function(e){},p.prototype.setLevelExpansionState=function(e){},p.prototype.onCustomSort=function(e){},p.prototype.getViewMode=function(){return 0},p.prototype.getEditMode=function(){return 0},p.prototype.setWarnings=function(e){},p.prototype.getWarnings$=function(){},p.prototype.setToolbar=function(e){},p.prototype.shouldRetainSelection=function(){return!1},p.prototype.geocoder=function(){return i.visuals.services.createGeocoder()},p.prototype.geolocation=function(){},p.prototype.promiseFactory=function(){return i.createJQueryPromiseFactory()},p.prototype.ignoreDefaultFilter=function(){return!1},p.prototype.getIdentityDisplayNames=function(e){},p.prototype.setIdentityDisplayNames=function(e){},p.prototype.setFilterExpressionMetadata=function(){},p.prototype.getFilterExpressionMetadata=function(){},p.prototype.getUIComponentFactory=function(){},p.prototype.onHyperlinkClick=function(e,t){},p.prototype.isVisualEnabled=function(){return this.promiseFactory().resolve(!0)},p.prototype.dataMultiSelectMode=function(){return 0},p.prototype.dropdown=function(){},p.prototype.setAriaMetadata=function(e){},p.prototype.onNotifyLicense=function(e){},p.prototype.onClearLicenseNotification=function(){},p.prototype.onNotifyFeatureBlocked=function(e){},p.prototype.getSubSelectionService=function(){},p.prototype.getAzureMapToken=function(){},Object.defineProperty(p.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!1,configurable:!0}),p.beautify=function(e){var t=s[e];return t&&l[t]||e},p.describeUnit=function(e){var t=-1===e?"Auto":e.toString(),i=l["DisplayUnitSystem_E"+t+"_Title"],e=e<=0?"{0}":l["DisplayUnitSystem_E"+t+"_LabelFormat"];if(i||e)return{title:i,format:e}},p.prototype.enableLoadMoreData=function(e){this.loadMoreDataEnabled=e},u=p,o.SandboxVisualHostServices=u,o.createVisualHostServices=function(e,t){return new u(e,t)}})(powerbi=powerbi||{}),!(function(r){var e=r.visualSandbox||(r.visualSandbox={}),t=r.extensibility.SelectionManager,o=(i.prototype.onSelecting=function(e){e.action=0},i.prototype.onSelect=function(e){this.powerbiHost&&this.powerbiHost.onSelect(e)},i.prototype.persistProperties=function(e){this.powerbiHost&&this.powerbiHost.persistProperties(e)},i.prototype.tooltips=function(){return this.visualHostTooltipService},i.prototype.applyJsonFilter=function(e,t,i,o){this.powerbiHost.applyJsonFilter(e,t,i,o)},i.prototype.applyIdentityFilter=function(e,t,i,o){this.powerbiHost.applyIdentityFilter(e,t,i,o)},i.prototype.getJSONFilter=function(e,t){return this.promiseFactory().reject()},i.prototype.createSelectionIdBuilder=function(){return new r.visuals.SelectionIdBuilder},i.prototype.createTooltipService=function(){return this.tooltipService},i.prototype.createSelectionManager=function(e){return new t({hostServices:this,apiVersion:e},!0)},i.prototype.getLocalizedString=function(e){return null},i.prototype.locale=function(){return navigator.language},i.prototype.loader=function(){var e=this;return{require:function(){return e.promiseFactory().reject()}}},i.prototype.onSwitchFocusModeState=function(e){this.powerbiHost&&this.powerbiHost.onSwitchFocusModeState(e)},i.prototype.onDisplayWarningIcon=function(e,t){var i,o,n;this.powerbiHost&&(n=r.visualHost.warningCodeForCV,i=r.visualHost.warningTitleLimit,o=r.visualHost.warningDetailsLimit,n=new r.visuals.CustomizedWarning(n,e.substr(0,i),t.substr(0,o)),this.powerbiHost.setWarnings([n]))},i.prototype.loadMoreData=function(){},i.prototype.loadWindow=function(e){},i.prototype.setShouldDeferData=function(){},i.prototype.fetchMoreData=function(e){return!0},i.prototype.launchUrl=function(e){},i.prototype.destroy=function(){},i.prototype.refreshHostData=function(){},i.prototype.onContextMenu=function(){},i.prototype.authenticationService=function(){return null},i.prototype.telemetry=function(){return null},i.prototype.localStorageService=function(){return null},i.prototype.eventService=function(){return null},i.prototype.licenseManagerService=function(){return null},i.prototype.acquireAADTokenService=function(){return null},i.prototype.visualTimeSynchronization=function(){return null},i.prototype.alertScreenReader=function(e){},i.prototype.alertWithDebounce=function(e,t){},i.prototype.requestFocus=function(){},i.prototype.onDragStart=function(){},i.prototype.getVisualLinkProperties=function(){},i.prototype.canSelect=function(){return!1},i.prototype.canExpandCollapse=function(){return!1},i.prototype.setNodeExpansionState=function(e){},i.prototype.setLevelExpansionState=function(e){},i.prototype.onCustomSort=function(e){},i.prototype.getViewMode=function(){return 0},i.prototype.getEditMode=function(){return 0},i.prototype.setWarnings=function(e){},i.prototype.getWarnings$=function(){},i.prototype.setToolbar=function(e){},i.prototype.shouldRetainSelection=function(){return!1},i.prototype.geocoder=function(){return r.visuals.services.createGeocoder()},i.prototype.geolocation=function(){},i.prototype.promiseFactory=function(){return r.createJQueryPromiseFactory()},i.prototype.ignoreDefaultFilter=function(){return!1},i.prototype.drill=function(e){},i.prototype.getIdentityDisplayNames=function(e){},i.prototype.setIdentityDisplayNames=function(e){},i.prototype.setFilterExpressionMetadata=function(){},i.prototype.getFilterExpressionMetadata=function(){},i.prototype.getUIComponentFactory=function(){},i.prototype.onHyperlinkClick=function(e,t){},i.prototype.isVisualEnabled=function(){return this.promiseFactory().resolve(!0)},i.prototype.dataMultiSelectMode=function(){return 0},i.prototype.dropdown=function(){},i.prototype.networkAvailability=function(){},i.prototype.downloadService=function(){},i.prototype.setAriaMetadata=function(e){},i.prototype.artifactService=function(){},i.prototype.getSectionsMetadata$=function(){},i.prototype.getBookmarksMetadata$=function(){},i.prototype.onNotifyLicense=function(e){},i.prototype.onClearLicenseNotification=function(){},i.prototype.onNotifyFeatureBlocked=function(e){},i.prototype.getSubSelectionService=function(){},i.prototype.webAccessService=function(){},i.prototype.getAzureMapToken=function(){},i.prototype.enableLoadMoreData=function(e){},i);function i(e,t,i){this.powerbiHost=e,this.visualHostTooltipService=i,this.tooltipService=new n(t,this.visualHostTooltipService)}e.NonSandboxVisualHostServices=o,a.prototype.enabled=function(){return this.tooltipService&&this.tooltipService.enabled()},a.prototype.show=function(e){this.enabled()&&(e={coordinates:this.fixCoordinates(e.coordinates),dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.getSelectorsByColumn(e.identities)},this.tooltipService.show(e))},a.prototype.move=function(e){this.enabled()&&(e={coordinates:this.fixCoordinates(e.coordinates),dataItems:e.dataItems,isTouchEvent:e.isTouchEvent,identities:t.getSelectorsByColumn(e.identities)},this.tooltipService.move(e))},a.prototype.hide=function(e){this.enabled()&&this.tooltipService.hide(e)},a.prototype.fixCoordinates=function(e){var t=this.element.offset();return e[0]=e[0]+t.left,e[1]=e[1]+t.top,e};var n=a;function a(e,t){this.tooltipService=t,this.element=e}e.createNonSandboxVisualHostServices=function(e,t,i){return new o(e,t,i)}})(powerbi=powerbi||{}),!(function(o){var e,i,d;function t(){this.serializeDataViewFromScrathTimes=0,this.initializeFields()}e=o.visualSandbox||(o.visualSandbox={}),i=o.data.services.DataViewScopeIdentitySerializer,d="children",t.prototype.serializeDataViewForCv=function(e,t,i,o,n,r){var a,s=this;if(void 0===r&&(r=!1),i||(this.initializeFields(),this.serializeDataViewFromScrathTimes=(this.serializeDataViewFromScrathTimes+1)%11617),e)return e=this.filterDataViewsType(e,t),this.isExpandCollapseSupported=!!e.matrix&&!!t.expandCollapse,this.isExpandCollapseSupported&&(i&&(_.isEmpty(n),this.lastNodeIndex=n),e.matrix.rows.levels.forEach((function(e,t){e.sources&&e.sources[0]&&e.sources[0].queryName&&(s.rowsLevel.length>t?s.rowsLevel[t]=e.sources[0].queryName:s.rowsLevel.push(e.sources[0].queryName))}))),t=this.getValueSource(e),i=this.getValueGroups(e),a=r&&!!e.matrix,n=JSON.stringify(e,(function(e,t){return s.replacer(e,t,o,a)})),_.isEmpty(this.stackNodeIndex),{valueSource:t,valueGroups:i,stringifiedDataView:n}},t.prototype.serializeDataViewMetadata=function(e){var i=this;return e.metadata?JSON.stringify(e.metadata,(function(e,t){return i.replacer(e,t)})):null},t.prototype.deserializeDataView=function(e,t,i,o,n){var r=this;return void 0===o&&(o=[]),void 0===n&&(n=!1),this.isExpandCollapseSupported=i=void 0===i?!1:i,this.lastNodeIndex=o,i=t||this.isExpandCollapseSupported&&n?JSON.parse(e.stringifiedDataView,(function(e,t){return r.deserializeDataViewHelper(e,t,n)})):JSON.parse(e.stringifiedDataView),this.reconstructValuesGroups(i,e),this.reconstructValuesSource(i,e),i},t.prototype.convertOpaqueIdentitiesToScopeIds=function(e){var t=[];if(e&&0<e.length)for(var i=0,o=e;i<o.length;i++){var n=o[i],r=this.replaceOpaqueIndexWithScopeIds(n);r&&(r.opaqueIdentity={identityIndex:n},t.push(r))}return t},t.prototype.convertCVSelectionIdToPowerbiSelctionId=function(e){var i=this,e=JSON.parse(JSON.stringify(e),(function(e,t){return i.replaceOpaqueIdentitiesWithDataViewScopeIdentities(e,t)}));return o.visuals.SelectionId.createWithSelectorForColumnAndMeasures(e.dataMap,e.measures)},t.prototype.restoreIdentitiesIndexesFromSelectionId=function(e){var i=this,o={serializedDataMap:{},measures:e.metadata};return _.map(e.dataMap,(function(e,t){e.length;e=e[0];o.serializedDataMap[t]=[{identityIndex:i.getIndexOfIdentity(e)}]})),o},t.prototype.getNodeIndexOfSelectionId=function(e){var t,i=[];if(e&&e.dataMap){if(null!=(t=e.nodeIndexes)&&t.length)return e.nodeIndexes;for(var o in e.dataMap){o=_.first(e.dataMap[o]).identityIndex;null!=this.identityNodeIndexArray[o]&&i.push(this.identityNodeIndexArray[o])}}return i},t.prototype.sortSelectionIdAccordingToRows=function(i){var o,e,t,n,r=this;return!(!i||!i.dataMap)&&(o=Object.keys(i.dataMap),e=Object.keys(i.dataMap).sort((function(e,t){return r.rowsLevel.indexOf(e)-r.rowsLevel.indexOf(t)})),(t=!_.isEmpty(e)&&!_.isEmpty(this.rowsLevel)&&e.length<=this.rowsLevel.length&&e.every((function(e,t){return e===r.rowsLevel[t]})))&&(null!=(n=i.nodeIndexes)&&n.length&&n.length===o.length&&(i.nodeIndexes=Object.entries(n).sort((function(e,t){e=e[0],t=t[0];return r.rowsLevel.indexOf(o[Number(e)])-r.rowsLevel.indexOf(o[Number(t)])})).map((function(e){return e[1]}))),i.dataMap=e.reduce((function(e,t){return e[t]=i.dataMap[t],e}),{})),t)},t.prototype.deserializeVisualObjectInstance=function(e){var i=this;return JSON.parse(JSON.stringify(e,(function(e,t){return i.replaceOpaqueIdentities(t)})))},t.prototype.deserializeOpaqueIdentity=function(e){var t=this;null!=e&&e.data&&(e.data=e.data.map((function(e){return t.replaceOpaqueIdentities(e)})))},t.prototype.flushIdentitiesArray=function(){this.identitiesArray&&0!==this.identitiesArray.length&&this.identitiesArray.forEach((function(e){e.opaqueIdentity=void 0,e.serializeDataViewFromScrathTimes=void 0}))},t.prototype.getValueGroups=function(e){var i=this;return e&&e.categorical&&e.categorical.values&&e.categorical.values.grouped?(e=e.categorical.values.grouped(),JSON.stringify(e,(function(e,t){return i.replacer(e,t)}))):null},t.prototype.getValueSource=function(e){return e&&e.categorical&&e.categorical.values&&e.categorical.values.source?e.categorical.values.source:null},t.prototype.deserializeDataViewHelper=function(e,t,i){var o,n;if(t&&(i&&this.isExpandCollapseSupported&&!isNaN(parseInt(e,10))&&null!=(null==(o=t.identity)?void 0:o.identityIndex)&&(t.nodeIndex=null!=(o=t.nodeIndex)?o:parseInt(e,10)),e===d)&&t instanceof Array){if(i&&this.isExpandCollapseSupported&&!_.isEmpty(t)&&_.first(t).isMerge&&!_.isEmpty(this.lastNodeIndex))for(var r in t){var a=t[r];a.identity&&(a.nodeIndex=null!=(n=a.nodeIndex)?n:Number(r),a.nodeIndex+=this.lastNodeIndex[a.level])}for(var s=0;s<t.length;s++)if(t[s]&&(t[s].isDate&&(t[s].value=new Date(t[s].value)),t[s].values))for(var l in t[s].values)t[s].values[l].isDate&&(t[s].values[l].value=new Date(t[s].values[l].value))}return t},t.prototype.replacer=function(e,t,i,o){if(void 0===o&&(o=!1),t){if(!o&&this.isExpandCollapseSupported&&!isNaN(parseInt(e,10))&&t.identity&&this.isDataViewScopeIdentity(t.identity)&&(this.stackNodeIndex.push(parseInt(e,10)+this.getNodeIndexOffset(t)),t.needOffset)&&delete t.needOffset,this.isDataViewScopeIdentity(t)){if(t.serializeDataViewFromScrathTimes===this.serializeDataViewFromScrathTimes&&t.opaqueIdentity&&null!=t.opaqueIdentity.identityIndex)return this.stackNodeIndex.length&&(n=this.stackNodeIndex.pop(),null==this.identityNodeIndexArray[t.opaqueIdentity.identityIndex])&&(this.identityNodeIndexArray[t.opaqueIdentity.identityIndex]=n),{identityIndex:t.opaqueIdentity.identityIndex};_.isEmpty(this.lastNodeIndex)||_.isEmpty(this.lastNodeIndex)||t.opaqueIdentity,t.serializeDataViewFromScrathTimes=this.serializeDataViewFromScrathTimes;var n=-1;return o&&-1<(n=this.getIndexOfIdentity(t))?t.opaqueIdentity={identityIndex:n}:(t.opaqueIdentity={identityIndex:this.identitiesArray.length},o&&(this.identitiesIndexesMapper[t.key]=this.identitiesArray.length),this.identitiesArray.push(t)),this.stackNodeIndex.length&&(this.identityNodeIndexArray[t.opaqueIdentity.identityIndex]=this.stackNodeIndex.pop()),t.opaqueIdentity}if(t instanceof Array){n=[];if(!o&&this.isExpandCollapseSupported&&e===d&&!_.isEmpty(t)&&_.first(t).isMerge)for(var r=0,a=t;r<a.length;r++){var s=a[r];s.identity&&(s.needOffset=!0)}if(i&&e===d)for(var l=0;l<t.length;l++)if(t[l]&&(t[l].value&&t[l].value instanceof Date&&(t[l].isDate=!0),t[l].values))for(var u in t[l].values)t[l].values[u].value&&t[l].values[u].value instanceof Date&&(t[l].values[u].isDate=!0);return n.push.apply(n,t||[]),n}if("object"==typeof t&&!this.dontNeedToClone(t)){var p,c={};for(p in t)c[p]=t[p];return c}}return t},t.prototype.replaceOpaqueIdentities=function(e){if(e){var t=e.identityIndex;if(void 0!==t&&0<=t&&t<this.identitiesArray.length)return i.serializeScopeIdentity(this.identitiesArray[e.identityIndex])}return e},t.prototype.getNodeIndexOffset=function(e){if(this.isExpandCollapseSupported&&!_.isEmpty(this.lastNodeIndex)&&e.needOffset)return e.level,this.lastNodeIndex.length,this.lastNodeIndex[e.level];return 0},t.prototype.getIndexOfIdentity=function(t){var e;return _.isEmpty(this.identitiesIndexesMapper)?_.findIndex(this.identitiesArray,(function(e){return o.DataViewScopeIdentity.equals(e,t)})):null!=(e=this.identitiesIndexesMapper[t.key])?e:-1},t.prototype.replaceOpaqueIdentitiesWithDataViewScopeIdentities=function(e,t){return t&&void 0!==t.identityIndex?this.identitiesArray[t.identityIndex]:t},t.prototype.filterDataViewsType=function(e,t){return t.dataViewMappings&&(t.dataViewMappings[0].categorical||(e.categorical=null),t.dataViewMappings[0].matrix||(e.matrix=null),t.dataViewMappings[0].table||(e.table=null),t.dataViewMappings[0].tree||(e.tree=null),t.dataViewMappings[0].single||(e.single=null)),e},t.prototype.dontNeedToClone=function(e){return e._proto_===Object.prototype||e instanceof Date},t.prototype.isDataViewScopeIdentity=function(e){return!!(e&&e.expr&&e.key&&e.kind)},t.prototype.reconstructValuesSource=function(e,t){t&&t.valueSource&&(e.categorical.values.source=t.valueSource)},t.prototype.reconstructValuesGroups=function(e,t){e&&e.categorical&&e.categorical.values&&e.categorical.values[0]&&(e.categorical.values.grouped=function(){return JSON.parse(t.valueGroups)})},t.prototype.replaceOpaqueIndexWithScopeIds=function(e){return e<this.identitiesArray.length?this.identitiesArray[e]:null},t.prototype.initializeFields=function(){this.identitiesArray=[],this.identityNodeIndexArray={},this.stackNodeIndex=[],this.rowsLevel=[],this.lastNodeIndex=[],this.identitiesIndexesMapper={}},e.SandboxDataViewSerializer=t})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),o=(e.createSandboxVisualHostLicenseManagerService=function(e,t,i){return new o(e,t,i)},t.prototype.getAvailableServicePlans=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getAvailableServicePlans",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.notifyLicenseRequired=function(e){var t=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"notifyLicenseRequired",arguments:[e,t.id]};return this.messageProxy.postMessage(e),t.deferred.promise},t.prototype.notifyFeatureBlocked=function(e){var t=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"notifyFeatureBlocked",arguments:[e,t.id]};return this.messageProxy.postMessage(e),t.deferred.promise},t.prototype.clearLicenseNotification=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"clearLicenseNotification",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostLicenseManagerService=o})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),o=(e.createSandboxVisualHostAcquireAADTokenService=function(e,t,i){return new o(e,t,i)},t.prototype.acquireAADToken=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"acquireAADToken",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getAcquireAADTokenStatus=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getAcquireAADTokenStatus",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostAcquireAADTokenService=o})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),o=(e.createSandboxVisualHostAuthenticationService=function(e,t,i){return new o(e,t,i)},t.prototype.getResourceUrl=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getResourceUrl",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getAADAuthenticationToken=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getAADAuthenticationToken",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getAADToken=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"getAADToken",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.getWACToken=function(e,t){var i=this.sandboxPromiseHandler.CreatePromise2(this.promiseFactory.defer()),t={resourceEtag:t,resourceSiteUrl:e,promiseId:i.id};return this.messageProxy.postMessage({eventName:"getWACToken",arguments:[t]}),i.deferred.promise},t.prototype.getSignedInAccessToken=function(){return this.promiseFactory.reject()},t.prototype.getClusterInfo=function(){return this.promiseFactory.reject()},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostAuthenticationService=o})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),o=(e.createSandboxVisualHostDownloadService=function(e,t,i){return new o(e,t,i)},t.prototype.downloadFile=function(e,t,i,o){throw new Error("Not implemented")},t.prototype.getExportStatus=function(){var e=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),t={eventName:"exportVisualsContentStatus",arguments:[e.id]};return this.messageProxy.postMessage(t),e.deferred.promise},t.prototype.exportVisualsContent=function(e,t,i,o){var n=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer());return e&&t&&i&&o?(e={eventName:"exportVisualsContent",arguments:[e,t,i,o,n.id]},this.messageProxy.postMessage(e)):n.deferred.reject(),n.deferred.promise},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostDownloadService=o})(powerbi=powerbi||{}),!(function(e){var e=e.visualSandbox||(e.visualSandbox={}),o=(e.createSandboxVisualHostWebAccessService=function(e,t,i){return new o(e,t,i)},t.prototype.getWebAccessStatus=function(e){var t=this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()),e={eventName:"getWebAccessStatus",arguments:[e,t.id]};return this.messageProxy.postMessage(e),t.deferred.promise},t);function t(e,t,i){this.messageProxy=e,this.promiseFactory=t,this.sandboxPromiseHandler=i}e.SandboxVisualHostWebAccessService=o})(powerbi=powerbi||{}),powerbi.data.services.DataViewObjectSerializer),SandboxDataViewSerializer=powerbi.visualSandbox.SandboxDataViewSerializer;!(function(e){function o(e,t){var i,o;null!=(null==(o=null==(o=null==(o=null==(o=e)?void 0:o.control)?void 0:o.properties)?void 0:o.descriptor)?void 0:o.objectName)?(o=e.control.properties).descriptor=n(t,o.descriptor):(i=null==(o=null==e?void 0:e.control)?void 0:o.properties,Object.keys(i).forEach((function(e){e=i[e];e.descriptor=n(t,e.descriptor)})))}function n(e,t){return e.deserializeOpaqueIdentity(null==t?void 0:t.altConstantValueSelector),e.deserializeOpaqueIdentity(null==t?void 0:t.selector),__assign(__assign({},e=t),{selector:DataViewObjectSerializer.deserializeSelector(e.selector),altConstantValueSelector:DataViewObjectSerializer.deserializeSelector(e.altConstantValueSelector)})}((e=e.visualSandbox||(e.visualSandbox={})).SandboxFormattingModelSerializer||(e.SandboxFormattingModelSerializer={})).deserializeFormattingModel=function(i,e){return null!=e&&e.cards.forEach((function(e){null!=(e=null==e?void 0:e.groups)&&e.forEach((function(e){var t;null!=(t=null==e?void 0:e.slices)&&t.forEach((function(e){o(e,i)})),null!=(e=null==(t=null==e?void 0:e.container)?void 0:t.containerItems)&&e.forEach((function(e){var t;null!=(t=null==e?void 0:e.slices)&&t.forEach((function(e){o(e,i)})),null!=(t=null==e?void 0:e.groups)&&t.forEach((function(e){null!=(e=null==e?void 0:e.slices)&&e.forEach((function(e){o(e,i)}))}))}))}))})),e}})(powerbi=powerbi||{});;
"use strict";var powerbi,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,n,r,l){return new(r=r||Promise)(function(i,t){function s(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}o((l=l.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(s,a){var o,n,r,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(i){return function(e){var t=[i,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,n&&(r=2&t[0]?n.return:t[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,t[1])).done)return r;switch(n=0,(t=r?[2&t[0],r.value]:t)[0]){case 0:case 1:r=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,n=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(r=0<(r=l.trys).length&&r[r.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3]))l.label=t[1];else if(6===t[0]&&l.label<r[1])l.label=r[1],r=t;else{if(!(r&&l.label<r[2])){r[2]&&l.ops.pop(),l.trys.pop();continue}l.label=r[2],l.ops.push(t)}}t=a.call(s,l)}catch(e){t=[6,e],n=0}finally{o=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__decorate=this&&this.__decorate||function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(n=(o<3?a(n):3<o?a(t,i,n):a(t,i))||n);return 3<o&&n&&Object.defineProperty(t,i,n),n},__spreadArray=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var s,a=0,o=t.length;a<o;a++)!s&&a in t||((s=s||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))};!(function(t){var i=t.telemetry||(t.telemetry={}),e=jsCommon.Utility,s=t.telemetryEventFactory,a=t.telemetry.EventFactories;e?e.generateGuid:Function.prototype,i.VisualInitializedEventName="PBI.Visual.Initialized",i.VisualInitialized=a[i.VisualInitializedEventName]=function(e){return s({name:i.VisualInitializedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,optionalParameters:["visualName"],loggers:i.VisualInitializedLoggers,logRatio:.025})},i.VisualLoadEventName="PBI.Visual.Load",i.VisualLoad=a[i.VisualLoadEventName]=function(e){return s({name:i.VisualLoadEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,optionalParameters:["visualName"],loggers:i.VisualLoadLoggers})},i.VisualLoadInitialDataViewEventName="PBI.Visual.LoadInitialDataView",i.VisualLoadInitialDataView=a[i.VisualLoadInitialDataViewEventName]=function(e){return s({name:i.VisualLoadInitialDataViewEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,optionalParameters:["visualName"],loggers:i.VisualLoadInitialDataViewLoggers})},i.VisualEventRenderStartedEventName="PBI.VisualEvent.RenderStarted",i.VisualEventRenderStarted=a[i.VisualEventRenderStartedEventName]=function(e){return s({name:i.VisualEventRenderStartedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventRenderStartedLoggers})},i.VisualEventRenderCompletedEventName="PBI.VisualEvent.RenderCompleted",i.VisualEventRenderCompleted=a[i.VisualEventRenderCompletedEventName]=function(e){return s({name:i.VisualEventRenderCompletedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventRenderCompletedLoggers})},i.VisualEventRenderingStartedEventName="PBI.VisualEvent.RenderingStarted",i.VisualEventRenderingStarted=a[i.VisualEventRenderingStartedEventName]=function(e){return s({name:i.VisualEventRenderingStartedEventName,baseEvent:i.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventRenderingStartedLoggers})},i.VisualEventRenderingCompletedEventName="PBI.VisualEvent.RenderingCompleted",i.VisualEventRenderingCompleted=a[i.VisualEventRenderingCompletedEventName]=function(e){return s({name:i.VisualEventRenderingCompletedEventName,baseEvent:i.VerboseTimedEvent(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventRenderingCompletedLoggers})},i.VisualEventRenderingFailedEventName="PBI.VisualEvent.RenderingFailed",i.VisualEventRenderingFailed=a[i.VisualEventRenderingFailedEventName]=function(e){return s({name:i.VisualEventRenderingFailedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventRenderingFailedLoggers})},i.VisualEventUpdateTimeOutEventName="PBI.VisualEvent.UpdateTimeOut",i.VisualEventUpdateTimeOut=a[i.VisualEventUpdateTimeOutEventName]=function(e){return s({name:i.VisualEventUpdateTimeOutEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventUpdateTimeOutLoggers})},i.VisualEventTraceEventName="PBI.VisualEvent.Trace",i.VisualEventTrace=a[i.VisualEventTraceEventName]=function(e){return s({name:i.VisualEventTraceEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventTraceLoggers})},i.VisualEventErrorEventName="PBI.VisualEvent.Error",i.VisualEventError=a[i.VisualEventErrorEventName]=function(e){return s({name:i.VisualEventErrorEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventErrorLoggers})},i.VisualEventReachedTelemetryUsageLimitEventName="PBI.VisualEvent.ReachedTelemetryUsageLimit",i.VisualEventReachedTelemetryUsageLimit=a[i.VisualEventReachedTelemetryUsageLimitEventName]=function(e){return s({name:i.VisualEventReachedTelemetryUsageLimitEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventReachedTelemetryUsageLimitLoggers})},i.VisualEventLaunchURLEventName="PBI.VisualEvent.LaunchURL",i.VisualEventLaunchURL=a[i.VisualEventLaunchURLEventName]=function(e){return s({name:i.VisualEventLaunchURLEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventLaunchURLLoggers})},i.VisualEventDownloadContentValidationFailedEventName="PBI.VisualEvent.DownloadContentValidationFailed",i.VisualEventDownloadContentValidationFailed=a[i.VisualEventDownloadContentValidationFailedEventName]=function(e){return s({name:i.VisualEventDownloadContentValidationFailedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventDownloadContentValidationFailedLoggers})},i.VisualEventDownloadContentEventName="PBI.VisualEvent.DownloadContent",i.VisualEventDownloadContent=a[i.VisualEventDownloadContentEventName]=function(e){return s({name:i.VisualEventDownloadContentEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventDownloadContentLoggers})},i.VisualEventGetAvailableServicePlansEventName="PBI.VisualEvent.GetAvailableServicePlans",i.VisualEventGetAvailableServicePlans=a[i.VisualEventGetAvailableServicePlansEventName]=function(e){return s({name:i.VisualEventGetAvailableServicePlansEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventGetAvailableServicePlansLoggers})},i.VisualEventLicenseIsUnsupportedEnvEventName="PBI.VisualEvent.LicenseIsUnsupportedEnv",i.VisualEventLicenseIsUnsupportedEnv=a[i.VisualEventLicenseIsUnsupportedEnvEventName]=function(e){return s({name:i.VisualEventLicenseIsUnsupportedEnvEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventLicenseIsUnsupportedEnvLoggers})},i.VisualEventLicenseServiceIsUndefinedEventName="PBI.VisualEvent.LicenseServiceIsUndefined",i.VisualEventLicenseServiceIsUndefined=a[i.VisualEventLicenseServiceIsUndefinedEventName]=function(e){return s({name:i.VisualEventLicenseServiceIsUndefinedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventLicenseServiceIsUndefinedLoggers})},i.VisualEventServicePlansResponseIsUndefinedEventName="PBI.VisualEvent.ServicePlansResponseIsUndefined",i.VisualEventServicePlansResponseIsUndefined=a[i.VisualEventServicePlansResponseIsUndefinedEventName]=function(e){return s({name:i.VisualEventServicePlansResponseIsUndefinedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventServicePlansResponseIsUndefinedLoggers})},i.VisualEventNotifyLicenseRequiredEventName="PBI.VisualEvent.NotifyLicenseRequired",i.VisualEventNotifyLicenseRequired=a[i.VisualEventNotifyLicenseRequiredEventName]=function(e){return s({name:i.VisualEventNotifyLicenseRequiredEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventNotifyLicenseRequiredLoggers})},i.VisualEventClearLicenseNotificationEventName="PBI.VisualEvent.ClearLicenseNotification",i.VisualEventClearLicenseNotification=a[i.VisualEventClearLicenseNotificationEventName]=function(e){return s({name:i.VisualEventClearLicenseNotificationEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventClearLicenseNotificationLoggers})},i.VisualEventNotifyLicenseFeatureBlockedEventName="PBI.VisualEvent.NotifyLicenseFeatureBlocked",i.VisualEventNotifyLicenseFeatureBlocked=a[i.VisualEventNotifyLicenseFeatureBlockedEventName]=function(e){return s({name:i.VisualEventNotifyLicenseFeatureBlockedEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventNotifyLicenseFeatureBlockedLoggers})},i.VisualEventPrivilegesEventName="PBI.VisualEvent.Privileges",i.VisualEventPrivileges=a[i.VisualEventPrivilegesEventName]=function(e){return s({name:i.VisualEventPrivilegesEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventPrivilegesLoggers})},i.VisualEventPrivilegesViolationEventName="PBI.VisualEvent.Privileges.Violation",i.VisualEventPrivilegesViolation=a[i.VisualEventPrivilegesViolationEventName]=function(e){return s({name:i.VisualEventPrivilegesViolationEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventPrivilegesViolationLoggers})},i.VisualEventExternalMigrationUndefinedGetEventName="PBI.VisualEvent.ExternalMigration.UndefinedGet",i.VisualEventExternalMigrationUndefinedGet=a[i.VisualEventExternalMigrationUndefinedGetEventName]=function(e){return s({name:i.VisualEventExternalMigrationUndefinedGetEventName,baseEvent:i.Verbose(e),info:e,category:t.TelemetryCategory.Verbose,loggers:i.VisualEventExternalMigrationUndefinedGetLoggers})}})(powerbi=powerbi||{}),(function(y){var r,e,o,u,p,i,f,S,c,a,s,l,n;function t(e,t){this.services=t}function d(e,t,i){var s=this;this.visualElement=e,this.services=t,this.fireVisualReady=i,this.watcher=new a,this.dataWatched=!1,this.isDestroyed=!1,this.visualPlugin=t.visualPlugin,this.telemetryService=t.telemetryService,this.certifiedEventsService=t.certifiedEventsService,this.moduleLoader=t.moduleLoader,this.promiseFactory=t.promiseFactory,this.featureSwitchService=t.featureSwitchService,this.visualSandbox=t.visualSandbox,this.renderingSynchronizer=t.renderingSynchronizer,this.approvedResourceService=t.approvedResourceService,this.publicCustomVisualService=t.publicCustomVisualService,this.managedCustomVisualsService=t.managedCustomVisualsService,this.visualWarningTelemetryService=t.visualWarningTelemetryService,this.themeService=t.themeService,this.visualStylePresetService=t.visualStylePresetService,this.trustedVisual=t.trustedVisual,t.eventBridge&&(this.subscriptionManager=t.eventBridge.createChannelSubscriptionManager()),this.registeredToWatch=!1,this.setDisableEvents(!1),this.refreshApplyAllSlicerSubscription=this.services.globalEventBridge.createChannelSubscriptionManager().subscribe(y.events.applyPendingChanges,(function(e,t){"actionButton"===s.viewModel.type&&s.visualUpdate()}))}r=y.visualHost||(y.visualHost={}),e=r.controllers||(r.controllers={}),o=y.common.events,u=y.visualHost.CustomVisualsUtils.CustomVisualTypes,p=y.data.DataViewObjectDefinitions,i=y.data.DataViewTelemetry,f=y.data.DataViewTransform,S=jsCommon.PerfTimer,c=y.telemetry,a=y.common.Watcher,t.createOptions=function(){return{additionalServices:["$element","visualPlugin","telemetryService","certifiedEventsService","promiseFactory","moduleLoader","featureSwitchService","visualSandbox","renderingSynchronizer","approvedResourceService","publicCustomVisualService","visualWarningTelemetryService","themeService","visualStylePresetService","trustedVisual","ngZone","svgProvider","globalEventBridge","managedCustomVisualsService","timeoutService"],scopedDependencies:["eventBridge"]}},t.prototype.$onChanges=function(e){this.core&&(e.viewModel&&(this.core.viewModel=e.viewModel.currentValue),e.allowDeferredRendering&&(this.core.allowDeferredRendering=e.allowDeferredRendering.currentValue),e.currentZone)&&(this.core.currentZone=e.currentZone.currentValue)},t.prototype.$onInit=function(){var e=this,t=$(this.services.$element.find("div.visual").get(0)),i=this.services.ngZone,s=i&&function(e){return i.runOutsideAngular(e)},s=__assign(__assign({},this.services),{run:s});this.core=new n(t,s,function(){return e.visualReady&&e.visualReady()}),this.core.viewModel=this.viewModel,this.core.allowDeferredRendering=this.allowDeferredRendering,this.core.currentZone=this.currentZone,this.core.$onInit()},t.prototype.$onDestroy=function(){this.core&&this.core.$onDestroy()},t.prototype.$doCheck=function(){this.core&&this.core.$doCheck()},e.VisualController=t,s="viewModel",l="initialViewport",d.prototype.$onInit=function(){var e=this;return y.zoneify(this.currentZone,(function(){return e.onInitImpl()}))},d.prototype.$onDestroy=function(){this.reloadEmptyVisualsSubscriptionManager&&(this.reloadEmptyVisualsSubscriptionManager.unsubscribeAll(),this.reloadEmptyVisualsSubscriptionManager=void 0),this.refreshApplyAllSlicerSubscription&&this.refreshApplyAllSlicerSubscription.unsubscribeAll(),this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.destroyVisual(),this.visualElement=null,this.model&&(this.model.visual=null),this.isDestroyed=!0},d.prototype.$doCheck=function(){this.watcher.doCheck()},d.prototype.onInitImpl=function(){var e=this;return this.allowDeferredRendering?this.services.timeoutService.setTimeout().promise.then((function(){return e.initializeAsync()})):this.initializeAsync()},d.prototype.initializeAsync=function(){var t,i=this;return this.viewModel&&this.viewModel.type?this.processModelAsync(this.viewModel):(t=this.promiseFactory.defer(),this.watcher.add(s,(function(){return i.viewModel}),(function(e){e&&e.type&&(i.watcher.remove(s),i.processModelAsync(e).then((function(){return t.resolve()}),(function(e){return t.reject(e)})))})),t.promise)},d.prototype.processModelAsync=function(r){var l;return __awaiter(this,void 0,y.Promise,(function(){var t,i,s,a,o,n=this;return __generator(this,(function(e){switch(e.label){case 0:return(this.visualHasInitialData=!1,this.visualHasTelemetryInformation=!1,this.model=r,t=this.viewModel,a=t&&t.initialLoadActivity,r&&r.type)?(i=y.visualHost.CustomVisualsUtils.getCustomVisualType(this.approvedResourceService,this.model.type,this.visualPlugin.isCustomVisual(this.model.type)),this.visualLoadEvent=a?this.telemetryService.startChildEvent(a.event,c.VisualLoad,{visualType:r.type,hostInformation:JSON.stringify(this.visualPlugin.getTelemetryHostInformation()),instanceId:r.hostServices.instanceId,visualName:r.visualName,customVisualType:y.visualHost.CustomVisualsUtils.CustomVisualTypes[i],reportId:this.model.reportId,dashboadId:this.model.dashboardId}):this.telemetryService.startEvent(c.VisualLoad,{visualType:r.type,hostInformation:JSON.stringify(this.visualPlugin.getTelemetryHostInformation()),instanceId:r.hostServices.instanceId,visualName:r.visualName,customVisualType:y.visualHost.CustomVisualsUtils.CustomVisualTypes[i],reportId:this.model.reportId,dashboadId:this.model.dashboardId}),[u.Unclassified,u.Native].includes(i)||(a={featureName:"Custom Visuals",activityName:"Visual Load",correlationId:null==(l=this.telemetryService.root)?void 0:l.id,visualId:r.type,activityAttributes:{hostInformation:this.visualPlugin.getTelemetryHostInformation().name,customVisualType:y.visualHost.CustomVisualsUtils.CustomVisualTypes[i]}},this.visualLoadStandardizedEvent=this.certifiedEventsService.startTimedStandardizedFeatureEvent(a)),r.visualPlugin&&(this.visualPlugin=r.visualPlugin),[4,this.shouldDisableCustomVisuals(r.type)]):[2,this.promiseFactory.reject(void 0,!!this.currentZone)];case 1:if(i=e.sent(),s=this.promiseFactory.defer(!!this.currentZone),(a=this.plugin=this.visualPlugin.getPlugin(r.type))&&this.trustedVisual.canLoadVisual(a.name)&&!i){if(this.viewModel!==t)return[2,this.promiseFactory.resolve()];o={element:this.visualElement,host:r.hostServices,visualAdapterHostServices:r.visualAdapterHostServices,style:this.themeService.getVisualStyle(r.themeCollection),viewport:r.viewport,animation:{transitionImmediate:!1},featureSwitches:__assign({},this.featureSwitchService.featureSwitches)},this.model.interactivityOptions&&(o.interactivity=this.model.interactivityOptions),this.initVisualAsync(a,o,this.model).finally((function(){return s.resolve(null)}))}else this.subscribeToReloadEmptyVisuals(),s.resolve(),this.publicCustomVisualService.isApprovedResourceByVisualId(r.type).then((function(e){e||n.visualReady()}));return[2,s.promise]}}))}))},d.prototype.subscribeToReloadEmptyVisuals=function(){var i=this;this.reloadEmptyVisualsSubscriptionManager||(this.reloadEmptyVisualsSubscriptionManager=this.services.globalEventBridge.createChannelSubscriptionManager().subscribe(y.events.reloadEmptyVisuals,(function(e,t){_.includes(t.visualTypes,i.viewModel.type)&&(i.reloadEmptyVisualsSubscriptionManager.unsubscribeAll(),i.reloadEmptyVisualsSubscriptionManager=void 0,i.viewport||(i.viewport=i.model.viewport),i.initializeAsync())})))},d.prototype.initVisualAsync=function(t,i,s){var a,o=this;if(!i.viewport)return a=this.promiseFactory.defer(!!this.currentZone),this.watcher.add(l,(function(){return o.viewModel&&o.viewModel.viewport}),(function(e){e&&(o.watcher.remove(l),i.viewport=e,o.initVisualAsync(t,i,s).finally((function(){return a.resolve(null)})))})),a.promise;this.currentViewport=this.viewport=i.viewport,this.destroyVisual();var n=this.pendingAdapter=r.createVisualAdapter({visualPlugin:t,promiseFactory:this.promiseFactory,moduleLoader:this.moduleLoader,telemetryService:this.telemetryService,certifiedEventsService:this.certifiedEventsService,featureSwitches:this.featureSwitchService.featureSwitches,approvedResourceService:this.approvedResourceService,visualSandbox:this.visualSandbox,run:this.services.run},!!this.currentZone);return this.registeredToWatch||(this.registeredToWatch=!0,this.watcher.add("type",(function(){return o.viewModel&&o.viewModel.type}),(function(t,i,s){return __awaiter(o,void 0,y.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return!s&&i&&t&&t!==i?(this.visualElement.empty(),[4,this.processModelAsync(this.viewModel)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})),this.watcher.add("viewport",(function(){return o.viewModel&&o.viewModel.viewport}),(function(e,t,i){e&&o.onViewportChanged(e)})),this.watcher.add("themeCollection",(function(){return o.viewModel&&o.viewModel.themeCollection}),(function(e,t,i){return __awaiter(o,void 0,y.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return i?[3,2]:[4,this.onThemeNameChange()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}),{mode:2})),n.then((function(e){if(n===o.pendingAdapter)if(o.isDestroyed)o.telemetryService.logChildEvent(o.visualLoadEvent.event,c.VisualInitialized,{visualType:t.name,isCustom:t.custom||!1,isSandboxed:e.sandbox||!1,width:i.viewport.width,height:i.viewport.height,hostInformation:JSON.stringify({isDestroyed:!0}),instanceId:s.hostServices.instanceId,visualName:s.visualName});else{i.viewport=o.currentViewport;e=(o.model.visual=e).init(i);if(e)return e.then((function(){return o.afterVisualInit(t,i,s)}));o.afterVisualInit(t,i,s)}})).finally((function(){n===o.pendingAdapter&&(o.pendingAdapter=void 0,o.pendingUpdates=void 0)}))},d.prototype.afterVisualInit=function(e,t,i){var s,a=this;this.isDestroyed||(this.dataWatched||(this.dataWatched=!0,s=void 0,s=this.featureSwitchService.featureSwitches.noEmptyUpdate||this.featureSwitchService.featureSwitches.noEmptyUpdateEmbed?function(e,t){null!=e&&a.enqueuePending(y.VisualUpdateType.Data,(function(e){return a.onDataChanged(e)}),e)}:this.watchScopeForChangesCallback(y.VisualUpdateType.Data,(function(e){return a.onDataChanged(e)})),this.watcher.add("data",(function(){return a.viewModel&&a.viewModel.data}),s)),i.visual.sandbox&&this.subscriptionManager&&this.subscriptionManager.subscribe(o.visualContainerResizeStart,(function(){return setTimeout((function(){return a.setDisableEvents(!0)}))})).subscribe(o.visualContainerResizeEnd,(function(){return setTimeout((function(){return a.setDisableEvents(!1)}))})),this.telemetryService.logChildEvent(this.visualLoadEvent.event,c.VisualInitialized,{visualType:e.name,isCustom:e.custom||!1,isSandboxed:i.visual.sandbox||!1,width:t.viewport.width,height:t.viewport.height,hostInformation:JSON.stringify(this.visualPlugin.getTelemetryHostInformation()),instanceId:i.hostServices.instanceId,visualName:i.visualName}),this.pendingAdapter=void 0,(s=this.pendingUpdates)&&(this.pendingUpdates=void 0,y.VisualUpdateType.Data,s&y.VisualUpdateType.Data)&&this.onDataChanged(this.model.data),i.visualInitialized=!0)},d.prototype.enqueuePending=function(e,t,i){this.pendingAdapter?this.pendingUpdates|=e:t(i)},d.prototype.destroyVisual=function(){var e,t=this.model;t&&(t.visualInitialized=!1,(e=t.visual)&&e.destroy&&e.destroy(),e&&t.performanceActivity&&(t.performanceActivity.cancel(!0),t.performanceActivity=void 0),(e=this.pendingAdapter)&&(e.reject(new y.IgnorableClientError("pendingAdapter.reject")),this.pendingAdapter=void 0,this.pendingUpdates=void 0),this.dataWatched)&&(this.dataWatched=!1,this.watcher.remove("data"))},d.prototype.onViewportChanged=function(e){!e||this.currentViewport&&this.currentViewport.height===e.height&&this.currentViewport.width===e.width&&this.currentViewport.scale===e.scale||(this.currentViewport=e,this.viewport=e,e=S.start("update(".concat(this.markerName(),")")),this.visualUpdate(),this.resolveDeferredInit(),e())},d.prototype.onSubSelectionsChanged=function(i){return __awaiter(this,void 0,y.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return this.subSelections=i,t={dataViews:[],type:y.VisualUpdateType.FormattingSubSelectionChange,suppressAnimations:!0},[4,this.onVisualAdapterDataChanged(t)];case 1:return e.sent(),[2]}}))}))},d.prototype.onFormatModeChanged=function(i){return __awaiter(this,void 0,y.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return this.formatMode=i,t={dataViews:[],type:y.VisualUpdateType.FormatModeChange,suppressAnimations:!0},[4,this.onVisualAdapterDataChanged(t)];case 1:return e.sent(),[2]}}))}))},d.prototype.onVisualAdapterDataChanged=function(s){var a,o;return __awaiter(this,void 0,y.Promise,(function(){var t,i;return __generator(this,(function(e){switch(e.label){case 0:return(t=this.markerName(),null!=(a=null==(a=this.model)?void 0:a.visual)&&a.visualHasMethod("update"))?(i=S.start("update(".concat(t,")")),[4,this.visualUpdate(s)]):[3,2];case 1:return e.sent(),this.resolveDeferredInit(),i(),[3,3];case 2:null!=(o=null==(a=this.model)?void 0:a.visual)&&o.visualHasMethod("onDataChanged")&&(i=S.start("onDataChanged(".concat(t,")")),this.visualOnDataChanged(s),this.resolveDeferredInit(),i()),e.label=3;case 3:return[2]}}))}))},d.prototype.setPendingChanges=function(i){return __awaiter(this,void 0,y.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return(this.pendingChanges=i,t=this.services.visualPlugin.capabilities(this.viewModel.type),this.viewModel.hasUnappliedFilterChanges=i[0],t&&t.hasFilterOptions)?[4,this.visualUpdate({dataViews:[],type:y.VisualUpdateType.FilterOptionsChange})]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.resolveDeferredInit(),[2]}}))}))},d.prototype.markerName=function(){var e=this.model.type;return e=this.plugin&&this.plugin.custom?"customVisual:"+e:e},d.prototype.buildDataChangedOptions=function(e,t,i){t={dataViews:t,suppressAnimations:this.renderingSynchronizer.suppressAnimations};return e?t.operationKind=!1===e.isFirstSegment?y.VisualDataChangeOperationKind.Append:y.VisualDataChangeOperationKind.Create:i||(t.operationKind=y.VisualDataChangeOperationKind.None),t},d.prototype.transformAndValidateDataViews=function(e){var t,i,s,a=this.plugin.capabilities,o=this.model,n=(this.modelHasOutstandingReferences(),this.model.performanceActivity&&(i=this.model.performanceActivity.createChildActivity({name:"Data View Transform"})),e&&e.dataView&&(s=e.dataView),o.dataTransforms),r=this.applyStylePresetDefinitions(n),l=S.start("dataViewTransform(".concat(this.markerName(),")")),u=o.themeCollection,c=1===this.viewModel.hostServices.getViewMode();if(s){var d,p=(d=f.apply({prototype:s,objectDescriptors:a?a.objects:null,dataViewMappings:a?a.dataViewMappings:null,transforms:r,colorAllocatorFactory:y.visuals.createColorAllocatorFactory(),dataRoles:a?a.dataRoles:null,drillCapabilities:a&&a.drilldown,expandCollapseCapabilties:a&&a.expandCollapse,visualStyle:this.themeService.getVisualStyle(u),orderIndependentSelectorMatching:o.orderIndependentSelectorMatching,keepAllMetadataColumnsCapability:!!a&&a.keepAllMetadataColumns,featureSwitches:this.featureSwitchService.featureSwitches,withWarnings:c})).dataViews,h=d.warnings;if(p&&0<p.length){for(var v,g=!0,m=0;g&&m<p.length;++m)(v=y.DataViewAnalysis.validateAndReshape(p[m],a.dataViewMappings)).isValid?p[m]=v.dataView:g=!1;g&&(t=this.buildDataChangedOptions(e,p,n))}!t&&o.allowInvalidDataView&&(t={dataViews:[],suppressAnimations:this.renderingSynchronizer.suppressAnimations})}else(v=y.DataViewAnalysis.validateAndReshape(s,a.dataViewMappings)).isValid||y.visualHost.CustomVisualsUtils.shouldAllowEmptyDataView(this.plugin)?(p=(d=f.apply({prototype:v.dataView,objectDescriptors:a?a.objects:null,dataViewMappings:a?a.dataViewMappings:null,transforms:r,colorAllocatorFactory:y.visuals.createColorAllocatorFactory(),dataRoles:a?a.dataRoles:null,drillCapabilities:a&&a.drilldown,expandCollapseCapabilties:a&&a.expandCollapse,visualStyle:this.themeService.getVisualStyle(u),orderIndependentSelectorMatching:o.orderIndependentSelectorMatching,keepAllMetadataColumnsCapability:!!a&&a.keepAllMetadataColumns,featureSwitches:this.featureSwitchService.featureSwitches,withWarnings:c})).dataViews,h=d.warnings,t=this.buildDataChangedOptions(e,p,n)):o.allowInvalidDataView&&(t={dataViews:[],suppressAnimations:this.renderingSynchronizer.suppressAnimations});return l(),i&&i.resolve(),t&&(t.visualDefinitionData=e,!_.isEmpty(h))&&this.viewModel&&this.viewModel.hostServices&&o.hostServices.setWarnings(h),t},d.prototype.onThemeNameChange=function(){return __awaiter(this,void 0,y.Promise,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.processModelAsync(this.viewModel)];case 1:return e.sent(),[2]}}))}))},d.prototype.applyStylePresetDefinitions=function(e){var t,i,s=this.plugin.capabilities,a=this.themeService,o=this.model,n=(e=e&&y.Prototype.inherit(e)||{}).objects=p.clone(e.objects||{}),r=(o.additionalObjectUpdates&&o.additionalObjectUpdates(e.objects),o.themeCollection),s=a.getVisualObjects(r,o.type,o.stylePresetName,s&&s.objects,this.plugin.custom),s=(p.extend(n,s),this.plugin.stampHardcodedDefaultObjects);if(s){for(var l={},u=0,c=s;u<c.length;u++){var d=c[u];this.themeService.mustUseHardcodedDefaultForObjectProperty(r,this.plugin.name,d.objectProperty)&&p.extend(l,((t={})[d.objectProperty.objectName]=[{properties:((i={})[d.objectProperty.propertyName]=d.defaultValue,i)}],t))}p.extend(n,l)}s=a.getVisualStyle(r),a=this.visualStylePresetService.getStylePreset(o.type,o.stylePresetName);return s&&a&&(o=a.evaluate(s),p.extend(n,o)),e},d.prototype.loadConditionalFormattingIcons=function(){var n,e=this.model.dataTransforms&&this.model.dataTransforms.objects,t=this.plugin&&this.plugin.capabilities&&this.plugin.capabilities.objects;e&&t&&(n=!1,p.visitPropertyExprs({definitions:e,descriptors:t,structuralObjectVisitor:function(e,t,i,s,a,o){s.icon&&y.StructuralObjectDefinition.isIconDefinition(e)&&(n=!0,o.stopVisiting=!0)}}),n)&&this.services.svgProvider.loadSheet("conditionalFormattingDialogIcons")},d.prototype.applyDataChange=function(c){var d;return __awaiter(this,void 0,y.Promise,(function(){var t,i,s,a,o,n,r,l,u=this;return __generator(this,(function(e){switch(e.label){case 0:if(t=this.model.performanceActivity,i=function(e){t&&(t.isRunning()&&t[e](),u.model.performanceActivity===t)&&(u.model.performanceActivity=void 0)},!(s=this.model&&this.model.visual))return jsCommon.Trace.error("applyDataChange with no visual: ".concat(!!this.model," ").concat(!!this.viewModel," ").concat(!(!this.viewModel||!this.viewModel.visual))),[2];if(!s.onDataChanged&&!s.update)return[2];if(this.modelHasOutstandingReferences())return[2];this.loadConditionalFormattingIcons();try{a=this.transformAndValidateDataViews(c)}catch(e){throw new y.data.QueryPipelineError(e)}return a?!0!==this.allowDeferredRendering?[3,2]:[4,this.renderingSynchronizer.deferRenderOperation(this.visualElement,_.noop)]:[2];case 1:e.sent(),e.label=2;case 2:if(s!==this.model.visual)return[2];e.label=3;case 3:return(e.trys.push([3,7,,8]),(o=null==(d=this.viewModel)?void 0:d.hostServices.tooltips())&&o.hide({immediately:!0,isTouchEvent:!1}),this.dataViews=this.model.dataViews=a.dataViews,this.visualDefinitionData=c,o=this.dataViews&&this.dataViews.length,n=c&&c.warnings,_.isEmpty(n)||this.visualWarningTelemetryService.logWarnings(n,this.model),n=this.model.type,this.plugin&&this.plugin.custom&&(n="customVisual:"+n),this.viewport&&this.model.visual.visualHasMethod("update"))?(r=S.start("update(".concat(n,")")),[4,this.visualUpdate(a)]):[3,5];case 4:return e.sent(),i("resolve"),this.model.pendingSelection&&o&&(this.model.visual.onRestoreSelection&&this.model.visual.onRestoreSelection({selection:this.model.pendingSelection}),this.model.selectedDatapoints=this.model.pendingSelection,this.model.pendingSelection=void 0),this.resolveDeferredInit(),r(),[3,6];case 5:s.visualHasMethod("onDataChanged")&&(r=S.start("onDataChanged(".concat(n,")")),this.visualOnDataChanged(a),i("resolve"),this.resolveDeferredInit(),r()),e.label=6;case 6:return this.visualReady(),[3,8];case 7:throw l=e.sent(),i("reject"),this.visualReady(),l;case 8:return[2]}}))}))},d.prototype.onDataChanged=function(e){var t,i;this.model?this.viewModel.hasPendingChanges||(t=this.model.dataAppliedEvent,this.model.dataAppliedEvent=void 0,this.pendingDataChange&&(this.pendingDataChange.reject({code:"onDataChangedOverlapped",ignorable:!0}),this.pendingDataChange=void 0),i=this.promiseFactory.defer(),(this.pendingDataChange=i).promise.then((function(){return t&&t.resolve()}),(function(e){return t&&t.reject(e)})),this.applyDataChange(e).then((function(){return i.resolve()}),(function(e){return i.reject(e)}))):jsCommon.Trace.error("onDataChanged called with no this.model, this.viewModel is"+(this.viewModel," not")+" defined")},d.prototype.resolveDeferredInit=function(){if(!this.visualHasInitialData&&this.dataViews&&(this.visualElement.attr("initialized",""),this.visualHasInitialData=!0,this.visualLoadEvent,this.visualLoadEvent.resolve(),this.visualLoadEvent=void 0,e=y.visualHost.CustomVisualsUtils.getCustomVisualType(this.approvedResourceService,this.model.type,this.visualPlugin.isCustomVisual(this.model.type)),[u.Unclassified,u.Native].includes(e)||(null!=(e=this.visualLoadStandardizedEvent)&&e.complete("Succeeded"),this.visualLoadStandardizedEvent=void 0)),!this.visualHasTelemetryInformation&&!_.isEmpty(this.dataViews)&&(this.visualHasTelemetryInformation=!0,this.model)&&_.isFunction(null==(e=this.model.visual)?void 0:e.getTelemetryInformation)){var e=this.model.visual.getTelemetryInformation();if(!_.isEmpty(e))try{this.telemetryService.logEvent(c.VisualLoadInitialDataView,{visualType:this.model.type,visualName:this.model.visualName,reportId:this.model.reportId,dashboardId:this.model.dashboardId,visualInformation:JSON.stringify(e)})}catch(e){"Unable to serialize Visual Telemetry Information for ".concat(this.model.visualName,". ").concat(e)}}},d.prototype.setDisableEvents=function(e){this.disableEvents=e},d.prototype.visualUpdate=function(n){var r;return __awaiter(this,void 0,y.Promise,(function(){var t,i,s,a,o;return __generator(this,(function(e){switch(e.label){case 0:return null!=(r=this.model)&&r.visual?(t=this.model.performanceActivity?this.model.performanceActivity.createChildActivity({name:"Visual Update Async"}):void 0,s=i=0,(a=this.viewModel&&this.viewModel.hostServices)&&(i=a.getViewMode(),s=a.getEditMode()),a=this.getTelemetryDataViews(),o=this.getSuppressAnimations(n),[4,this.model.visual.update({viewport:this.viewport,dataViews:a,suppressAnimations:o,type:n?null!=(r=n.type)?r:y.VisualUpdateType.Data:y.VisualUpdateType.Resize,resizeMode:n?void 0:2,operationKind:n?n.operationKind:void 0,viewMode:i,editMode:s,visualDefinitionData:(n||this).visualDefinitionData,dataTransforms:this.model.dataTransforms,isInFocus:this.model.isInFocus,visualRequiresData:this.model.visualRequiresData,visualHasData:this.model.visualHasData,updateId:jsCommon.Utility.generateGuid(),parentContextActivity:this.model.performanceActivity,subSelections:this.subSelections,formatMode:this.formatMode,pendingChanges:this.pendingChanges})]):[2];case 1:return e.sent(),t&&t.resolve(),[2]}}))}))},d.prototype.visualOnDataChanged=function(e){var t=this.getTelemetryDataViews(),i=this.getSuppressAnimations(e);this.model.visual.onDataChanged({dataViews:t,suppressAnimations:i,operationKind:e?e.operationKind:void 0,type:e?null!=(t=e.type)?t:y.VisualUpdateType.Data:y.VisualUpdateType.Resize,subSelections:this.subSelections,formatMode:this.formatMode})},d.prototype.getTelemetryDataViews=function(){var e,t=this;return e=this.dataViews?_.map(this.dataViews,(function(e){return i.wrapKindProperties(e,t.telemetryService,t.plugin.name)})):e},d.prototype.getSuppressAnimations=function(e){return!(!this.formatMode||!this.featureSwitchService.featureSwitches.onObject)||!e||(null!=(e=e.suppressAnimations)?e:this.renderingSynchronizer.suppressAnimations)},d.prototype.modelHasOutstandingReferences=function(){var e=this.model.dataTransforms&&this.model.dataTransforms.objects;return!!e&&r.ResourcePackageReferenceResolver.hasResourceReferencesToResolve(e,this.plugin.capabilities.objects)},d.prototype.watchScopeForChangesCallback=function(i,s){var a=this,o=!0;return function(e,t){e===t&&!o||a.enqueuePending(i,s,e),o=!1}},d.prototype.shouldDisableCustomVisuals=function(o){return __awaiter(this,void 0,y.Promise,(function(){var t,i,s,a;return __generator(this,(function(e){switch(e.label){case 0:return(y.visualHost.CustomVisualsUtils.getAdminControlState(this.featureSwitchService,this.telemetryService,this.viewModel.initialLoadActivity),t=this.visualPlugin.isCustomVisual(o))?(s=(i=y.visualHost.CustomVisualsUtils).isCustomVisualTypeDisabled,a=[this.featureSwitchService,o,this.approvedResourceService,!1],[4,this.managedCustomVisualsService.isPublicManagedVisualByVisualType(o)]):[3,2];case 1:t=s.apply(i,a.concat([e.sent(),this.model&&this.model.isDisabled,this.model&&this.model.isDisabledIfUncertified])),e.label=2;case 2:return[2,t]}}))}))},d.prototype.visualReady=function(){this.fireVisualReady()},n=d,e.VisualComponentCore=n})(powerbi=powerbi||{}),(function(e){var t;((t=e.visualHost||(e.visualHost={})).components||(t.components={})).Visual={templateUrl:"components/visual/visual.html",bindings:{viewModel:"<",allowDeferredRendering:"<",currentZone:"<?",visualReady:"&?"},controller:e.common.createController(t.controllers.VisualController),controllerAs:"$ctrl"}})(powerbi=powerbi||{}),(function(e){((e=e.visualHost||(e.visualHost={})).htmlTemplate||(e.htmlTemplate={})).put=function(e){e.put("components/visual/visual.html","<div class=\"visual visual-{{$ctrl.core.viewModel.type}}\" ng-class=\"{'disable-events': $ctrl.core.disableEvents, 'allow-deferred-rendering': $ctrl.core.allowDeferredRendering !== false}\"></div>")}})(powerbi=powerbi||{}),(function(e){var i,t,s,n,a,r;function o(){a||(e.common.initializeAngularModule(),angular.module("powerbi.visualHost.controllers",[]),angular.module("powerbi.visualHost.directives",[]),angular.module("powerbi.visualHost",["powerbi.common","powerbi.visualHost.controllers","powerbi.visualHost.directives"]).run(["scopedProvider","featureSwitchService",l]).run(["$templateCache",t]),a=!0)}function l(e,t){e.register("windowMessageProxy",{services:["promiseFactory"],fn:function(e){return i.createWindowMessageProxy(e)}})}i=e.visualHost||(e.visualHost={}),t=e.visualHost.htmlTemplate.put,s=e.visualHost.components.Visual,n=[],i.initializeAngularModule=o,a=!1,o(),r=[{name:"Visual",factory:s,consumerHostFlags:24987}],i.registerBuildingBlocksForHost=function(e){for(var t=0,i=r;t<i.length;t++){var s=i[t];if((s.consumerHostFlags&e)===e){o=a=void 0;var a=s.name,o=s.factory;a=a[0].toLowerCase()+a.slice(1),0<=n.indexOf(a)||(angular.module("powerbi.visualHost").component(a,o),n.push(a))}}}})(powerbi=powerbi||{}),(function(l){var c=l.visualHost||(l.visualHost={}),e=l.extensibility.ApprovedMessage,u=(c.createSandboxVisualProxy=function(e,t,i,s,a,o,n,r,l){return new u(e,t,i,s,a,o,n,r,l)},Object.defineProperty(t.prototype,"plugin",{get:function(){return this._plugin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDebug",{get:function(){return this.isDebugVisual},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t){this.visualDelegate=e,t&&(this._plugin=t,this.isSandboxReady=!0)},t.prototype.setPluginReadyHandler=function(e){this.pluginReadyHandler=e},t.prototype.logEvent=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return this.telemetryService?(e="string"==typeof(e=t.shift())?this.getEventFactory(e):e,this.telemetryService.logEvent.apply(this.telemetryService,__spreadArray([e],t,!0))):null},t.prototype.logStandardizedFeatureEvent=function(e){var t;e.correlationId=null==(t=this.telemetryService.root)?void 0:t.id,this.certifiedEventsService.logStandardizedFeatureEvent(e)},t.prototype.logTimedStandardizedFeatureEvent=function(e){var t;e.correlationId=null==(t=this.telemetryService.root)?void 0:t.id,this.certifiedEventsService.logTimedStandardizedFeatureEvent(e)},t.prototype.getEventFactory=function(e){switch(e){case"VisualEventError":return l.telemetry.VisualEventError;case"VisualEventTrace":return l.telemetry.VisualEventTrace;case"VisualException":return l.telemetry.VisualException;case"VisualEventRenderStarted":return l.telemetry.VisualEventRenderStarted;case"VisualEventRenderCompleted":return l.telemetry.VisualEventRenderCompleted;case"VisualApiUsage":return l.telemetry.VisualApiUsage;default:return}},t.prototype.logVisualEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.plugin.name;if(!1!==this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService&&(this.approvedResourcesService.isApprovedResource(i)||this.approvedResourcesService.isTrustedResource(i))){var s=e[0],a=e[1],o=e[2],n={visualType:i,instanceId:a instanceof Object?a.instanceId:a},o=a instanceof Object?a.payload:o,a=l.extensibility.convertStringToVisualEventType(s);switch(a){case 0:case 1:if(!this.featureSwitchService.featureSwitches.customVisualsPerformanceTelemetry)return;o="";break;case 2:case 3:var r=this.approvedResourcesService.getTelemetryUsageLimit(i);if(this.telemetryUsageCount>=r)return;this.telemetryUsageCount++,this.telemetryUsageCount===r&&this.telemetryService.logEvent(l.telemetry.VisualEventReachedTelemetryUsageLimit,n),o=o?o.substring(0,this.telemetryEventsPayloadLimit):"";break;default:return}return this.logEvent.apply(this,[s,__assign(__assign({},n),{payload:o})])}},t.prototype.ready=function(e){this.contentWindow=e,this.messageProxy.contentWindow=e,this.isSandboxReady&&this.flushCallStack(),this.messageProxy.flushQueue(),this.isVisualReady=!0},t.prototype.update=function(e){var t,i,s,a=this;return this.approvedResourcesService.canManageAsyncUpdate(this.plugin.name)&&e.updateId?(t=this.promiseFactory.defer(),this.deferredCache[e.updateId]=t,i=setTimeout((function(){t.resolve(null),a.telemetryService.logEvent(l.telemetry.VisualEventUpdateTimeOut,{visualType:a.plugin.name,timeOut:a.updateTimeOut,parentId:a.telemetryService.root.id})}),this.updateTimeOut),e.updateCallBack=function(){return t.resolve(null)},(s=this.invoke("update",[e]))&&s.catch((function(e){return t.reject(e)})),t.promise.catch((function(e){return e})).finally((function(){clearTimeout(i),e.updateId&&delete a.deferredCache[e.updateId]})),t.promise):(this.invoke("update",[e]),l.Promise.resolve(void 0))},t.prototype.invoke=function(e,t){if(this.isSandboxReady)return this.execute(e,t);this.methodQueue.push({methodName:e,arguments:t})},t.prototype.postMessage=function(e,t){this.messageProxy.postMessage({eventName:e,arguments:t})},t.prototype.postMessageAsync=function(e,t){return this.messageProxy.postMessageAsync({eventName:e,arguments:t})},t.prototype.onPluginReady=function(){this.pluginReadyHandler&&this.pluginReadyHandler(),this.isSandboxReady||(this.flushCallStack(),this.isSandboxReady=!0)},t.prototype.destroy=function(){this.messageProxy.off(c.events.WindowMessageProxyMessageEvent),this.messageProxy.off(c.events.WindowMessageProxyErrorEvent),this.messageProxy.destroy(),this.contentWindow=null},t.prototype.execute=function(e,t){if(_.isFunction(this.visualDelegate[e]))return this.visualDelegate[e].apply(this.visualDelegate,t);this.postMessage(e,t)},t.prototype.flushCallStack=function(){for(;0<this.methodQueue.length;){var e=this.methodQueue.shift();this.execute(e.methodName,e.arguments)}this.isVisualReady&&this.messageProxy.flushQueue()},t.prototype.onMessageReceived=function(e){var t,i,s=this;if(this.validateMessageSource(e))return t=function(){s.telemetryService.logEvent(l.telemetry.VisualEventPrivilegesViolation,{visualType:s._plugin.name,environment:s.visualDelegate.getHostEnvString(),privilege:"postMessage",status:"Rejected",parameters:e.message.eventName})},"function"==typeof(i=this[e.message.eventName])?i.approvedMessage?i.apply(this,e.message.arguments):t():this.visualDelegate?"function"==typeof(i=this.visualDelegate[e.message.eventName])&&i.approvedMessage?i.apply(this.visualDelegate,e.message.arguments):t():void 0},t.prototype.onMessageError=function(e){this.validateMessageSource(e)&&e.message&&e.message.error&&!_.isEqual(e.message,this.lastErrorMessage)&&(this.telemetryService.logEvent(l.telemetry.VisualError,{visualName:this._plugin.name,debugErrorInfo:e.message.error.eventName+";"+e.message.error.message}),this.lastErrorMessage=_.cloneDeep(e.message))},t.prototype.refreshHostData=function(){(this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canRefreshHostData(this.plugin.name))&&this.visualDelegate.refreshHostData()},t.prototype.getResourceUrl=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetAADToken(t)?this.visualDelegate.getResourceUrl(t,e):this.postMessage("handleGetResourceUrlResult",[{payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e}])},t.prototype.getAADAuthenticationToken=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetAADToken(t)?this.visualDelegate.getAADAuthenticationToken(t,e):this.postMessage("handleGetAADAuthenticationTokenResult",[{payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e}])},t.prototype.getAADToken=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetAADToken(t)?this.visualDelegate.getAADToken(t,e):this.postMessage("handleGetAADTokenResult",[{payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e}])},t.prototype.getWACToken=function(e){var t=this.plugin.name;!0===this.isDebugVisual&&(t=t.substring(0,t.lastIndexOf("_DEBUG"))),!0===this.isDebugVisual||this.plugin.developerModeVisual||this.approvedResourcesService.canGetWACToken(t)?this.visualDelegate.getWACToken(e.resourceSiteUrl,e.resourceEtag,t,e.promiseId):(t={payload:"Visual ["+t+"] is not authorized.",isError:!0,promiseId:e.promiseId},this.postMessage("handleGetWACTokenResult",[t]))},t.prototype.renderingStarted=function(e,t){this.renderEventStartTime=(new Date).toISOString(),this.telemetryService.logEvent(l.telemetry.VisualEventRenderingStarted,{visualType:this.plugin.name,instanceId:e,start:this.renderEventStartTime,end:this.renderEventStartTime,parentId:this.telemetryService.root.id})},t.prototype.renderingFinished=function(e,t){this.deferredCache[t]&&this.deferredCache[t].resolve(null),void 0!==this.renderEventStartTime&&(t=(new Date).toISOString(),this.telemetryService.logEvent(l.telemetry.VisualEventRenderingCompleted,{visualType:this.plugin.name,instanceId:e,start:this.renderEventStartTime,end:t,parentId:this.telemetryService.root.id}),this.renderEventStartTime=void 0)},t.prototype.renderingFailed=function(e,t,i){this.deferredCache[t]&&this.deferredCache[t].reject(i),void 0!==this.renderEventStartTime&&(this.telemetryService.logEvent(l.telemetry.VisualEventRenderingFailed,{visualType:this.plugin.name,instanceId:e,parentId:this.telemetryService.root.id}),this.renderEventStartTime=void 0)},t.prototype.getWebAccessStatus=function(e,t){e=this.privilegeService.getWebAccessStatus(this.plugin,e);this.postMessage("handleGetWebAccessStatus",[{promiseId:t,status:e}])},t.prototype.validateMessageSource=function(e){return!!e.source&&!!this.contentWindow&&this.contentWindow===e.source},__decorate([e()],t.prototype,"logEvent",null),__decorate([e()],t.prototype,"logStandardizedFeatureEvent",null),__decorate([e()],t.prototype,"logTimedStandardizedFeatureEvent",null),__decorate([e()],t.prototype,"logVisualEvent",null),__decorate([e()],t.prototype,"onPluginReady",null),__decorate([e()],t.prototype,"refreshHostData",null),__decorate([e()],t.prototype,"getResourceUrl",null),__decorate([e()],t.prototype,"getAADAuthenticationToken",null),__decorate([e()],t.prototype,"getAADToken",null),__decorate([e()],t.prototype,"getWACToken",null),__decorate([e()],t.prototype,"renderingStarted",null),__decorate([e()],t.prototype,"renderingFinished",null),__decorate([e()],t.prototype,"renderingFailed",null),__decorate([e()],t.prototype,"getWebAccessStatus",null),t);function t(e,t,i,s,a,o,n,r,l){void 0===l&&(l=15e3);var u=this;this.messageProxy=e,this.telemetryService=t,this.certifiedEventsService=i,this.approvedResourcesService=s,this.featureSwitchService=a,this.isDebugVisual=o,this.promiseFactory=n,this.privilegeService=r,this.updateTimeOut=l,this.telemetryEventsPayloadLimit=4096,this.methodQueue=[],this.isSandboxReady=!1,this.isVisualReady=!1,this.telemetryUsageCount=0,this.deferredCache={},this.messageProxy.on(c.events.WindowMessageProxyMessageEvent,(function(e){return u.onMessageReceived(e)})),this.messageProxy.on(c.events.WindowMessageProxyErrorEvent,(function(e){return u.onMessageError(e)}))}})(powerbi=powerbi||{}),(function(t){var o;function e(e,t,i,s){var a=this;this.messageProxy=e,this.telemetryService=t,this.plugin=i,this.instanceId=s,this._modalDialogState=null,this._dialog=null,this._iframe=null,this._minDisplayDurationReached=!1,setTimeout((function(){a._minDisplayDurationReached=!0}),2e3),this.messageProxy.on(o.events.WindowMessageProxyMessageEvent,(function(e){return a.onMessageReceived(e)})),this.messageProxy.on(o.events.WindowMessageProxyErrorEvent,(function(e){return a.onMessageError(e)}))}o=t.visualHost||(t.visualHost={}),Object.defineProperty(e.prototype,"dialog",{set:function(e){this._dialog=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iframe",{set:function(e){this._iframe=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modalDialogState",{get:function(){return this._modalDialogState},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(e,t){this.messageProxy.postMessage({eventName:e,arguments:t})},e.prototype.postMessageAsync=function(e,t){return this.messageProxy.postMessageAsync({eventName:e,arguments:t})},e.prototype.destroy=function(){this.messageProxy.off(o.events.WindowMessageProxyMessageEvent),this.messageProxy.off(o.events.WindowMessageProxyErrorEvent),this.messageProxy.destroy(),this._dialog=null,this._iframe=null},e.prototype.onMessageReceived=function(e){this.validateMessageSource(e)&&(_.isFunction(this[e.message.eventName])?this[e.message.eventName].apply(this,e.message.arguments):this.telemetryService.logEvent(t.telemetry.VisualEventError,{visualType:this.plugin.name,instanceId:this.instanceId,payload:"invalid message"}))},e.prototype.onMessageError=function(e){this.validateMessageSource(e)&&e.message&&e.message.error&&this.telemetryService.logEvent(t.telemetry.VisualEventError,{visualType:this.plugin.name,instanceId:this.instanceId,payload:e.message.error})},e.prototype.onDialogSetState=function(e){this._modalDialogState=e},e.prototype.onDialogClose=function(e,t){t&&(this._modalDialogState=t),this._dialog&&this._minDisplayDurationReached&&this._dialog.close(e)},e.prototype.onDialogResize=function(e,t){this._dialog&&(e=_.clamp(e,200,Math.ceil(.9*window.innerWidth))+2,t=_.clamp(t,100,Math.ceil(.91*window.innerHeight-120))+2,this._dialog.resize(e,t))},e.prototype.validateMessageSource=function(e){return!(!e.source||!this._iframe||this._iframe.contentWindow!==e.source||!_.includes(["onDialogSetState","onDialogClose","onDialogResize"],e.message.eventName))},o.SandboxDialogProxy=e})(powerbi=powerbi||{}),(function(l){var r,u;function e(e,t,i,s){this.visualDownloadService=e,this.telemetryService=t,this.plugin=i,this.instanceId=s}r=l.visualHost||(l.visualHost={}),u=["txt","csv","json","tmplt","xml","pdf","xlsx"],r.VISUAL_DOWNLOAD_CONTENT_SIZE_LIMIT=31457280,e.prototype.exportVisualsContent=function(e,t,i,s,a){var o=this,n=t.split(".").pop(),r=(i=i.toLowerCase(),this.getBlobSize(e,i));return this.validateContentSource(e,t,i,s,r)?this.visualDownloadService.exportVisualsContent(e,t,i,s,this.plugin.name,r).then((function(e){return o.telemetryService.logEvent(l.telemetry.VisualEventDownloadContent,{isFileSaved:e,contentSize:r,visualType:o.plugin.name,instanceId:o.instanceId,extension:n}),{promiseId:a,data:{downloadCompleted:e,fileName:e?t:void 0}}}),(function(){return{promiseId:a,data:{downloadCompleted:!1}}})):this.handleInvalidRequest(r,n,a)},e.prototype.validateContentSource=function(e,t,i,s,a){var o=t.split(".").pop().toLowerCase(),n=0<u.filter((function(e){return o===e})).length,t=null===t.match(/[:/\\]/);return!(!(e&&i&&s&&t&&n)||a>r.VISUAL_DOWNLOAD_CONTENT_SIZE_LIMIT)},e.prototype.getBlobSize=function(e,t){var i;return e?e.length>r.VISUAL_DOWNLOAD_CONTENT_SIZE_LIMIT?r.VISUAL_DOWNLOAD_CONTENT_SIZE_LIMIT+1:(i={type:jsCommon.HttpConstants.ApplicationOctetStream},(e=new Blob([e],i))?"base64"===t?3*e.size/4:e.size:0):0},e.prototype.handleInvalidRequest=function(e,t,i){this.telemetryService.logEvent(l.telemetry.VisualEventDownloadContentValidationFailed,{contentSize:e,visualType:this.plugin.name,instanceId:this.instanceId,extension:t});return l.Promise.resolve({promiseId:i,data:{downloadCompleted:!1}})},r.SandboxDownloadContentProxy=e})(powerbi=powerbi||{}),(function(t){(t.visualHost||(t.visualHost={})).createRenderingSynchronizer=function(){return new e},i.prototype.deferRenderOperation=function(e,i){return __awaiter(this,void 0,t.Promise,(function(){var t;return __generator(this,(function(e){return t=$.Deferred(),setTimeout((function(){i(),t.resolve()})),[2,t.promise()]}))}))},i.prototype.clearOperationsQueue=function(){};var e=i;function i(){this.suppressAnimations=!1}})(powerbi=powerbi||{}),(function(b){var e,o,i;function t(e,t){this.telemetryService=e,this.visualPlugin=t}e=(e=b.visualHost||(b.visualHost={})).services||(e.services={}),o=b.data.dsr,e.createVisualWarningTelemetryService=function(e,t){return new i(e,t)},t.prototype.logWarnings=function(e,t){if(!_.isEmpty(e))for(var i=0,s=e;i<s.length;i++){var a=s[i];a instanceof o.DsrLimitsWarning&&this.logDsrLimitsWarning(a,t)}},t.prototype.logDsrLimitsWarning=function(e,t){var i,s,a,o=e.limits,n=e.getDetails(b.common.getLocalize()).message,r=e.code,l=t.type,o=(o.Primary&&(i=this.getLimitString(e.limits.Primary)),o.Secondary&&(s=this.getLimitString(e.limits.Secondary)),o.Intersection&&(a=this.getLimitString(e.limits.Intersection)),t.dataViews),e=t&&t.data&&t.data.isFirstSegment,u=e||_.some(o,(function(e){return e&&e.metadata&&e.metadata.segment}));if(!u||!1!==e)for(var c=0,d=o;c<d.length;c++){var p,h,v,g,m,y,f,S=d[c];S&&S.categorical&&(p=0,(h=_.head(S.categorical.categories))&&(p=h.values&&h.values.length||0),h=(h=S.categorical.values&&S.categorical.values.grouped())&&h.length||0,v=!(!S.categorical.values||!S.categorical.values.source),m=this.visualPlugin.capabilities(t.type),g=m&&m.drilldown&&_.head(m.drilldown.roles),m=!1,y=t.dataTransforms,y=void(g&&y&&(m=1<_.filter(y.selects,(function(e){return e.roles&&e.roles[g]})).length)),(f=this.visualPlugin.getPlugin(t.type))&&f.getAdditionalTelemetry&&(y=JSON.stringify(f.getAdditionalTelemetry(S))),this.telemetryService.logEvent(b.telemetry.DsrDataLimitsWarning,{errorCode:r,targetVisualType:l,primaryDataReduction:i,secondaryDataReduction:s,intersectionDataReduction:a,primaryCount:p,secondaryCount:h,hasCategoryHierarchy:m,hasDynamicSeries:v,visualTelemetry:y,isSegmented:u,message:n}))}},t.prototype.getLimitString=function(e){switch(e.Type){case 0:return"Top:"+e.Count;case 1:return"Bottom:"+e.Count;case 2:return"Sample:"+e.Count}},i=t})(powerbi=powerbi||{}),(function(a){var o;(o=a.visualHost||(a.visualHost={})).createVisualAdapter=function(t,e){var i=t.promiseFactory.defer(e),s=t.visualPlugin;return t.visualSandbox&&(function(e){var t=e.visualPlugin,i=e.featureSwitches||{},s=e.approvedResourceService;if(!t)return;if(e.approvedResourceService&&e.approvedResourceService.isTrustedResource&&e.approvedResourceService.isTrustedResource(t.name))return 1;return o.utils.isCustomVisual(t)&&!(!i.approvedResourcesDisabled&&!t.apiVersion&&s&&s.isApprovedResource(t.name))&&i.sandboxVisualsEnabled})(t)?(e=t.visualSandbox.getVisualPlugin(s,t.telemetryService,t.isDebugVisual)).createES6?e.createES6().then((function(e){return i.resolve(e)})):e.create?i.resolve(a.extensibility.wrapAdapter(e.create(),t.run)):i.reject("either create or createES6 must be defined"):!s.module||s.createES6&&!s.module.css?i.resolve(a.extensibility.createVisualApiAdapter(s,s.create,t.promiseFactory,t.telemetryService,void 0,t.run,t.certifiedEventsService)):t.moduleLoader.require({javascript:s.createES6?void 0:s.module.javascript,css:s.module.css}).then((function(e){return i.resolve(a.extensibility.createVisualApiAdapter(s,s.create,t.promiseFactory,t.telemetryService,e,t.run,t.certifiedEventsService))}),(function(e){return i.reject(e)})),a.createRejectablePromise(i)},o.setCreateVisualAdapter=function(e){o.createVisualAdapter=e}})(powerbi=powerbi||{}),(function(a){var o,e,s,n;function i(e){this.visualSandbox=e}o=a.visuals||(a.visuals={}),e=o.system||(o.system={}),s="dataViewer",n=a.visualHost.LocalizationResourceUtility,i.prototype.reloadAdapter=function(t){var e,i,s=this;if(void 0===t&&(t=!1),this.dataViewShowing){if(t)return;this.toggleDataview(!1)}a.localStorageService.getData("VISUAL_DEVELOPER_MODE_ENABLED")?(i=a.localStorageService.getData("DEVELOPMENT_SERVER_URL")||"https://localhost:8080/assets/",this.statusLoading||(this.statusLoading=!0,$.get(i+"status").done((function(e){!e||t&&s.lastUpdateStatus===e||("error"===(s.lastUpdateStatus=e)?(e=s.buildErrorMessage({message:s.host.getLocalizedString("DebugVisual_Compile_Error_Message"),moreMessage:s.host.getLocalizedString("DebugVisual_Compile_Error_Learn_More"),moreLinkHref:"https://aka.ms/powerbideveloperpbivizcompileerror",moreLinkText:s.host.getLocalizedString("LearnMore"),type:"repair"}),s.container.html(e),s.setCustomizeQuery(),s.setCapabilities()):$.getJSON(i+"pbiviz.json").done((function(e){var t;e.capabilities,e.visual&&e.visual.guid,e.capabilities&&e.visual&&e.visual.guid&&(s.visualGuid!==e.visual.guid&&(s.visualGuid=e.visual.guid),e=(t=s.host.locale())?n.setLocalizedCapabilities(e,t):e,e=a.visualHost.visualPluginUtility.createVisualPlugin(e,t),a.extensibility.visualPluginAdapter.transformPlugin(e),o.plugins[e.name]=e,s.setCustomizeQuery(e.customizeQuery),s.setCapabilities(e.capabilities),s.loadVisual(e))})))})).fail((function(){s.toggleAutoReload(!1);var e=s.buildErrorMessage({message:s.host.getLocalizedString("DebugVisual_Server_Error_Message"),moreMessage:s.host.getLocalizedString("DebugVisual_Server_Error_Learn_More"),moreLinkHref:"https://aka.ms/powerbideveloperpbivizservererror",moreLinkText:s.host.getLocalizedString("LearnMore"),type:"error"});s.container.html(e),s.setCustomizeQuery(),s.setCapabilities()})).always((function(){s.statusLoading=!1})))):(this.toggleAutoReload(!1),e=this.buildErrorMessage({message:this.host.getLocalizedString("DebugVisual_Enabled_Error_Message"),moreMessage:this.host.getLocalizedString("DebugVisual_Enabled_Error_Learn_More"),moreLinkHref:"https://aka.ms/powerbideveloperenablederror",moreLinkText:this.host.getLocalizedString("LearnMore"),type:"blockedsite"}),this.container.html(e),this.setCustomizeQuery(),this.setCapabilities())},i.prototype.loadVisual=function(e){var i=this,t=e.name!==s,e=(this.promiseFactory=this.host.promiseFactory(),this.visualContainer.attr("class","visual-"+e.name),this.visualContainer.empty(),this.container.empty().append(this.visualContainer),this.adapterPromise&&this.adapterPromise.reject(),this.adapterPromise=a.visualHost.createVisualAdapter({visualPlugin:e,promiseFactory:this.promiseFactory,moduleLoader:this.host.loader(),featureSwitches:{sandboxVisualsEnabled:t},visualSandbox:this.visualSandbox,isDebugVisual:!0}));this.adapter&&this.adapter.destroy(),e.then((function(e){var t;i.adapter=e,i.sandbox=i.adapter.sandbox,e.init&&e.init(i.visualInitOptions),e.update&&i.lastUpdateOptions&&((t=i.lastUpdateOptions).type=a.VisualUpdateType.All,e.update(t))}))},i.prototype.toggleAutoReload=function(e){var t=this;this.autoReloadInterval&&!0!==e?(this.autoRefreshBtn.addClass("pbi-glyph-circle-play"),this.autoRefreshBtn.removeClass("pbi-glyph-circle-stop"),this.refreshBtn.show(),clearInterval(this.autoReloadInterval),this.autoReloadInterval=void 0):this.autoReloadInterval||!1===e||(this.autoRefreshBtn.removeClass("pbi-glyph-circle-play"),this.autoRefreshBtn.addClass("pbi-glyph-circle-stop"),this.refreshBtn.hide(),this.autoReloadInterval=setInterval((function(){return t.reloadAdapter(!0)}),i.autoReloadPollTime))},i.prototype.toggleDataview=function(e){this.dataViewShowing&&!0!==e?(this.dataViewShowing=!1,this.dataBtn.toggleClass("active",!1),this.reloadAdapter()):this.dataViewShowing||!1===e||(this.dataViewShowing=!0,this.dataBtn.toggleClass("active",!0),this.loadVisual(o.plugins[s]))},i.prototype.flatten=function(e){if(e instanceof Array)for(var t=[],i=0,s=e.length;i<s;i++)t[i]=this.flatten(e[i]);else{if("object"!=typeof e)return e;t={},i=void 0;for(i in e)t[i]=this.flatten(e[i])}return t},i.prototype.createAndClickAnchorTagWithJsonData=function(e){var t=document.createElement("a");t.href="data:"+e,t.download="dataViews.json",t.click()},i.prototype.exportDataViews=function(){var e=this.flatten(this.lastUpdateOptions.dataViews),e="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));this.createAndClickAnchorTagWithJsonData(e)},i.prototype.createRefreshBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Reload_Visual_Button_Title"),t=this.refreshBtn=$('<i title="'.concat(t,'" class="controlBtn glyphicon pbi-glyph-refresh"></i>'));return t.on("click",(function(){return e.reloadAdapter()})),t},i.prototype.createAutoRefreshBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Toggle_Auto_Reload_Button_Title"),t=this.autoRefreshBtn=$('<i title="'.concat(t,'" class="controlBtn glyphicon pbi-glyph-circle-play"></i>'));return t.on("click",(function(){return e.toggleAutoReload()})),t},i.prototype.createDataBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Show_Dataview_Button_Title"),t=this.dataBtn=$('<i title="'.concat(t,'" class="controlBtn glyphicon pbi-glyph-seedata"></i>'));return t.on("click",(function(){return e.toggleDataview()})),t},i.prototype.createHelpBtn=function(){var e=this.host.getLocalizedString("DebugVisual_Help_Button_Title");return $('<a href="https://aka.ms/powerbideveloperhelp" target="_blank"><i title="'.concat(e,'" class="controlBtn glyphicon pbi-glyph-question"></i></a>'))},i.prototype.createSmilyBtn=function(){var e=this.host.getLocalizedString("DebugVisual_Feedback_Button_Title");return $('<a href="https://aka.ms/powerbideveloperfeedback" target="_blank"><i title="'.concat(e,'" class="controlBtn glyphicon pbi-glyph-smiley"></i></a>'))},i.prototype.createExportDataViewsBtn=function(){var e=this,t=this.host.getLocalizedString("DebugVisual_Export_Data_Button_Title"),t=$('<i title="'.concat(t,'" class="controlBtn glyphicon pbi-glyph-export"></i>'));return t.on("click",(function(){return e.exportDataViews()})),t},i.prototype.buildControls=function(){var e=$('<div class="debugVisual-controlsContainer"></div>');return e.append(this.createRefreshBtn(),this.createAutoRefreshBtn(),this.createDataBtn(),this.createExportDataViewsBtn(),this.createHelpBtn(),this.createSmilyBtn()),e},i.prototype.buildErrorMessage=function(e){return _.template(i.errorMessageTemplate)(e)},i.prototype.setCapabilities=function(e){void 0===e&&(e=i.defaultCapabilities),_.isEqual(e,o.plugins.debugVisual.capabilities)||(o.plugins.debugVisual.capabilities=e,this.host.visualCapabilitiesChanged())},i.prototype.setCustomizeQuery=function(e){o.plugins.debugVisual.customizeQuery=e=void 0===e?function(e){return null}:e},i.prototype.init=function(e){this.host=e.host;var t=this.container=$('<div class="debugVisualContainer"></div>'),i=this.visualContainer=$('<div class="visual"></div>');this.dataViewShowing=!1,t.append(i),e.element.append(t),(this.visualInitOptions=e).element=i,this.host.setToolbar(this.buildControls()),this.reloadAdapter()},i.prototype.update=function(e){e.viewport&&(this.visualInitOptions.viewport=e.viewport);var t=(this.lastUpdateOptions=e).viewport.height,i=e.viewport.width;this.visualContainer.height(t).width(i),this.adapter&&this.adapter.update&&this.adapter.update(e)},i.prototype.enumerateObjectInstances=function(e){return this.adapter&&this.adapter.enumerateObjectInstances?this.adapter.enumerateObjectInstances(e):[]},i.prototype.enumerateObjectInstancesAsync=function(e){return this.adapter&&this.adapter.enumerateObjectInstancesAsync?this.adapter.enumerateObjectInstancesAsync(e):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},i.prototype.enumerateObjectRepetitionAsync=function(){return this.adapter&&this.adapter.enumerateObjectRepetitionAsync?this.adapter.enumerateObjectRepetitionAsync():this.promiseFactory.resolve([])},i.prototype.getFormattingModel=function(){if(this.adapter&&this.adapter.getFormattingModel)return this.adapter.getFormattingModel()},i.prototype.getFormattingModelAsync=function(){return this.adapter&&this.adapter.getFormattingModelAsync?this.adapter.getFormattingModelAsync():this.promiseFactory.resolve(this.getFormattingModel())},i.prototype.onClearSelection=function(){if(this.adapter&&this.adapter.onClearSelection)return this.adapter.onClearSelection()},i.prototype.onRestoreSelection=function(e){if(this.adapter&&this.adapter.onRestoreSelection)return this.adapter.onRestoreSelection(e)},i.prototype.destroy=function(){this.adapter&&this.adapter.destroy&&this.adapter.destroy(),this.toggleAutoReload(!1),this.container=null,this.visualContainer=null,this.host.setToolbar(null),this.promiseFactory=null},i.prototype.visualHasMethod=function(e){var t;return null==(t=this.adapter)?void 0:t.visualHasMethod(e)},i.defaultCapabilities={dataRoles:[{displayName:"Values",name:"Values",kind:a.VisualDataRoleKind.Measure}],dataViewMappings:[{table:{rows:{for:{in:"Values"}}}}]},i.capabilities=i.defaultCapabilities,i.autoReloadPollTime=300,i.errorMessageTemplate='\n            <div class="errorContainer">\n                <div class="errorMessage">\n                    <div ng-switch="$ctrl.errorInfo.overlayType">\n                        <div class="glyphicon pbi-glyph-<%= type %> glyph-med"></div>\n                    </div>\n                    <div>\n                        <div class="errorSpan"><%= message %></div>\n                        <span class="errorSeeMore"><%= moreMessage %></span>\n                        <a class="errorSeeMore" href="<%= moreLinkHref %>" target="_blank"><%= moreLinkText %></a>\n                    </div>\n                </div>\n            </div>\n        ',e.DebugVisual=i})(powerbi=powerbi||{}),(function(e){var t;(t=e.visuals||(e.visuals={})).addPlugin("debugVisual",{name:"debugVisual",watermarkKey:"kpi",titleKey:e.data.createDisplayNameGetter("DebugVisual_ToolTip"),capabilities:t.system.DebugVisual.capabilities,create:function(){return new t.system.DebugVisual},customizeQuery:function(e){return null},systemVisual:!0})})(powerbi=powerbi||{}),(function(s){var a=s.visualHost||(s.visualHost={}),o=jsCommon.PerfTimer,n=jsCommon.QueryStringUtil,r=jsCommon.Version,t=(Object.defineProperty(e.prototype,"sandbox",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.init=function(e){var t=this,i=(this.element=e.element,this.tooltipService=e.host.tooltips(),null!=(i=this.plugin.apiVersion)?i:"2.0.0");e.featureSwitches&&(!this.updateMessagesProcessor&&e.featureSwitches.cvAggregateUpdateMessages&&r.ge(i,"4.2.0")&&(this.updateMessagesProcessor=new a.UpdateMessagesProcessor(this.proxy,this.plugin,this.telemetryService)),e.featureSwitches=this.filterFeatureSwitches(e.featureSwitches,this.iframeFeatureSwitches)),this.initializeContainerTimerId=window.setTimeout((function(){t.initializeContainerTimerId=void 0,t.element&&t.initContainer(e.viewport)}),0),this.proxy.invoke("init",[e])},e.prototype.update=function(e){return(this.updateMessagesProcessor||this.proxy).update(e)},e.prototype.enumerateObjectInstancesAsync=function(e){return this.proxy.invoke("enumerateObjectInstancesAsync",[e])},e.prototype.getFormattingModelAsync=function(){return this.proxy.invoke("getFormattingModelAsync",[])},e.prototype.enumerateObjectRepetitionAsync=function(){return this.proxy.invoke("enumerateObjectRepetitionAsync",[])},e.prototype.onRestoreSelection=function(e){return this.supportCustomVisualSelectionId()?this.proxy.invoke("onRestoreCvSelectionIds",[e]):(e=e.selection.map((function(e){return s.data.services.DataViewObjectSerializer.serializeSelectorsByColumn(e)})),this.proxy.invoke("onRestoreSelection",[{selection:e}]))},e.prototype.visualHasMethod=function(e){return _.isFunction(this[e])},e.prototype.destroy=function(){var e;void 0!==this.initializeContainerTimerId&&window.clearTimeout(this.initializeContainerTimerId),this.container&&this.container.remove(),null!=(e=this.accessibilityUpperIndicator)&&e.remove(),null!=(e=this.accessibilityLowerIndicator)&&e.remove(),this.hideTooltip(),this.updateMessagesProcessor&&this.updateMessagesProcessor.destroy(),this.proxy.invoke("destroy",[])},e.prototype.hideTooltip=function(){this.tooltipService&&this.tooltipService.enabled()&&this.tooltipService.hide({immediately:!0,isTouchEvent:!1})},e.prototype.initContainer=function(e){var t="customVisual:".concat(this.pluginName,":initContainer"),t=(this.marker=o.start(t),e.width),e=e.height,i=this.getCSP();this.featureSwitchService.featureSwitches.useCvSandboxCspIframe?this.container=this.createCspIframe(t,e,i):(this.container=$(this.iframeHtml),this.initSandboxIframe(this.container,t,e,i)),null!=(t=this.plugin.capabilities)&&t.supportsKeyboardFocus?this.initWithAccessibilityIndicators():this.element.empty().append(this.container)},e.prototype.createCspIframe=function(t,i,s){var a=this,e=s?'<meta http-equiv="Content-Security-Policy" content="'.concat(s,'">'):"",e="<html><head>".concat(e,'</head><body style="margin:0;overflow:hidden;">').concat(this.iframeHtml,"</body></html>"),o=$(document.createElement("iframe"));return o.attr({class:"visual-sandbox",width:t,height:i,srcdoc:e,csp:s}),o.one("load",(function(){var e=o[0].contentWindow.document,e=$(e.querySelectorAll(".visual-sandbox"));a.initSandboxIframe(e,t,i,s)})),o},e.prototype.getCSP=function(){var e=null,t=this.privilegeService.getWebAccessParameters(this.plugin);return null!==t&&(t=t.join(" "),e="default-src ".concat(this.frontEndUrl," ").concat("data: blob: 'unsafe-inline' 'unsafe-eval'"," ").concat(t,";")),e},e.prototype.initSandboxIframe=function(e,t,i,s){var a=this,o=this.generateIFrameUrl();e.attr({width:t,height:i,src:o,csp:s}),e.one("load",(function(){return a.onIFrameLoad(e)})),e.on("mouseout",(function(){return a.hideTooltip()}))},e.prototype.initAccessibilityIndicators=function(){var e={opacity:"0","z-index":"-1","max-width":"0","max-height":"0"};this.accessibilityUpperIndicator=$(document.createElement("div")),this.accessibilityLowerIndicator=$(document.createElement("div")),this.accessibilityUpperIndicator.css(e),this.accessibilityLowerIndicator.css(e),this.accessibilityUpperIndicator.attr("tabindex","0"),this.accessibilityLowerIndicator.attr("tabindex","0")},e.prototype.initWithAccessibilityIndicators=function(){this.initAccessibilityIndicators(),this.element.empty().append(this.accessibilityUpperIndicator),this.element.append(this.container),this.element.append(this.accessibilityLowerIndicator)},e.prototype.onIFrameLoad=function(e){e=e[0];this.proxy.ready(e.contentWindow),this.marker()},e.prototype.generateIFrameUrl=function(){s.common.getLocalize().currentLanguageLocale;var e=n.clearAllQueriesFromUrl(this.visualSandboxUri),t={locale:a.LocalizationResourceUtility.getLocale(s.common.getLocalize().currentLanguageLocale)},i=(4===this.hostEnv&&(t.plugin=this.pluginName),n.getQueryStringValue("unmin")&&(t.unmin="1"),window.externalMigration),i=(t.externalMigration=i?"1":"0",void 0!==n.getQueryStringValue("emCVBundle")&&(t.emCVBundle=n.getQueryStringValue("emCVBundle")),void 0!==n.getQueryStringValue("emUseCdn")&&(t.emUseCdn=n.getQueryStringValue("emUseCdn")),this.featureSwitchService.featureSwitches.useCvSandboxCspIframe&&(t.cspiframe="1"),i&&(t.pbiglobals="1"),this.getCSP());return i&&(t.csp=btoa(i)),e+n.rebuildQueryString(t)},e.prototype.filterFeatureSwitches=function(i,s){var e={};return e=i&&s?_.reduce(Object.keys(i),(function(e,t){return-1<s.indexOf(t)&&(e[t]=i[t]),e}),{}):e},e.prototype.supportCustomVisualSelectionId=function(){var e;return(null==(e=this.proxy.plugin)?void 0:e.apiVersion)&&r.ge(this.proxy.plugin.apiVersion,"2.0.0")},e);function e(e){this.iframeFeatureSwitches=["dsrV2","cvSkipExtraResize"],this.pluginName=e.plugin.name,this.proxy=e.proxy,this.featureSwitchService=e.featureSwitchService,this.visualSandboxUri=e.visualSandboxUri,this.frontEndUrl=e.frontEndUrl||"'self'",this.hostEnv=e.hostEnv,this.accessibilityUpperIndicator=null,this.accessibilityLowerIndicator=null;var t=_.map(e.sandboxProperties,(function(e){return a.CustomVisualsUtils.SandboxPropertyTranslator(e)})).join(" "),i="",i=(e.plugin.capabilities&&e.plugin.capabilities.supportsKeyboardFocus&&(i=" tabindex=0"),this.iframeHtml='<iframe style="border:none;" class="visual-sandbox empty-sandbox-visual" sandbox="'.concat(t,'" name="visual-sandbox"').concat(i,' aria-label="').concat(e.localizationService.get("CustomVisualIframeAriaLabel"),'"></iframe>'),this.plugin=e.plugin,this.telemetryService=e.telemetryService,this.certifiedEventsService=e.certifiedEventsService,this.privilegeService=e.privilegeService,{urlLauncher:e.urlLauncher,visualHostTooltip:e.visualHostTooltip,hostEnv:e.hostEnv,dataMultiSelectMode:e.dataMultiSelectMode,sandboxPropertiesString:t,allowModalDialog:_.isFunction(e.openIFrameDialog),dialogSandboxUri:e.dialogSandboxUri,openIFrameDialog:e.openIFrameDialog,getEmbedHostType:e.getEmbedHostType}),t=new a.SandboxDelegate(this.proxy,e.promiseFactory,this.telemetryService,this.certifiedEventsService,e.approvedResourcesService,e.visualsLicenseService,e.visualDownloadService,e.privilegeService,e.customVisualsTokenManagerService,i,e.instanceId),i=(this.proxy.init(t,e.plugin),window.powerbi.visuals.plugins[this.pluginName]);i.content,this.proxy.postMessage("loadWithoutResourcePackage",[i]),null!=(t=this.plugin.capabilities)&&t.privileges&&this.telemetryService.logEvent(s.telemetry.VisualEventPrivileges,{visualType:this.plugin.name,privileges:JSON.stringify(this.plugin.capabilities.privileges)})}a.SandboxVisual=t;for(var i=0,l=["update","onStyleChanged","onViewModeChanged","onEditModeChanged","onClearSelection","onSelectObject","canResizeTo"];i<l.length;i++)!(function(e){t.prototype[e]||(t.prototype[e]=function(){return this.proxy.invoke(e,_.toArray(arguments))})})(l[i])})(powerbi=powerbi||{}),(function(i){var e,s;function t(e){this.isolate=!0,this.promiseFactory=e.promiseFactory,this.plugin=e.plugin,this.tooltipService=e.visualHostTooltip}e=i.visualHost||(i.visualHost={}),s=jsCommon.Version,t.prototype.init=function(e){var t=e.host.tooltips(),t=(t&&(this.tooltipService=t),this.cvContainer=e.element,this.loadWithoutResourcePackage(this.plugin),this.hostServices=i.visualSandbox.createNonSandboxVisualHostServices(e.host,this.cvContainer,this.tooltipService),{animation:e.animation,element:this.cvContainer,host:this.hostServices,interactivity:e.interactivity,style:e.style,viewport:e.viewport,localizationResources:this.plugin.localizationResources});this.visual.init(t)},t.prototype.update=function(e){e={dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewMode:e.viewMode,editMode:e.editMode,viewport:e.viewport,type:e.type,operationKind:i.VisualDataChangeOperationKind.Create,resizeMode:e.resizeMode,isInFocus:e.isInFocus,jsonFilters:e.jsonFilters||null};return this.visual.update(e)},t.prototype.enumerateObjectInstancesAsync=function(e){var t=this.promiseFactory.defer();if(this.visual.enumerateObjectInstances)return(e=this.visual.enumerateObjectInstances(e))&&e.instances&&t.resolve({instances:e.instances,containers:e.containers}),t.resolve(e),t.promise},t.prototype.enumerateObjectRepetitionAsync=function(){var e=this.promiseFactory.defer(),t=this.visual.enumerateObjectRepetition();return e.resolve(t),e.promise},t.prototype.getFormattingModelAsync=function(){var e;if(this.visual.getFormattingModel)return(e=this.promiseFactory.defer()).resolve(this.visual.getFormattingModel()),e.promise},t.prototype.onRestoreSelection=function(e){var t=this.hostServices.selectionManager;if(t)return e&&e.selection&&(e=e.selection.map((function(e){return i.visuals.SelectionId.fromSelectorsByColumn(e)})),t.setSelectionIds(e),t.invokeOnSelectCallback(e)),!0},t.prototype.onClearSelection=function(){var e=this.hostServices.selectionManager;e&&(e.setSelectionIds([]),e.invokeOnSelectCallback([]))},t.prototype.loadWithoutResourcePackage=function(e){var t=e.apiVersion?this.isolate&&s.lt(e.apiVersion,"3.0.0"):this.isolate;this.plugin=i.visualSandbox.injectCustomVisual(e,!0,t),this.createAdapter()},t.prototype.visualHasMethod=function(e){return _.isFunction(this[e])},t.prototype.destroy=function(){this.hideTooltip(),this.visual.destroy&&this.visual.destroy(),this.cvContainer&&this.cvContainer.empty()},t.prototype.createAdapter=function(){this.plugin;var e=this.plugin;this.visual=i.extensibility.createVisualApiAdapter(e,e.create,this.promiseFactory,null),this.visual},t.prototype.hideTooltip=function(){this.tooltipService&&this.tooltipService.enabled()&&this.tooltipService.hide({immediately:!0,isTouchEvent:!1})},e.NonSandboxDelegate=t})(powerbi=powerbi||{}),(function(m){var y,e,n,t,i,r,o,f,s,S,l,a,u,c;function d(e,t){var i;return!(!e.visualHasData||e.dataViews&&0!==e.dataViews.length)||(i=(t=t.capabilities)&&t.supportsLandingPage,t=t&&t.supportsEmptyDataView,i=i&&(t||1===e.viewMode),e.visualRequiresData&&e.dataViews&&0===e.dataViews.length&&!i)}function b(e,t,i,s,a,o,n,r,l,u,c){this.proxy=e,this.promiseFactory=t,this.telemetryService=i,this.certifiedEventsService=s,this.approvedResourcesService=a,this.licenseService=o,this.visualDownloadService=n,this.privilegeService=r,this.customVisualsTokenManagerService=l,this.visualSandboxOptions=u,this.instanceId=c,this.dataTransforms={},this.canHandleLoadMoreData=!0,this.isFirstUpdate=!0,this.destroyed=!1,this.dataViewSerializer=new m.visualSandbox.SandboxDataViewSerializer,this.visualSelections=[]}y=m.visualHost||(m.visualHost={}),e=m.extensibility.ApprovedMessage,n=m.visuals.CustomVisualSelectionId,t=m.CustomVisualsTelemetryWrapper,i=m.data.services,r=i.DataViewObjectSerializer,o=m.data.DataViewTransform,f=i.DataViewTransformActionsSerializer,s=m.visualSandbox.SandboxFormattingModelSerializer,S=jsCommon.Version,l=y.services.VisualObjectInstanceSerializer,a=y.services.VisualObjectRepetitionSerializer,y.CustomVisualsFilterPropertyIdentifier={objectName:"general",propertyName:"filter"},y.CustomVisualsNotificationTypeMapping=((i={})[0]="icon",i[1]="unsupported environment blocker",i[2]="blocker",i),u=i={1:"Web",2:"PublishToWeb",4:"Desktop",8:"Embed",16:"ReportServer",32:"ExportReportHost",64:"Mobile",128:"DashboardHost"},c=i={0:"Allowed",3:"DisabledByAdmin",2:"NotSupported",1:"NotDeclared"},y.shouldNotUpdateVisual=d,Object.defineProperty(b.prototype,"sandbox",{get:function(){return!0},enumerable:!1,configurable:!0}),b.prototype.init=function(e){this.host=e.host,this.visualAdapterHostServices=e.visualAdapterHostServices,this.tooltipService=this.host.tooltips(),this.featureSwitches=e.featureSwitches,this.tooltipService||(this.tooltipService=this.visualSandboxOptions.visualHostTooltip),this.element=e.element,this.resize(e.viewport),this.style=e.style;var t=null==(t=this.visualSandboxOptions)?void 0:t.hostEnv,t=(this.isExportVisualsContentSupported=!!t&&!!(5&t)&&!(null==(t=e.interactivity)||!t.isVisualInteractive),e.interactivity=e.interactivity||{},e.interactivity.allowModalDialog=(null==(t=this.visualSandboxOptions)?void 0:t.allowModalDialog)&&e.interactivity.isVisualInteractive,{animation:(this.initOptions=e).animation,interactivity:e.interactivity,viewport:e.viewport,style:y.VisualStyleSerializer.serializeVisualStyle(e.style),featureSwitches:e.featureSwitches,hostEnv:this.visualSandboxOptions?this.visualSandboxOptions.hostEnv:void 0,instanceId:this.instanceId,dataMultiSelectMode:this.visualSandboxOptions&&this.visualSandboxOptions.dataMultiSelectMode&&this.visualSandboxOptions.dataMultiSelectMode()});this.proxy.postMessage("init",[t])},b.prototype.getHostEnvString=function(){var e;return null!=(e=this.visualSandboxOptions)&&e.hostEnv?u[this.visualSandboxOptions.hostEnv]:"Undefined"},b.prototype.update=function(e){var i=this,t=(this.isFirstUpdate&&(this.isFirstUpdate=!1,this.logCapabilitiesTelemetry(e)),this.promiseFactory.defer());return d(e,this.proxy.plugin)?(e.updateCallBack&&e.updateCallBack(),t.resolve(null),t.promise):this.updateCore(e,(function(e,t){return i.proxy.postMessageAsync(e,t)}))},b.prototype.updateCore=function(p,h){var v,g;return __awaiter(this,void 0,m.Promise,(function(){var t,i,s,a,o,n,r,l,u,c,d=this;return __generator(this,(function(e){switch(e.label){case 0:if(a=[],(p.type&m.VisualUpdateType.All)!==m.VisualUpdateType.All&&(p.type&m.VisualUpdateType.Resize)===m.VisualUpdateType.Resize&&2!==p.resizeMode)return[3,11];if(o=this.proxy&&this.proxy.plugin&&this.proxy.plugin.apiVersion,p.dataViews&&p.dataViews[0]&&b.shouldSerializeDataView(o)){p.dataViews.length;try{null!=(g=null==(v=null==p?void 0:p.dataViews[0])?void 0:v.metadata)&&g.columns&&(p.dataViews[0].metadata.columns=_.filter(p.dataViews[0].metadata.columns,(function(e){return e.roles||""!==e.displayName})))}catch(e){}this.shouldUpdateWithCachedData(p)?s=this.dataViewSerializer.serializeDataViewMetadata(p.dataViews[0]):i=this.dataViewSerializer.serializeDataViewForCv(p.dataViews[0],this.proxy.plugin.capabilities,!1,S.gt(o,"3.5.9"),[],S.ge(o,"5.3.0")),a=this.RestoreCvSelectionIds(this.visualSelections)}if(o=!!(p.dataViews&&0<p.dataViews.length&&p.dataViews[0].categorical&&p.dataViews[0].categorical.categories&&0<p.dataViews[0].categorical.categories.length&&p.dataViews[0].categorical.categories[0]&&p.dataViews[0].categorical.categories[0].values),n=[],r=void 0,o&&(n=p.dataViews[0].categorical.categories[0].values,p.dataViews[0].categorical.categories[0].source)&&p.dataViews[0].categorical.categories[0].source.type&&(r=p.dataViews[0].categorical.categories[0].source.type.dateTime),u=p&&p.dataTransforms&&p.dataTransforms.objects,l=void 0,!(u=u&&m.data.DataViewObjectDefinitions.getValue(u,y.CustomVisualsFilterPropertyIdentifier,null)))return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.host.getJSONFilter(u,this.dataViewSerializer.identitiesArray)];case 2:return l=e.sent(),[3,4];case 3:return e.sent(),l=[],[3,4];case 4:return[3,6];case 5:l=[],e.label=6;case 6:return(this.dataTransforms=p.dataTransforms,c={dataViewSource:p.visualDefinitionData?p.visualDefinitionData.dataViewSource:null,dataTransforms:f.serializeDataViewTransformActions(p.dataTransforms,this.proxy.plugin.capabilities.objects||{}),suppressAnimations:p.suppressAnimations,viewMode:p.viewMode,editMode:p.editMode,viewport:p.viewport,type:p.type,resizeMode:p.resizeMode,isInFocus:p.isInFocus,categoriesValues:o?n:null,isCategoryDate:r,serializedDataView:i,jsonFilters:l,dataViewMetadata:s,selections:a,updateId:p.updateId},this.shouldUpdateWithCachedData(p))?(this.lastDataViewSource=c.dataViewSource,c.dataViewSource=null,[4,h("updateWithCachedData",[c])]):[3,8];case 7:return t=e.sent(),[3,10];case 8:return this.lastDataViewSource=c.dataViewSource,[4,h("update",[c])];case 9:t=e.sent(),e.label=10;case 10:return[3,12];case 11:p.updateCallBack&&p.updateCallBack(),e.label=12;case 12:return window.setTimeout((function(){return d.resize(p.viewport)})),[2,t]}}))}))},b.prototype.logCapabilitiesTelemetry=function(e){var i,t=this.proxy.plugin,s=null==t?void 0:t.capabilities,e=null==(e=null==(e=null==(e=null==e?void 0:e.dataViews)?void 0:e[0])?void 0:e.metadata)?void 0:e.objects,s={sorting:{implicit:!(null==(a=null==s?void 0:s.sorting)||!a.implicit),default:!(null==(a=null==s?void 0:s.sorting)||!a.default),custom:!(null==(a=null==s?void 0:s.sorting)||!a.custom)},expandCollapse:o(e,null==(a=null==s?void 0:s.expandCollapse)?void 0:a.addDataViewFlags,!0),subTotals:{RowSubtotalType:{Top:o(e,null==(a=null==(a=null==s?void 0:s.subtotals)?void 0:a.matrix)?void 0:a.rowSubtotalsType,"Top"),Bottom:o(e,null==(e=null==(a=null==s?void 0:s.subtotals)?void 0:a.matrix)?void 0:e.rowSubtotalsType,"Bottom")}}},a=(function e(t){var i;var s=[];var a=new Map(Object.entries(t));for(var o=0,n=Object.keys(t);o<n.length;o++){var r=n[o],l=a.get(r);"boolean"==typeof l?l&&s.push(r):(l=e(l)).length&&s.push(((i={})[r]=l,i))}return s})(s);function o(e,t,i){var s=!1;return s=t?t.propertyIdentifier?m.DataViewObjects.getValue(e,t.propertyIdentifier,t.defaultValue)===i:t.defaultValue===i:s}a.length&&(e={apiVersion:t.apiVersion,visualVersion:t.version,existingTrackedCapabilities:a},this.telemetryService.logEvent(m.telemetry.VisualCustomVisualsGenericEvent,{apiName:"Capabilities Telemetry",visualType:t.name,additionalInfo:JSON.stringify(e)}),a={apiMajorVersion:null==(a=S.tryParse(t.apiVersion))?void 0:a.major,apiMinorVersion:null==(e=S.tryParse(t.apiVersion))?void 0:e.minor,visualMajorVersion:null==(a=S.tryParse(t.version))?void 0:a.major,visualMinorVersion:null==(e=S.tryParse(t.version))?void 0:e.minor},i=a,(function e(t,i,s){void 0===s&&(s="");var a=new Map(Object.entries(t));for(var o=0,n=Object.keys(t);o<n.length;o++){var r=n[o],l=a.get(r),r=""!==s?s+"."+r:r;"boolean"==typeof l?l&&i.push(r):e(l,i,r)}})(s,e=[]),e.forEach((function(e){var e=e.split("."),t=e[0],e=1===e.length?e[0]:e.slice(1).join("."),e=i[t]?i[t]+", "+e:e;i[t]=e})),this.certifiedEventsService.logStandardizedFeatureEvent({visualId:t.name,correlationId:null==(s=this.telemetryService.root)?void 0:s.id,activityName:"Capabilities Telemetry",activityAttributes:a,featureName:"Custom Visuals",activityStatus:"Succeeded"}))},b.prototype.getFormattingModelAsync=function(){var t=this,i=this.promiseFactory.defer();return this.proxy.postMessageAsync("getFormattingModel",[]).then((function(e){if(!e)return i.resolve(null);e=s.deserializeFormattingModel(t.dataViewSerializer,e);i.resolve(e)})).catch((function(e){return i.reject(e)})),i.promise},b.prototype.enumerateObjectInstancesAsync=function(e){var a=this,o=this.promiseFactory.defer();return this.proxy.postMessageAsync("enumerateObjectInstances",[e]).then((function(e){var t=e;if(!t)return o.resolve(null);var i,s=a.proxy&&a.proxy.plugin&&a.proxy.plugin.apiVersion;if(t.instances)return i={instances:b.shouldSerializeDataView(s)?(i=a.dataViewSerializer.deserializeVisualObjectInstance(t.instances),l.deserialize(i)):l.deserialize(t.instances),containers:t.containers?l.deserializeContainers(t.containers):null},o.resolve(i);b.shouldSerializeDataView(s)&&(e=a.dataViewSerializer.deserializeVisualObjectInstance(e));t=l.deserialize(e);o.resolve(t)})).catch((function(e){return o.reject(e)})),o.promise},b.prototype.enumerateObjectRepetitionAsync=function(){var t=this;return this.enumerateObjectRepetitionAsyncPromise=this.promiseFactory.defer(),this.proxy.postMessageAsync("enumerateObjectRepetition",[]).then((function(e){if(!e)return t.enumerateObjectRepetitionAsyncPromise.resolve(null);e=a.deserialize(e);t.enumerateObjectRepetitionAsyncPromise.resolve(e)})).catch((function(e){return t.enumerateObjectRepetitionAsyncPromise.reject(e)})),this.enumerateObjectRepetitionAsyncPromise.promise},b.prototype.onSelect=function(e){var t;t=m.extensibility.legacy.isOldSelectEventArgs(e)?{data:r.deserializeSelectors((t=e).data),data2:r.deserializeSelectorsByColumn(t.data2),selectors:r.deserializeSelectors(t.selectors)}:{type:0,visualObjects:r.deserializeVisualObjects(e.visualObjects)},this.host.onSelect(t)},b.prototype.transformCvSelectionIdsAndSelect=function(e){if(this.visualSelections=[],e.selectionIds)for(var t={type:0,visualObjects:[]},i=0,s=e.selectionIds;i<s.length;i++){var a=s[i],a=new n(a.dataMap,a.measures),a=this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(a).getSelectorsByColumn();t.visualObjects.push({objectName:"dataPoint",selectorsByColumn:a}),this.visualSelections.push(a)}else t={type:0,visualObjects:[]};t.selectionMode=e.multiSelect?3:0,this.host.onSelect(t)},b.prototype.onRestoreCvSelectionIds=function(e){if(e.selection)return e=this.RestoreCvSelectionIds(e.selection),this.proxy.postMessage("onRestoreCvSelectionIds",[e]),!0},b.prototype.RestoreCvSelectionIds=function(e){for(var t=[],i=0,s=this.visualSelections=e;i<s.length;i++){var a=s[i];a&&(a=this.dataViewSerializer.restoreIdentitiesIndexesFromSelectionId(a))&&t.push(a)}return t},b.prototype.onUpdateResult=function(e){this.element.children("iframe.visual-sandbox").toggleClass("empty-sandbox-visual",!e)},b.prototype.onRelayUIEvent=function(e){var t=this.element.offset();if(null!=t){switch(e.type){case"click":case"mouseup":case"MSPointerUp":case"pointerup":var i=e.clientX?e.clientX+t.left:t.left,s=e.clientY?e.clientY+t.top:t.top,a=new MouseEvent(e.type,{screenX:e.screenX,screenY:e.screenY,clientX:i,clientY:s,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,buttons:e.buttons,relatedTarget:e.relatedTarget,bubbles:e.bubbles});break;case"tap":case"touchend":case"touchcancel":var i=e,s=this.createTouchList(i.touches,t),o=this.createTouchList(i.changedTouches,t),n=this.createTouchList(i.targetTouches,t);a=new TouchEvent(i.type,{touches:s,targetTouches:n,changedTouches:o,view:window,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,metaKey:i.metaKey});break;case"keydown":a=new KeyboardEvent(e.type,{altKey:e.altKey,bubbles:e.bubbles,cancelable:e.cancelable,code:e.code,composed:e.composed,ctrlKey:e.ctrlKey,key:e.key,keyCode:e.keyCode,metaKey:e.metaKey,shiftKey:e.shiftKey});break;default:return}this.element.get(0).dispatchEvent(a)}},b.prototype.createTouchList=function(e,t){var i=[];if(null!=e)for(var s=0;s<e.length;s++){var a=e.item(s),a=new Touch({identifier:a.identifier,target:a.target,clientX:a.clientX?a.clientX+t.left:t.left,clientY:a.clientY?a.clientY+t.top:t.top,screenX:a.screenX,screenY:a.screenY,pageX:a.pageX?a.pageX+t.left:t.left,pageY:a.pageY?a.pageY+t.top:t.top,radiusX:a.radiusX,radiusY:a.radiusY,rotationAngle:a.rotationAngle,force:a.force});i.push(a)}return i},b.prototype.persistProperties=function(e){var t=e,t=t.merge||t.remove||t.replace?(this.deserilizePersistedSelectors(t),{merge:t.merge?l.deserialize(t.merge):null,remove:t.remove?l.deserialize(t.remove):null,replace:t.replace?l.deserialize(t.replace):null}):l.deserialize(e);this.host.persistProperties(t)},b.prototype.deserilizePersistedSelectors=function(e){function t(e){null!=e&&e.map((function(e){return i.dataViewSerializer.deserializeOpaqueIdentity(e.selector),e}))}var i=this;t(e.merge),t(e.remove),t(e.replace)},b.prototype.applyJsonFilter=function(e,t,i,s){e&&0<e.length&&8===e[0].filterType?this.applyIdentityFilter(e,t,i,s):this.host.applyJsonFilter(e,t,i,s)},b.prototype.refreshHostData=function(){this.host.refreshHostData()},b.prototype.drill=function(t){var e;null!=t&&t.roleName&&null!=t&&t.drillType&&(null==(e=null==(e=null==(e=null==(e=null==(e=this.proxy)?void 0:e.plugin)?void 0:e.capabilities)?void 0:e.drilldown)?void 0:e.roles)?void 0:e.some((function(e){return e===t.roleName})))&&this.host.drill(t)},b.prototype.onCustomVisualContextMenu=function(e,t){var i,s,a,o;e&&e.data&&e.position&&e.data[0]&&(o=new n(e.data[0].dataMap,e.data[0].measures),s=this.proxy&&this.proxy.plugin&&this.proxy.plugin.capabilities&&this.proxy.plugin.capabilities,((null==(a=this.proxy)?void 0:a.isDebug)||(null==(a=null==(a=this.proxy)?void 0:a.plugin)?void 0:a.developerModeVisual))&&s&&(s.expandCollapse||s.drilldown)&&e.dataRoles,s&&s.expandCollapse&&(a=this.getRowsRoles(s))&&_.isEqual(a,e.dataRoles)&&(this.dataViewSerializer.sortSelectionIdAccordingToRows(o)?(i=this.dataViewSerializer.getNodeIndexOfSelectionId(o),_.isEmpty(i)&&(t({telemetryServiceArgs:{expandCollapseAborted:!0}}),e.dataRoles=i=void 0)):(t({telemetryServiceArgs:{expandCollapseAborted:!0}}),e.dataRoles=void 0)),s=this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(o),a=this.fixCoordinates([e.position.x,e.position.y]),o={data:(t=s.getSelectorsByColumn())?[t]:void 0,nodeIndex:i,position:{x:a[0],y:a[1]},copyArgs:e.copyArgs,dataRoles:e.dataRoles},this.host.onContextMenu(o))},b.prototype.onCustomVisualExpandCollapse=function(e,t){var i,s=e&&e.data,a=this.proxy&&this.proxy.plugin&&this.proxy.plugin.capabilities&&this.proxy.plugin.capabilities,o=this.getRowsRoles(a);(null==(i=this.proxy)?void 0:i.isDebug)||null!=(i=null==(i=this.proxy)?void 0:i.plugin)&&i.developerModeVisual;!(s&&null!=s.nodeIsCollapsed&&a&&a.expandCollapse&&o)||!this.dataViewSerializer.sortSelectionIdAccordingToRows(s)||(i=this.dataViewSerializer.getNodeIndexOfSelectionId(s),_.isEmpty(i))?t({telemetryServiceArgs:{aborted:!0}}):(a=this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(s).getSelectorsByColumn(),e.entireLevel?this.host.setLevelExpansionState({data:a,dataRoles:o,isCollapse:!s.nodeIsCollapsed,nodeIndex:i}):this.host.setNodeExpansionState({data:a,dataRoles:o,isCollapse:!s.nodeIsCollapsed,nodeIndex:i}))},b.prototype.exportVisualsContentStatusInternal=function(){var e=this.privilegeService.getExportContentStatus(this.proxy.plugin);return e=0!==e||this.isExportVisualsContentSupported?e:2},b.prototype.exportVisualsContentStatus=function(e){var t=this.exportVisualsContentStatusInternal();this.proxy.postMessage("handleExportVisualsContentStatus",[{status:t,promiseId:e}])},b.prototype.exportVisualsContent=function(e,t,i,s,a,o){var n,r=this,l=this.exportVisualsContentStatusInternal();0===l||3===l?(n=new y.SandboxDownloadContentProxy(this.visualDownloadService,this.telemetryService,this.proxy.plugin,this.instanceId),t=this.proxy.plugin.name+"_"+t,n.exportVisualsContent(e,t,i,s,a).then((function(e){r.proxy.postMessage("handleExportVisualsContent",[e])}))):(o({telemetryServiceArgs:{cvHostEnvironment:null!=(n=this.visualSandboxOptions)&&n.hostEnv?u[this.visualSandboxOptions.hostEnv]:"Undefined"}}),this.logPrivilegesViolation("ExportContent",l),this.proxy.postMessage("handleExportVisualsContent",[{data:{downloadCompleted:!1},promiseId:a}]))},b.prototype.onSwitchFocusModeState=function(e){this.host.onSwitchFocusModeState(e)},b.prototype.onDisplayWarningIcon=function(e,t,i){var s=m.visualHost.warningCodeForCV,a=m.visualHost.warningTitleLimit,o=m.visualHost.warningDetailsLimit,s=new m.visuals.CustomizedWarning(s,e.substr(0,a),t.substr(0,o));this.host.setWarnings([s]),i({telemetryServiceArgs:{isCustom:this.proxy.plugin.custom}})},b.prototype.getRowsRoles=function(e){e=e&&e.dataViewMappings&&e.dataViewMappings[0]&&e.dataViewMappings[0].matrix&&e.dataViewMappings[0].matrix.rows;return e?m.DataViewMapping.RoleNamesCollector.fromMatrixRows(e):void 0},b.prototype.fixCoordinates=function(e){var t;return/Edge\/\d./i.test(navigator.userAgent)&&0<$("body.fullScreen").length||(t=this.element.offset(),e[0]=e[0]*this.scale+t.left,e[1]=e[1]*this.scale+t.top),e},b.prototype.deserializeIdentities=function(e){var t=this.proxy&&this.proxy.plugin&&this.proxy.plugin.apiVersion;if(e&&b.shouldSerializeDataView(t)){for(var i=[],s=0,a=e;s<a.length;s++){var o=a[s];i.push(this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(o))}return i&&_(i).map((function(e){return e.getSelectorsByColumn()})).compact().value()}return e&&_(e).map((function(e){return r.deserializeSelectorsByColumn(e)})).compact().value()},b.prototype.showTooltip=function(e){var t;this.tooltipService&&this.tooltipService.enabled()&&((t=_.cloneDeep(e)).coordinates=this.fixCoordinates(t.coordinates),t.identities=this.deserializeIdentities(e.identities),this.tooltipService.show(t))},b.prototype.moveTooltip=function(e){var t;this.tooltipService&&this.tooltipService.enabled()&&((t=_.cloneDeep(e)).coordinates=this.fixCoordinates(t.coordinates),t.identities=this.deserializeIdentities(e.identities),this.tooltipService.move(t))},b.prototype.hideTooltip=function(e){this.tooltipService&&this.tooltipService.enabled()&&this.tooltipService.hide(e)},b.prototype.getAvailableServicePlans=function(s){var e,a=this;this.telemetryService.logEvent(m.telemetry.VisualEventGetAvailableServicePlans,{visualType:this.proxy.plugin.name}),this.logLicensingStandardizedFeatureEvent("GetAvailableServicePlans"),this.licenseService?(e=this.proxy.plugin.name,e=this.proxy.isDebug?e.substring(0,e.lastIndexOf("_DEBUG")):e,this.licenseService.getServicePlans(e).then((function(e){if(!e)throw Error("servicePlansResponse is undefined");var t=e.servicePlans,i=e.isLicenseInfoAvailable,e=e.isLicenseUnsupported;a.proxy.postMessage("handleLicenseResult",[{promiseId:s,licenseInfoResult:{plans:t,isLicenseUnsupportedEnv:e,isLicenseInfoAvailable:i}}])})).catch((function(){a.telemetryService.logEvent(m.telemetry.VisualEventServicePlansResponseIsUndefined,{visualType:a.proxy.plugin.name}),a.proxy.postMessage("handleLicenseResult",[{promiseId:s,licenseInfoResult:void 0}])}))):(this.telemetryService.logEvent(m.telemetry.VisualEventLicenseServiceIsUndefined,{visualType:this.proxy.plugin.name}),this.proxy.postMessage("handleLicenseResult",[{promiseId:s,licenseInfoResult:void 0}]))},b.prototype.acquireAADToken=function(e){var t=this,i=this.privilegeService.getAcquireAADTokenStatus(this.proxy.plugin),s={data:{accessToken:null},promiseId:e};0===i?this.customVisualsTokenManagerService.acquireTokenForCusotmVisual(this.proxy.plugin).then((function(e){s.data.accessToken=e,t.proxy.postMessage("handleAcquireAADTokenResult",[s])})):this.proxy.postMessage("handleAcquireAADTokenResult",[s])},b.prototype.getAcquireAADTokenStatus=function(e){var t=this.privilegeService.getAcquireAADTokenStatus(this.proxy.plugin),e={promiseId:e,status:t=0===t?this.approvedResourcesService.isApprovedResource(null==(e=this.proxy.plugin)?void 0:e.name)?t:2:t};this.proxy.postMessage("handleGetAcquireAADTokenStatus",[e])},b.prototype.notifyLicenseRequired=function(s,a){return __awaiter(this,void 0,m.Promise,(function(){var t,i;return __generator(this,(function(e){switch(e.label){case 0:return t={promiseId:a,licenseNotificationResult:void 0},[4,this.licenseService.isLicenseUnsupportedEnv()];case 1:return i=e.sent(),null==s||i!==(1===s)||0===s&&1!==this.host.getViewMode()?t.licenseNotificationResult=!1:(this.host.onNotifyLicense(s),t.licenseNotificationResult=!0),this.proxy.postMessage("handleLicenseNotificationResult",[t]),i=null==s?"null":y.CustomVisualsNotificationTypeMapping[s],this.telemetryService.logEvent(m.telemetry.VisualEventNotifyLicenseRequired,{visualType:this.proxy.plugin.name,notificationType:i,responseValue:t.licenseNotificationResult}),this.logLicensingStandardizedFeatureEvent("NotifyLicenseRequired",{notificationType:i,responseValue:t.licenseNotificationResult}),[2]}}))}))},b.prototype.notifyFeatureBlocked=function(i,s){return __awaiter(this,void 0,m.Promise,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return t={promiseId:s,licenseNotificationResult:void 0},[4,this.licenseService.isLicenseUnsupportedEnv()];case 1:return e.sent()?t.licenseNotificationResult=!1:(this.host.onNotifyFeatureBlocked(i),t.licenseNotificationResult=!0),this.proxy.postMessage("handleLicenseNotificationResult",[t]),this.telemetryService.logEvent(m.telemetry.VisualEventNotifyLicenseFeatureBlocked,{visualType:this.proxy.plugin.name,responseValue:t.licenseNotificationResult}),this.logLicensingStandardizedFeatureEvent("NotifyLicenseFeatureBlocked",{responseValue:t.licenseNotificationResult}),[2]}}))}))},b.prototype.clearLicenseNotification=function(e){e={promiseId:e,licenseNotificationResult:!0};this.host.onClearLicenseNotification(),this.proxy.postMessage("handleLicenseNotificationResult",[e]),this.telemetryService.logEvent(m.telemetry.VisualEventClearLicenseNotification,{visualType:this.proxy.plugin.name,responseValue:e.licenseNotificationResult}),this.logLicensingStandardizedFeatureEvent("ClearLicenseNotification",{responseValue:e.licenseNotificationResult})},b.prototype.logLicensingStandardizedFeatureEvent=function(e,t){var i;this.certifiedEventsService.logStandardizedFeatureEvent({visualId:this.proxy.plugin.name,correlationId:null==(i=this.telemetryService.root)?void 0:i.id,activityName:e,activityAttributes:t,featureName:"Custom Visuals"})},b.prototype.loadMoreData=function(s){var a=this;this.canHandleLoadMoreData&&(void 0===s&&(s=!0),this.visualAdapterHostServices)&&(this.canHandleLoadMoreData=!1,this.visualAdapterHostServices.startProgressBar(),this.visualAdapterHostServices.getNextDataSegment().then((function(e){var t,i;(a.proxy&&a.proxy.plugin&&b.shouldSerializeDataView(a.proxy.plugin.apiVersion)&&e&&e.result&&e.result.dataReaderResult&&e.result.dataReaderResult.dataView?(a.dataViewSerializer.identitiesArray,t=a.proxy.plugin,i=e.result.dataReaderResult.dataView,i=o.apply({prototype:i,objectDescriptors:t.capabilities?t.capabilities.objects:null,dataViewMappings:t.capabilities?t.capabilities.dataViewMappings:null,transforms:a.dataTransforms,colorAllocatorFactory:m.visuals.createColorAllocatorFactory(),dataRoles:t.capabilities?t.capabilities.dataRoles:null,drillCapabilities:t.capabilities&&t.capabilities.drilldown,expandCollapseCapabilties:t.capabilities&&t.capabilities.expandCollapse,visualStyle:a.style,keepAllMetadataColumnsCapability:!!t.capabilities&&t.capabilities.keepAllMetadataColumns,featureSwitches:a.featureSwitches}).dataViews[0],i=a.dataViewSerializer.serializeDataViewForCv(i,t.capabilities,!0,S.gt(t.apiVersion,"3.5.9"),e.secondToLastNodesIndex,S.ge(t.apiVersion,"5.3.0")),t.capabilities&&t.capabilities.expandCollapse&&a.visualAdapterHostServices.mergeNewSegmentDataView(e),a.proxy.postMessageAsync("handleLoadMoreDataResult",[i,s,e.secondToLastNodesIndex])):a.proxy.postMessageAsync("handleLoadMoreDataResult",[e&&e.result,s,void 0])).then((function(){e.performanceActivity&&e.performanceActivity.resolve()})),a.canHandleLoadMoreData=!0})).catch((function(e){a.visualAdapterHostServices.stopProgressBar(),a.canHandleLoadMoreData=!0})))},b.prototype.getResourceUrl=function(e,t){var i=this;this.host.authenticationService&&this.host.authenticationService().getResourceUrl(e).then((function(e){i.proxy.postMessage("handleGetResourceUrlResult",[{payload:e,isError:!1,promiseId:t}])})).catch((function(e){i.proxy.postMessage("handleGetResourceUrlResult",[{payload:e,isError:!0,promiseId:t}])}))},b.prototype.getAADAuthenticationToken=function(e,t){var i=this;this.host.authenticationService&&this.host.authenticationService().getAADAuthenticationToken(e).then((function(e){e={payload:e.payload,isError:!1,promiseId:t,resourceUrl:e.resourceUrl};i.proxy.postMessage("handleGetAADAuthenticationTokenResult",[e])})).catch((function(e){i.proxy.postMessage("handleGetAADAuthenticationTokenResult",[{payload:e,isError:!0,promiseId:t}])}))},b.prototype.getAADToken=function(e,t){var i=this;this.host.authenticationService&&this.host.authenticationService().getAADToken(e).then((function(e){i.proxy.postMessage("handleGetAADTokenResult",[{payload:e,isError:!1,promiseId:t}])})).catch((function(e){i.proxy.postMessage("handleGetAADTokenResult",[{payload:e,isError:!0,promiseId:t}])}))},b.prototype.getWACToken=function(e,t,i,s){var a=this;this.host.authenticationService&&this.host.authenticationService().getWACToken(e,t,i).then((function(e){e={payload:e.accessToken,wacToken:e,isError:!1,promiseId:s};a.proxy.postMessage("handleGetWACTokenResult",[e])})).catch((function(e){a.proxy.postMessage("handleGetWACTokenResult",[{payload:e,isError:!0,promiseId:s}])}))},b.prototype.launchUrl=function(e){var t;this.visualSandboxOptions&&_.isFunction(this.visualSandboxOptions.urlLauncher)&&(t=this.proxy.plugin.name,this.visualSandboxOptions.urlLauncher(e,t))},b.prototype.openModalDialog=function(e,t,i,s){var a,o,n,r,l,u,c,d=this;_.isFunction(this.visualSandboxOptions.openIFrameDialog)&&null!=(o=null==(o=this.initOptions)?void 0:o.interactivity)&&o.allowModalDialog?b.dialogBlockedVisuals[this.proxy.plugin.name]?(c={promiseId:s,isError:!0,data:{error:y.VisualErrorType.BlockedByUser}},this.proxy.postMessage("handleModalDialogResult",[c])):(t.position&&1===t.position.type&&(o=this.fixCoordinates([t.position.left,_.clamp(t.position.top,0,t.position.top)]),t.position.left=o[0],t.position.top=o[1]),a=new y.SandboxDialogProxy(y.createWindowMessageProxy(this.promiseFactory),this.telemetryService,this.proxy.plugin,this.instanceId),o=this.proxy.plugin.displayName,n=this.visualSandboxOptions.dialogSandboxUri,r=this.visualSandboxOptions.sandboxPropertiesString,i=JSON.stringify(i),l=this.generateDialogScript(e,i),u=this.proxy.plugin.content.css,(e=this.visualSandboxOptions.openIFrameDialog({title:o,subTitle:t.title,iconUrl:this.proxy.plugin.iconUrl,size:t.size,position:t.position,actionButtons:t.actionButtons,sandboxProperties:r,iframeSrc:n,onIframeLoad:function(e){e.contentWindow&&(a.iframe=e).contentWindow.postMessage({messageType:"DialogContent",style:u,scriptContent:l},"*")},onBlockRequest:function(e){b.dialogBlockedVisuals[d.proxy.plugin.name]=e},onClose:function(e){a.dialog=null;e={promiseId:s,data:{actionId:e,resultState:a.modalDialogState}};d.proxy.postMessage("handleModalDialogResult",[e]),a.destroy()}}))?a.dialog=e:(c={promiseId:s,isError:!0,data:{error:y.VisualErrorType.AlreadyOpen}},this.proxy.postMessage("handleModalDialogResult",[c]))):(c={promiseId:s,isError:!0,data:{error:y.VisualErrorType.NotAllowed}},this.proxy.postMessage("handleModalDialogResult",[c]))},b.prototype.getLocalStorageStatusInternal=function(){var e,t=this.privilegeService.getLocalStorageStatus(this.proxy.plugin);return 0===t&&(e=this.proxy.plugin.name,t=this.proxy.isDebug||this.proxy.plugin.developerModeVisual||this.approvedResourcesService.canUseLocalStorage(e)?0:3),t},b.prototype.isLocalStoragePermitted=function(){var e=this.getLocalStorageStatusInternal(),t=0===e;return t||this.logPrivilegesViolation("LocalStorage",e),t},b.prototype.getStorageStatus=function(e){var t=this.getLocalStorageStatusInternal();this.proxy.postMessage("handleGetStorageStatus",[{promiseId:e,status:t}])},b.prototype.getStorageData=function(e,t){var i;this.isLocalStoragePermitted()?(i={promiseId:t,data:m.localVisualStorageService.getData(null==(i=m.session.getUserInfo())?void 0:i.puid,this.proxy.plugin.name,e)},this.proxy.postMessage("handleGetStorageData",[i])):this.proxy.postMessage("handleGetStorageData",[i={promiseId:t,data:null}])},b.prototype.setStorageData=function(e,t,i){var s;this.isLocalStoragePermitted()?(s=m.localVisualStorageService.setData(null==(s=m.session.getUserInfo())?void 0:s.puid,this.proxy.plugin.name,e,t),this.proxy.postMessage("handleSetStorageData",[{promiseId:i,freeSpace:s,isError:s<=0}])):this.proxy.postMessage("handleSetStorageData",[{promiseId:i,freeSpace:0,isError:!0}])},b.prototype.removeStorageData=function(e){var t;this.isLocalStoragePermitted()&&m.localVisualStorageService.remove(null==(t=m.session.getUserInfo())?void 0:t.puid,this.proxy.plugin.name,e)},b.prototype.onSecurityPolicyViolation=function(e,t,i){this.logPrivilegesViolation("WebAccess",this.privilegeService.getWebAccessStatus(this.proxy.plugin,e),'{"violatedDirective": "'.concat(t,'", "blockedURI": "').concat(e,'"}'))},b.prototype.onGlobalUndefinedGet=function(e){var t;256<e.length||/[^0-9a-zA-Z_\.]/.test(e)||(t="powerbi.visuals.plugins.".concat(this.proxy.plugin.name),e.startsWith(t))||(t="".concat(this.proxy.plugin.name,":").concat(e),b.globalUndefinedGets.has(t))||(b.globalUndefinedGets.add(t),this.logUndefinedGet(e))},b.prototype.stopProgressBar=function(){this.visualAdapterHostServices&&this.visualAdapterHostServices.stopProgressBar()},b.prototype.onRestoreSelection=function(e){return this.proxy.postMessage("onRestoreSelection",[e]),!0},b.prototype.onClearSelection=function(){this.visualSelections=[],this.proxy.postMessage("onRestoreSelection",[])},b.prototype.destroy=function(){this.dataViewSerializer&&this.dataViewSerializer.flushIdentitiesArray(),this.enumerateObjectRepetitionAsyncPromise&&this.enumerateObjectRepetitionAsyncPromise.resolve(null),this.destroyed=!0,this.proxy.postMessage("destroy",[]),this.proxy.destroy()},b.prototype.logPrivilegesViolation=function(e,t,i){var s=this.proxy.plugin.name,a=null!=(a=this.visualSandboxOptions)&&a.hostEnv?u[this.visualSandboxOptions.hostEnv]:"Undefined";this.telemetryService.logEvent(m.telemetry.VisualEventPrivilegesViolation,{visualType:s,environment:a,privilege:e,status:c[t],parameters:i})},b.prototype.logUndefinedGet=function(e){var t=this.proxy.plugin.name,i=window.externalMigration;this.telemetryService.logEvent(m.telemetry.VisualEventExternalMigrationUndefinedGet,{visualType:t,property:e,externalMigration:i})},b.prototype.resize=function(e){this.scale=e.scale,this.element&&!this.destroyed&&this.element.children().css({width:e.width,height:e.height})},b.shouldSerializeDataView=function(e){return!(!e||!m.visualSandbox.SandboxDataViewSerializer)&&(S.gt(e,"2.0.0")||S.eq(e,"2.0.0"))},b.prototype.shouldUpdateWithCachedData=function(e){return e.visualDefinitionData&&e.visualDefinitionData.dataViewSource&&this.lastDataViewSource||this.dataViewSerializer.flushIdentitiesArray(),e.visualDefinitionData&&e.visualDefinitionData.dataViewSource&&e.visualDefinitionData.dataViewSource===this.lastDataViewSource},b.prototype.generateDialogScript=function(e,t){return this.proxy.plugin.content.js+"\n"+'const host = {\n                setResult: (result) => {\n                    const msg = JSON.stringify({ eventName: "onDialogSetState", arguments: [result] });\n                    parent.postMessage(msg, "*");\n                },\n                close: (actionId, result) => {\n                    const msg = JSON.stringify({ eventName: "onDialogClose", arguments: [actionId, result] });\n                    parent.postMessage(msg, "*");\n                }\n            };\n\n            const element = document.body;\n            const dialogConstructionOptions = { host: host, element: element };\n            '.concat(this.proxy.plugin.name,".default.createModalDialog('").concat(e,"', dialogConstructionOptions, ").concat(t,');\n            \n            const msg = JSON.stringify( {eventName: "onDialogResize", arguments: [document.body.scrollWidth, document.body.scrollHeight] });\n            parent.postMessage(msg, "*");')},b.prototype.applyIdentityFilter=function(e,t,i,s){var e=e[0].target,a=this.proxy&&this.proxy.plugin&&this.proxy.plugin.apiVersion;S.lt(a,"3.9.0")||(s=e&&0<e.length?0:1,a=this.dataViewSerializer.convertOpaqueIdentitiesToScopeIds(e),this.host.applyIdentityFilter(a,t,i,s))},b.prototype.applyCustomSort=function(e,t){var i=!(null==(i=null==(i=null==(i=null==(i=this.proxy)?void 0:i.plugin)?void 0:i.capabilities)?void 0:i.sorting)||!i.custom);e&&!!e.sortDescriptors&&i?(i={sortDescriptors:e.sortDescriptors,suppressAnnouncements:!0},this.host.onCustomSort(i)):((null==(e=this.proxy)?void 0:e.isDebug)||null!=(e=null==(i=this.proxy)?void 0:i.plugin)&&e.developerModeVisual,t({telemetryServiceArgs:{aborted:!0}}))},b.dialogBlockedVisuals={},b.globalUndefinedGets=new Set,__decorate([e()],b.prototype,"onSelect",null),__decorate([e()],b.prototype,"transformCvSelectionIdsAndSelect",null),__decorate([e()],b.prototype,"onUpdateResult",null),__decorate([e()],b.prototype,"onRelayUIEvent",null),__decorate([e()],b.prototype,"persistProperties",null),__decorate([e()],b.prototype,"applyJsonFilter",null),__decorate([e()],b.prototype,"drill",null),__decorate([e(),t("Context Menu",!0)],b.prototype,"onCustomVisualContextMenu",null),__decorate([e(),t("Expand/Collapse",!0)],b.prototype,"onCustomVisualExpandCollapse",null),__decorate([e()],b.prototype,"exportVisualsContentStatus",null),__decorate([e(),t("Download a File From CV",!0)],b.prototype,"exportVisualsContent",null),__decorate([e()],b.prototype,"onSwitchFocusModeState",null),__decorate([e(),t("Informative Icon",!0)],b.prototype,"onDisplayWarningIcon",null),__decorate([e(),t("Report Tooltips")],b.prototype,"showTooltip",null),__decorate([e()],b.prototype,"moveTooltip",null),__decorate([e()],b.prototype,"hideTooltip",null),__decorate([e()],b.prototype,"getAvailableServicePlans",null),__decorate([e()],b.prototype,"acquireAADToken",null),__decorate([e()],b.prototype,"getAcquireAADTokenStatus",null),__decorate([e()],b.prototype,"notifyLicenseRequired",null),__decorate([e()],b.prototype,"notifyFeatureBlocked",null),__decorate([e()],b.prototype,"clearLicenseNotification",null),__decorate([e(),t("Fetch More Data")],b.prototype,"loadMoreData",null),__decorate([e()],b.prototype,"launchUrl",null),__decorate([e(),t("Modal Dialog")],b.prototype,"openModalDialog",null),__decorate([e()],b.prototype,"getStorageStatus",null),__decorate([e()],b.prototype,"getStorageData",null),__decorate([e()],b.prototype,"setStorageData",null),__decorate([e()],b.prototype,"removeStorageData",null),__decorate([e()],b.prototype,"onSecurityPolicyViolation",null),__decorate([e()],b.prototype,"onGlobalUndefinedGet",null),__decorate([e()],b.prototype,"stopProgressBar",null),__decorate([e()],b.prototype,"applyIdentityFilter",null),__decorate([e(),t("Apply Custom Sort",!0)],b.prototype,"applyCustomSort",null),y.SandboxDelegate=b})(powerbi=powerbi||{}),(function(o){var n;function e(e,t,i){var s=this;this.proxy=e,this.plugin=t,this.telemetryService=i,this.firstUpdateMessageSent=!1,this.isPluginReady=!1,this.pluginReadyDeferred=new o.Deferred,this.proxy.setPluginReadyHandler((function(){s.isPluginReady=!0,s.pluginReadyDeferred.resolve()})),this.updateWithDataDeferred=new o.Deferred,o.Promise.allSettled([this.pluginReadyDeferred.promise,this.updateWithDataDeferred.promise]).then((function(){s.postUpdateMessage()}))}n=o.visualHost||(o.visualHost={}),e.prototype.update=function(e){var t;if(this.firstUpdateMessageSent)return this.proxy.update(e);if(this.updateMessage){this.updateMessage.type|=e.type,0<(null==(t=e.dataViews)?void 0:t.length)&&(this.updateMessage.dataViews=e.dataViews);var i,s=e,a=_.clone(this.updateMessage);for(i in s)"type"!==i&&"dataViews"!==i&&void 0!==s[i]&&(a[i]=s[i]);this.updateMessage=a}else this.updateMessage=e,this.updateMessageSentDeferred=new o.Deferred;return n.shouldNotUpdateVisual(e,this.plugin)||this.updateWithDataDeferred.resolve(),this.updateMessageSentDeferred.promise},e.prototype.postUpdateMessage=function(){var e=this;this.updateMessage&&this.proxy.update(this.updateMessage).then((function(){e.updateMessage=void 0,e.firstUpdateMessageSent=!0,e.updateMessageSentDeferred.resolve()}))},e.prototype.destroy=function(){this.isPluginReady&&this.firstUpdateMessageSent||this.telemetryService&&this.telemetryService.logEvent(o.telemetry.VisualEventUpdateTimeOut,{visualType:this.plugin.name,parentId:this.telemetryService.root.id}),this.updateMessage=void 0},n.UpdateMessagesProcessor=e})(powerbi=powerbi||{}),(function(a){var r,l,u;function c(){}r=a.visualHost||(a.visualHost={}),l=a.contracts.ResourcePackageItemType,u=jsCommon.Trace,c.cloneThemeCollection=function(e){return _.clone(e)},c.loadHighContrastTheme=function(e,t,i,s,a){return a&&!i.isThemeLoaded(a)?c.loadTheme(2,e,t,i,s,a):e.resolve()},c.loadThemeAndBaseTheme=function(t,e,i,s,a){try{var o=[],n=a.customTheme,r=a.baseTheme&&a.baseTheme.name,l=(n&&n.name&&!i.isThemeLoaded(n.name)&&o.push(c.loadTheme(a.customTheme.type,t,e,i,s,n.name,n.version,!0)),r&&!i.isThemeLoaded(r)&&o.push(c.loadTheme(a.baseTheme.type,t,e,i,s,r)),t.defer());return t.all(o).finally((function(){var e=!0;n&&n.name&&!i.isThemeLoaded(n.name)&&u.error("Error loading custom theme",e=!1),r&&!i.isThemeLoaded(r)&&u.error("Error loading base theme",e=!1),l.resolve(e)})),l.promise}catch(e){return u.error("Error loading report theme - ".concat(c.getLoadError(e))),t.resolve(!1)}},c.loadTheme=function(e,t,i,s,a,o,n,r){return 1===e?c.loadRegisteredResourceTheme(t,i,s,a,o,n):2===e?c.loadSharedResourceTheme(o,a,s,i,t,n,r):void 0},c.getLoadError=function(e){return r.ResourcePackageReferenceResolver.getLoadAndResolveErrorReason(e)},c.loadRegisteredResourceTheme=function(e,t,i,s,a,o){return r.ResourcePackageReferenceResolver.loadRegisteredResourceAsDecodedString(e,t,s,a).then((function(e){c.resolveLoadedTheme(a,e,i,o)})).catch((function(e){u.error("Error loading theme - ".concat(c.getLoadError(e)))}))},c.loadSharedResourceTheme=function(t,e,i,s,a,o,n){return r.ResourcePackageReferenceResolver.loadAndResolveItemContent(e,{packageType:2,itemName:t},s,a,{itemTypeFromReference:n?l.CustomTheme:l.BaseTheme}).then((function(e){c.resolveLoadedTheme(t,e,i,o)})).catch((function(e){u.error("Error loading base theme ".concat(t," - ").concat(c.getLoadError(e)))}))},c.resolveLoadedTheme=function(e,t,i,s){i.isThemeLoaded(e)||(t=a.common.parseCustomVisualTheme(t))&&i.addCustomTheme(e,t,s)},r.ThemeUtils=c})(powerbi=powerbi||{}),(function(s){var o,a,n,r,l;function e(e,t,i){this.httpService=e,this.uri=t,this.includePackageIdInUri=i}o=s.visualHost||(s.visualHost={}),a=o.proxies||(o.proxies={}),n=jsCommon.Utility,r=window,a.getHttpResourceItemProxy=function(e){var t=s.visualSandbox.getResourceLoaderUrl(),i=!0===r.resourceLoaderIncludePackageId;return a.createHttpResourceItemProxy(e,t,i)},a.getSharedResourceItemProxy=function(e){var t=e.getAbsoluteUri("/sharedresources");return a.createHttpResourceItemProxy(e,t,!1)},a.createHttpResourceItemProxy=function(e,t,i){return new l(e,t,i)},e.prototype.get=function(e,t,i,s){var a=this.uri,e=(this.includePackageIdInUri&&(a=this.uri+e+"/"),n.urlCombine(a,_.map(i.split("/"),(function(e){return encodeURIComponent(e)})).join("/"))),a=this.httpService.powerbiRequestOptions();return a.timeout=o.resourceLoaderHttpTimeout,a.responseType="text",s&&null!=s.retries&&(a.retryCount=s.retries),this.httpService.get(e,a).then((function(e){return e.data}))},e.prototype.getBlob=function(e,t,i,s){var a=this.uri,e=(this.includePackageIdInUri&&(a=this.uri+e+"/"),n.urlCombine(a,encodeURIComponent(i))),a=this.httpService.powerbiRequestOptions();return a.responseType=jsCommon.HttpConstants.Blob,s&&null!=s.retries&&(a.retryCount=s.retries),this.httpService.get(e,a).then((function(e){return e.data}))},l=e})(powerbi=powerbi||{});;
!(function(){var W={5:function(b,r,t){"use strict";t.r(r),t.d(r,{__assign:function(){return f},__asyncDelegator:function(){return R},__asyncGenerator:function(){return B},__asyncValues:function(){return j},__await:function(){return I},__awaiter:function(){return h},__classPrivateFieldGet:function(){return N},__classPrivateFieldSet:function(){return K},__createBinding:function(){return x},__decorate:function(){return y},__exportStar:function(){return v},__extends:function(){return $},__generator:function(){return C},__importDefault:function(){return V},__importStar:function(){return z},__makeTemplateObject:function(){return U},__metadata:function(){return p},__param:function(){return m},__read:function(){return u},__rest:function(){return g},__spread:function(){return a},__spreadArray:function(){return D},__spreadArrays:function(){return L},__values:function(){return s}});var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(o[d]=l[d])})(e,n)};function $(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}var f=function(){return f=Object.assign||function(n){for(var o,l=1,d=arguments.length;l<d;l++)for(var c in o=arguments[l])Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c]);return n},f.apply(this,arguments)};function g(e,n){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(l=Object.getOwnPropertySymbols(e);d<l.length;d++)n.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(e,l[d])&&(o[l[d]]=e[l[d]])}return o}function y(e,n,o,l){var w,d=arguments.length,c=d<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,o):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,n,o,l);else for(var _=e.length-1;_>=0;_--)(w=e[_])&&(c=(d<3?w(c):d>3?w(n,o,c):w(n,o))||c);return d>3&&c&&Object.defineProperty(n,o,c),c}function m(e,n){return function(o,l){n(o,l,e)}}function p(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function h(e,n,o,l){return new(o||(o=Promise))(function(c,w){function _(T){try{S(l.next(T))}catch(k){w(k)}}function O(T){try{S(l.throw(T))}catch(k){w(k)}}function S(T){T.done?c(T.value):(function(c){return c instanceof o?c:new o(function(w){w(c)})})(T.value).then(_,O)}S((l=l.apply(e,n||[])).next())})}function C(e,n){var l,d,c,w,o={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return w={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function _(S){return function(T){return (function(S){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,d&&(c=2&S[0]?d.return:S[0]?d.throw||((c=d.return)&&c.call(d),0):d.next)&&!(c=c.call(d,S[1])).done)return c;switch(d=0,c&&(S=[2&S[0],c.value]),S[0]){case 0:case 1:c=S;break;case 4:return o.label++,{value:S[1],done:!1};case 5:o.label++,d=S[1],S=[0];continue;case 7:S=o.ops.pop(),o.trys.pop();continue;default:if(!(c=(c=o.trys).length>0&&c[c.length-1])&&(6===S[0]||2===S[0])){o=0;continue}if(3===S[0]&&(!c||S[1]>c[0]&&S[1]<c[3])){o.label=S[1];break}if(6===S[0]&&o.label<c[1]){o.label=c[1],c=S;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(S);break}c[2]&&o.ops.pop(),o.trys.pop();continue}S=n.call(e,o)}catch(T){S=[6,T],d=0}finally{l=c=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}})([S,T])}}}var x=Object.create?function(e,n,o,l){void 0===l&&(l=o),Object.defineProperty(e,l,{enumerable:!0,get:function(){return n[o]}})}:function(e,n,o,l){void 0===l&&(l=o),e[l]=n[o]};function v(e,n){for(var o in e)"default"!==o&&!Object.prototype.hasOwnProperty.call(n,o)&&x(n,e,o)}function s(e){var n="function"==typeof Symbol&&Symbol.iterator,o=n&&e[n],l=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&l>=e.length&&(e=void 0),{value:e&&e[l++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,n){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var d,w,l=o.call(e),c=[];try{for(;(void 0===n||n-- >0)&&!(d=l.next()).done;)c.push(d.value)}catch(_){w={error:_}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(w)throw w.error}}return c}function a(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(u(arguments[n]));return e}function L(){for(var e=0,n=0,o=arguments.length;n<o;n++)e+=arguments[n].length;var l=Array(e),d=0;for(n=0;n<o;n++)for(var c=arguments[n],w=0,_=c.length;w<_;w++,d++)l[d]=c[w];return l}function D(e,n,o){if(o||2===arguments.length)for(var c,l=0,d=n.length;l<d;l++)(c||!(l in n))&&(c||(c=Array.prototype.slice.call(n,0,l)),c[l]=n[l]);return e.concat(c||n)}function I(e){return this instanceof I?(this.v=e,this):new I(e)}function B(e,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,l=o.apply(e,n||[]),c=[];return d={},w("next"),w("throw"),w("return"),d[Symbol.asyncIterator]=function(){return this},d;function w(E){l[E]&&(d[E]=function(P){return new Promise(function(G,X){c.push([E,P,G,X])>1||_(E,P)})})}function _(E,P){try{!(function(E){E.value instanceof I?Promise.resolve(E.value.v).then(S,T):k(c[0][2],E)})(l[E](P))}catch(G){k(c[0][3],G)}}function S(E){_("next",E)}function T(E){_("throw",E)}function k(E,P){E(P),c.shift(),c.length&&_(c[0][0],c[0][1])}}function R(e){var n,o;return n={},l("next"),l("throw",(function(d){throw d})),l("return"),n[Symbol.iterator]=function(){return this},n;function l(d,c){n[d]=e[d]?function(w){return(o=!o)?{value:I(e[d](w)),done:"return"===d}:c?c(w):w}:c}}function j(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=e[Symbol.asyncIterator];return n?n.call(e):(e=s(e),o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o);function l(c){o[c]=e[c]&&function(w){return new Promise(function(_,O){!(function(c,w,_,O){Promise.resolve(O).then((function(S){c({value:S,done:_})}),w)})(_,O,(w=e[c](w)).done,w.value)})}}}function U(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}var A=Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n};function z(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&x(n,e,o);return A(n,e),n}function V(e){return e&&e.__esModule?e:{default:e}}function N(e,n,o,l){if("a"===o&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?e!==n||!l:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?l:"a"===o?l.call(e):l?l.value:n.get(e)}function K(e,n,o,l,d){if("m"===l)throw new TypeError("Private method is not writable");if("a"===l&&!d)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?e!==n||!d:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===l?d.call(e,o):d?d.value=o:n.set(e,o),o}},486:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var f,g,m,i=t(65),$=t(763);(function(h){var C,s;(s=C=h.AlertKind||(h.AlertKind={}))[s.Info=0]="Info",s[s.Warning=1]="Warning",s[s.Security=2]="Security",s[s.Error=3]="Error",s[s.Hidden=4]="Hidden";var x=(function(){function s(u){this.kindToIcon={info:"info",warning:"warning",security:"blockedsite",error:"error"},this._element=u[0]}return s.prototype.$onInit=function(){if(void 0===this.kind&&(this.kind=C[C.Hidden]),!this.validKindString(this.kind))throw Error("Unknown alert kind: "+this.kind)},s.prototype.alertKind=function(){if(this.kind)return this.setAlertHeight(this._element,this.kind),this.kind.toLowerCase()},s.prototype.iconName=function(){return this.kindToIcon[this.kind]},s.prototype.getInfoMessage=function(){return this.messageInfo},s.prototype.getWarningMessage=function(){return this.messageWarning},s.prototype.getSecurityMessage=function(){return this.messageSecurity},s.prototype.getErrorMessage=function(){return this.messageError},s.stringToKind=function(u){if(void 0!==u){var a=$.ElementUtil.capitalizeString(u.trim());return C[a]}},s.prototype.validKindString=function(u){return void 0!==s.stringToKind(u)},s.prototype.setAlertHeight=function(u,a){var L=u,D=L.querySelector(".alert").scrollHeight;L.setAttribute("style","hidden"!==a?"height: "+D+"px;":"height: 0px;")},s.prototype.isCompact=function(){return!!$.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},s.$inject=["$element"],s})();h.AlertController=x;var v=function(){this.bindings={kind:"<",messageInfo:"@",messageWarning:"@",messageSecurity:"@",messageError:"@"},this.templateUrl="components/alert/alert.html",this.controller=x,this.require={contextCtrlr:"?^^pbiContext"}};h.AlertComponent=v,i.StyleLibrary.application().component("pbiAlert",new v)})((m=(g=f||(f={})).stylelibrary||(g.stylelibrary={})).components||(m.components={}))},308:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var y,m,h,i=t(5),$=t(65),f=t(59),g=t(763);(function(x){var v,a;(a=v=x.ButtonKind||(x.ButtonKind={}))[a.Box=0]="Box",a[a.Text=1]="Text",a[a.Icon=2]="Icon";var s=(function(a){function L(){var D=null!==a&&a.apply(this,arguments)||this;return D.iconSize=f.IconSize[f.IconSize.Small].toLowerCase(),D}return i.__extends(L,a),L.prototype.$onInit=function(){if(void 0===this.primary&&(this.primary="false"),void 0===this.kind&&(this.kind=L.kindToString(v.Box)),!this.validKindString(this.kind))throw Error("Unknown button kind: "+this.kind)},L.prototype.buttonKind=function(){return this.kind},L.prototype.iconSizeName=function(){return this.showIcon()&&this.hasLabel()?(void 0!==this.iconSize&&f.IconSize[f.IconSize.Small].toLowerCase(),this.isCompact()?f.IconSize[f.IconSize.Mini].toLowerCase():f.IconSize[f.IconSize.Small].toLowerCase()):this.iconSize},L.prototype.isPrimary=function(){return g.ElementUtil.attributeStringToBoolean(this.primary,L.PRIMARY_VALUES)},L.prototype.showIcon=function(){return L.stringToKind(this.kind)===v.Icon||!!this.iconName},L.prototype.isIcon=function(){return L.stringToKind(this.kind)===v.Icon},L.prototype.isText=function(){return L.stringToKind(this.kind)===v.Text},L.prototype.isBox=function(){return void 0===this.kind||L.stringToKind(this.kind)===v.Box},L.prototype.validKindString=function(D){return void 0!==L.stringToKind(D)},L.stringToKind=function(D){if(void 0!==D){var I=g.ElementUtil.capitalizeString(D.trim());return v[I]}},L.kindToString=function(D){return v[D]},L.prototype.isCompact=function(){return!!g.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},L.PRIMARY_VALUES=["primary","true",""],L})(g.BaseElement);x.ButtonController=s;var u=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",primary:"@",kind:"@",iconName:"@",iconSize:"@",dynamicLabelUpdate:"@"},this.require={contextCtrlr:"?^^pbiContext"},this.templateUrl="components/button/button.html",this.controller=s};x.ButtonComponent=u,$.StyleLibrary.application().component("pbiButton",new u)})((h=(m=y||(y={})).stylelibrary||(m.stylelibrary={})).components||(h.components={}))},400:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var g,y,p,i=t(5),$=t(65),f=t(763);(function(C){var x=(function(s){function u(){var a=null!==s&&s.apply(this,arguments)||this;return a._context="",a}return i.__extends(u,s),Object.defineProperty(u.prototype,"context",{get:function(){return this._context},set:function(L){this._context=L},enumerable:!1,configurable:!0}),u.prototype.$onInit=function(){void 0===this.labelPosition&&(this.labelPosition="right")},u.prototype.proxyChange=function(){this.modelCtrlr.$setViewValue(this.proxyModel)},u.prototype.isChecked=function(){return!!this.proxyModel},u.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},u})(f.BaseElement);C.CheckboxController=x;var v=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",proxyModel:"<ngModel",labelPosition:"@",dynamiclabel:"@dynamicLabel",arialabel:"@ariaLabel",arialabelledby:"@ariaLabelledby",ariadescribedby:"@ariaDescribedby"},this.controller=x,this.templateUrl="components/checkbox/checkbox.html",this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"}};C.CheckboxComponent=v,$.StyleLibrary.application().component("pbiCheckbox",new v)})((p=(y=g||(g={})).stylelibrary||(y.stylelibrary={})).components||(p.components={}))},763:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ElementUtil=r.BaseElement=r.DisableableElement=r.ContextualUtil=void 0;var i=t(5);r.ContextualUtil=(function(){function m(){}return m.isContext=function(p,h){return void 0!==p&&p.split(" ").filter((function(C){return C===h})).length>0},m})();var f=(function(){function m(){}return m.prototype.isDisabled=function(){return void 0!==this.disabled&&this.disabled},m})();r.DisableableElement=f;var g=(function(m){function p(){var h=null!==m&&m.apply(this,arguments)||this;return h.internalId="_pbi",h}return i.__extends(p,m),p.prototype.hasLabel=function(){var h=this.hasNoLabelAttribute(),C=this.hasValidNoLabelAttribute(),x=this.hasSpecifiedNoLabelValue(),v=this.hasLabelAttribute(),s=this.hasValidLabelAttribute(),u=!h,a=C&&!x,D=!v,I=v&&!s;return!(u&&D)&&!(u&&I)&&(!(!u||!s)||!(a&&D)&&!(a&&I)&&(!(!a||!s)||!(x&&D)&&!(x&&I)&&(x&&s?!this.noLabelValue():void 0)))},p.prototype.labelKey=function(){return this.label},p.prototype.createInternalId=function(){return this.id?this.id+this.internalId:this.id},p.prototype.hasLabelAttribute=function(){return void 0!==this.label},p.prototype.hasValidLabelAttribute=function(){return!(!this.hasLabelAttribute()||""===this.label)},p.prototype.hasNoLabelAttribute=function(){return void 0!==this.labelless},p.prototype.hasValidNoLabelAttribute=function(){return!!this.hasNoLabelAttribute()},p.prototype.noLabelValue=function(){return!(!this.hasNoLabelAttribute()||!this.hasValidNoLabelAttribute())&&(!!y.attributeStringToBoolean(this.labelless.toString(),["true","","no-label"])||(y.attributeStringToBoolean(this.labelless.toString(),["false"]),!1))},p.prototype.hasSpecifiedNoLabelValue=function(){return!(!this.hasValidNoLabelAttribute()||""===this.labelless)},p})(f);r.BaseElement=g;var y=(function(){function m(){}return m.attributeStringToBoolean=function(p,h){return h.reduce((function(C,x,v,s){return C||x===p}),!1)},m.capitalizeString=function(p){return p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()},m})();r.ElementUtil=y},312:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ContextComponent=r.ContextController=void 0;var i=t(5),$=t(65),f=t(763),g=(function(m){function p(){var h=m.call(this)||this;return h.context="",h}return i.__extends(p,m),p.prototype.$onInit=function(){void 0===this.context&&(this.context="")},p.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},p})(f.BaseElement);r.ContextController=g;var y=(function(){return function(){this.bindings={disabled:"<ngDisabled",context:"@context"},this.transclude=!0,this.controller=g,this.template="<ng-transclude></ng-transclude>",this.require={contextCtrlr:"?^^pbiContext"}}})();r.ContextComponent=y,$.StyleLibrary.application().component("pbiContext",new y)},765:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var f,g,m,i=t(65),$=t(763);(function(h){var C=(function(){function v(){}return v.prototype.iconClass=function(){return["glyphicon","pbi-glyph-"+this.name,"glyph-"+this.size.toString()].join(" ")},v.prototype.isCompact=function(){return!!$.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},v})();h.IconController=C;var x=function(){this.bindings={name:"@",size:"@"},this.template='<i ng-class="$ctrl.iconClass()"></i>',this.controller=C,this.require={contextCtrlr:"?^^pbiContext"}};h.IconComponent=x,i.StyleLibrary.application().component("pbiIcon",new x)})((m=(g=f||(f={})).stylelibrary||(g.stylelibrary={})).components||(m.components={}))},59:function(b,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IconSize=void 0,r.IconSize=(function(i){return i[i.Micro=0]="Micro",i[i.Mini=1]="Mini",i[i.Small=2]="Small",i[i.Normal=3]="Normal",i[i.Medium=4]="Medium",i[i.Large=5]="Large",i})(r.IconSize||{})},208:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var g,y,p,i=t(5),$=t(65),f=t(763);(function(C){var x=(function(u){function a(){return u.call(this)||this}return i.__extends(a,u),a.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},a})(f.BaseElement);C.LinkController=x;var s=(function(u){function a(){var L=null!==u&&u.apply(this,arguments)||this;return L.require={contextCtrlr:"?pbiContext"},L}return i.__extends(a,u),a})((function(){this.bindings={id:"@",disabled:"<ngDisabled",label:"@",guid:"@"},this.controller=x,this.templateUrl="components/link/link.html"}));C.PBILinkComponent=s,$.StyleLibrary.application().component("pbiLink",new s)})((p=(y=g||(g={})).stylelibrary||(y.stylelibrary={})).components||(p.components={}))},331:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var g,y,p,i=t(5),$=t(65),f=t(763);(function(C){var x=(function(s){function u(){return null!==s&&s.apply(this,arguments)||this}return i.__extends(u,s),u.prototype.proxyChange=function(){this.groupCtrlr.modelCtrlr.$setViewValue(this.value)},u.prototype.isChecked=function(){return this.groupCtrlr.proxyModel===this.value},u.prototype.isCompositeDisabled=function(){return this.isDisabled()||this.groupCtrlr.isDisabled()},u.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},u.prototype.appendInputId=function(a){return a&&a+"Input"},u})(f.BaseElement);C.RadioController=x;var v=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",value:"<ngValue"},this.require={groupCtrlr:"^^pbiRadioGroupLegacy",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/radio/radio.html",this.controller=x};C.RadioComponenet=v,$.StyleLibrary.application().component("pbiRadio",new v)})((p=(y=g||(g={})).stylelibrary||(y.stylelibrary={})).components||(p.components={}))},534:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var g,y,p,i=t(5),$=t(65),f=t(763);(function(C){var x=(function(s){function u(){return null!==s&&s.apply(this,arguments)||this}return i.__extends(u,s),u.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},u})(f.BaseElement);C.RadioGroupController=x;var v=function(){this.bindings={id:"@",name:"@",label:"@",labelless:"@noLabel",disabled:"<ngDisabled",proxyModel:"<ngModel"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.transclude=!0,this.templateUrl="components/radio/radioGroup.html",this.controller=x};C.RadioGroupComponenet=v,$.StyleLibrary.application().component("pbiRadioGroupLegacy",new v)})((p=(y=g||(g={})).stylelibrary||(y.stylelibrary={})).components||(p.components={}))},913:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var g,y,p,i=t(5),$=t(65),f=t(763);(function(C){var x=(function(s){function u(){return s.call(this)||this}return i.__extends(u,s),u.prototype.$onInit=function(){this.selectCtrlr.addOption(this)},u.prototype.$onDestroy=function(){this.selectCtrlr.removeOption(this)},u.prototype.isSelected=function(){return this.selectCtrlr.isOptionSelected(this)},u.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},u})(f.BaseElement);C.OptionController=x;var v=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"<noLabel",value:"<ngValue"},this.require={selectCtrlr:"^^pbiSelect",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/select/option.html",this.controller=x};C.OptionComponent=v,$.StyleLibrary.application().component("pbiOption",new v)})((p=(y=g||(g={})).stylelibrary||(y.stylelibrary={})).components||(p.components={}))},716:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var g,y,p,i=t(5),$=t(65),f=t(763);(function(C){var x=(function(s){function u(){var a=s.call(this)||this;return a.options=[],a}return i.__extends(u,s),u.prototype.addOption=function(a){0===this.options.length&&(this._selectedOption=a),this.options.push(a)},u.prototype.removeOption=function(a){},u.prototype.selectItem=function(a){this._selectedOption=a},u.prototype.isOptionSelected=function(a){return this._selectedOption===a},u.prototype.proxyChange=function(){this.modelCtrlr.$setViewValue(this.proxyModel)},u.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},u})(f.BaseElement);C.SelectController=x;var v=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"<noLabel",proxyModel:"<ngModel",optionsModel:"<optionsModel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.transclude=!0,this.templateUrl="components/select/select.html",this.controller=x};C.SelectComponent=v,$.StyleLibrary.application().component("pbiSelect",new v)})((p=(y=g||(g={})).stylelibrary||(y.stylelibrary={})).components||(p.components={}))},748:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var y,m,h,i=t(5),$=t(65),f=t(763),g=t(180);(function(x){var v=(function(u){function a(){return u.call(this)||this}return i.__extends(a,u),a.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},a})(g.TextBaseElement);x.TextareaController=v;var s=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",proxyModel:"<ngModel",placeholder:"@",required:"@",maxlength:"@",minlength:"@",invalidMessage:"@"},this.require={modelCtrlr:"ngModel",ontextCtrlr:"?^^pbiContext"},this.templateUrl="components/textarea/textarea.html",this.controller=v};x.TextareaComponent=s,$.StyleLibrary.application().component("pbiTextarea",new s)})((h=(m=y||(y={})).stylelibrary||(m.stylelibrary={})).components||(h.components={}))},180:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TextBaseElement=void 0;var g,y,p,i=t(5),$=t(65),f=t(763);(function(C){var x=(function(u){function a(){var L=u.call(this)||this;return L.$onInit=function(){void 0===L.proxyModel&&L.modelCtrlr.$setViewValue("")},L}return i.__extends(a,u),a.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},a.prototype.proxyChange=function(){this.setCtrlrValidity(),this.modelCtrlr.$setViewValue(this.proxyModel)},a.prototype.setCtrlrValidity=function(){this.modelCtrlr.$setValidity("undefinedProxyModel",void 0!==this.proxyModel)},a.prototype.getPlaceholder=function(){return this.placeholder},a.prototype.isRequired=function(){return f.ElementUtil.attributeStringToBoolean(this.required,a.REQUIRED_VALUES)},a.prototype.maxLength=function(){return parseInt(this.maxlength,a.BASE_10)||a.INF_MAX_LENGTH},a.prototype.minLength=function(){return parseInt(this.minlength,a.BASE_10)||a.INF_MAX_LENGTH},a.prototype.getAlertKind=function(){return this.modelCtrlr.$invalid&&this.invalidMessage&&!this.isDisabled()?"error":"hidden"},a.INF_MAX_LENGTH=void 0,a.BASE_10=10,a.REQUIRED_VALUES=["required","true",""],a})(f.BaseElement);C.TextBaseElement=x;var v=(function(u){function a(){return u.call(this)||this}return i.__extends(a,u),a})(x);C.TextfieldController=v;var s=function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",arialabel:"@",arialabelledby:"@",ariadescribedby:"@",proxyModel:"<ngModel",placeholder:"@",required:"@",maxlength:"@",minlength:"@",invalidMessage:"@"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/textfield/textfield.html",this.controller=v};C.TextfieldComponent=s,$.StyleLibrary.application().component("pbiTextfield",new s)})((p=(y=g||(g={})).stylelibrary||(y.stylelibrary={})).components||(p.components={})),r.TextBaseElement=g.stylelibrary.components.TextBaseElement},111:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ToggleComponenet=r.ToggleController=void 0;var i=t(5),$=t(65),f=t(763),g=(function(m){function p(){var h=m.call(this)||this;return h.labelId="pbiToggle_"+Math.random().toString(36).substr(2,9),h}return i.__extends(p,m),p.prototype.proxyChange=function(){this.modelCtrlr.$setViewValue(this.proxyModel)},p.prototype.isChecked=function(){return!!this.proxyModel},p.prototype.isCompact=function(){return!!f.ContextualUtil.isContext(this.context,"compact")||!!this.contextCtrlr&&this.contextCtrlr.isCompact()},p.prototype.getLabelId=function(){return this.id?this.createInternalId():this.labelId},p})(f.BaseElement);r.ToggleController=g;var y=(function(){return function(){this.bindings={id:"@",name:"@",disabled:"<ngDisabled",label:"@",labelless:"@noLabel",title:"@",proxyModel:"<ngModel",arialabel:"@",ariahidden:"@",arialabelledby:"@",ariadescribedby:"@",onStateText:"@",offStateText:"@"},this.require={modelCtrlr:"ngModel",contextCtrlr:"?^^pbiContext"},this.templateUrl="components/toggle/toggle.html",this.controller=g}})();r.ToggleComponenet=y,$.StyleLibrary.application().component("pbiToggle",new y)},886:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(548),t(349),t(676),t(495),t(290),t(719),t(212),t(615),t(197),t(742),t(899)},682:function(b,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(763),t(312),t(486),t(308),t(400),t(765),t(208),t(331),t(534),t(716),t(913),t(748),t(180),t(111)},65:function(b,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StyleLibrary=void 0,r.StyleLibrary=(function(){function i(){}return i.application=function(){return i.slib},i.slib=angular.module("stylelibrary",[]),i})()},548:function(b){var t="components/alert/alert.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement alert" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<div\r\n\t\tclass="alertWrapper {{$ctrl.alertKind()}}"\r\n\t\tng-class="{\r\n\t\t\t\'group4-option1-background group4-option4-color\': ($ctrl.alertKind() === \'info\'),\r\n\t\t\t\'group4-option2-background group4-option4-color\': ($ctrl.alertKind() === \'warning\' || $ctrl.alertKind() === \'security\'),\r\n\t\t\t\'group4-option3-background group4-option5-color\': ($ctrl.alertKind() === \'error\')\r\n\t\t}"\r\n\t\tng-switch="$ctrl.kind">\r\n\r\n\t\t<pbi-icon name="{{$ctrl.iconName()}}" size="{{$ctrl.isCompact()?\'mini\':\'small\'}}"></pbi-icon>\r\n\r\n\t\t\x3c!-- conditional localization --\x3e\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="info" localize="{{$ctrl.getInfoMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="warning" localize="{{$ctrl.getWarningMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="security" localize="{{$ctrl.getSecurityMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="error" localize="{{$ctrl.getErrorMessage()}}"></p>\r\n\r\n\t</div>\r\n\r\n</div>\r\n')}]),b.exports=t},349:function(b){var t="components/button/button.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,"<div class=\"styleLibrary formElement button\" ng-class=\"{'compact': $ctrl.isCompact()}\">\r\n\t\t<button\r\n\t\t\tid=\"{{::$ctrl.createInternalId()}}\"\r\n\t\t\tname=\"{{$ctrl.name}}\"\r\n\r\n\t\t\tng-class=\"{\r\n\t\t\t\t\t'primary group2-option1-background group2-option2-background-hover group2-option3-background-active': $ctrl.isPrimary(),\r\n\t\t\t\t\t'group2-option4-background group2-option5-background-hover group2-option6-background-active': !$ctrl.isPrimary() && $ctrl.isBox(),\r\n\t\t\t\t\t'group2-option8-background group2-option8-background-hover group2-option8-background-active': $ctrl.isDisabled() && $ctrl.isBox(),\r\n\t\t\t\t\t'group2-option10-color group2-option11-color-hover': $ctrl.showIcon() && !$ctrl.hasLabel() && !$ctrl.isBox() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t'group2-option10-color': $ctrl.showIcon() && !$ctrl.hasLabel() && !$ctrl.isBox() && $ctrl.isDisabled(),\r\n\t\t\t\t\t'group2-option13-color group2-option14-color-hover': !$ctrl.isDisabled() && $ctrl.isText(),\r\n\t\t\t\t\t'group2-option15-color group2-option15-color-hover': $ctrl.isDisabled() && $ctrl.isText(),\r\n\t\t\t\t\t'labeled-icon': $ctrl.showIcon() && $ctrl.hasLabel(),\r\n\t\t\t\t\t'group2-option16-color': $ctrl.showIcon() && $ctrl.hasLabel() && !$ctrl.isBox(),\r\n\t\t\t\t\t'box': $ctrl.isBox(),\r\n\t\t\t\t\t'text': $ctrl.isText(),\r\n\t\t\t\t\t'icon': $ctrl.isIcon(),\r\n\t\t\t\t\t'boxed-icon': $ctrl.showIcon() && $ctrl.isBox()\r\n\t\t\t}\"\r\n\t\t\ttype=\"button\"\r\n\t\t\tng-disabled=\"$ctrl.isDisabled()\"\r\n\t\t\tng-attr-aria-label=\"{{$ctrl.arialabel}}\"\r\n\t\t\tng-attr-aria-labelledby=\"{{$ctrl.arialabelledby}}\"\r\n\t\t\tng-attr-aria-describedby=\"{{$ctrl.ariadescribedby}}\">\r\n\r\n\t\t\t<pbi-icon ng-if=\"$ctrl.showIcon()\" name=\"{{$ctrl.iconName}}\" size=\"{{$ctrl.iconSizeName()}}\"></pbi-icon>\r\n\r\n\t\t\t<label ng-if=\"$ctrl.hasLabel()\" localize=\"{{$ctrl.labelKey()}}\" dynamic-localize-update=\"{{::$ctrl.dynamicLabelUpdate}}\"\r\n\t\t\t\taria-live=\"assertive\"\r\n\t\t\t\tng-class=\"{\r\n\t\t\t\t\t'primary-label-color': $ctrl.isPrimary() && !$ctrl.isDisabled() && !$ctrl.isText(),\r\n\t\t\t\t\t'group2-option7-color': !$ctrl.isPrimary() && !$ctrl.isDisabled() && !$ctrl.isText(),\r\n\t\t\t\t\t'group2-option9-color': !$ctrl.isPrimary() && $ctrl.isDisabled() && !$ctrl.isText(),\r\n\t\t\t\t\t'formLabel': $ctrl.isBox() || !$ctrl.showIcon() || !$ctrl.hasLabel(),\r\n\t\t\t\t\t'authoringPaneText': !$ctrl.isBox() && $ctrl.showIcon() && $ctrl.hasLabel()\r\n\t\t\t\t}\"\r\n\t\t\t\tclass=\"typeRamp\"\r\n\t\t\t></label>\r\n\r\n\t\t</button>\r\n</div>\r\n")}]),b.exports=t},676:function(b){var t="components/checkbox/checkbox.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement checkbox" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="checkbox-wrapper">\r\n\t\t<input\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\ttype="checkbox"\r\n\t\t\trole="checkbox"\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}" />\r\n\r\n\t\t<span class="checkboxBox"\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option1-border group1-option6-background\': !$ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option5-border group1-option5-background checked\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option3-border group1-option3-background disabled\': $ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t>\r\n\t\t</span>\r\n\t\t<pbi-icon ng-attr-aria-hidden="true" name="checkmark" size="{{$ctrl.isCompact()?\'micro\':\'mini\'}}" class="checkboxCheck"\r\n\t\t\tng-class="{ \'group1-option7-color\': !$ctrl.isDisabled(), \'group1-option6-color\': $ctrl.isDisabled() }"\r\n\t\t></pbi-icon>\r\n\r\n\t\t<label ng-if="$ctrl.hasLabel() || $ctrl.dynamiclabel" localize="{{$ctrl.labelKey()}}"\r\n\t\t    localize-attr="{\'aria-label\': \'{{$ctrl.label}}\'}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled(), \'labelBottom\': $ctrl.labelPosition === \'bottom\' }"\r\n\t\t\tclass="typeRamp formLabel" for="{{::$ctrl.createInternalId()}}"\r\n\t\t>{{$ctrl.dynamiclabel}}</label>\r\n\t</span>\r\n</div>\r\n')}]),b.exports=t},495:function(b){var t="components/link/link.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary link">\r\n\t<a ng-href="https://go.microsoft.com/fwlink/?LinkId={{$ctrl.guid}}"\r\n\t\ttarget="_blank"\r\n\t\trel="noopener noreferrer"\r\n\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\tng-class="{\r\n\t\t\t\'group2-option13-color group2-option14-color-hover\': !$ctrl.isDisabled(),\r\n\t\t\t\'group2-option15-color group2-option15-color-hover\': $ctrl.isDisabled()\r\n\t\t}"\r\n\t>\r\n\t\t<label\r\n\t\t\tlocalize="{{$ctrl.labelKey()}}"\r\n\t\t></label>\r\n\t</a>\r\n</div>\r\n')}]),b.exports=t},290:function(b){var t="components/radio/radio.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement radio" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="radio-wrapper">\r\n\t\t<input\r\n\t\t\tid="{{$ctrl.appendInputId($ctrl.id)}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\ttype="radio"\r\n\t\t\tng-disabled="$ctrl.isCompositeDisabled()"\r\n\t\t\tng-model="$ctrl.groupCtrlr.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\tng-value="$ctrl.value"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t\t/>\r\n\r\n\t\t<span class="radioBox" ng-class="{ \'group1-option1-border group1-option6-background\': !$ctrl.isCompositeDisabled(), \'group1-option3-border\': $ctrl.isCompositeDisabled() }">\r\n\t\t\t<span class="radioButton"\r\n\t\t\t\tng-class="{ \'group1-option15-background\': $ctrl.isChecked() && !$ctrl.isCompositeDisabled(), \'group1-option9-background\': $ctrl.isChecked() && $ctrl.isCompositeDisabled() }"\r\n\t\t\t></span>\r\n\t\t</span>\r\n\r\n\t\t<label for="{{$ctrl.appendInputId($ctrl.id)}}" ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isCompositeDisabled(), \'group1-option4-color\': $ctrl.isCompositeDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t></label>\r\n\t</span>\r\n</div>\r\n')}]),b.exports=t},719:function(b){var t="components/radio/radioGroup.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement radioGroup" ng-class="{\'compact\': $ctrl.isCompact()}" role="radiogroup">\r\n\t<span class="radio-group-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t></label>\r\n\r\n\t\t<ng-transclude></ng-transclude>\r\n\r\n\t</span>\r\n\r\n</div>\r\n')}]),b.exports=t},615:function(b){var t="components/select/option.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<option \r\n    id="{{::$ctrl.createInternalId()}}"\r\n    name="{{$ctrl.label}}"\r\n    ng-class="selectOption" \r\n    value="{{$ctrl.value}}" \r\n    localize="{{$ctrl.label}}"\r\n    ng-select=$ctrl.proxyChange()>\r\n</option>')}]),b.exports=t},212:function(b){var t="components/select/select.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement select" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\r\n    <span class="select-wrapper">\r\n        <label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n            ng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n            class="typeRamp formLabel"\r\n            for="{{::$ctrl.createInternalId()}}"\r\n        ></label>\r\n\r\n        <select\r\n            id="{{::$ctrl.createInternalId()}}"\r\n            ng-model="$ctrl.proxyModel"\r\n            ng-change="$ctrl.proxyChange()"\r\n            ng-disabled="{{$ctrl.disabled}}"\r\n            ng-class="{\r\n                    \'selectLabel group1-option12-border group1-option6-background group1-option1-border-hover group1-option5-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n                    \'selectLabel group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled()\r\n                }"\r\n            class="typeRamp formLabel"\r\n            ng-attr-aria-label="{{$ctrl.arialabel}}"\r\n            ng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n            ng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n            >\r\n\r\n            <option\r\n                ng-if="$ctrl.options != null"\r\n                ng-repeat="option in $ctrl.options"\r\n                id="{{option.id}}"\r\n                name="{{option.label}}"\r\n                ng-class="selectOption"\r\n                class="typeRamp formLabel"\r\n                value="{{option.value}}"\r\n                localize="{{option.label}}"\r\n                ng-disabled="{{option.disabled}}">\r\n            </option>\r\n\r\n            <option\r\n                ng-repeat="option in $ctrl.optionsModel"\r\n                id="{{option.id}}"\r\n                name="{{option.label}}"\r\n                ng-class="selectOption"\r\n                class="typeRamp formLabel"\r\n                value="{{option.value}}"\r\n                localize="{{option.label}}"\r\n                ng-disabled="{{option.disabled}}">\r\n            </option>\r\n        </select>\r\n\r\n        <ng-transclude ng-hide="true"></ng-transclude>\r\n\r\n        <div class="expander">\r\n            <pbi-icon name="chevrondownmedium"\r\n                size="{{\'mini\'}}"\r\n                ng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n                >\r\n            </pbi-icon>\r\n        </div>\r\n    </span>\r\n\r\n</div>\r\n')}]),b.exports=t},197:function(b){var t="components/textarea/textarea.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement textarea">\r\n\t<span class="textarea-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.createInternalId()}}"\r\n\t\t></label>\r\n\t\t<span ng-if="$ctrl.isRequired() && !$ctrl.isDisabled()" class="required-asterisk group1-option13-color formLabel">*</span>\r\n\t\t<textarea\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\tplaceholder="{{$ctrl.getPlaceholder()}}"\r\n\t\t\tmaxlength="{{$ctrl.maxLength()}}"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-required="$ctrl.isRequired()"\r\n\t\t\tng-maxlength="$ctrl.maxLength()"\r\n\t\t\tng-minlength="$ctrl.minLength()"\r\n\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option12-border group1-option6-background group1-option1-border-hover group1-option5-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option13-border group1-option13-border-hover group1-option13-border-focus\': $ctrl.modelCtrlr.$invalid && !$ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t></textarea>\r\n\t\t</textarea>\r\n\r\n\t\t<pbi-alert\r\n\t\t\tkind="$ctrl.getAlertKind()"\r\n\t\t\tmessage-error="{{$ctrl.invalidMessage}}"\r\n\t\t></pbi-alert>\r\n\r\n\t</span>\r\n</div>\r\n')}]),b.exports=t},742:function(b){var t="components/textfield/textfield.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement textfield" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="textfield-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.createInternalId()}}"\r\n\t\t></label>\r\n\t\t<span ng-if="$ctrl.isRequired() && !$ctrl.isDisabled()" class="required-asterisk group1-option13-color typeRamp formLabel">*</span>\r\n\t\t<input\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\ttype="text"\r\n\r\n\t\t\tlocalize-attr="{placeholder: $ctrl.getPlaceholder()}"\r\n\t\t\tplaceholder="{{$ctrl.getPlaceholder()}}"\r\n\t\t\tmaxlength="{{$ctrl.maxLength()}}"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-required="$ctrl.isRequired()"\r\n\t\t\tng-maxlength="$ctrl.maxLength()"\r\n\t\t\tng-minlength="$ctrl.minLength()"\r\n\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option12-border group1-option6-background group1-option14-border-hover group1-option14-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option13-border group1-option13-border-hover group1-option13-border-focus\': $ctrl.modelCtrlr.$invalid && !$ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t/>\r\n\t\t</input>\r\n\r\n\t\t<pbi-alert\r\n\t\t\tkind="$ctrl.getAlertKind()"\r\n\t\t\tmessage-error="{{$ctrl.invalidMessage}}"\r\n\t\t></pbi-alert>\r\n\r\n\t</span>\r\n\r\n</div>\r\n')}]),b.exports=t},899:function(b){var t="components/toggle/toggle.html";window.angular.module("stylelibrary").run(["$templateCache",function(i){i.put(t,'<div class="styleLibrary formElement toggle"\r\n ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="toggle-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t></label>\r\n\r\n\t\t<span class="inner-toggle-wrapper">\r\n\t\t\t<input\r\n\t\t\t\tid="{{::$ctrl.getLabelId()}}"\r\n\t\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\t\ttype="checkbox"\r\n\t\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\t\ttitle="{{$ctrl.title}}" \r\n\t\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t\t\trole="button"\r\n\t\t\t\taria-label="{{$ctrl.arialabel}}"\r\n\t\t\t\taria-hidden="{{$ctrl.ariahidden ? \'true\' : \'false\'}}"\r\n\t\t\t\ttabindex="{{$ctrl.ariahidden === \'true\' ? \'-1\' : \'0\'}}"\r\n\t\t\t\taria-pressed="{{$ctrl.isChecked()}}"/>\r\n\r\n\t\t\t<span class="toggleBox"\r\n\t\t\t\tng-class="{\r\n\t\t\t\t\t\t\'group1-option1-border group1-option6-background\': !$ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option5-border group1-option5-background\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option3-border\': !$ctrl.isChecked() && $ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option3-border group1-option3-background\': $ctrl.isChecked() && $ctrl.isDisabled()\r\n\t\t\t\t}">\r\n\t\t\t\t<span class="toggleHandle"\r\n\t\t\t\t\tng-class="{\r\n\t\t\t\t\t\t\'group1-option16-background\': !$ctrl.isChecked() && !ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option8-background\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option9-background\': !$ctrl.isChecked() && $ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option11-background\': $ctrl.isChecked() && $ctrl.isDisabled()\r\n\t\t\t\t\t}">\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\r\n\t\t\t<label ng-if="$ctrl.isChecked()" localize="{{::$ctrl.onStateText}}" class="toggleState typeRamp formLabel"\r\n\t\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t\t></label>\r\n\t\t\t<label ng-if="!$ctrl.isChecked()" localize="{{::$ctrl.offStateText}}" class="toggleState typeRamp formLabel"\r\n\t\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t\t></label>\r\n\t\t</span>\r\n\t</span>\r\n</div>')}]),b.exports=t}},H={};function M(b){var r=H[b];if(void 0!==r)return r.exports;var t=H[b]={exports:{}};return W[b](t,t.exports,M),t.exports}M.d=function(b,r){for(var t in r)M.o(r,t)&&!M.o(b,t)&&Object.defineProperty(b,t,{enumerable:!0,get:r[t]})},M.o=function(b,r){return Object.prototype.hasOwnProperty.call(b,r)},M.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},(function(){if(void 0!==M){var b=M.u,r=M.e,t=new Map,i=new Map;M.u=function($){return b($)+(t.has($)?"?"+t.get($):"")},M.e=function($){return r($).catch((function(g){var y=i.has($)?i.get($):5;if(y<1){var m=b($);throw g.message="Loading chunk "+$+" failed after 5 retries.\n("+m+")",g.request=m,g}return new Promise(function(p){setTimeout((function(){var x=Date.now();t.set($,x),i.set($,y-1),p(M.e($))}),3e3)})}))}}})();var F={};(function(){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),M(65),M(682),M(886)})(),window.stylelibrary=F})();
this.parseTimeMarkers = this.parseTimeMarkers || {};
var marker = this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] || (this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] = {});
marker.endEval = window.jsCommon && window.jsCommon.performance && window.jsCommon.performance.now ? window.jsCommon.performance.now() : Date.now(); marker.isExternal = false;
