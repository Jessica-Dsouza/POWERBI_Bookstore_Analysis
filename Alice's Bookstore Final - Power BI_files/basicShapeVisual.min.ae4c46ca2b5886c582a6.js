"use strict";
this.parseTimeMarkers = this.parseTimeMarkers || {};
var marker = this.parseTimeMarkers['basicShapeVisual.min.js'] || (this.parseTimeMarkers['basicShapeVisual.min.js'] = {});
marker.startEval = window.jsCommon && window.jsCommon.performance && window.jsCommon.performance.now ? window.jsCommon.performance.now() : Date.now(); marker.isExternal = false;
if (window.perfTracking && window.perfTracking.startBundleEval) window.perfTracking.startBundleEval('basicShapeVisual.min.js');var es6,powerbi,__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(t,a,l,s){return new(l=l||Promise)(function(n,e){function o(t){try{r(s.next(t))}catch(t){e(t)}}function i(t){try{r(s.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof l?e:new l(function(t){t(e)})).then(o,i)}r((s=s.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(o,i){var r,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(l=2&e[0]?a.return:e[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[2&e[0],l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3]))s.label=e[1];else if(6===e[0]&&s.label<l[1])s.label=l[1],l=e;else{if(!(l&&s.label<l[2])){l[2]&&s.ops.pop(),s.trys.pop();continue}s.label=l[2],s.ops.push(e)}}e=i.call(o,s)}catch(t){e=[6,t],a=0}finally{r=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}};define("BasicShapeVisual/actionButton",["require","exports","BasicShapeVisual/actionButtonUtils","TileLibrary/index"],function(z,p,e,c){Object.defineProperty(p,"__esModule",{value:!0}),p.ActionButton=p.DefaultButtonTextFontSizeInPt=p.BackgroundColor=p.DarkAndGrayDisabledActionButtonBackgroundColor=p.LightDisabledActionButtonBackgroundColor=p.DisabledActionButtonForegroundColor=p.DefaultActionButtonForegroundColor=p.ButtonOutlineSelector=p.ButtonIconSelector=p.ButtonTextSelector=void 0;var t=powerbi,r=powerbi.visuals,a=t.visuals.ActionButtonType,u=t.visuals.BackgroundColorName,n=jsCommon.BrowserUtils,h=powerbi.visuals.builder,g=t.visuals.ColorHelper,o=jsCommon.CssConstants.createClassAndSelector,d=powerbi.data.createDisplayNameGetter,f=t.DataViewObjects,l=t.visuals.Font,y=t.visuals.FontProperties,s=t.visuals.Units.FontSize,v=t.visuals.horizontalAlignment,i=t.visuals.iconPlacement,b=powerbi.visuals.InteractivityUtils,m=t.visuals.legacyActionButtonProps,w=t.visuals.ObjectEnumerationBuilder,S=r.shapeType.shape,C=powerbi.visuals.shapeObjectProps,B=t.visuals.verticalAlignment,O=t.VisualDataChangeOperationKind,x=powerbi.visuals.visualLocKeys,T=r.actionButtonProps,A=r.actionButtonInstanceId,P=r.actionButtonObjectNames,V=r.actionButtonObjectPropertyNames,D=(p.ButtonTextSelector=o("button-text"),p.ButtonIconSelector=o("button-icon"),p.ButtonOutlineSelector=o("button-outline"),p.DefaultActionButtonForegroundColor="foregroundButton",p.DisabledActionButtonForegroundColor="foregroundNeutralTertiary",p.LightDisabledActionButtonBackgroundColor="backgroundLight",p.DarkAndGrayDisabledActionButtonBackgroundColor="backgroundNeutral",p.BackgroundColor="background",p.DefaultButtonTextFontSizeInPt=10,B.middle),M=[A.default,A.hover,A.selected,A.disabled],k=[A.default,A.hover,A.selected],_=["default","hover","selected","disabled"],j=["default","hover","selected"];function F(){}F.prototype.init=function(t){this.currentViewport=t.viewport,this.style=t.style,this.hostServices=t.host,this.element=t.element,this.featureSwitches=t.featureSwitches,this.featureSwitches.buttonTileFormatting?(this.currentViewport=t.viewport,this.elementSelection=d3.select(t.element.get(0)),this.style=t.style,this.buttonTile=new R(this.hostServices)):(this.buttonSelection=d3.select(t.element.get(0)).append("button").attr("type","button").classed("themableBackgroundColor",!0),this.buttonSelection.append("span").classed(p.ButtonTextSelector.class,!0),this.buttonSelection.append("div").classed(p.ButtonIconSelector.class,!0),this.buttonSelection.append("div").classed(p.ButtonOutlineSelector.class,!0))},F.prototype.update=function(t){var e;this.currentViewport=t.viewport,t.dataViews&&0<t.dataViews.length&&t.operationKind!==O.None&&((t=t.dataViews[0]).metadata,t=t.metadata.objects,e=null==(e=this.hostServices.getVisualLinkProperties())?void 0:e.type,this.featureSwitches.buttonTileFormatting?(this.data=F.convert(t,this.style,e,this.hostServices),this.render()):(this.legacyData=this.legacyConverter(t),this.legacyRender()))},F.prototype.onViewModeChanged=function(t){this.featureSwitches.buttonTileFormatting||e.styleVisualLink(this.buttonSelection,this.hostServices)},F.getActionButtonType=function(t,e){switch(e){case"ApplyAllSlicers":return a.applyAllSlicers;case"ClearAllSlicers":return a.clearAllSlicers;default:return t}},F.convert=function(t,e,n,o){var i=g.create(e),r=this.getIconDefaults(e,n),r=(0,c.convertIcon)(t,i,M,r),n=this.getActionButtonType(r.default.shapeType,n),a=this.getOutlineDefaults(e,n),n=this.getTextDefaults(e,i,n,o),o=this.convertRotation(t),n=(0,c.convertText)(t,i,M,n,this.textProps,{default:{rotation:o.rotation+o.textRotation}});return{tileProps:{fill:(0,c.convertTileFill)(t,i,M,this.getFillDefaults(e)),outline:(0,c.convertTileOutline)(t,i,M,a),shape:(0,c.convertTileShape)(t,M,this.getShapeDefaults(),void 0,{rotation:o.rotation+o.shapeRotation}),shadow:(0,c.convertTileShadow)(t,i,M,this.getShadowDefaults(e)),glow:(0,c.convertTileGlow)(t,i,M,this.getGlowDefaults(e))},contentProps:{text:n,icon:r},rotationProps:o}},F.convertRotation=function(t){return __assign(__assign({},this.getRotationDefaults()),(0,c.getSettingProps)(t,this.rotationProps.props))},F.getRotationDefaults=function(){return{rotation:0,shapeRotation:0,textRotation:0}},F.prototype.legacyConverter=function(t){var e=g.create(this.style),n=this.convertButtonIcon(t,e);return{icon:n,text:this.convertButtonText(t,e,n.default.shapeType),outline:this.convertButtonOutline(t,e,n.default.shapeType),fill:this.convertButtonFill(t,e)}},F.prototype.convertButtonText=function(t,e,n){for(var o=this.getLegacyDefaultButtonTextData(n,this.style),i={default:null,hover:null,active:null,disabled:null},r=f.getValue(t,m.text.show,o.show),a=f.getUserDefinedObjects(t,"text"),l=y.createFromObjectOrStyle(f.getObject(a,"default"),{color:"fontColor",family:"fontFamily",size:"fontSize"},e,this.style,void 0,"lightLabel",o.fontProperties),s=0,u=_;s<u.length;s++){var c=u[s],h=l;"default"!==c&&(h=y.createFromDataViewObject(f.getObject(a,c),{color:"fontColor",family:"fontFamily",size:"fontSize"},e,void 0,l)),i[c]={show:r,text:f.getValue(t,m.text.text,this.getDefaultStateValue(i,function(t){return t.text},o),c),padding:f.getValue(t,m.text.padding,this.getDefaultStateValue(i,function(t){return t.padding},o),c),verticalAlignment:f.getValue(t,m.text.verticalAlignment,this.getDefaultStateValue(i,function(t){return t.verticalAlignment},o),c),horizontalAlignment:f.getValue(t,m.text.horizontalAlignment,this.getDefaultStateValue(i,function(t){return t.horizontalAlignment},o),c),fontProperties:{color:"disabled"!==c||e.getColorForProperty(t,m.text.fontColor,void 0,c)?h.color:g.getThemeColor(this.style,p.DisabledActionButtonForegroundColor),size:h.size,family:h.family}}}return i},F.prototype.convertButtonIcon=function(t,e){for(var n=this,o=this.getLegacyDefaultButtonIconData(this.style),i={default:null,hover:null,active:null,disabled:null},r=f.getValue(t,m.icon.show,o.show),a=0,l=_;a<l.length;a++){var s=l[a];i[s]={show:r,shapeType:f.getValue(t,m.icon.shapeType,this.getDefaultStateValue(i,function(t){return t.shapeType},o),s),padding:f.getValue(t,m.icon.padding,this.getDefaultStateValue(i,function(t){return t.padding},o),s),verticalAlignment:f.getValue(t,m.icon.verticalAlignment,this.getDefaultStateValue(i,function(t){return t.verticalAlignment},o),s),horizontalAlignment:f.getValue(t,m.icon.horizontalAlignment,this.getDefaultStateValue(i,function(t){return t.horizontalAlignment},o),s),lineColor:this.getDefaultStateColorIfValueIsNull(e.getColorForProperty(t,m.icon.lineColor,void 0,s),i,function(t){return t.lineColor},function(){return g.getThemeColor(n.style,p.DefaultActionButtonForegroundColor)},"disabled"!==s?void 0:g.getThemeColor(this.style,p.DisabledActionButtonForegroundColor)),lineTransparency:f.getValue(t,m.icon.lineTransparency,this.getDefaultStateValue(i,function(t){return t.lineTransparency},o),s),lineWeight:f.getValue(t,m.icon.lineWeight,this.getDefaultStateValue(i,function(t){return t.lineWeight},o),s)}}return i},F.prototype.convertButtonOutline=function(t,e,n){for(var o=this,i=this.getLegacyDefaultButtonOutlineData(n,this.style),r={default:null,hover:null,active:null,disabled:null},a=f.getValue(t,m.outline.show,i.show),l=0,s=_;l<s.length;l++){var u=s[l];r[u]={show:a,outlineColor:this.getDefaultStateColorIfValueIsNull(e.getColorForProperty(t,m.outline.lineColor,void 0,u),r,function(t){return t.outlineColor},function(){return g.getThemeColor(o.style,p.DefaultActionButtonForegroundColor)},"disabled"!==u?void 0:F.getBackgroundDisabledColor(this.style)),outlineTransparency:f.getValue(t,m.outline.transparency,this.getDefaultStateValue(r,function(t){return t.outlineTransparency},i),u),outlineWeight:f.getValue(t,m.outline.weight,this.getDefaultStateValue(r,function(t){return t.outlineWeight},i),u),roundEdge:f.getValue(t,m.outline.roundEdge,this.getDefaultStateValue(r,function(t){return t.roundEdge},i),u)}}return r},F.prototype.convertButtonFill=function(t,e){for(var n=this,o=this.getLegacyDefaultButtonFillData(this.style),i={default:null,hover:null,active:null,disabled:null},r=f.getValue(t,m.fill.show,o.show),a=0,l=_;a<l.length;a++){var s=l[a];i[s]={show:"disabled"===s||r,fillColor:this.getDefaultStateColorIfValueIsNull(e.getColorForProperty(t,m.fill.fillColor,void 0,s),i,function(t){return t.fillColor},function(){return g.getThemeColor(n.style,u)},"disabled"!==s?void 0:F.getBackgroundDisabledColor(this.style)),fillTransparency:f.getValue(t,m.fill.transparency,this.getDefaultStateValue(i,function(t){return t.fillTransparency},o,"disabled"!==s?void 0:0),s),image:f.getValue(t,m.fill.image,this.getDefaultStateValue(i,function(t){return t.image},o),s)}}return i},F.prototype.getDefaultStateValue=function(t,e,n,o){return void 0!==o?o:t.default?e(t.default):e(n)},F.prototype.getDefaultStateColorIfValueIsNull=function(t,e,n,o,i){return t||(void 0!==i?i:e.default?n(e.default):o())},F.getFillDefaults=function(t){return{default:{show:!1,fillColor:g.getThemeColor(t,u),fillTransparency:50,fillImage:void 0},disabled:{show:!0,fillColor:F.getBackgroundDisabledColor(t),fillTransparency:0}}},F.getOutlineDefaults=function(t,e){var n=e===a.applyAllSlicers||e===a.clearAllSlicers,e={default:{show:e===a.blank||n,outlineColor:g.getThemeColor(t,p.DefaultActionButtonForegroundColor),outlineWeight:3,outlineTransparency:0},disabled:{outlineColor:F.getBackgroundDisabledColor(t)}};return n?__assign(__assign({},e),{hover:{show:!0},selected:{show:!0}}):e},F.getShapeDefaults=function(){return{default:{tileShape:powerbi.visuals.shapeType.shape.Rectangle,rotation:0,shapeRounding:0,linecapType:"flat",arrowheadSize:50,arrowStemWidth:25,chevronAngle:90,isocelesTriangleTipPosition:50,parallelogramSlant:100/3,trapezoidSlant:40,hexagonSlant:200/3,octagonSnipSize:100/3,speechBubbleHeight:10,speechBubbleTailPosition:powerbi.visuals.SpeechBubbleTailPosition.BottomLeft,speechBubbleTailAngle:90,rectangleRoundedCurve:25,tabCutCornerSnipSizeTopRight:25,tabCutCornerSnipSizeTop:25,tabCutCornerSnipSizeBottom:0,tabRoundCornerTopRight:25,tabRoundCornerTop:25,tabRoundCornerBottom:0}}},F.getShadowDefaults=function(t){return{default:{show:!1,shadowColor:t?t.colorPalette.foreground.value:"#000",shadowTransparency:70,shadowBlur:20,shadowPositionPreset:"bottomRight",shadowAngle:45,shadowDistance:50}}},F.getGlowDefaults=function(t){return{default:{show:!1,glowColor:g.getDataColorByIndex(t,0,r.ForegroundColorName),glowTransparency:0,glowBlur:40}}},F.getTextValue=function(t,e){return t===a.applyAllSlicers?e.getLocalizedString("ReportAppBar_ApplyAllSlicers"):t===a.clearAllSlicers?e.getLocalizedString("ReportAppBar_ClearAllSlicers"):""},F.getTextDefaults=function(t,e,n,o){var i=n===a.applyAllSlicers||n===a.clearAllSlicers;return{default:{show:i,text:this.getTextValue(n,o),verticalAlignment:D,horizontalAlignment:n===a.blank||i?v.center:v.right,rightMargin:4,leftMargin:4,topMargin:4,bottomMargin:4,rotation:0,fontProperties:r.FontProperties.createFromObjectOrStyle(null,{color:V.fontColor,size:V.fontSize,family:V.fontFamily},e,t,void 0,"lightLabel",{color:g.getThemeColor(t,p.DefaultActionButtonForegroundColor),size:s.createFromPt(p.DefaultButtonTextFontSizeInPt),family:l.Family.regular.css})},disabled:{fontProperties:{color:g.getThemeColor(t,p.DisabledActionButtonForegroundColor)}}}},F.getIconDefaults=function(t,e){return{default:{show:!("ApplyAllSlicers"===e||"ClearAllSlicers"===e),shapeType:this.getActionButtonType(a.blank,e),iconImage:void 0,lineColor:g.getThemeColor(t,p.DefaultActionButtonForegroundColor),lineTransparency:0,lineWeight:3,placement:i.custom,verticalAlignment:D,horizontalAlignment:v.left,rightMargin:4,leftMargin:4,topMargin:4,bottomMargin:4,iconSize:void 0,rotation:0},disabled:{lineColor:g.getThemeColor(t,p.DisabledActionButtonForegroundColor)}}},F.prototype.getLegacyDefaultButtonTextData=function(t,e){return{show:!1,text:"",padding:4,verticalAlignment:D,horizontalAlignment:t===a.blank?v.center:v.right,fontProperties:{color:g.getThemeColor(e,p.DefaultActionButtonForegroundColor),size:s.createFromPt(p.DefaultButtonTextFontSizeInPt),family:l.Family.regular.css}}},F.prototype.getLegacyDefaultButtonIconData=function(t){return{show:!0,shapeType:a.blank,padding:4,verticalAlignment:D,horizontalAlignment:v.left,lineColor:g.getThemeColor(t,p.DefaultActionButtonForegroundColor),lineTransparency:0,lineWeight:3}},F.prototype.getLegacyDefaultButtonOutlineData=function(t,e){return{show:t===a.blank,outlineColor:g.getThemeColor(e,p.DefaultActionButtonForegroundColor),outlineTransparency:0,outlineWeight:3,roundEdge:0}},F.prototype.getLegacyDefaultButtonFillData=function(t){return{show:!1,fillColor:g.getThemeColor(t,u),fillTransparency:50,image:void 0}},F.getBackgroundDisabledColor=function(t){var e=g.getThemeColor(t,p.BackgroundColor),e="#FFF"===e||"#FFFFFF"===e?g.getThemeColor(t,p.LightDisabledActionButtonBackgroundColor):g.getThemeColor(t,p.DarkAndGrayDisabledActionButtonBackgroundColor);return e},F.prototype.enumerateObjectInstances=function(t){return this.featureSwitches.buttonTileFormatting?this.enumerator(t):this.legacyEnumerator(t)},F.prototype.getFormattingModel=function(){var t,e=this,n=null==(t=this.featureSwitches)?void 0:t.onObject;return new h.FormattingModelBuilder(function(){return!n&&e.getShapeCard()},function(){return n&&e.getButtonStyleCard()},function(){return e.getRotationCard()},function(){return!n&&e.getStyleCard()},function(){return e.getVisualLinkPlaceholder()}).build()},F.prototype.getContainerName=function(t){switch(t){case A.default:t="Default";break;case A.hover:t="Hover";break;case A.selected:t="Press";break;case A.disabled:t="Disabled"}return this.hostServices.getLocalizedString(t)},F.prototype.getDisplayedInstanceIds=function(){var t;return"ClearAllSlicers"!==(null==(t=this.hostServices.getVisualLinkProperties())?void 0:t.type)&&this.featureSwitches.drillthroughButtonGA?M:k},F.prototype.getShapeCard=function(){var i=this,t=T.shape,r=new h.FormattingCardUidBuilder("shape"),e=this.getDisplayedInstanceIds();return new h.FormattingCardBuilder(r,"Visual_Shape",[t.tileShape,t.roundEdge,C.shape.linecapType,t.arrowheadSize,t.arrowStemWidth,t.chevronAngle,t.isocelesTriangleTipPosition,t.parallelogramSlant,t.trapezoidSlant,t.hexagonSlant,t.octagonSnipSize,t.speechBubbleHeight,t.speechBubbleTailPosition,t.speechBubbleTailAngle,t.rectangleRoundedCurve,t.tabCutCornerSnipSizeTopRight,t.tabCutCornerSnipSizeTop,t.tabCutCornerSnipSizeBottom,t.tabRoundCornerTopRight,t.tabRoundCornerTop,t.tabRoundCornerBottom],function(t){return i.hostServices.getLocalizedString(t)}).addGroup("applySettingsTo",function(t){t.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("state",function(o){o.withDisplayName("State"),e.forEach(function(t){var e=[],n=(0,c.getShapeGroupByInstance)(i.data.tileProps.shape,i.hostServices,i.featureSwitches,t,r,((n={})[S.Line]=!0,n));e.push(n),o.addContainerItem(t,i.getContainerName(t),function(t){return t.withGroups(e)})})})}).build()},F.prototype.getButtonStyleCard=function(){var i=this,t=T.shape,e=T.fill,n=T.outline,o=T.text,r=T.icon,a=T.shadow,l=T.glow,s=new h.FormattingCardUidBuilder("buttonStyle"),u=this.getDisplayedInstanceIds();return new h.FormattingCardBuilder(s,"Visual_ButtonStyle",[t.tileShape,t.roundEdge,C.shape.linecapType,t.arrowheadSize,t.arrowStemWidth,t.chevronAngle,t.isocelesTriangleTipPosition,t.parallelogramSlant,t.trapezoidSlant,t.hexagonSlant,t.octagonSnipSize,t.speechBubbleHeight,t.speechBubbleTailPosition,t.speechBubbleTailAngle,t.rectangleRoundedCurve,t.tabCutCornerSnipSizeTopRight,t.tabCutCornerSnipSizeTop,t.tabCutCornerSnipSizeBottom,t.tabRoundCornerTopRight,t.tabRoundCornerTop,t.tabRoundCornerBottom,e.show,e.fillColor,e.transparency,e.image,n.show,n.lineColor,n.weight,n.transparency,o.show,o.fontColor,o.fontSize,o.fontFamily,o.italic,o.bold,o.underline,o.text,o.verticalAlignment,o.horizontalAlignment,o.leftMargin,o.rightMargin,o.topMargin,o.bottomMargin,o.angle,r.show,r.shapeType,r.image,r.lineColor,r.lineTransparency,r.lineWeight,r.placement,r.verticalAlignment,r.horizontalAlignment,r.leftMargin,r.rightMargin,r.topMargin,r.bottomMargin,r.spacing,r.iconSize,a.show,a.color,a.transparency,a.shadowBlur,a.shadowPositionPreset,l.show,l.color,l.transparency,l.shadowBlur],function(t){return i.hostServices.getLocalizedString(t)}).addGroup("applySettingsTo",function(t){t.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("state",function(o){o.withDisplayName("State"),u.forEach(function(t){var e=[],n=(0,c.getShapeGroupByInstance)(i.data.tileProps.shape,i.hostServices,i.featureSwitches,t,s,((n={})[S.Line]=!0,n)),n=(e.push(n),i.getStyleGroupsByInstance(t,s));e.push.apply(e,n),o.addContainerItem(t,i.getContainerName(t),function(t){return t.withGroups(e)})})})}).build()},F.prototype.getStyleCard=function(){var n=this,t=T.fill,e=T.outline,o=T.text,i=T.icon,r=T.shadow,a=T.glow,l=new h.FormattingCardUidBuilder("style"),s=this.getDisplayedInstanceIds(),t=[t.show,t.fillColor,t.transparency,t.image,e.show,e.lineColor,e.weight,e.transparency,o.show,o.fontColor,o.fontSize,o.fontFamily,o.italic,o.bold,o.underline,o.text,o.verticalAlignment,o.horizontalAlignment,o.leftMargin,o.rightMargin,o.topMargin,o.bottomMargin,o.angle,i.show,i.shapeType,i.image,i.lineColor,i.lineTransparency,i.lineWeight,i.placement,i.verticalAlignment,i.horizontalAlignment,i.leftMargin,i.rightMargin,i.topMargin,i.bottomMargin,i.spacing,i.iconSize,r.show,r.color,r.transparency,r.shadowBlur,r.shadowPositionPreset,a.show,a.color,a.transparency,a.shadowBlur];return new h.FormattingCardBuilder(l,"Style",t,function(t){return n.hostServices.getLocalizedString(t)}).addGroup("applySettingsTo",function(t){t.withDisplayName("Apply_Settings_To").withCollapsible(!1).addContainer("state",function(t){t.withDisplayName("State"),s.forEach(function(e){t.addContainerItem(e,n.getContainerName(e),function(t){return t.withGroups(n.getStyleGroupsByInstance(e,l))})})})}).build()},F.prototype.getVisualLinkPlaceholder=function(){return h.buildHostFormattingCardPlaceholder("actions")},F.prototype.getStyleGroupsByInstance=function(t,e){var n=[];return n.push((0,c.getTextGroupByInstance)(this.data.contentProps.text,this.hostServices,t,e)),n.push((0,c.getIconGroupByInstance)(this.data.contentProps.icon,this.hostServices,t,e,this.featureSwitches)),n.push((0,c.getFillGroupByInstance)(!0,this.data.tileProps.fill,this.hostServices,t,e)),n.push((0,c.getOutlineGroupByInstance)(this.data.tileProps.outline,this.hostServices,t,e)),n.push((0,c.getShadowGroupByInstance)(this.data.tileProps.shadow,this.hostServices,t,e)),n.push((0,c.getGlowGroupByInstance)(this.data.tileProps.glow,this.hostServices,t,e)),n},F.prototype.enumerator=function(t){var e,n=this.data;if(!n)return[];var o=new w,i=this.featureSwitches.drillthroughButtonGA?M:k;switch(t.objectName){case P.fill:(0,c.enumerateFillProperties)(o,n.tileProps.fill,i,this.getInstanceDisplayName);break;case P.outline:(0,c.enumerateOutlineProperties)(o,n.tileProps.outline,i,this.getInstanceDisplayName);break;case P.text:(0,c.enumerateTextProperties)(o,n.contentProps.text,i,this.getInstanceDisplayName);break;case P.icon:(0,c.enumerateIconProperties)(o,n.contentProps.icon,i,this.getInstanceDisplayName);break;case P.shape:(0,c.enumerateShapeProperties)(o,n.tileProps.shape,i,this.getInstanceDisplayName,this.featureSwitches,((e={})[S.Line]=!0,e));break;case P.shadow:(0,c.enumerateShadowProperties)(o,n.tileProps.shadow,i,this.getInstanceDisplayName);break;case P.glow:(0,c.enumerateGlowProperties)(o,n.tileProps.glow,i,this.getInstanceDisplayName);break;case P.rotation:this.enumerateRotationProperties(o,n.rotationProps)}return o.complete()},F.prototype.enumerateRotationProperties=function(t,e){var n,o={unitSymbol:r.visualLocKeys.DegreeLocKey,numberRange:{min:0,max:360}};(n={})[V.rotation]=e.rotation,n[V.shapeRotation]=e.shapeRotation,n[V.textRotation]=e.textRotation,t.pushInstance({objectName:V.rotation,selector:null,properties:n,validValues:((e={})[V.shapeRotation]=o,e[V.textRotation]=o,e)})},F.prototype.getRotationCard=function(){function e(t){return n.hostServices.getLocalizedString(t)}var n=this,o=T.rotation,i=this.data.rotationProps;return new h.FormattingCardBuilder(new h.FormattingCardUidBuilder("rotation"),"Visual_BasicShape_Rotate",[o.angle,o.shapeAngle,o.textAngle],e).addGroup("default",function(t){t.addSimpleSlice("all",h.SliderBuilder.getRotationSliderBuilder({descriptor:__assign(__assign({},o.angle),{selector:null}),value:i.rotation,localize:e}).build(),function(t){return t.withCustomDisplayName("All")}).addSimpleSlice("shape",h.SliderBuilder.getRotationSliderBuilder({descriptor:__assign(__assign({},o.shapeAngle),{selector:null}),value:i.shapeRotation,localize:e}).build(),function(t){return t.withCustomDisplayName("Visual_Shape")}).addSimpleSlice("text",h.SliderBuilder.getRotationSliderBuilder({descriptor:__assign(__assign({},o.textAngle),{selector:null}),value:i.textRotation,localize:e}).build(),function(t){return t.withCustomDisplayName("Text")})}).build()},F.prototype.getInstanceDisplayName=function(t){return t===A.default?d("DefaultState"):t===A.hover?d("Hover"):t===A.selected?d("Press"):t===A.disabled?d("Disabled"):void 0},F.prototype.legacyEnumerator=function(t){var e=this.legacyData;if(!e)return[];var n={unitSymbol:x.PixelUnitSymbol,numberRange:{min:0,max:999}},o=new w;switch(t.objectName){case"text":o.pushInstance({objectName:"text",selector:null,properties:{show:e.text.default.show}});break;case"icon":o.pushInstance({objectName:"icon",selector:null,properties:{show:e.icon.default.show}});break;case"outline":o.pushInstance({objectName:"outline",selector:null,properties:{show:e.outline.default.show}});break;case"fill":o.pushInstance({objectName:"fill",selector:null,properties:{show:e.fill.default.show}})}for(var i=0,r=this.featureSwitches.drillthroughButtonGA?_:j;i<r.length;i++){var a=r[i];switch(o.pushContainer({displayName:function(t){if("default"===t)return d("DefaultState");if("hover"===t)return d("Hover");if("selected"===t)return d("Press");if("disabled"===t)return d("Disabled")}(a)}),t.objectName){case"text":var l=e.text[a];o.pushInstance({objectName:"text",selector:{id:a},properties:{text:l.text,fontColor:l.fontProperties.color,padding:l.padding,verticalAlignment:l.verticalAlignment,horizontalAlignment:l.horizontalAlignment,fontSize:l.fontProperties.size.pt,fontFamily:l.fontProperties.family},validValues:{padding:n},propertyInstanceKind:{text:3,fontColor:3}});break;case"icon":l=e.icon[a];o.pushInstance({objectName:"icon",selector:{id:a},properties:{shapeType:l.shapeType,padding:l.padding,verticalAlignment:l.verticalAlignment,horizontalAlignment:l.horizontalAlignment,lineColor:l.lineColor,lineTransparency:l.lineTransparency,lineWeight:l.lineWeight},validValues:{padding:n,lineWeight:{unitSymbol:x.WeightLocKey,numberRange:{min:0,max:50}}},propertyInstanceKind:{lineColor:3}});break;case"outline":var s=e.outline[a];o.pushInstance({objectName:"outline",selector:{id:a},properties:{lineColor:s.outlineColor,transparency:s.outlineTransparency,weight:s.outlineWeight,roundEdge:s.roundEdge},validValues:{roundEdge:{unitSymbol:x.PixelUnitSymbol,numberRange:{min:0,max:100}}},propertyInstanceKind:{lineColor:3}});break;case"fill":var s=e.fill[a],u={objectName:"fill",selector:{id:a},properties:{fillColor:s.fillColor,transparency:s.fillTransparency},propertyInstanceKind:{fillColor:3}};this.featureSwitches.drillthroughButtonGA&&(u.properties.image=s.image),o.pushInstance(u)}o.popContainer()}return o.complete()},F.prototype.render=function(){this.buttonTile.contentProperties=this.data.contentProps;var t={element:this.elementSelection,properties:this.data.tileProps,width:this.currentViewport.width,height:this.currentViewport.height};this.buttonTile.update(t)},F.prototype.legacyRender=function(){e.renderLegacyButton(this.legacyData,this.currentViewport,this.buttonSelection,this.hostServices,this.element)},F.rotationProps={props:{rotation:T.rotation.angle,shapeRotation:T.rotation.shapeAngle,textRotation:T.rotation.textAngle}},F.textProps={props:{text:T.text.text,verticalAlignment:T.text.verticalAlignment,horizontalAlignment:T.text.horizontalAlignment,rightMargin:T.text.rightMargin,leftMargin:T.text.leftMargin,topMargin:T.text.topMargin,bottomMargin:T.text.bottomMargin},fontProps:{fontProperties:{objectName:"text",propertyNames:{color:V.fontColor,family:V.fontFamily,size:V.fontSize,italic:V.italic,bold:V.bold,underline:V.underline}}}},p.ActionButton=F;I=c.Tile,__extends(L,I),Object.defineProperty(L.prototype,"cursor",{get:function(){return this.hasVisualLink?"pointer":"inherit"},enumerable:!1,configurable:!0}),L.prototype.beforeRender=function(){var n;return __awaiter(this,void 0,powerbi.Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.hasVisualLink=null==(n=this.hostServices.getVisualLinkProperties())?void 0:n.hasVisualLink,[4,(e=this).hostServices.isVisualEnabled()];case 1:return e.isEnabled=t.sent(),this.state=this.isEnabled?A.default:A.disabled,[2]}})})},L.prototype.afterRender=function(){return __awaiter(this,void 0,powerbi.Promise,function(){return __generator(this,function(t){return this.renderContent(),[2]})})},L.prototype.renderContent=function(){var t=this.contentProperties.text[this.state],e=this.contentProperties.icon[this.state],n=this.getContentInscribedRectangle(t.rotation),o=this.getContentInscribedRectangle(e.rotation);c.TileLibraryContent.renderTextIcon(this.element,__assign(__assign({},t),{dimensions:n}),__assign(__assign({},e),{dimensions:o}))},L.prototype.onTileClick=function(){var t=d3.event,e={type:0,visualObjects:[{objectName:"button",selectorsByColumn:{}}],isCtrlOrMetaKey:n.isCtrlOrMeta(t),position:b.getPositionOfLastInputEvent()};this.hostServices.onSelecting(e),1===e.action&&t.stopPropagation()},L.prototype.onTilePointerover=function(){this.renderWithState(A.hover)},L.prototype.onTilePointerleave=function(){this.renderWithState(A.default)},L.prototype.onTilePointerdown=function(){this.renderWithState(A.selected)},L.prototype.onTilePointerup=function(){this.renderWithState(A.hover)},L.prototype.renderWithState=function(e){return __awaiter(this,void 0,powerbi.Promise,function(){return __generator(this,function(t){switch(t.label){case 0:return this.isEnabled?(this.state=e,this.updateShape(),[4,this.renderWithoutLifecycleEvents()]):[3,2];case 1:t.sent(),this.renderContent(),t.label=2;case 2:return[2]}})})};var I,R=L;function L(t){var e=I.call(this)||this;return e.hostServices=t,e}}),define("BasicShapeVisual/basicShape",["require","exports","BasicShapeVisual/basicShapeUtils"],function(t,e,o){Object.defineProperty(e,"__esModule",{value:!0}),e.BasicShape=void 0;var n=powerbi,i=n.visuals,r=i.basicShapeProps,a=i.basicShapeType,l=jsCommon.BrowserUtils,s=i.ColorHelper,u=n.DataViewObjects,c=i.ForegroundColorName,h=n.visuals.InteractivityUtils,p=powerbi.visuals.visualLocKeys,g=a.rectangle,d="backgroundLight";function f(){}Object.defineProperty(f.prototype,"shapeType",{get:function(){return this.data.shapeType},set:function(t){this.data.shapeType=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"lineColor",{get:function(){return this.data?this.data.lineColor:s.getDataColorByIndex(this.style,0,c)},set:function(t){this.data.lineColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"lineTransparency",{get:function(){return this.data?this.data.lineTransparency:0},set:function(t){this.data.lineTransparency=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"lineWeight",{get:function(){return this.data?this.data.lineWeight:3},set:function(t){this.data.lineWeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"roundEdge",{get:function(){return this.data?this.data.roundEdge:0},set:function(t){this.data.roundEdge=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"showFill",{get:function(){return!this.data||this.data.showFill},set:function(t){this.data.showFill=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"fillColor",{get:function(){return this.data?this.data.fillColor:s.getThemeColor(this.style,d)},set:function(t){this.data.fillColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"shapeTransparency",{get:function(){return this.data?this.data.shapeTransparency:0},set:function(t){this.data.shapeTransparency=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"angle",{get:function(){return this.data?this.data.angle:0},set:function(t){this.data.angle=this.scaleTo360Deg(t)},enumerable:!1,configurable:!0}),f.prototype.init=function(t){this.element=t.element,this.selection=d3.select(this.element[0]),this.currentViewport=t.viewport,this.hostServices=t.host,this.style=t.style},f.prototype.update=function(t){this.currentViewport=t.viewport;var e=t.dataViews;_.isEmpty(e)||(e=t.dataViews[0]).metadata&&e.metadata.objects&&(e=t.dataViews[0].metadata.objects,this.data=this.getDataFromDataView(e),this.render())},f.prototype.getDataFromDataView=function(t){var e,n;return t?(n=u.getValue(t,r.general.shapeType,g),e=this.getDefaultsForShape(n),{shapeType:n,lineColor:(n=s.create(this.style)).getColorForPropertyWithDefaultColor(t,r.line.lineColor,e.lineColor),lineTransparency:u.getValue(t,r.line.transparency,e.lineTransparency),lineWeight:u.getValue(t,r.line.weight,e.lineWeight),roundEdge:u.getValue(t,r.line.roundEdge,e.roundEdge),shapeTransparency:u.getValue(t,r.fill.transparency,e.shapeTransparency),fillColor:n.getColorForProperty(t,r.fill.fillColor,d),showFill:u.getValue(t,r.fill.show,e.showFill),angle:this.scaleTo360Deg(u.getValue(t,r.rotation.angle,e.angle))}):null},f.prototype.scaleTo360Deg=function(t){return t=0!==t&&Math.abs(t)%360==0?t:((t%=360)+360)%360},f.prototype.enumerateObjectInstances=function(t){var e=[];if(!this.data)return e;switch(t.objectName){case"line":var n={selector:null,properties:{lineColor:this.lineColor,transparency:this.lineTransparency,weight:this.lineWeight},objectName:t.objectName};return this.shapeType===a.rectangle&&(n.properties.roundEdge=this.roundEdge,n.validValues={roundEdge:{unitSymbol:p.PixelUnitSymbol,numberRange:{min:0,max:100}}}),e.push(n),e;case"fill":return this.shapeType!==a.line&&e.push({selector:null,properties:{show:this.showFill,fillColor:this.fillColor,transparency:this.shapeTransparency},objectName:t.objectName}),e;case"rotation":return e.push({selector:null,properties:{angle:this.angle},objectName:t.objectName}),e}return null},f.prototype.onViewModeChanged=function(t){this.updateVisualLinkProps()},f.prototype.render=function(){var n=this;switch(this.selection.html(""),this.shapeType){case a.rectangle:o.createRectangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case a.oval:o.createOval(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case a.line:o.createLine(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case a.arrow:o.createUpArrow(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case a.triangle:o.createTriangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case a.arrowButton:o.createArrowButton(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle)}this.selection.on("click",function(){var t=d3.event,e={type:0,visualObjects:[{objectName:"basicShape",selectorsByColumn:{}}],isCtrlOrMetaKey:l.isCtrlOrMeta(t),isShiftKey:t.shiftKey,position:h.getPositionOfLastInputEvent()};n.hostServices.onSelecting(e),1===e.action&&t.stopPropagation()}),this.updateVisualLinkProps(),o.setShapeAriaMetadata(this.shapeType,this.hostServices)},f.prototype.updateVisualLinkProps=function(){var t=this.hostServices.getVisualLinkProperties();t&&this.selection.style("cursor",t.hasVisualLink?"pointer":"inherit")},f.prototype.getDefaultsForShape=function(t){var e={angle:0,fillColor:s.getThemeColor(this.style,d),lineColor:s.getDataColorByIndex(this.style,0,c),lineTransparency:0,lineWeight:3,roundEdge:0,shapeTransparency:0,shapeType:g,showFill:!0};return t===a.arrowButton?((t=_.clone(e)).lineWeight=0,t):e},e.BasicShape=f}),define("BasicShapeVisual/basicShapeUtils",["require","exports"],function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setShapeAriaMetadata=e.getArrowMiterPaddingY=e.getArrowMiterPaddingX=e.createArrowButton=e.createTriangle=e.createUpArrow=e.createLine=e.createOval=e.createRectangle=void 0;function c(t,e,n,o,i,r,a){a={transform:"translate("+(a?a.translateX:0)+","+(a?a.translateY:0)+")",d:d3.line().x(function(t){return t.x}).y(function(t){return t.y}).curve(d3.curveLinear)(e)+" Z"};h(t,u(o,i,n,r,p(i,o,r)),"path",a)}function u(t,e,n,o,i){return n.append("div").styles({transform:"rotate("+o+"deg) scale("+i+")","transform-origin":"center","-webkit-transform":"rotate("+o+"deg) scale("+i+")","-webkit-transform-origin":"center",width:e+"px",height:t+"px"}).append("svg").attrs({width:e,height:t})}function h(t,e,n,o){e.append(n).attrs(o).styles({"vector-effect":"non-scaling-stroke","stroke-width":t.lineWeight+"px",stroke:t.lineColor,"stroke-opacity":(100-t.lineTransparency)/100,fill:t.fillColor,"fill-opacity":!0===t.showFill?(100-t.shapeTransparency)/100:0})}function p(t,e,n){var o=t,i=e,r=Math.atan2(e,t),a=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),l=n/180*Math.PI;return e<=t?(n<90||!(n<180)&&n<270?l+=r:l-=r,i/Math.abs(Math.sin(l))/a):(n<90||!(n<180)&&n<270?l-=r:l+=r,o/Math.abs(Math.cos(l))/a)}function g(t,e,n){t=i(t,e),e=t.deltaX,t=t.deltaY,t=Math.atan(t/e),e=Math.PI-t;return Math.sin(e/2)*n/Math.sin(t/2)}function d(t,e,n){var t=i(t,e),e=t.deltaX,t=t.deltaY,e=2*Math.atan(e/t),t=Math.PI-e,o=Math.sin(t/2)*n,t=Math.cos(t/2)*n;return o/Math.tan(e/2)+t+5}function i(t,e){return{deltaX:.5*t-.05*t,deltaY:.42*e-.016*e}}e.createRectangle=function(t,e,n,o,i){var r=.01*n+t.lineWeight/2,a=.01*e+t.lineWeight/2,l=.98*n-t.lineWeight,s=.98*e-t.lineWeight,r={x:r,y:a,width:l,height:s,rx:t.roundEdge,ry:t.roundEdge};h(t,u(e,n,o,i,p(l,s,i)),"rect",r)},e.createOval=function(t,e,n,o,i){var r={cx:(n/2).toString(),cy:(e/2).toString(),rx:n/2.2-t.lineWeight,ry:e/2.2-t.lineWeight};h(t,u(e,n,o,i,p(n,e,i)),"ellipse",r)},e.createLine=function(t,e,n,o,i){var r,a,l,s,u,c=n-10-10,h=e-10-10;i<=45?(r=n/2+c*(u=i/90),l=n/2-c*u,s=e-(a=10)):i<=135?(r=n-10,a=10+h*(u=(i-45)/90),s=e-(l=10)-h*u):i<=225?(r=n-10-c*(u=(i-135)/90),a=e-10,l=10+c*u,s=10):i<=315?(a=e-(r=10)-h*(u=(i-225)/90),l=n-10,s=10+h*u):i<=360&&(r=10+c*(u=(i-315)/90),l=n-(a=10)-c*u,s=e-10),o.append("svg").attrs({width:n,height:e}).append("line").attrs({x1:r,y1:a,x2:l,y2:s}).styles({"vector-effect":"non-scaling-stroke","stroke-width":t.lineWeight+"px","stroke-opacity":(100-t.lineTransparency)/100,stroke:t.lineColor})},e.createUpArrow=function(t,e,n,o,i){var r=t.lineWeight,a=g(n,e,r),r=d(n,e,r),l=n-a,s=e-r;c(t,[{x:.05*l,y:.42*s},{x:.5*l,y:.016*s},{x:.95*l,y:.42*s},{x:.764*l,y:.42*s},{x:.764*l,y:.993*s},{x:.246*l,y:.993*s},{x:.246*l,y:.42*s}],o,e,n,i,{translateX:a/2,translateY:r/2})},e.createTriangle=function(t,e,n,o,i){var r=t.lineWeight,a=(3<r&&(r-=3),.15*(n-r)),l=.15*(e-r),s=.85*(n-r)<0?.85*n:.85*(n-r),u=(a+s)/2;c(t,[{x:a=a<10?10:a,y:e-10-r<0?e-10:e-10-r},{x:u,y:l=l<10?10:l},{x:s,y:e-10-r<0?e-10:e-r-10}],o,e,n,i,{translateX:r/2,translateY:r/2})},e.createArrowButton=function(t,e,n,o,i){(o=u(e,n,o,i,p(n,e,i))).attr("viewBox","5 5 26 26"),h(t,o,"path",{d:"M30,18.1c0,1.1-0.1,2.2-0.4,3.2s-0.7,2-1.2,2.9s-1.1,1.7-1.9,2.4S24.9,28,24,28.5s-1.8,0.9-2.9,1.2s-2.1,0.4-3.2,0.4 s-2.2-0.1-3.2-0.4s-2-0.7-2.9-1.2s-1.7-1.1-2.4-1.9s-1.4-1.5-1.9-2.4s-0.9-1.8-1.2-2.9S6,19.2,6,18.1s0.1-2.2,0.4-3.2 s0.7-2,1.2-2.9s1.1-1.7,1.9-2.4s1.5-1.4,2.4-1.9s1.8-0.9,2.9-1.2s2.1-0.4,3.2-0.4c1.1,0,2.2,0.1,3.2,0.4s2,0.7,2.9,1.2 s1.7,1.1,2.4,1.9s1.4,1.5,1.9,2.4s0.9,1.8,1.2,2.9S30,17,30,18.1z M7.5,18.1c0,1,0.1,1.9,0.4,2.8s0.6,1.7,1.1,2.5s1,1.5,1.6,2.1 s1.3,1.2,2.1,1.6s1.6,0.8,2.5,1.1s1.8,0.4,2.8,0.4c1,0,1.9-0.1,2.8-0.4s1.7-0.6,2.5-1.1s1.5-1,2.1-1.6s1.2-1.3,1.6-2.1 s0.8-1.6,1.1-2.5s0.4-1.8,0.4-2.8s-0.1-1.9-0.4-2.8s-0.6-1.7-1.1-2.5s-1-1.5-1.6-2.1S24,9.5,23.3,9S21.6,8.2,20.8,8 S18.9,7.6,18,7.6S16.1,7.7,15.2,8S13.5,8.6,12.7,9s-1.5,1-2.1,1.6S9.4,12,8.9,12.8s-0.8,1.6-1.1,2.5S7.5,17.1,7.5,18.1z M19.2,24.3 l-1.1,1.1l-7.3-7.3l7.3-7.3l1.1,1.1l-5.5,5.5l11.7,0v1.5l-11.7,0L19.2,24.3z"})},e.getArrowMiterPaddingX=g,e.getArrowMiterPaddingY=d;e.setShapeAriaMetadata=function(e,t){var n,o=powerbi.visuals.basicShapeType.type.members().filter(function(t){return t.value===e});0<o.length&&(n=o[0].displayName),t.setAriaMetadata({subtitleDisplayNameGetter:n})}}),define("BasicShapeVisual/actionButtonUtils",["require","exports","BasicShapeVisual/actionButton"],function(t,e,u){Object.defineProperty(e,"__esModule",{value:!0}),e.styleVisualLink=e.renderLegacyButton=void 0;var c=powerbi.visuals.ActionButtonType,l=jsCommon.BrowserUtils,n=jsCommon.Color,h=powerbi.visuals.FontProperties,s=powerbi.visuals.horizontalAlignment,p=powerbi.visuals.InteractivityUtils,g=powerbi.visuals.SVGUtil,d=powerbi.TextMeasurementService,f=powerbi.visuals.verticalAlignment,y='<svg viewBox="0 0 32 32"><line x1="30" y1="15" x2="2" y2="15"></line><polyline points="15,2 2,15 15,30"></polyline></svg>',v='<svg viewBox="0 0 32 32"><line x1="2" y1="15" x2="30" y2="15"></line><polyline points="17,2 30,15 17,30"></polyline></svg>',b='<svg viewBox="0 0 24 22.75"><polygon points="22.5 15.5 10.5 15.5 5.5 20.55 5.43 15.5 1.5 15.5 1.5 1.5 22.5 1.5 22.5 15.5"></polygon></svg>',m='<svg viewBox="0 0 32 32"><circle cx="16" cy="16" r="13.5"></circle><path d="M12.12,13.72a3.75,3.75,0,0,1,3.63-3.78,3.63,3.63,0,0,1,3.64,3.63c0,1.48-.5,1.93-2.35,3.63A4.48,4.48,0,0,0,15.8,19a3.45,3.45,0,0,0-.11.4A8.59,8.59,0,0,0,15.5,21"></path><rect x="15.51" y="23.54" width="0.01" height="0.01"></rect></svg>',w='<svg viewBox="0 0 23.5 32"><path d="M11.76,29.5c-1.95,0-4-.65-4-1.95v-5s0-1.09,0-1.45c-.08-1-1.52-2.48-2.59-3.89a12,12,0,0,1-1.62-2.6,9.45,9.45,0,0,1-.62-3.63c0-4.66,4.23-8.44,8.89-8.44s8.89,3.78,8.89,8.44a9.41,9.41,0,0,1-.58,3.55,12.34,12.34,0,0,1-1.67,2.68c-1.06,1.4-2.47,2.86-2.55,3.89,0,.36-.07,1.45-.07,1.45v5C15.78,28.85,13.71,29.5,11.76,29.5Z"></path><line x1="7.75" y1="23.92" x2="15.8" y2="23.92"></line></svg>',S='<svg viewBox="0 0 32 32"><circle cx="16" cy="16" r="13.5"></circle><line x1="25" y1="16" x2="8" y2="16"></line><polyline points="16,8 8,16 16,24"></polyline></svg>',C='<svg viewBox="0 0 22.59 32"><polygon points="20.04 29.25 11.21 25.43 2.37 29.25 2.37 2.5 20.04 2.5 20.04 29.25"></polygon></svg>',B='<svg viewBox="0 0 32 32"><circle cx="16" cy="16" r="13.5"></circle><rect x="16" y="10.24" width="0.01" height="0.01"></rect><line x1="16" y1="13.1" x2="16" y2="22.9"></line></svg>',x='<svg viewBox="0 0 28.3 32"><line x1="17.2" y1="9.9" x2="2.5" y2="9.9"></line><polyline points="10.2,2.3 2.5,9.9 10.2,17.5"></polyline><g><defs><rect id="SVGID_1_" x="16.1" y="0" width="18" height="32"></rect></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible;"></use></clipPath><path d="M13.1,9.9h4c4.8,0,8.7,3.8,8.7,9.4s-3.7,9.9-8.3,10.2h-2.4"></path></g></svg>',T='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M12.002 19.0039H0.996094V0.996094H19.0039V9.00391H17.998V5H2.00195V17.998H12.002V19.0039ZM2.00195 4.00391H17.998V2.00195H2.00195V4.00391Z" fill="#424242"/> <path d="M7.99805 7.00195V10.9961H4.00391V7.00195H7.99805ZM7.00195 7.99805H5V10H7.00195V7.99805ZM7.99805 12.002V15.9961H4.00391V12.002H7.99805ZM7.00195 12.998H5V15H7.00195V12.998Z" fill="#424242"/> <path d="M20 10V12.5L17.002 15V20H12.998V15L10 12.5V10H20ZM19.0039 10.9961H10.9961V12.0312L14.0039 14.5312V19.0039H15.9961V14.5312L19.0039 12.0312V10.9961Z" /></svg>',A='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M1.44531 12.5781L5.05859 9.0625L10.9863 14.7363L7.30469 18.3789L1.44531 12.5781Z" fill="#999999"/> <path d="M19.0723 7.25586L7.24609 19.0039L0.800781 12.6758L12.8125 0.664062L19.0723 7.25586ZM12.8125 1.8457L5.5957 9.07227L10.9375 14.1895L17.8906 7.25586L12.8125 1.8457ZM10.3516 14.7754L5 9.6582L1.98242 12.6758L7.23633 17.8809L10.3516 14.7754Z" fill="#424242"/></svg>';function P(t,e){e=e.getVisualLinkProperties();t&&e&&t.style("cursor",e.hasVisualLink?"pointer":"inherit")}function V(t,e,n,o,i){o.styles({width:n.width+"px",height:n.height+"px",overflow:"hidden",position:"relative",display:"block","background-color":t.fill[e].show?M(t.fill[e].fillColor,t.fill[e].fillTransparency):"transparent","border-radius":t.outline[e].roundEdge?t.outline[e].roundEdge+"px":null});var r,a,l,s,i=i.children("button");powerbi.visuals.visualBackgroundHelper.renderBackgroundImage({image:t.fill[e].show?t.fill[e].image:void 0,transparency:t.fill[e].fillTransparency},i,{left:0,top:0,width:n.width,height:n.height}),i.children(".background-image").css({left:0,top:0,"pointer-events":"none"}),i=t.outline[e],r=n,a=i.show?i.outlineWeight:0,o.select(u.ButtonOutlineSelector.selector).styles({"pointer-events":"none",top:0,left:0,position:"absolute",width:Math.max(r.width-2*a,0)+"px",height:Math.max(r.height-2*a,0)+"px",border:i.show?function(t,e,n){return"".concat(t,"px solid ").concat(M(e,n))}(i.outlineWeight,i.outlineColor,i.outlineTransparency):"none","border-radius":i.roundEdge?i.roundEdge+"px":null}),r=t.text[e],a=n,i=o,l=Math.max(a.width-2*r.padding,0),(i=i.select(u.ButtonTextSelector.selector)).text(r.show?r.text:void 0).styles({"text-align":r.horizontalAlignment,"max-width":l+"px","pointer-events":"none"}).styles(h.toHTMLStyle(r.fontProperties)),s=d.measureSvgTextRect(h.toTextProperties(r.fontProperties,r.text)),l=s.width>l?l:s.width,D(i,r,a,l,s.height),i=t.icon[e],r=n,a=o,l=function(t){switch(t){case c.leftArrow:return y;case c.rightArrow:return v;case c.back:return S;case c.reset:return x;case c.information:return B;case c.help:return m;case c.qna:return b;case c.insights:return w;case c.bookmarks:return C;case c.blank:case c.custom:return;case c.applyAllSlicers:return T;case c.clearAllSlicers:return A}}(i.shapeType),a=a.select(u.ButtonIconSelector.selector),s=Math.max(Math.min(r.width,r.height)-2*i.padding,0),l=i.show&&l?l:null,a.html(l),l&&(l=a.select("svg").attrs({width:s,height:s}).styles({fill:"none","pointer-events":"none"}),a=g.scaleStroke(l.attr("viewBox"),s,i.lineWeight),l.selectAll("*").styles({"vector-effect":"non-scaling-stroke","stroke-width":a+"px",stroke:i.lineColor,"stroke-opacity":(100-i.lineTransparency)/100}),D(l,i,r,s,s))}function D(t,e,n,o,i){t.style("position","absolute");var r=n.width/2,a=e.padding+o/2,l=e.horizontalAlignment;switch(l=r<a?s.center:l){case s.left:t.styles({left:e.padding+"px",right:null});break;case s.right:t.styles({right:e.padding+"px",left:null});break;case s.center:t.styles({left:n.width/2-o/2+"px",right:null})}r=n.height/2,a=e.padding+i/2,l=e.verticalAlignment;switch(l=r<a?f.middle:l){case f.top:t.styles({top:e.padding+"px",bottom:null});break;case f.bottom:t.styles({bottom:e.padding+"px",top:null});break;case f.middle:t.styles({top:n.height/2-i/2+"px",bottom:null})}}function M(t,e){t=n.parseColorString(t);return n.rgbString(n.setOpacity(t,(100-e)/100))}e.renderLegacyButton=function(n,o,i,r,a){return __awaiter(this,void 0,powerbi.Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,r.isVisualEnabled()];case 1:return e=t.sent(),i.on("click",function(){var t={type:0,visualObjects:[{objectName:"button",selectorsByColumn:{}}],isCtrlOrMetaKey:l.isCtrlOrMeta(d3.event),position:p.getPositionOfLastInputEvent()};r.onSelecting(t),1===t.action&&d3.event.stopPropagation()}),e?(i.on("pointerover",function(){V(n,"hover",o,i,a)}).on("pointerdown",function(){V(n,"selected",o,i,a)}).on("pointerup",function(){V(n,"hover",o,i,a)}).on("pointerleave",function(){V(n,"default",o,i,a)}),V(n,"default",o,i,a)):(i.on("pointerover",null).on("pointerdown",null).on("pointerup",null).on("pointerleave",null),V(n,"disabled",o,i,a)),P(i,r),[2]}})})},e.styleVisualLink=P}),function(t){(t=(t=t.powerbi||(t.powerbi={})).visuals||(t.visuals={})).importActionButtonShapeModule=function(){},t.importBasicShapeModule=function(){}}(es6=es6||{}),function(t){var e;(e=t.visuals||(t.visuals={})).initializeBasicShapesFactoryES6=function(){e.setCreateActionButton(function(){return es6.powerbi.visuals.importActionButtonShapeModule().then(function(t){return new t.ActionButton})}),e.setCreateBasicShape(function(){return es6.powerbi.visuals.importBasicShapeModule().then(function(t){return new t.BasicShape})})}}(powerbi=powerbi||{});
this.parseTimeMarkers = this.parseTimeMarkers || {};
var marker = this.parseTimeMarkers['basicShapeVisual.min.js'] || (this.parseTimeMarkers['basicShapeVisual.min.js'] = {});
marker.endEval = window.jsCommon && window.jsCommon.performance && window.jsCommon.performance.now ? window.jsCommon.performance.now() : Date.now(); marker.isExternal = false;
